const _0x5b1b81=_0x1269;(function(_0x292871,_0x838deb){const _0x5d00ce=_0x1269,_0x21dea7=_0x292871();while(!![]){try{const _0x419a39=-parseInt(_0x5d00ce(0x1ad))/0x1*(parseInt(_0x5d00ce(0x1ca))/0x2)+parseInt(_0x5d00ce(0x1d4))/0x3+parseInt(_0x5d00ce(0x1c3))/0x4+parseInt(_0x5d00ce(0x1e1))/0x5*(parseInt(_0x5d00ce(0x1af))/0x6)+-parseInt(_0x5d00ce(0x1cd))/0x7+parseInt(_0x5d00ce(0x1d1))/0x8+parseInt(_0x5d00ce(0x1e0))/0x9;if(_0x419a39===_0x838deb)break;else _0x21dea7['push'](_0x21dea7['shift']());}catch(_0x14b270){_0x21dea7['push'](_0x21dea7['shift']());}}}(_0x3f7b,0x8d3d4));const _0x5e521c=(function(){let _0x15fc43=!![];return function(_0x436203,_0x2319e1){const _0x164560=_0x15fc43?function(){const _0x463131=_0x1269;if(_0x2319e1){const _0x2e1377=_0x2319e1[_0x463131(0x1e3)](_0x436203,arguments);return _0x2319e1=null,_0x2e1377;}}:function(){};return _0x15fc43=![],_0x164560;};}()),_0x2f4f40=_0x5e521c(this,function(){const _0x4609f0=_0x1269,_0x1e66c5=function(){const _0x308150=_0x1269;let _0x1c3571;try{_0x1c3571=Function(_0x308150(0x1b6)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1bf0a3){_0x1c3571=window;}return _0x1c3571;},_0x6a5fd0=_0x1e66c5(),_0x55dce6=new RegExp('[WxQBHKjFfWKIWmXKzjYTVmABjPqYRRPTLjkCQXLHxXWWHSzJVfkPxvWAmJxJMDDzBQ]','g'),_0x52caab='WxQBHKjsaaFntofWnanKdrIeWmX.gKitzhjub.YiTo;loVcalmhAosBjtPqYRRPTLjkCQXLHxXWWHSzJVfkPxvWAmJxJMDDzBQ'[_0x4609f0(0x1cc)](_0x55dce6,'')['split'](';');let _0x2b378d,_0x16c7a2,_0x1b3d12,_0xb3070a;const _0x1401f5=function(_0x485872,_0x4897ef,_0x2de634){const _0x10f355=_0x4609f0;if(_0x485872[_0x10f355(0x1e7)]!=_0x4897ef)return![];for(let _0x557c66=0x0;_0x557c66<_0x4897ef;_0x557c66++){for(let _0xaeccbd=0x0;_0xaeccbd<_0x2de634[_0x10f355(0x1e7)];_0xaeccbd+=0x2){if(_0x557c66==_0x2de634[_0xaeccbd]&&_0x485872['charCodeAt'](_0x557c66)!=_0x2de634[_0xaeccbd+0x1])return![];}}return!![];},_0x45e331=function(_0x134b9e,_0xed0e47,_0x14de6a){return _0x1401f5(_0xed0e47,_0x14de6a,_0x134b9e);},_0x37ad6d=function(_0x5b6fae,_0x346f63,_0x41771a){return _0x45e331(_0x346f63,_0x5b6fae,_0x41771a);},_0x50595f=function(_0x319004,_0x53b038,_0x38250a){return _0x37ad6d(_0x53b038,_0x38250a,_0x319004);};for(let _0xe3d84e in _0x6a5fd0){if(_0x1401f5(_0xe3d84e,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x2b378d=_0xe3d84e;break;}}for(let _0x68e9e0 in _0x6a5fd0[_0x2b378d]){if(_0x50595f(0x6,_0x68e9e0,[0x5,0x6e,0x0,0x64])){_0x16c7a2=_0x68e9e0;break;}}for(let _0x571cf4 in _0x6a5fd0[_0x2b378d]){if(_0x37ad6d(_0x571cf4,[0x7,0x6e,0x0,0x6c],0x8)){_0x1b3d12=_0x571cf4;break;}}if(!('~'>_0x16c7a2))for(let _0x1c3b0a in _0x6a5fd0[_0x2b378d][_0x1b3d12]){if(_0x45e331([0x7,0x65,0x0,0x68],_0x1c3b0a,0x8)){_0xb3070a=_0x1c3b0a;break;}}if(!_0x2b378d||!_0x6a5fd0[_0x2b378d])return;const _0xb57ae5=_0x6a5fd0[_0x2b378d][_0x16c7a2],_0x516219=!!_0x6a5fd0[_0x2b378d][_0x1b3d12]&&_0x6a5fd0[_0x2b378d][_0x1b3d12][_0xb3070a],_0x39345e=_0xb57ae5||_0x516219;if(!_0x39345e)return;let _0x4c8b41=![];for(let _0x484cfd=0x0;_0x484cfd<_0x52caab[_0x4609f0(0x1e7)];_0x484cfd++){const _0x219e9a=_0x52caab[_0x484cfd],_0x2e487a=_0x219e9a[0x0]===String['fromCharCode'](0x2e)?_0x219e9a['slice'](0x1):_0x219e9a,_0x908f3f=_0x39345e[_0x4609f0(0x1e7)]-_0x2e487a[_0x4609f0(0x1e7)],_0xce7753=_0x39345e[_0x4609f0(0x1cb)](_0x2e487a,_0x908f3f),_0x53df57=_0xce7753!==-0x1&&_0xce7753===_0x908f3f;_0x53df57&&((_0x39345e[_0x4609f0(0x1e7)]==_0x219e9a[_0x4609f0(0x1e7)]||_0x219e9a[_0x4609f0(0x1cb)]('.')===0x0)&&(_0x4c8b41=!![]));}if(!_0x4c8b41){const _0xfc9ca=new RegExp(_0x4609f0(0x1b5),'g'),_0x4ac33c='UfTaRZboHQutmYYId:blankycOYXRGmMYQKU'[_0x4609f0(0x1cc)](_0xfc9ca,'');_0x6a5fd0[_0x2b378d][_0x1b3d12]=_0x4ac33c;}});_0x2f4f40();function _0x1269(_0x3647b0,_0x264937){const _0x293c4d=_0x3f7b();return _0x1269=function(_0x2f4f40,_0x5e521c){_0x2f4f40=_0x2f4f40-0x1ad;let _0x58715c=_0x293c4d[_0x2f4f40];return _0x58715c;},_0x1269(_0x3647b0,_0x264937);}function _0x3f7b(){const _0x172c7b=['indexOf','replace','8044372NvXxWS','getJointedChunks','jointID','availableNeighbors','5735384bRsUCR','joints','shapeJoints','1537836wiictB','Brown','width','Iterations:\x20','assignJoints','type','log','link','assignTypes','distance','Lavender','joint','3121416ChoNNe','580ERhSNX','sort','apply','height','jointedChunks','black','length','3rsMPmD','roomsPool','44028mzZUVA','push','Khaki','fillStyle','Out\x20of\x20space\x20exit','splice','[UfTRZHQmYYIdycOYXRGmMYQKU]','return\x20(function()\x20','clear','fillRect','RoyalBlue','generate','find','assignJointsID','createRoom','roomsMap','propagateJointID','warn','render','links','644280YAJmIv','spacedRooms','initialize','filter','random','Too\x20many\x20attemps\x20to\x20reach\x20desired\x20amount\x20of\x20rooms\x20count\x20\x0a\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20inhabited\x20rooms:\x20','populate','573950RUOKJM'];_0x3f7b=function(){return _0x172c7b;};return _0x3f7b();}import{Room,RoomsMap,resetRoomID}from'./components/room.js';export class MapGenerator{constructor(){const _0x238cfd=_0x1269;this['w']=0x0,this['h']=0x0,this['roomsMap']=new RoomsMap(),this['roomsPool']=[],this['spacedRooms']=[],this[_0x238cfd(0x1e5)]=[];}[_0x5b1b81(0x1ba)]=(_0x26c04c=0xb,_0x5b3e44=0xb,_0x1d3270=0x10,_0x1a75a5=!![],_0x1e5534=![])=>{const _0x55fdc3=_0x5b1b81;resetRoomID(),this[_0x55fdc3(0x1c5)](_0x26c04c,_0x5b3e44),this[_0x55fdc3(0x1c9)](_0x1d3270),this[_0x55fdc3(0x1dc)]();if(_0x1a75a5)return this[_0x55fdc3(0x1d8)](_0x1e5534),this[_0x55fdc3(0x1e5)];};[_0x5b1b81(0x1c5)]=(_0x44cc17,_0x1d9c1f)=>{const _0x2b7f89=_0x5b1b81;this['roomsMap'][_0x2b7f89(0x1e7)]=0x0,this[_0x2b7f89(0x1ae)][_0x2b7f89(0x1e7)]=0x0,this[_0x2b7f89(0x1c4)][_0x2b7f89(0x1e7)]=0x0,this[_0x2b7f89(0x1e5)][_0x2b7f89(0x1e7)]=0x0,this['w']=_0x44cc17,this['h']=_0x1d9c1f;for(let _0x54360b=0x0;_0x54360b<this['w'];_0x54360b++){this[_0x2b7f89(0x1be)][_0x2b7f89(0x1b0)]([]);for(let _0x348c08=0x0;_0x348c08<this['h'];_0x348c08++){this[_0x2b7f89(0x1be)][_0x54360b][_0x2b7f89(0x1b0)](0x0);}}};[_0x5b1b81(0x1bd)]=(_0x4d5fb7,_0x4b2bb6,_0x29e0c3=0x0)=>{const _0x249768=_0x5b1b81;let _0x23966a=new Room(_0x4d5fb7,_0x4b2bb6,_0x29e0c3);return this[_0x249768(0x1be)][_0x4d5fb7][_0x249768(0x1b4)](_0x4b2bb6,0x1,_0x23966a),this['roomsPool'][_0x249768(0x1b0)](_0x23966a),this['spacedRooms']['push'](_0x23966a),_0x23966a;};[_0x5b1b81(0x1c9)]=_0x473a26=>{const _0x3240bf=_0x5b1b81;let _0x38fc54=this['w']/0x2|0x0,_0x58d29f=this['h']/0x2|0x0;this[_0x3240bf(0x1bd)](_0x38fc54,_0x58d29f);let _0x5650fb=0x0;while(this[_0x3240bf(0x1ae)][_0x3240bf(0x1e7)]<_0x473a26){if(this[_0x3240bf(0x1c4)]['length']===0x0){console[_0x3240bf(0x1c0)](_0x3240bf(0x1b3));break;}let _0x263298=Math[_0x3240bf(0x1c7)]()*this[_0x3240bf(0x1c4)][_0x3240bf(0x1e7)]|0x0,_0x14bd1f=this['spacedRooms'][_0x263298],_0x3e19de=this[_0x3240bf(0x1be)][_0x3240bf(0x1d0)](_0x14bd1f);if(_0x3e19de['length']===0x0){this['spacedRooms'][_0x3240bf(0x1b4)](_0x263298,0x1),_0x5650fb++;continue;}let _0x29be7a=_0x3e19de[Math[_0x3240bf(0x1c7)]()*_0x3e19de[_0x3240bf(0x1e7)]|0x0];this[_0x3240bf(0x1bd)](_0x29be7a['x'],_0x29be7a['y'])[_0x3240bf(0x1db)](_0x14bd1f),_0x5650fb++;if(_0x5650fb>_0x473a26*0x3){console[_0x3240bf(0x1c0)](_0x3240bf(0x1c8)+this[_0x3240bf(0x1ae)][_0x3240bf(0x1e7)]);break;}}console[_0x3240bf(0x1da)](_0x3240bf(0x1d7)+_0x5650fb);};[_0x5b1b81(0x1dc)]=()=>{const _0x3194e9=_0x5b1b81;let _0x10989f=this[_0x3194e9(0x1ae)][Math[_0x3194e9(0x1c7)]()*this[_0x3194e9(0x1ae)][_0x3194e9(0x1e7)]|0x0];_0x10989f[_0x3194e9(0x1d9)]=0x1;let _0x3b65d2=_0x10989f,_0x2cf46b=0x0;for(let _0x595281 of this['roomsPool']){let _0x2e1a0a=_0x595281[_0x3194e9(0x1dd)](_0x10989f);_0x2e1a0a>_0x2cf46b&&(_0x2cf46b=_0x2e1a0a,_0x3b65d2=_0x595281);}_0x3b65d2[_0x3194e9(0x1d9)]=0x3;let _0x5f08d4=_0x10989f;_0x2cf46b=0x0;for(let _0x54b515 of this[_0x3194e9(0x1ae)]){let _0x374c4e=_0x54b515[_0x3194e9(0x1dd)](_0x10989f)+_0x54b515['distance'](_0x3b65d2);_0x374c4e>_0x2cf46b&&(_0x2cf46b=_0x374c4e,_0x5f08d4=_0x54b515);}_0x5f08d4[_0x3194e9(0x1d9)]=0x2;};[_0x5b1b81(0x1d8)]=(_0x107c8=![])=>{const _0x3ec848=_0x5b1b81;for(let _0x2f055a of this[_0x3ec848(0x1ae)]){if(_0x2f055a[_0x3ec848(0x1d9)]!==0x0||_0x2f055a[_0x3ec848(0x1d2)][_0x3ec848(0x1e7)]>0x0)continue;for(let _0x4f10be of _0x2f055a[_0x3ec848(0x1c2)]){let _0x86c1ec=this[_0x3ec848(0x1be)][_0x4f10be['x']][_0x4f10be['y']];if(_0x86c1ec['type']===0x0&&_0x86c1ec[_0x3ec848(0x1d2)]['length']===0x0){_0x2f055a['joint'](_0x86c1ec);break;}}}this[_0x3ec848(0x1d3)](),this[_0x3ec848(0x1bc)](),this[_0x3ec848(0x1e5)]=this[_0x3ec848(0x1ce)](![]),_0x107c8&&this['jointRoomsU']();};[_0x5b1b81(0x1bc)](){const _0x1bdd77=_0x5b1b81;for(let _0xcda9cf of this[_0x1bdd77(0x1ae)]){for(let _0x2eca40 of _0xcda9cf[_0x1bdd77(0x1d2)]){let _0x5db704=this['roomsMap'][_0x2eca40['x']][_0x2eca40['y']];this[_0x1bdd77(0x1bf)](_0xcda9cf,_0x5db704);}}}[_0x5b1b81(0x1bf)](_0x3cdf51,_0x1d08cd){const _0x381ff8=_0x5b1b81;if(_0x1d08cd['jointID']===_0x3cdf51[_0x381ff8(0x1cf)])return;_0x1d08cd[_0x381ff8(0x1cf)]=_0x3cdf51[_0x381ff8(0x1cf)];for(let _0x412d81 of _0x1d08cd[_0x381ff8(0x1d2)]){let _0x1a1775=this[_0x381ff8(0x1be)][_0x412d81['x']][_0x412d81['y']];this[_0x381ff8(0x1bf)](_0x1d08cd,_0x1a1775);}}['getJointedChunks'](_0x649b37=!![]){const _0x39a468=_0x5b1b81;let _0x1564f8=[],_0x4ab12d=[];for(let _0x370838 of this[_0x39a468(0x1ae)]){if(_0x649b37&&_0x370838[_0x39a468(0x1d2)][_0x39a468(0x1e7)]===0x0)continue;if(_0x1564f8['find'](_0x5c4930=>_0x5c4930===_0x370838['jointID'])!==undefined)continue;_0x1564f8['push'](_0x370838[_0x39a468(0x1cf)]),_0x4ab12d['push'](this[_0x39a468(0x1ae)][_0x39a468(0x1c6)](_0x65dcb3=>_0x65dcb3['jointID']==_0x370838['jointID']));}return _0x4ab12d;}['jointRoomsU'](){const _0x2299dc=_0x5b1b81;for(let _0x306293 of this[_0x2299dc(0x1e5)]){if(_0x306293[_0x2299dc(0x1e7)]!==0x4)continue;let _0x7fc00a=_0x306293[_0x2299dc(0x1bb)](_0x1bb283=>_0x1bb283[_0x2299dc(0x1d2)]['length']==0x1),_0x16abeb=_0x306293[_0x2299dc(0x1bb)](_0x3ef803=>_0x3ef803[_0x2299dc(0x1d2)][_0x2299dc(0x1e7)]==0x1&&_0x3ef803!==_0x7fc00a);if(!_0x7fc00a||!_0x16abeb)continue;_0x7fc00a['distance'](_0x16abeb)==0x1&&(_0x7fc00a[_0x2299dc(0x1df)](_0x16abeb),_0x7fc00a[_0x2299dc(0x1df)](_0x306293[_0x2299dc(0x1bb)](_0x2a9cf4=>_0x2a9cf4[_0x2299dc(0x1dd)](_0x7fc00a)>0x1)));}}[_0x5b1b81(0x1d3)]=(_0x58d899=!![])=>{const _0x31f0cd=_0x5b1b81;for(let _0xf7cdb8 of this[_0x31f0cd(0x1ae)]){if(_0xf7cdb8[_0x31f0cd(0x1d9)]!==0x0||_0xf7cdb8[_0x31f0cd(0x1d2)][_0x31f0cd(0x1e7)]>0x0)continue;if(_0x58d899&&Math[_0x31f0cd(0x1c7)]()*0x2|0x0)continue;_0xf7cdb8[_0x31f0cd(0x1c2)][_0x31f0cd(0x1e2)](()=>Math[_0x31f0cd(0x1c7)]()-0.5);for(let _0x4a97de of _0xf7cdb8[_0x31f0cd(0x1c2)]){let _0x2266ee=this['roomsMap'][_0x4a97de['x']][_0x4a97de['y']];if(_0x2266ee['type']===0x0&&_0x2266ee[_0x31f0cd(0x1d2)]['length']===0x1){_0xf7cdb8[_0x31f0cd(0x1df)](_0x2266ee);break;}}}};[_0x5b1b81(0x1c1)]=(_0x4becf3,_0x547896,_0x6de86e=0x14)=>{const _0x2212a4=_0x5b1b81;_0x4becf3[_0x2212a4(0x1d6)]=_0x6de86e*this['w'],_0x4becf3['height']=_0x6de86e*this['h'],_0x547896[_0x2212a4(0x1b7)](),_0x547896['fillStyle']=_0x2212a4(0x1e6),_0x547896['fillRect'](0x0,0x0,_0x4becf3[_0x2212a4(0x1d6)],_0x4becf3[_0x2212a4(0x1e4)]);for(let _0x454c16 of this[_0x2212a4(0x1ae)]){let _0x1a4c58=[_0x2212a4(0x1de),_0x2212a4(0x1b9),_0x2212a4(0x1b1),_0x2212a4(0x1d5)];_0x547896[_0x2212a4(0x1b2)]=_0x1a4c58[_0x454c16['type']],_0x547896[_0x2212a4(0x1b8)](_0x454c16['x']*_0x6de86e+_0x6de86e/0xa,_0x454c16['y']*_0x6de86e+_0x6de86e/0xa,_0x6de86e-_0x6de86e/0x5,_0x6de86e-_0x6de86e/0x5);for(let _0x40453b of _0x454c16[_0x2212a4(0x1c2)]){let _0x1d2d4c=this[_0x2212a4(0x1be)][_0x40453b['x']][_0x40453b['y']];_0x547896[_0x2212a4(0x1b2)]=_0x1a4c58[0x0],_0x547896['fillRect']((_0x454c16['x']+_0x1d2d4c['x'])/0x2*_0x6de86e+_0x6de86e/0x2-_0x6de86e/0xa,(_0x454c16['y']+_0x1d2d4c['y'])/0x2*_0x6de86e+_0x6de86e/0x2-_0x6de86e/0xa,_0x6de86e/0x5,_0x6de86e/0x5);}for(let _0xd0b334 of _0x454c16[_0x2212a4(0x1d2)]){let _0x3c4710=this[_0x2212a4(0x1be)][_0xd0b334['x']][_0xd0b334['y']];_0x547896[_0x2212a4(0x1b2)]=_0x1a4c58[0x0],_0x547896[_0x2212a4(0x1b8)]((_0x454c16['x']+_0x3c4710['x'])/0x2*_0x6de86e+_0x6de86e/0xa,(_0x454c16['y']+_0x3c4710['y'])/0x2*_0x6de86e+_0x6de86e/0xa,_0x6de86e-_0x6de86e/0x5,_0x6de86e-_0x6de86e/0x5);}}};}