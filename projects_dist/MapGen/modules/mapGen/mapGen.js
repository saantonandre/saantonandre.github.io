const _0x491815=_0x27ad;(function(_0x2c3712,_0x3676e9){const _0x5d4ef2=_0x27ad,_0x287385=_0x2c3712();while(!![]){try{const _0x3ff8e2=parseInt(_0x5d4ef2(0xff))/0x1+parseInt(_0x5d4ef2(0xe2))/0x2+parseInt(_0x5d4ef2(0xf9))/0x3+parseInt(_0x5d4ef2(0xce))/0x4*(-parseInt(_0x5d4ef2(0xe8))/0x5)+parseInt(_0x5d4ef2(0xf3))/0x6+parseInt(_0x5d4ef2(0xe0))/0x7*(-parseInt(_0x5d4ef2(0xea))/0x8)+parseInt(_0x5d4ef2(0xd6))/0x9*(-parseInt(_0x5d4ef2(0xfd))/0xa);if(_0x3ff8e2===_0x3676e9)break;else _0x287385['push'](_0x287385['shift']());}catch(_0x397cea){_0x287385['push'](_0x287385['shift']());}}}(_0xa5b6,0xd191d));const _0x1e6068=(function(){let _0x407063=!![];return function(_0x3a83e4,_0x4d7d4c){const _0x115be9=_0x407063?function(){const _0x5412fe=_0x27ad;if(_0x4d7d4c){const _0x1b07cf=_0x4d7d4c[_0x5412fe(0xe5)](_0x3a83e4,arguments);return _0x4d7d4c=null,_0x1b07cf;}}:function(){};return _0x407063=![],_0x115be9;};}()),_0x20f64e=_0x1e6068(this,function(){const _0x379bdf=_0x27ad,_0x2a4a89=function(){const _0x1bd4ea=_0x27ad;let _0x2f8f28;try{_0x2f8f28=Function(_0x1bd4ea(0xcb)+_0x1bd4ea(0xf5)+');')();}catch(_0x2be090){_0x2f8f28=window;}return _0x2f8f28;},_0x5824e4=_0x2a4a89(),_0x3f3b73=new RegExp(_0x379bdf(0xd2),'g'),_0x3d91c1=_0x379bdf(0xed)[_0x379bdf(0xc9)](_0x3f3b73,'')[_0x379bdf(0xfb)](';');let _0x2e9825,_0x5a53c9,_0x2a1767,_0x1a982a;const _0x44b027=function(_0xde7b27,_0x18264f,_0x17e0af){const _0x36dc7e=_0x379bdf;if(_0xde7b27[_0x36dc7e(0xd3)]!=_0x18264f)return![];for(let _0x2b51a3=0x0;_0x2b51a3<_0x18264f;_0x2b51a3++){for(let _0x5110f7=0x0;_0x5110f7<_0x17e0af[_0x36dc7e(0xd3)];_0x5110f7+=0x2){if(_0x2b51a3==_0x17e0af[_0x5110f7]&&_0xde7b27[_0x36dc7e(0xf6)](_0x2b51a3)!=_0x17e0af[_0x5110f7+0x1])return![];}}return!![];},_0x5eec51=function(_0x215be7,_0x4c68bf,_0x3c187b){return _0x44b027(_0x4c68bf,_0x3c187b,_0x215be7);},_0x5cdec5=function(_0x1fcb63,_0x1bb76c,_0x515bc3){return _0x5eec51(_0x1bb76c,_0x1fcb63,_0x515bc3);},_0x452020=function(_0x716a6d,_0x1df40a,_0x1fd958){return _0x5cdec5(_0x1df40a,_0x1fd958,_0x716a6d);};for(let _0x14e64f in _0x5824e4){if(_0x44b027(_0x14e64f,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x2e9825=_0x14e64f;break;}}for(let _0x363440 in _0x5824e4[_0x2e9825]){if(_0x452020(0x6,_0x363440,[0x5,0x6e,0x0,0x64])){_0x5a53c9=_0x363440;break;}}for(let _0x51148e in _0x5824e4[_0x2e9825]){if(_0x5cdec5(_0x51148e,[0x7,0x6e,0x0,0x6c],0x8)){_0x2a1767=_0x51148e;break;}}if(!('~'>_0x5a53c9))for(let _0x24d2d5 in _0x5824e4[_0x2e9825][_0x2a1767]){if(_0x5eec51([0x7,0x65,0x0,0x68],_0x24d2d5,0x8)){_0x1a982a=_0x24d2d5;break;}}if(!_0x2e9825||!_0x5824e4[_0x2e9825])return;const _0x1875b2=_0x5824e4[_0x2e9825][_0x5a53c9],_0x5d46f9=!!_0x5824e4[_0x2e9825][_0x2a1767]&&_0x5824e4[_0x2e9825][_0x2a1767][_0x1a982a],_0x3b0a00=_0x1875b2||_0x5d46f9;if(!_0x3b0a00)return;let _0xbc767d=![];for(let _0x14ecfa=0x0;_0x14ecfa<_0x3d91c1[_0x379bdf(0xd3)];_0x14ecfa++){const _0x3f8bda=_0x3d91c1[_0x14ecfa],_0xf48da3=_0x3f8bda[0x0]===String[_0x379bdf(0xdb)](0x2e)?_0x3f8bda[_0x379bdf(0xe4)](0x1):_0x3f8bda,_0x3181f1=_0x3b0a00[_0x379bdf(0xd3)]-_0xf48da3[_0x379bdf(0xd3)],_0xc5a3f8=_0x3b0a00['indexOf'](_0xf48da3,_0x3181f1),_0x3c7161=_0xc5a3f8!==-0x1&&_0xc5a3f8===_0x3181f1;_0x3c7161&&((_0x3b0a00['length']==_0x3f8bda[_0x379bdf(0xd3)]||_0x3f8bda[_0x379bdf(0xdf)]('.')===0x0)&&(_0xbc767d=!![]));}if(!_0xbc767d){const _0xdc050e=new RegExp(_0x379bdf(0xf7),'g'),_0x2391c4='iaboWEuUtm:UCblaHJnNkdssMrTOchpdVyAGBczjP'[_0x379bdf(0xc9)](_0xdc050e,'');_0x5824e4[_0x2e9825][_0x2a1767]=_0x2391c4;}});function _0x27ad(_0x2a213a,_0x21a642){const _0x2bc229=_0xa5b6();return _0x27ad=function(_0x20f64e,_0x1e6068){_0x20f64e=_0x20f64e-0xc4;let _0x24aebb=_0x2bc229[_0x20f64e];return _0x24aebb;},_0x27ad(_0x2a213a,_0x21a642);}function _0xa5b6(){const _0x57e355=['split','assignJoints','69340WTutMG','filter','328056hIWvtA','random','link','type','warn','links','roomsPool','assignJointsID','replace','height','return\x20(function()\x20','assignTypes','Brown','4gzgDMA','spacedRooms','jointID','jointedChunks','[CpSMMRzSxvAjMymIWLpYNABFzkNFJxCzOSXkORDCfFCCjFfLLJDQYzvKMHRZLYOyWX]','length','Lavender','fillRect','873yEwYci','jointRoomsU','Iterations:\x20','width','splice','fromCharCode','distance','fillStyle','RoyalBlue','indexOf','8638NYQxEJ','find','3224036DSpnKx','initialize','slice','apply','joint','generate','4306395BByaPu','availableNeighbors','7896TPNaRp','roomsMap','Out\x20of\x20space\x20exit','CpsSMMaanRzStxovnAjaMymIWLndrpYe.gNitABFhzkub.iNFo;JxCzlOocSaXklOhoRstDCfFCCjFfLLJDQYzvKMHRZLYOyWX','push','populate','joints','createRoom','log','8463264ZoBeHk','shapeJoints','{}.constructor(\x22return\x20this\x22)(\x20)','charCodeAt','[iWEUmUCHJNdssMrTOchpdVyAGBczjP]','propagateJointID','778842RxQyqu','black'];_0xa5b6=function(){return _0x57e355;};return _0xa5b6();}_0x20f64e();import{Room,RoomsMap,resetRoomID}from'./components/room.js';export class MapGenerator{constructor(){const _0x11d458=_0x27ad;this['w']=0x0,this['h']=0x0,this[_0x11d458(0xeb)]=new RoomsMap(),this[_0x11d458(0xc7)]=[],this['spacedRooms']=[],this[_0x11d458(0xd1)]=[];}[_0x491815(0xe7)]=(_0x2d21e5=0xb,_0x52ee1a=0xb,_0x42b432=0x10,_0x31f67b=!![],_0x5bb045=![])=>{const _0x5ddfee=_0x491815;resetRoomID(),this[_0x5ddfee(0xe3)](_0x2d21e5,_0x52ee1a),this['populate'](_0x42b432),this['assignTypes']();if(_0x31f67b)return this[_0x5ddfee(0xfc)](_0x5bb045),this[_0x5ddfee(0xd1)];};[_0x491815(0xe3)]=(_0x333a82,_0x326a81)=>{const _0x2e0793=_0x491815;this[_0x2e0793(0xeb)]['length']=0x0,this[_0x2e0793(0xc7)][_0x2e0793(0xd3)]=0x0,this[_0x2e0793(0xcf)][_0x2e0793(0xd3)]=0x0,this[_0x2e0793(0xd1)][_0x2e0793(0xd3)]=0x0,this['w']=_0x333a82,this['h']=_0x326a81;for(let _0x44579e=0x0;_0x44579e<this['w'];_0x44579e++){this[_0x2e0793(0xeb)]['push']([]);for(let _0x374908=0x0;_0x374908<this['h'];_0x374908++){this['roomsMap'][_0x44579e][_0x2e0793(0xee)](0x0);}}};[_0x491815(0xf1)]=(_0x3f04f8,_0x5e2ba3,_0x188f10=0x0)=>{const _0x30cbb2=_0x491815;let _0x48fbf3=new Room(_0x3f04f8,_0x5e2ba3,_0x188f10);return this[_0x30cbb2(0xeb)][_0x3f04f8][_0x30cbb2(0xda)](_0x5e2ba3,0x1,_0x48fbf3),this[_0x30cbb2(0xc7)][_0x30cbb2(0xee)](_0x48fbf3),this['spacedRooms']['push'](_0x48fbf3),_0x48fbf3;};[_0x491815(0xef)]=_0x4a258e=>{const _0x44c013=_0x491815;let _0x390e0d=this['w']/0x2|0x0,_0x23716c=this['h']/0x2|0x0;this[_0x44c013(0xf1)](_0x390e0d,_0x23716c);let _0x8f23f=0x0;while(this[_0x44c013(0xc7)]['length']<_0x4a258e){if(this['spacedRooms'][_0x44c013(0xd3)]===0x0){console['warn'](_0x44c013(0xec));break;}let _0x524f95=Math[_0x44c013(0x100)]()*this['spacedRooms']['length']|0x0,_0x210e90=this['spacedRooms'][_0x524f95],_0x5c7a49=this[_0x44c013(0xeb)][_0x44c013(0xe9)](_0x210e90);if(_0x5c7a49[_0x44c013(0xd3)]===0x0){this[_0x44c013(0xcf)]['splice'](_0x524f95,0x1),_0x8f23f++;continue;}let _0x1744b4=_0x5c7a49[Math['random']()*_0x5c7a49[_0x44c013(0xd3)]|0x0];this['createRoom'](_0x1744b4['x'],_0x1744b4['y'])[_0x44c013(0x101)](_0x210e90),_0x8f23f++;if(_0x8f23f>_0x4a258e*0x3){console[_0x44c013(0xc5)]('Too\x20many\x20attemps\x20to\x20reach\x20desired\x20amount\x20of\x20rooms\x20count\x20\x0a\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20inhabited\x20rooms:\x20'+this[_0x44c013(0xc7)][_0x44c013(0xd3)]);break;}}console[_0x44c013(0xf2)](_0x44c013(0xd8)+_0x8f23f);};[_0x491815(0xcc)]=()=>{const _0xe9466f=_0x491815;let _0x38244b=this[_0xe9466f(0xc7)][Math[_0xe9466f(0x100)]()*this['roomsPool'][_0xe9466f(0xd3)]|0x0];_0x38244b[_0xe9466f(0xc4)]=0x1;let _0x49991d=_0x38244b,_0x413eb8=0x0;for(let _0x3c6fd4 of this[_0xe9466f(0xc7)]){let _0x4e5f43=_0x3c6fd4[_0xe9466f(0xdc)](_0x38244b);_0x4e5f43>_0x413eb8&&(_0x413eb8=_0x4e5f43,_0x49991d=_0x3c6fd4);}_0x49991d[_0xe9466f(0xc4)]=0x3;let _0x262aaa=_0x38244b;_0x413eb8=0x0;for(let _0x4a6fa9 of this[_0xe9466f(0xc7)]){let _0x78d03e=_0x4a6fa9[_0xe9466f(0xdc)](_0x38244b)+_0x4a6fa9[_0xe9466f(0xdc)](_0x49991d);_0x78d03e>_0x413eb8&&(_0x413eb8=_0x78d03e,_0x262aaa=_0x4a6fa9);}_0x262aaa[_0xe9466f(0xc4)]=0x2;};[_0x491815(0xfc)]=(_0x50f31d=![])=>{const _0x4a08ff=_0x491815;for(let _0x53b2c9 of this[_0x4a08ff(0xc7)]){if(_0x53b2c9['type']!==0x0||_0x53b2c9[_0x4a08ff(0xf0)]['length']>0x0)continue;for(let _0x494847 of _0x53b2c9[_0x4a08ff(0xc6)]){let _0xf51d56=this[_0x4a08ff(0xeb)][_0x494847['x']][_0x494847['y']];if(_0xf51d56[_0x4a08ff(0xc4)]===0x0&&_0xf51d56[_0x4a08ff(0xf0)][_0x4a08ff(0xd3)]===0x0){_0x53b2c9[_0x4a08ff(0xe6)](_0xf51d56);break;}}}this[_0x4a08ff(0xf4)](),this['assignJointsID'](),this['jointedChunks']=this['getJointedChunks'](![]),_0x50f31d&&this[_0x4a08ff(0xd7)]();};[_0x491815(0xc8)](){const _0xadf44c=_0x491815;for(let _0x493f00 of this[_0xadf44c(0xc7)]){for(let _0x2c377a of _0x493f00['joints']){let _0x4ed18c=this['roomsMap'][_0x2c377a['x']][_0x2c377a['y']];this['propagateJointID'](_0x493f00,_0x4ed18c);}}}[_0x491815(0xf8)](_0x5800c9,_0x1e3595){const _0x54527c=_0x491815;if(_0x1e3595[_0x54527c(0xd0)]===_0x5800c9[_0x54527c(0xd0)])return;_0x1e3595['jointID']=_0x5800c9[_0x54527c(0xd0)];for(let _0x231bf0 of _0x1e3595['joints']){let _0x1d986a=this[_0x54527c(0xeb)][_0x231bf0['x']][_0x231bf0['y']];this[_0x54527c(0xf8)](_0x1e3595,_0x1d986a);}}['getJointedChunks'](_0x4bf666=!![]){const _0x90ada9=_0x491815;let _0x4ac05a=[],_0x320422=[];for(let _0x2c3479 of this['roomsPool']){if(_0x4bf666&&_0x2c3479[_0x90ada9(0xf0)]['length']===0x0)continue;if(_0x4ac05a[_0x90ada9(0xe1)](_0x160d0a=>_0x160d0a===_0x2c3479['jointID'])!==undefined)continue;_0x4ac05a['push'](_0x2c3479['jointID']),_0x320422[_0x90ada9(0xee)](this[_0x90ada9(0xc7)][_0x90ada9(0xfe)](_0x2a5587=>_0x2a5587['jointID']==_0x2c3479[_0x90ada9(0xd0)]));}return _0x320422;}[_0x491815(0xd7)](){const _0x2b306c=_0x491815;for(let _0x4b1f23 of this[_0x2b306c(0xd1)]){if(_0x4b1f23[_0x2b306c(0xd3)]!==0x4)continue;let _0x4b2707=_0x4b1f23[_0x2b306c(0xe1)](_0x8484e=>_0x8484e[_0x2b306c(0xf0)][_0x2b306c(0xd3)]==0x1),_0x4beb9e=_0x4b1f23['find'](_0x3beed6=>_0x3beed6[_0x2b306c(0xf0)]['length']==0x1&&_0x3beed6!==_0x4b2707);if(!_0x4b2707||!_0x4beb9e)continue;_0x4b2707[_0x2b306c(0xdc)](_0x4beb9e)==0x1&&(_0x4b2707['joint'](_0x4beb9e),_0x4b2707['joint'](_0x4b1f23[_0x2b306c(0xe1)](_0x2a18f2=>_0x2a18f2[_0x2b306c(0xdc)](_0x4b2707)>0x1)));}}[_0x491815(0xf4)]=(_0x5cbc47=!![])=>{const _0x275d24=_0x491815;for(let _0xb9a282 of this[_0x275d24(0xc7)]){if(_0xb9a282['type']!==0x0||_0xb9a282['joints'][_0x275d24(0xd3)]>0x0)continue;if(_0x5cbc47&&Math[_0x275d24(0x100)]()*0x2|0x0)continue;_0xb9a282['links']['sort'](()=>Math[_0x275d24(0x100)]()-0.5);for(let _0x156361 of _0xb9a282['links']){let _0x367b56=this[_0x275d24(0xeb)][_0x156361['x']][_0x156361['y']];if(_0x367b56[_0x275d24(0xc4)]===0x0&&_0x367b56[_0x275d24(0xf0)][_0x275d24(0xd3)]===0x1){_0xb9a282[_0x275d24(0xe6)](_0x367b56);break;}}}};['render']=(_0x3c7a41,_0x4a5745,_0x4d732a=0x14)=>{const _0x419b73=_0x491815;_0x3c7a41[_0x419b73(0xd9)]=_0x4d732a*this['w'],_0x3c7a41[_0x419b73(0xca)]=_0x4d732a*this['h'],_0x4a5745['clear'](),_0x4a5745['fillStyle']=_0x419b73(0xfa),_0x4a5745[_0x419b73(0xd5)](0x0,0x0,_0x3c7a41[_0x419b73(0xd9)],_0x3c7a41[_0x419b73(0xca)]);for(let _0x3372a1 of this[_0x419b73(0xc7)]){let _0x8620f4=[_0x419b73(0xd4),_0x419b73(0xde),'Khaki',_0x419b73(0xcd)];_0x4a5745[_0x419b73(0xdd)]=_0x8620f4[_0x3372a1['type']],_0x4a5745[_0x419b73(0xd5)](_0x3372a1['x']*_0x4d732a+_0x4d732a/0xa,_0x3372a1['y']*_0x4d732a+_0x4d732a/0xa,_0x4d732a-_0x4d732a/0x5,_0x4d732a-_0x4d732a/0x5);for(let _0x2a69a2 of _0x3372a1[_0x419b73(0xc6)]){let _0x5c7cdb=this[_0x419b73(0xeb)][_0x2a69a2['x']][_0x2a69a2['y']];_0x4a5745[_0x419b73(0xdd)]=_0x8620f4[0x0],_0x4a5745['fillRect']((_0x3372a1['x']+_0x5c7cdb['x'])/0x2*_0x4d732a+_0x4d732a/0x2-_0x4d732a/0xa,(_0x3372a1['y']+_0x5c7cdb['y'])/0x2*_0x4d732a+_0x4d732a/0x2-_0x4d732a/0xa,_0x4d732a/0x5,_0x4d732a/0x5);}for(let _0x507ddd of _0x3372a1[_0x419b73(0xf0)]){let _0x4e2d9f=this[_0x419b73(0xeb)][_0x507ddd['x']][_0x507ddd['y']];_0x4a5745['fillStyle']=_0x8620f4[0x0],_0x4a5745['fillRect']((_0x3372a1['x']+_0x4e2d9f['x'])/0x2*_0x4d732a+_0x4d732a/0xa,(_0x3372a1['y']+_0x4e2d9f['y'])/0x2*_0x4d732a+_0x4d732a/0xa,_0x4d732a-_0x4d732a/0x5,_0x4d732a-_0x4d732a/0x5);}}};}