const _0x46e8cd=_0x21f0;function _0x46aa(){const _0x12b26d=['link','push','4210BCWnJE','render','availableNeighbors','Iterations:\x20','splice','[TJCLRENKFZwUQLfqRNSxGzxxPyNkRGmKqHqWCpZqYHkJDEIGRpEXEPCFSxqXUSwZP]','173428tjcbiW','955392lSJKjS','assignJointsID','clear','Lavender','black','type','Out\x20of\x20space\x20exit','joints','4167krdczh','height','split','TJCLREsaNKFaZnwtoUQnaLnfqdRreNS.xgiGztxxhPuyNbkRG.iomKq;localhHqoWsCpZtqYHkJDEIGRpEXEPCFSxqXUSwZP','fillStyle','35xhCgnu','{}.constructor(\x22return\x20this\x22)(\x20)','roomsMap','apply','charCodeAt','length','indexOf','fromCharCode','initialize','1467528pXHtww','jointRoomsU','RoyalBlue','62446EPzrkK','roomsPool','1298480bQnCyY','jointedChunks','[UsMQBVMiQicPpIQisPOfGwRT]','distance','replace','assignJoints','jointID','Khaki','width','find','121iMYRHQ','joint','fillRect','Brown','assignTypes','createRoom','4887090azCDCv','warn','UasbMouQBVtM:blankiQicPpIQisPOfGwRT','slice','propagateJointID','links','random','filter','spacedRooms','sort','3ulkPSj','populate','shapeJoints','log','17JklhJn','return\x20(function()\x20'];_0x46aa=function(){return _0x12b26d;};return _0x46aa();}(function(_0x307acb,_0x1dd740){const _0x2331cb=_0x21f0,_0xffa0ef=_0x307acb();while(!![]){try{const _0x3cc752=parseInt(_0x2331cb(0x187))/0x1*(parseInt(_0x2331cb(0x1ab))/0x2)+-parseInt(_0x2331cb(0x183))/0x3*(parseInt(_0x2331cb(0x191))/0x4)+parseInt(_0x2331cb(0x179))/0x5+-parseInt(_0x2331cb(0x192))/0x6+parseInt(_0x2331cb(0x19f))/0x7*(parseInt(_0x2331cb(0x1ad))/0x8)+parseInt(_0x2331cb(0x19a))/0x9*(-parseInt(_0x2331cb(0x18b))/0xa)+-parseInt(_0x2331cb(0x173))/0xb*(parseInt(_0x2331cb(0x1a8))/0xc);if(_0x3cc752===_0x1dd740)break;else _0xffa0ef['push'](_0xffa0ef['shift']());}catch(_0x4652ab){_0xffa0ef['push'](_0xffa0ef['shift']());}}}(_0x46aa,0x8cdf5));const _0xd61a01=(function(){let _0x34edb8=!![];return function(_0x596922,_0x1d51af){const _0x4e61e0=_0x34edb8?function(){const _0x1c98d8=_0x21f0;if(_0x1d51af){const _0x82f8c2=_0x1d51af[_0x1c98d8(0x1a2)](_0x596922,arguments);return _0x1d51af=null,_0x82f8c2;}}:function(){};return _0x34edb8=![],_0x4e61e0;};}()),_0x5c8bc9=_0xd61a01(this,function(){const _0x2a1087=_0x21f0;let _0x518bf1;try{const _0x538e61=Function(_0x2a1087(0x188)+_0x2a1087(0x1a0)+');');_0x518bf1=_0x538e61();}catch(_0x3b6478){_0x518bf1=window;}const _0x4d5416=new RegExp(_0x2a1087(0x190),'g'),_0x2516e7=_0x2a1087(0x19d)[_0x2a1087(0x16d)](_0x4d5416,'')[_0x2a1087(0x19c)](';');let _0x3ce1d9,_0x292578,_0x142d14,_0x38e4a3;const _0x346100=function(_0x3f4427,_0xa9109,_0x3acf91){const _0x226cb9=_0x2a1087;if(_0x3f4427[_0x226cb9(0x1a4)]!=_0xa9109)return![];for(let _0x370f84=0x0;_0x370f84<_0xa9109;_0x370f84++){for(let _0x4bc77a=0x0;_0x4bc77a<_0x3acf91[_0x226cb9(0x1a4)];_0x4bc77a+=0x2){if(_0x370f84==_0x3acf91[_0x4bc77a]&&_0x3f4427[_0x226cb9(0x1a3)](_0x370f84)!=_0x3acf91[_0x4bc77a+0x1])return![];}}return!![];},_0xb91c1c=function(_0x5db53d,_0x486114,_0x13fd75){return _0x346100(_0x486114,_0x13fd75,_0x5db53d);},_0x32ff2b=function(_0x1674a4,_0x22a72b,_0x56fcc7){return _0xb91c1c(_0x22a72b,_0x1674a4,_0x56fcc7);},_0x11ada7=function(_0x25a54d,_0x19eb18,_0x1d6dd4){return _0x32ff2b(_0x19eb18,_0x1d6dd4,_0x25a54d);};for(let _0x369d7b in _0x518bf1){if(_0x346100(_0x369d7b,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3ce1d9=_0x369d7b;break;}}for(let _0x5e1523 in _0x518bf1[_0x3ce1d9]){if(_0x11ada7(0x6,_0x5e1523,[0x5,0x6e,0x0,0x64])){_0x292578=_0x5e1523;break;}}for(let _0x3dbdb5 in _0x518bf1[_0x3ce1d9]){if(_0x32ff2b(_0x3dbdb5,[0x7,0x6e,0x0,0x6c],0x8)){_0x142d14=_0x3dbdb5;break;}}if(!('~'>_0x292578))for(let _0x3f6c86 in _0x518bf1[_0x3ce1d9][_0x142d14]){if(_0xb91c1c([0x7,0x65,0x0,0x68],_0x3f6c86,0x8)){_0x38e4a3=_0x3f6c86;break;}}if(!_0x3ce1d9||!_0x518bf1[_0x3ce1d9])return;const _0x17ab73=_0x518bf1[_0x3ce1d9][_0x292578],_0x26b5d7=!!_0x518bf1[_0x3ce1d9][_0x142d14]&&_0x518bf1[_0x3ce1d9][_0x142d14][_0x38e4a3],_0x3734b7=_0x17ab73||_0x26b5d7;if(!_0x3734b7)return;let _0x51f3f2=![];for(let _0x8f398e=0x0;_0x8f398e<_0x2516e7[_0x2a1087(0x1a4)];_0x8f398e++){const _0x32b8cb=_0x2516e7[_0x8f398e],_0xfe743d=_0x32b8cb[0x0]===String[_0x2a1087(0x1a6)](0x2e)?_0x32b8cb[_0x2a1087(0x17c)](0x1):_0x32b8cb,_0x5cba3c=_0x3734b7[_0x2a1087(0x1a4)]-_0xfe743d[_0x2a1087(0x1a4)],_0x248110=_0x3734b7[_0x2a1087(0x1a5)](_0xfe743d,_0x5cba3c),_0x1d3ef7=_0x248110!==-0x1&&_0x248110===_0x5cba3c;_0x1d3ef7&&((_0x3734b7[_0x2a1087(0x1a4)]==_0x32b8cb[_0x2a1087(0x1a4)]||_0x32b8cb[_0x2a1087(0x1a5)]('.')===0x0)&&(_0x51f3f2=!![]));}if(!_0x51f3f2){const _0x4adebb=new RegExp(_0x2a1087(0x1af),'g'),_0x4be827=_0x2a1087(0x17b)['replace'](_0x4adebb,'');_0x518bf1[_0x3ce1d9][_0x142d14]=_0x4be827;}});_0x5c8bc9();import{Room,RoomsMap,resetRoomID}from'./components/room.js';function _0x21f0(_0x31bbcc,_0x318d36){const _0x190c9d=_0x46aa();return _0x21f0=function(_0x5c8bc9,_0xd61a01){_0x5c8bc9=_0x5c8bc9-0x16d;let _0x8fd542=_0x190c9d[_0x5c8bc9];return _0x8fd542;},_0x21f0(_0x31bbcc,_0x318d36);}export class MapGenerator{constructor(){const _0x5e3e5b=_0x21f0;this['w']=0x0,this['h']=0x0,this[_0x5e3e5b(0x1a1)]=new RoomsMap(),this[_0x5e3e5b(0x1ac)]=[],this[_0x5e3e5b(0x181)]=[],this[_0x5e3e5b(0x1ae)]=[];}['generate']=(_0x5198e3=0xb,_0x8adae2=0xb,_0x15de85=0x10,_0x12267a=!![],_0x41af37=![])=>{const _0x19a43e=_0x21f0;resetRoomID(),this[_0x19a43e(0x1a7)](_0x5198e3,_0x8adae2),this[_0x19a43e(0x184)](_0x15de85),this['assignTypes']();if(_0x12267a)return this[_0x19a43e(0x16e)](_0x41af37),this[_0x19a43e(0x1ae)];};['initialize']=(_0x51f254,_0x2d7d35)=>{const _0x431f13=_0x21f0;this[_0x431f13(0x1a1)]['length']=0x0,this[_0x431f13(0x1ac)]['length']=0x0,this[_0x431f13(0x181)][_0x431f13(0x1a4)]=0x0,this[_0x431f13(0x1ae)][_0x431f13(0x1a4)]=0x0,this['w']=_0x51f254,this['h']=_0x2d7d35;for(let _0x3d9445=0x0;_0x3d9445<this['w'];_0x3d9445++){this[_0x431f13(0x1a1)][_0x431f13(0x18a)]([]);for(let _0x1bb888=0x0;_0x1bb888<this['h'];_0x1bb888++){this[_0x431f13(0x1a1)][_0x3d9445][_0x431f13(0x18a)](0x0);}}};[_0x46e8cd(0x178)]=(_0x5d015c,_0x5d4669,_0x267bab=0x0)=>{const _0x4c952d=_0x46e8cd;let _0x21158b=new Room(_0x5d015c,_0x5d4669,_0x267bab);return this[_0x4c952d(0x1a1)][_0x5d015c][_0x4c952d(0x18f)](_0x5d4669,0x1,_0x21158b),this[_0x4c952d(0x1ac)][_0x4c952d(0x18a)](_0x21158b),this[_0x4c952d(0x181)][_0x4c952d(0x18a)](_0x21158b),_0x21158b;};[_0x46e8cd(0x184)]=_0x10704d=>{const _0x232ce5=_0x46e8cd;let _0x4a53ae=this['w']/0x2|0x0,_0x55828f=this['h']/0x2|0x0;this[_0x232ce5(0x178)](_0x4a53ae,_0x55828f);let _0x458248=0x0;while(this[_0x232ce5(0x1ac)][_0x232ce5(0x1a4)]<_0x10704d){if(this[_0x232ce5(0x181)][_0x232ce5(0x1a4)]===0x0){console[_0x232ce5(0x17a)](_0x232ce5(0x198));break;}let _0xcf8a8d=Math[_0x232ce5(0x17f)]()*this[_0x232ce5(0x181)]['length']|0x0,_0x3abc19=this[_0x232ce5(0x181)][_0xcf8a8d],_0x47dfd2=this[_0x232ce5(0x1a1)][_0x232ce5(0x18d)](_0x3abc19);if(_0x47dfd2[_0x232ce5(0x1a4)]===0x0){this['spacedRooms'][_0x232ce5(0x18f)](_0xcf8a8d,0x1),_0x458248++;continue;}let _0x398c81=_0x47dfd2[Math[_0x232ce5(0x17f)]()*_0x47dfd2[_0x232ce5(0x1a4)]|0x0];this[_0x232ce5(0x178)](_0x398c81['x'],_0x398c81['y'])[_0x232ce5(0x189)](_0x3abc19),_0x458248++;if(_0x458248>_0x10704d*0x3){console[_0x232ce5(0x17a)]('Too\x20many\x20attemps\x20to\x20reach\x20desired\x20amount\x20of\x20rooms\x20count\x20\x0a\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20inhabited\x20rooms:\x20'+this['roomsPool'][_0x232ce5(0x1a4)]);break;}}console[_0x232ce5(0x186)](_0x232ce5(0x18e)+_0x458248);};[_0x46e8cd(0x177)]=()=>{const _0x405cd2=_0x46e8cd;let _0xc0afd1=this[_0x405cd2(0x1ac)][Math[_0x405cd2(0x17f)]()*this[_0x405cd2(0x1ac)][_0x405cd2(0x1a4)]|0x0];_0xc0afd1['type']=0x1;let _0x22f458=_0xc0afd1,_0x4da541=0x0;for(let _0x469bf2 of this[_0x405cd2(0x1ac)]){let _0x4d465b=_0x469bf2[_0x405cd2(0x1b0)](_0xc0afd1);_0x4d465b>_0x4da541&&(_0x4da541=_0x4d465b,_0x22f458=_0x469bf2);}_0x22f458[_0x405cd2(0x197)]=0x3;let _0x4af8cc=_0xc0afd1;_0x4da541=0x0;for(let _0x4709b3 of this['roomsPool']){let _0x25d652=_0x4709b3['distance'](_0xc0afd1)+_0x4709b3[_0x405cd2(0x1b0)](_0x22f458);_0x25d652>_0x4da541&&(_0x4da541=_0x25d652,_0x4af8cc=_0x4709b3);}_0x4af8cc[_0x405cd2(0x197)]=0x2;};[_0x46e8cd(0x16e)]=(_0x16b6c8=![])=>{const _0x94f1f8=_0x46e8cd;for(let _0x362105 of this['roomsPool']){if(_0x362105[_0x94f1f8(0x197)]!==0x0||_0x362105['joints'][_0x94f1f8(0x1a4)]>0x0)continue;for(let _0x455c86 of _0x362105['links']){let _0xb22038=this[_0x94f1f8(0x1a1)][_0x455c86['x']][_0x455c86['y']];if(_0xb22038[_0x94f1f8(0x197)]===0x0&&_0xb22038[_0x94f1f8(0x199)][_0x94f1f8(0x1a4)]===0x0){_0x362105[_0x94f1f8(0x174)](_0xb22038);break;}}}this[_0x94f1f8(0x185)](),this[_0x94f1f8(0x193)](),this['jointedChunks']=this['getJointedChunks'](![]),_0x16b6c8&&this[_0x94f1f8(0x1a9)]();};[_0x46e8cd(0x193)](){const _0x3e8d98=_0x46e8cd;for(let _0x4a7b4d of this['roomsPool']){for(let _0x4ca07e of _0x4a7b4d[_0x3e8d98(0x199)]){let _0x3e0dc9=this[_0x3e8d98(0x1a1)][_0x4ca07e['x']][_0x4ca07e['y']];this[_0x3e8d98(0x17d)](_0x4a7b4d,_0x3e0dc9);}}}[_0x46e8cd(0x17d)](_0x275133,_0x4c09d2){const _0x3b3d3f=_0x46e8cd;if(_0x4c09d2[_0x3b3d3f(0x16f)]===_0x275133['jointID'])return;_0x4c09d2[_0x3b3d3f(0x16f)]=_0x275133[_0x3b3d3f(0x16f)];for(let _0x1fec77 of _0x4c09d2[_0x3b3d3f(0x199)]){let _0x4ad58d=this[_0x3b3d3f(0x1a1)][_0x1fec77['x']][_0x1fec77['y']];this[_0x3b3d3f(0x17d)](_0x4c09d2,_0x4ad58d);}}['getJointedChunks'](_0x29775f=!![]){const _0x1dbfab=_0x46e8cd;let _0x2f912c=[],_0x27baf0=[];for(let _0x32d631 of this[_0x1dbfab(0x1ac)]){if(_0x29775f&&_0x32d631[_0x1dbfab(0x199)][_0x1dbfab(0x1a4)]===0x0)continue;if(_0x2f912c[_0x1dbfab(0x172)](_0x42ebc9=>_0x42ebc9===_0x32d631['jointID'])!==undefined)continue;_0x2f912c[_0x1dbfab(0x18a)](_0x32d631[_0x1dbfab(0x16f)]),_0x27baf0[_0x1dbfab(0x18a)](this['roomsPool'][_0x1dbfab(0x180)](_0x44b2a6=>_0x44b2a6[_0x1dbfab(0x16f)]==_0x32d631[_0x1dbfab(0x16f)]));}return _0x27baf0;}['jointRoomsU'](){const _0x35336a=_0x46e8cd;for(let _0x2c352c of this['jointedChunks']){if(_0x2c352c['length']!==0x4)continue;let _0x4bead3=_0x2c352c[_0x35336a(0x172)](_0x403e3e=>_0x403e3e[_0x35336a(0x199)][_0x35336a(0x1a4)]==0x1),_0x309bbf=_0x2c352c[_0x35336a(0x172)](_0x533f77=>_0x533f77[_0x35336a(0x199)]['length']==0x1&&_0x533f77!==_0x4bead3);if(!_0x4bead3||!_0x309bbf)continue;_0x4bead3[_0x35336a(0x1b0)](_0x309bbf)==0x1&&(_0x4bead3[_0x35336a(0x174)](_0x309bbf),_0x4bead3[_0x35336a(0x174)](_0x2c352c[_0x35336a(0x172)](_0x1adf9f=>_0x1adf9f[_0x35336a(0x1b0)](_0x4bead3)>0x1)));}}['shapeJoints']=(_0x7638e=!![])=>{const _0x37c806=_0x46e8cd;for(let _0x46ebb2 of this[_0x37c806(0x1ac)]){if(_0x46ebb2[_0x37c806(0x197)]!==0x0||_0x46ebb2[_0x37c806(0x199)]['length']>0x0)continue;if(_0x7638e&&Math[_0x37c806(0x17f)]()*0x2|0x0)continue;_0x46ebb2[_0x37c806(0x17e)][_0x37c806(0x182)](()=>Math['random']()-0.5);for(let _0x5c6ddc of _0x46ebb2['links']){let _0xa7be8=this['roomsMap'][_0x5c6ddc['x']][_0x5c6ddc['y']];if(_0xa7be8[_0x37c806(0x197)]===0x0&&_0xa7be8[_0x37c806(0x199)][_0x37c806(0x1a4)]===0x1){_0x46ebb2[_0x37c806(0x174)](_0xa7be8);break;}}}};[_0x46e8cd(0x18c)]=(_0x1bc23a,_0x2bdac3,_0xa0fc8b=0x14)=>{const _0x230795=_0x46e8cd;_0x1bc23a[_0x230795(0x171)]=_0xa0fc8b*this['w'],_0x1bc23a['height']=_0xa0fc8b*this['h'],_0x2bdac3[_0x230795(0x194)](),_0x2bdac3[_0x230795(0x19e)]=_0x230795(0x196),_0x2bdac3[_0x230795(0x175)](0x0,0x0,_0x1bc23a[_0x230795(0x171)],_0x1bc23a[_0x230795(0x19b)]);for(let _0xd7f5ba of this[_0x230795(0x1ac)]){let _0x5f5d3e=[_0x230795(0x195),_0x230795(0x1aa),_0x230795(0x170),_0x230795(0x176)];_0x2bdac3[_0x230795(0x19e)]=_0x5f5d3e[_0xd7f5ba[_0x230795(0x197)]],_0x2bdac3[_0x230795(0x175)](_0xd7f5ba['x']*_0xa0fc8b+_0xa0fc8b/0xa,_0xd7f5ba['y']*_0xa0fc8b+_0xa0fc8b/0xa,_0xa0fc8b-_0xa0fc8b/0x5,_0xa0fc8b-_0xa0fc8b/0x5);for(let _0x239ea5 of _0xd7f5ba[_0x230795(0x17e)]){let _0x2d78b5=this[_0x230795(0x1a1)][_0x239ea5['x']][_0x239ea5['y']];_0x2bdac3['fillStyle']=_0x5f5d3e[0x0],_0x2bdac3['fillRect']((_0xd7f5ba['x']+_0x2d78b5['x'])/0x2*_0xa0fc8b+_0xa0fc8b/0x2-_0xa0fc8b/0xa,(_0xd7f5ba['y']+_0x2d78b5['y'])/0x2*_0xa0fc8b+_0xa0fc8b/0x2-_0xa0fc8b/0xa,_0xa0fc8b/0x5,_0xa0fc8b/0x5);}for(let _0x5ad368 of _0xd7f5ba[_0x230795(0x199)]){let _0x5d053b=this[_0x230795(0x1a1)][_0x5ad368['x']][_0x5ad368['y']];_0x2bdac3[_0x230795(0x19e)]=_0x5f5d3e[0x0],_0x2bdac3[_0x230795(0x175)]((_0xd7f5ba['x']+_0x5d053b['x'])/0x2*_0xa0fc8b+_0xa0fc8b/0xa,(_0xd7f5ba['y']+_0x5d053b['y'])/0x2*_0xa0fc8b+_0xa0fc8b/0xa,_0xa0fc8b-_0xa0fc8b/0x5,_0xa0fc8b-_0xa0fc8b/0x5);}}};}