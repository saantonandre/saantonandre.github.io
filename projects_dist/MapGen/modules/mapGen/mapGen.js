const _0xfcf3b6=_0x4146;(function(_0x54f2f7,_0xe28187){const _0x188432=_0x4146,_0x394a0d=_0x54f2f7();while(!![]){try{const _0x13569f=parseInt(_0x188432(0x81))/0x1+parseInt(_0x188432(0x7b))/0x2*(-parseInt(_0x188432(0x87))/0x3)+parseInt(_0x188432(0x85))/0x4*(parseInt(_0x188432(0x7f))/0x5)+parseInt(_0x188432(0x80))/0x6+parseInt(_0x188432(0x7e))/0x7+-parseInt(_0x188432(0x8f))/0x8+parseInt(_0x188432(0x8e))/0x9*(parseInt(_0x188432(0x95))/0xa);if(_0x13569f===_0xe28187)break;else _0x394a0d['push'](_0x394a0d['shift']());}catch(_0x25b911){_0x394a0d['push'](_0x394a0d['shift']());}}}(_0x2a2c,0xcdccd));const _0x5e709d=(function(){let _0x2922a6=!![];return function(_0x333c90,_0x5286c8){const _0x152636=_0x2922a6?function(){const _0x4efd04=_0x4146;if(_0x5286c8){const _0x2f210b=_0x5286c8[_0x4efd04(0x7d)](_0x333c90,arguments);return _0x5286c8=null,_0x2f210b;}}:function(){};return _0x2922a6=![],_0x152636;};}()),_0x346d74=_0x5e709d(this,function(){const _0x4ed982=_0x4146;let _0x11c8fd;try{const _0x22ec67=Function(_0x4ed982(0xa6)+_0x4ed982(0x9e)+');');_0x11c8fd=_0x22ec67();}catch(_0x1b7925){_0x11c8fd=window;}const _0x3eca2d=new RegExp(_0x4ed982(0x7a),'g'),_0x25bf0b=_0x4ed982(0x8a)[_0x4ed982(0x97)](_0x3eca2d,'')[_0x4ed982(0x94)](';');let _0x17419d,_0x23f862,_0x51d182,_0x5197be;const _0x2fae48=function(_0x23f715,_0x5ea9ca,_0x539941){const _0x281ede=_0x4ed982;if(_0x23f715['length']!=_0x5ea9ca)return![];for(let _0xf6857=0x0;_0xf6857<_0x5ea9ca;_0xf6857++){for(let _0x41727f=0x0;_0x41727f<_0x539941[_0x281ede(0x9f)];_0x41727f+=0x2){if(_0xf6857==_0x539941[_0x41727f]&&_0x23f715[_0x281ede(0x79)](_0xf6857)!=_0x539941[_0x41727f+0x1])return![];}}return!![];},_0x54c32b=function(_0x2359e7,_0x5c5219,_0xded7fd){return _0x2fae48(_0x5c5219,_0xded7fd,_0x2359e7);},_0x16dfb8=function(_0x1bfc17,_0x55d102,_0x651408){return _0x54c32b(_0x55d102,_0x1bfc17,_0x651408);},_0x1e15fe=function(_0x3e7ae5,_0xdfa0ed,_0x4997b9){return _0x16dfb8(_0xdfa0ed,_0x4997b9,_0x3e7ae5);};for(let _0xeb22c1 in _0x11c8fd){if(_0x2fae48(_0xeb22c1,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x17419d=_0xeb22c1;break;}}for(let _0x238417 in _0x11c8fd[_0x17419d]){if(_0x1e15fe(0x6,_0x238417,[0x5,0x6e,0x0,0x64])){_0x23f862=_0x238417;break;}}for(let _0x23f29c in _0x11c8fd[_0x17419d]){if(_0x16dfb8(_0x23f29c,[0x7,0x6e,0x0,0x6c],0x8)){_0x51d182=_0x23f29c;break;}}if(!('~'>_0x23f862))for(let _0x4471c4 in _0x11c8fd[_0x17419d][_0x51d182]){if(_0x54c32b([0x7,0x65,0x0,0x68],_0x4471c4,0x8)){_0x5197be=_0x4471c4;break;}}if(!_0x17419d||!_0x11c8fd[_0x17419d])return;const _0x142800=_0x11c8fd[_0x17419d][_0x23f862],_0xdfab4a=!!_0x11c8fd[_0x17419d][_0x51d182]&&_0x11c8fd[_0x17419d][_0x51d182][_0x5197be],_0x4ae506=_0x142800||_0xdfab4a;if(!_0x4ae506)return;let _0x3aff75=![];for(let _0xda973c=0x0;_0xda973c<_0x25bf0b[_0x4ed982(0x9f)];_0xda973c++){const _0x58d5f9=_0x25bf0b[_0xda973c],_0x24ac56=_0x58d5f9[0x0]===String['fromCharCode'](0x2e)?_0x58d5f9[_0x4ed982(0x9a)](0x1):_0x58d5f9,_0x50deba=_0x4ae506[_0x4ed982(0x9f)]-_0x24ac56[_0x4ed982(0x9f)],_0x4a84fe=_0x4ae506[_0x4ed982(0x86)](_0x24ac56,_0x50deba),_0x30ca68=_0x4a84fe!==-0x1&&_0x4a84fe===_0x50deba;_0x30ca68&&((_0x4ae506[_0x4ed982(0x9f)]==_0x58d5f9['length']||_0x58d5f9[_0x4ed982(0x86)]('.')===0x0)&&(_0x3aff75=!![]));}if(!_0x3aff75){const _0x5c8340=new RegExp('[mQBOLdRYmUfNMQwygAeYJRfmJPq]','g'),_0x172293='abomQBuOLdRtY:mblanUkfNMQwygAeYJRfmJPq'['replace'](_0x5c8340,'');_0x11c8fd[_0x17419d][_0x51d182]=_0x172293;}});_0x346d74();function _0x2a2c(){const _0x3ff393=['return\x20(function()\x20','Too\x20many\x20attemps\x20to\x20reach\x20desired\x20amount\x20of\x20rooms\x20count\x20\x0a\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20inhabited\x20rooms:\x20','Brown','Out\x20of\x20space\x20exit','sort','distance','links','height','fillRect','populate','shapeJoints','charCodeAt','[BCPYQCDpqwMBjCYKLKVJFJWpxAEGCkkGJZmyZEHFRDPkNDHRKHVqWMwvCmkpHJmVBHHfR]','36658UPDozA','assignJoints','apply','3588494kpAXwu','1832845ipgbkO','3573660hcbTGI','482506SMlOho','warn','getJointedChunks','width','8YdNHcL','indexOf','243zlGXIt','roomsMap','filter','sBaaCPYntonQCandDrpe.qwMBgjCitYhKLKVJFJubW.iop;xAlEGCocalkkGJhostZmyZEHFRDPkNDHRKHVqWMwvCmkpHJmVBHHfR','render','roomsPool','type','153Vmlpjn','5536392vGexAc','fillStyle','spacedRooms','assignTypes','clear','split','409270WQjUQy','joint','replace','find','push','slice','log','jointRoomsU','Iterations:\x20','{}.constructor(\x22return\x20this\x22)(\x20)','length','jointID','random','propagateJointID','Lavender','joints','jointedChunks'];_0x2a2c=function(){return _0x3ff393;};return _0x2a2c();}function _0x4146(_0x48d277,_0x4debb0){const _0x5c9d1c=_0x2a2c();return _0x4146=function(_0x346d74,_0x5e709d){_0x346d74=_0x346d74-0x79;let _0x32025d=_0x5c9d1c[_0x346d74];return _0x32025d;},_0x4146(_0x48d277,_0x4debb0);}import{Room,RoomsMap,resetRoomID}from'./components/room.js';export class MapGenerator{constructor(){const _0x27dfb7=_0x4146;this['w']=0x0,this['h']=0x0,this[_0x27dfb7(0x88)]=new RoomsMap(),this[_0x27dfb7(0x8c)]=[],this[_0x27dfb7(0x91)]=[],this[_0x27dfb7(0xa5)]=[];}['generate']=(_0x5ab1d7=0xb,_0x24677f=0xb,_0x11e10d=0x10,_0x97c2d5=!![],_0x31065d=![])=>{const _0xa9dd80=_0x4146;resetRoomID(),this['initialize'](_0x5ab1d7,_0x24677f),this[_0xa9dd80(0xaf)](_0x11e10d),this['assignTypes']();if(_0x97c2d5)return this[_0xa9dd80(0x7c)](_0x31065d),this['jointedChunks'];};['initialize']=(_0x34e5a8,_0x2131dc)=>{const _0x418202=_0x4146;this['roomsMap']['length']=0x0,this['roomsPool']['length']=0x0,this[_0x418202(0x91)][_0x418202(0x9f)]=0x0,this['jointedChunks'][_0x418202(0x9f)]=0x0,this['w']=_0x34e5a8,this['h']=_0x2131dc;for(let _0x5d20aa=0x0;_0x5d20aa<this['w'];_0x5d20aa++){this[_0x418202(0x88)]['push']([]);for(let _0x3226c3=0x0;_0x3226c3<this['h'];_0x3226c3++){this[_0x418202(0x88)][_0x5d20aa][_0x418202(0x99)](0x0);}}};['createRoom']=(_0x320492,_0x2516ad,_0x2f456b=0x0)=>{const _0x58dd9c=_0x4146;let _0x4dc930=new Room(_0x320492,_0x2516ad,_0x2f456b);return this[_0x58dd9c(0x88)][_0x320492]['splice'](_0x2516ad,0x1,_0x4dc930),this['roomsPool'][_0x58dd9c(0x99)](_0x4dc930),this[_0x58dd9c(0x91)]['push'](_0x4dc930),_0x4dc930;};[_0xfcf3b6(0xaf)]=_0xc23d38=>{const _0x398f31=_0xfcf3b6;let _0x399882=this['w']/0x2|0x0,_0x209984=this['h']/0x2|0x0;this['createRoom'](_0x399882,_0x209984);let _0x5376a3=0x0;while(this[_0x398f31(0x8c)]['length']<_0xc23d38){if(this[_0x398f31(0x91)]['length']===0x0){console[_0x398f31(0x82)](_0x398f31(0xa9));break;}let _0x3d31a8=Math['random']()*this[_0x398f31(0x91)]['length']|0x0,_0x45220a=this[_0x398f31(0x91)][_0x3d31a8],_0x3914f5=this[_0x398f31(0x88)]['availableNeighbors'](_0x45220a);if(_0x3914f5[_0x398f31(0x9f)]===0x0){this['spacedRooms']['splice'](_0x3d31a8,0x1),_0x5376a3++;continue;}let _0x300612=_0x3914f5[Math[_0x398f31(0xa1)]()*_0x3914f5[_0x398f31(0x9f)]|0x0];this['createRoom'](_0x300612['x'],_0x300612['y'])['link'](_0x45220a),_0x5376a3++;if(_0x5376a3>_0xc23d38*0x3){console[_0x398f31(0x82)](_0x398f31(0xa7)+this['roomsPool'][_0x398f31(0x9f)]);break;}}console[_0x398f31(0x9b)](_0x398f31(0x9d)+_0x5376a3);};[_0xfcf3b6(0x92)]=()=>{const _0x2c266f=_0xfcf3b6;let _0x48a994=this['roomsPool'][Math['random']()*this[_0x2c266f(0x8c)][_0x2c266f(0x9f)]|0x0];_0x48a994['type']=0x1;let _0x10fc8b=_0x48a994,_0xe5683e=0x0;for(let _0x5324e2 of this[_0x2c266f(0x8c)]){let _0x5941ad=_0x5324e2[_0x2c266f(0xab)](_0x48a994);_0x5941ad>_0xe5683e&&(_0xe5683e=_0x5941ad,_0x10fc8b=_0x5324e2);}_0x10fc8b['type']=0x3;let _0x474c04=_0x48a994;_0xe5683e=0x0;for(let _0x261ec9 of this[_0x2c266f(0x8c)]){let _0x4f235e=_0x261ec9[_0x2c266f(0xab)](_0x48a994)+_0x261ec9[_0x2c266f(0xab)](_0x10fc8b);_0x4f235e>_0xe5683e&&(_0xe5683e=_0x4f235e,_0x474c04=_0x261ec9);}_0x474c04[_0x2c266f(0x8d)]=0x2;};[_0xfcf3b6(0x7c)]=(_0x16d0ea=![])=>{const _0x2085bf=_0xfcf3b6;for(let _0x372480 of this[_0x2085bf(0x8c)]){if(_0x372480[_0x2085bf(0x8d)]!==0x0||_0x372480[_0x2085bf(0xa4)][_0x2085bf(0x9f)]>0x0)continue;for(let _0x4b6abb of _0x372480[_0x2085bf(0xac)]){let _0x46ba58=this[_0x2085bf(0x88)][_0x4b6abb['x']][_0x4b6abb['y']];if(_0x46ba58[_0x2085bf(0x8d)]===0x0&&_0x46ba58[_0x2085bf(0xa4)][_0x2085bf(0x9f)]===0x0){_0x372480[_0x2085bf(0x96)](_0x46ba58);break;}}}this[_0x2085bf(0xb0)](),this['assignJointsID'](),this['jointedChunks']=this[_0x2085bf(0x83)](![]),_0x16d0ea&&this[_0x2085bf(0x9c)]();};['assignJointsID'](){const _0xd521c2=_0xfcf3b6;for(let _0x3f5494 of this[_0xd521c2(0x8c)]){for(let _0x50ec2b of _0x3f5494[_0xd521c2(0xa4)]){let _0x294a6=this['roomsMap'][_0x50ec2b['x']][_0x50ec2b['y']];this[_0xd521c2(0xa2)](_0x3f5494,_0x294a6);}}}[_0xfcf3b6(0xa2)](_0x44a8fb,_0x1c2897){const _0x1636d9=_0xfcf3b6;if(_0x1c2897[_0x1636d9(0xa0)]===_0x44a8fb[_0x1636d9(0xa0)])return;_0x1c2897[_0x1636d9(0xa0)]=_0x44a8fb[_0x1636d9(0xa0)];for(let _0x3e84b6 of _0x1c2897['joints']){let _0x617564=this['roomsMap'][_0x3e84b6['x']][_0x3e84b6['y']];this[_0x1636d9(0xa2)](_0x1c2897,_0x617564);}}[_0xfcf3b6(0x83)](_0x72b575=!![]){const _0x246522=_0xfcf3b6;let _0x3ebd6d=[],_0x976067=[];for(let _0x5ea7f4 of this[_0x246522(0x8c)]){if(_0x72b575&&_0x5ea7f4[_0x246522(0xa4)][_0x246522(0x9f)]===0x0)continue;if(_0x3ebd6d['find'](_0x4f9a=>_0x4f9a===_0x5ea7f4['jointID'])!==undefined)continue;_0x3ebd6d[_0x246522(0x99)](_0x5ea7f4[_0x246522(0xa0)]),_0x976067[_0x246522(0x99)](this[_0x246522(0x8c)][_0x246522(0x89)](_0x3d6ff7=>_0x3d6ff7[_0x246522(0xa0)]==_0x5ea7f4[_0x246522(0xa0)]));}return _0x976067;}[_0xfcf3b6(0x9c)](){const _0x48239f=_0xfcf3b6;for(let _0x471a6d of this[_0x48239f(0xa5)]){if(_0x471a6d[_0x48239f(0x9f)]!==0x4)continue;let _0x3c23ee=_0x471a6d[_0x48239f(0x98)](_0x5a838b=>_0x5a838b[_0x48239f(0xa4)][_0x48239f(0x9f)]==0x1),_0x59b7ff=_0x471a6d[_0x48239f(0x98)](_0x12797b=>_0x12797b[_0x48239f(0xa4)][_0x48239f(0x9f)]==0x1&&_0x12797b!==_0x3c23ee);if(!_0x3c23ee||!_0x59b7ff)continue;_0x3c23ee['distance'](_0x59b7ff)==0x1&&(_0x3c23ee[_0x48239f(0x96)](_0x59b7ff),_0x3c23ee[_0x48239f(0x96)](_0x471a6d['find'](_0x1aee9c=>_0x1aee9c[_0x48239f(0xab)](_0x3c23ee)>0x1)));}}[_0xfcf3b6(0xb0)]=(_0xaa5224=!![])=>{const _0x4d163e=_0xfcf3b6;for(let _0x435275 of this[_0x4d163e(0x8c)]){if(_0x435275[_0x4d163e(0x8d)]!==0x0||_0x435275[_0x4d163e(0xa4)][_0x4d163e(0x9f)]>0x0)continue;if(_0xaa5224&&Math['random']()*0x2|0x0)continue;_0x435275[_0x4d163e(0xac)][_0x4d163e(0xaa)](()=>Math[_0x4d163e(0xa1)]()-0.5);for(let _0x3c6701 of _0x435275[_0x4d163e(0xac)]){let _0x1dece6=this[_0x4d163e(0x88)][_0x3c6701['x']][_0x3c6701['y']];if(_0x1dece6[_0x4d163e(0x8d)]===0x0&&_0x1dece6[_0x4d163e(0xa4)][_0x4d163e(0x9f)]===0x1){_0x435275[_0x4d163e(0x96)](_0x1dece6);break;}}}};[_0xfcf3b6(0x8b)]=(_0x431e9c,_0x4adfad,_0x20f572=0x14)=>{const _0x13a4fa=_0xfcf3b6;_0x431e9c['width']=_0x20f572*this['w'],_0x431e9c[_0x13a4fa(0xad)]=_0x20f572*this['h'],_0x4adfad[_0x13a4fa(0x93)](),_0x4adfad[_0x13a4fa(0x90)]='black',_0x4adfad[_0x13a4fa(0xae)](0x0,0x0,_0x431e9c[_0x13a4fa(0x84)],_0x431e9c[_0x13a4fa(0xad)]);for(let _0x5e44b2 of this[_0x13a4fa(0x8c)]){let _0x4b2191=[_0x13a4fa(0xa3),'RoyalBlue','Khaki',_0x13a4fa(0xa8)];_0x4adfad['fillStyle']=_0x4b2191[_0x5e44b2['type']],_0x4adfad[_0x13a4fa(0xae)](_0x5e44b2['x']*_0x20f572+_0x20f572/0xa,_0x5e44b2['y']*_0x20f572+_0x20f572/0xa,_0x20f572-_0x20f572/0x5,_0x20f572-_0x20f572/0x5);for(let _0x5bca30 of _0x5e44b2['links']){let _0x29e7f1=this[_0x13a4fa(0x88)][_0x5bca30['x']][_0x5bca30['y']];_0x4adfad[_0x13a4fa(0x90)]=_0x4b2191[0x0],_0x4adfad['fillRect']((_0x5e44b2['x']+_0x29e7f1['x'])/0x2*_0x20f572+_0x20f572/0x2-_0x20f572/0xa,(_0x5e44b2['y']+_0x29e7f1['y'])/0x2*_0x20f572+_0x20f572/0x2-_0x20f572/0xa,_0x20f572/0x5,_0x20f572/0x5);}for(let _0x14aeda of _0x5e44b2[_0x13a4fa(0xa4)]){let _0x4c184e=this[_0x13a4fa(0x88)][_0x14aeda['x']][_0x14aeda['y']];_0x4adfad[_0x13a4fa(0x90)]=_0x4b2191[0x0],_0x4adfad[_0x13a4fa(0xae)]((_0x5e44b2['x']+_0x4c184e['x'])/0x2*_0x20f572+_0x20f572/0xa,(_0x5e44b2['y']+_0x4c184e['y'])/0x2*_0x20f572+_0x20f572/0xa,_0x20f572-_0x20f572/0x5,_0x20f572-_0x20f572/0x5);}}};}