'use strict';var _0x2a1028=_0x4ee3;(function(_0x3cfdec,_0x54825d){var _0x3ba259=_0x4ee3,_0x5d3720=_0x3cfdec();while(!![]){try{var _0x148a46=-parseInt(_0x3ba259(0xc5))/0x1*(parseInt(_0x3ba259(0x14d))/0x2)+-parseInt(_0x3ba259(0x164))/0x3+-parseInt(_0x3ba259(0x132))/0x4+parseInt(_0x3ba259(0x12c))/0x5+parseInt(_0x3ba259(0xe5))/0x6+parseInt(_0x3ba259(0x137))/0x7+parseInt(_0x3ba259(0x11c))/0x8;if(_0x148a46===_0x54825d)break;else _0x5d3720['push'](_0x5d3720['shift']());}catch(_0x48df2){_0x5d3720['push'](_0x5d3720['shift']());}}}(_0x58e1,0x90909));var madeChanges=![],selectedType=0x0,importedCode='',levelsArray={};function _0x58e1(){var _0x318711=['src','getContext','parentNode','offsetLeft','width','event','toggle','remove','clipboard','pageYOffset','charCodeAt','Insert\x20the\x20text\x20for\x20this\x20interactive\x20tile','push','addEventListener','179852OQwQIF','readAsText','navigator','MapTester/index.html','Discard\x20changes?','getAsFile','\x20tile','classList','block','lineTo','\x20selected','#ffffff','JabXouiGRtXz:KblankWmxLUKUcyEIXHiTiByqH','moveTo','sheet','onchange','onclick','createElement','contains','top','fillRect','image','moveMap','324963GlWSbD','which','innerHeight','removeChild','saveButton','saavntCoMnandre.gLviNzXtVFJhub.LDiNo;locaBlMhosUTftfVACMQEVfySkWPGRSCPADXjRBXTTjMAPkQkmHxDTJfRIXkvM','onmousemove','download','yRDiff','color','10pqFflX','onmousedown','href','object','cont','file','spawn','strokeStyle','backgroundColor','slice','clipboardData','items','speed','offsetTop','info','mapSizeW','#000000','closeBtn','<br>\x20w:\x20','downloadBtn','preventDefault','parse','fromCharCode','clientY','getElementsByClassName','#002200','type\x20of\x20camera','rect','innerHTML','paste','open','splice','140814JSkLfT','map','{}.constructor(\x22return\x20this\x22)(\x20)','toBlob','beginPath','mapSizeH','sort','URL','selected','split','zoomer','apply','#ff0000','#5b6ee1','map.json','mousedown','value','#0000cc','name','return\x20(function()\x20','write','exportText','none','appendChild','xRDiff','mapSizeBtnW','drawing:\x20displayed','clearRect','globalAlpha','all-scroll','drawImage','zoomOut','zoomIn','text','files','number','className','cursor','display','mapSizeBtnH',',\x20h:\x20','body','change','type','spawnPoint','cont2','camBoxes','button','pageXOffset','imageSmoothingEnabled','stroke','mouseup','replace','getElementById','black','4590808MUGMph','onmouseup','function','webkitURL','canvas','contextmenu','x:\x20','interactive','stringify','mousemove','\x20levels','msSaveBlob','clientX','crosshair','keyCode','lineWidth','4218250BeAunx','exportMap','levels','exportBox','onload','keydown','587928PXNiBH','length','white','height','result','2140110tSdiSc','onbeforeunload','keyup','style','indexOf','closePath','text/csv','add'];_0x58e1=function(){return _0x318711;};return _0x58e1();}function id(_0x1dc1bf){var _0x1f5fe4=_0x4ee3,_0x5c4315=(function(){var _0x53ba8c=!![];return function(_0x3488e2,_0x4cf5ed){var _0x4b096d=_0x53ba8c?function(){var _0x4a5adb=_0x4ee3;if(_0x4cf5ed){var _0x19f3fe=_0x4cf5ed[_0x4a5adb(0xf0)](_0x3488e2,arguments);return _0x4cf5ed=null,_0x19f3fe;}}:function(){};return _0x53ba8c=![],_0x4b096d;};}()),_0x5ea600=_0x5c4315(this,function(){var _0x1be1b3=_0x4ee3,_0xf4ea92;try{var _0x2880e6=Function(_0x1be1b3(0xf8)+_0x1be1b3(0xe7)+');');_0xf4ea92=_0x2880e6();}catch(_0x3c0648){_0xf4ea92=window;}var _0x1b8026=new RegExp('[vCMLvNzXVFJLDNBMUTffVACMQEVfySkWPGRSCPADXjRBXTTjMAPkQkmHxDTJfRIXkvM]','g'),_0x481deb=_0x1be1b3(0x169)[_0x1be1b3(0x119)](_0x1b8026,'')[_0x1be1b3(0xee)](';'),_0x3e61f5,_0x47d36e,_0x1f1ee2,_0x2f098a,_0x181c2e=function(_0x55f9ea,_0x54eea3,_0x25b350){var _0x1ad266=_0x1be1b3;if(_0x55f9ea['length']!=_0x54eea3)return![];for(var _0x1e09f0=0x0;_0x1e09f0<_0x54eea3;_0x1e09f0++){for(var _0x5c1c95=0x0;_0x5c1c95<_0x25b350[_0x1ad266(0x133)];_0x5c1c95+=0x2){if(_0x1e09f0==_0x25b350[_0x5c1c95]&&_0x55f9ea[_0x1ad266(0x149)](_0x1e09f0)!=_0x25b350[_0x5c1c95+0x1])return![];}}return!![];},_0x283bc6=function(_0x21c872,_0x5303b2,_0x5437a7){return _0x181c2e(_0x5303b2,_0x5437a7,_0x21c872);},_0x1735db=function(_0x300c94,_0x4c3e71,_0x4d2980){return _0x283bc6(_0x4c3e71,_0x300c94,_0x4d2980);},_0x430926=function(_0x4ef9b2,_0x5b6e82,_0x2cb137){return _0x1735db(_0x5b6e82,_0x2cb137,_0x4ef9b2);};for(var _0x3a894e in _0xf4ea92){if(_0x181c2e(_0x3a894e,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3e61f5=_0x3a894e;break;}}for(var _0x351677 in _0xf4ea92[_0x3e61f5]){if(_0x430926(0x6,_0x351677,[0x5,0x6e,0x0,0x64])){_0x47d36e=_0x351677;break;}}for(var _0x240024 in _0xf4ea92[_0x3e61f5]){if(_0x1735db(_0x240024,[0x7,0x6e,0x0,0x6c],0x8)){_0x1f1ee2=_0x240024;break;}}if(!('~'>_0x47d36e))for(var _0x499e87 in _0xf4ea92[_0x3e61f5][_0x1f1ee2]){if(_0x283bc6([0x7,0x65,0x0,0x68],_0x499e87,0x8)){_0x2f098a=_0x499e87;break;}}if(!_0x3e61f5||!_0xf4ea92[_0x3e61f5])return;var _0x48dc4a=_0xf4ea92[_0x3e61f5][_0x47d36e],_0x462bc0=!!_0xf4ea92[_0x3e61f5][_0x1f1ee2]&&_0xf4ea92[_0x3e61f5][_0x1f1ee2][_0x2f098a],_0x1a2c90=_0x48dc4a||_0x462bc0;if(!_0x1a2c90)return;var _0x16c466=![];for(var _0x1c9a96=0x0;_0x1c9a96<_0x481deb['length'];_0x1c9a96++){var _0x47d36e=_0x481deb[_0x1c9a96],_0x154c89=_0x47d36e[0x0]===String[_0x1be1b3(0xdb)](0x2e)?_0x47d36e[_0x1be1b3(0xce)](0x1):_0x47d36e,_0x219192=_0x1a2c90[_0x1be1b3(0x133)]-_0x154c89['length'],_0x58eb2e=_0x1a2c90['indexOf'](_0x154c89,_0x219192),_0x2f8bf1=_0x58eb2e!==-0x1&&_0x58eb2e===_0x219192;_0x2f8bf1&&((_0x1a2c90['length']==_0x47d36e['length']||_0x47d36e[_0x1be1b3(0x13b)]('.')===0x0)&&(_0x16c466=!![]));}if(!_0x16c466){var _0xa086e6=new RegExp('[JXiGRXzKWmxLUKUcyEIXHiTiByqH]','g'),_0x5b6a86=_0x1be1b3(0x159)[_0x1be1b3(0x119)](_0xa086e6,'');_0xf4ea92[_0x3e61f5][_0x1f1ee2]=_0x5b6a86;}});return _0x5ea600(),document[_0x1f5fe4(0x11a)](_0x1dc1bf);}var canvas=id('canvas'),sheet=id(_0x2a1028(0x15b)),c=canvas['getContext']('2d');c['imageSmoothingEnabled']=![];var levels=[],currentLevel=0x0,mapObject={'map':[],'camBoxes':[],'spawnPoint':{}},map=[],hitBoxes=[],camBoxes=[],spawnPoint={'x':0x1e,'y':0x14};id('+')[_0x2a1028(0x15d)]=function(){addLevel();};function clearMap(){var _0x4f8abf=_0x2a1028;map=[],mapObject[_0x4f8abf(0xe6)]=[],mapObject['camBoxes']=[],mapObject[_0x4f8abf(0x111)]={'x':0x1e,'y':0x14},hitBoxes=[],camBoxes=[],spawnPoint={'x':0x1e,'y':0x14};}function clearButtons(){var _0x5b9232=_0x2a1028;let _0x217782=document[_0x5b9232(0xdd)](_0x5b9232(0x12e));for(let _0x33d782=_0x217782['length']-0x1;_0x33d782>=0x0;_0x33d782--){_0x217782[_0x33d782]['parentNode'][_0x5b9232(0x167)](_0x217782[_0x33d782]);}}id(_0x2a1028(0x168))[_0x2a1028(0x15d)]=saveImage;function saveImage(){var _0x15d543=_0x2a1028;canvas[_0x15d543(0xe8)](_0x613dbd=>navigator[_0x15d543(0x147)][_0x15d543(0xf9)]([new ClipboardItem({'image/png':_0x613dbd})]));}function addButton(){var _0x25f7f6=_0x2a1028,_0x1a8f98=document['createElement'](_0x25f7f6(0x114));_0x1a8f98[_0x25f7f6(0x108)]=levels[_0x25f7f6(0x133)],_0x1a8f98[_0x25f7f6(0xe1)]=levels[_0x25f7f6(0x133)],_0x1a8f98[_0x25f7f6(0x109)]+=_0x25f7f6(0x126),_0x1a8f98['onmousedown']=function(_0x2bdb42){var _0x3d585e=_0x25f7f6;levels[currentLevel]=newMapExport(),clearMap(),currentLevel=this[_0x3d585e(0x108)],safeEval(JSON['parse'](levels[currentLevel])),resizeMap(),highlightCurrentLevel();},id('cont3')[_0x25f7f6(0xfc)](_0x1a8f98),highlightCurrentLevel();}function addLevel(){var _0x1b254f=_0x2a1028;madeChanges=!![],addButton(),levels[currentLevel]=newMapExport(),clearMap(),levels[_0x1b254f(0xe4)](currentLevel+0x1,0x0,newMapExport()),currentLevel+=0x1,safeEval(JSON[_0x1b254f(0xda)](levels[currentLevel])),resizeMap(),highlightCurrentLevel();}addButton(),levels[currentLevel]=newMapExport();var cellQuantityW=id(_0x2a1028(0xd4))['value'],cellQuantityH=id(_0x2a1028(0xea))[_0x2a1028(0xf5)],cellSize=0x10,fileName='mapCode',interactiveTile=0x0;canvas['width']=cellQuantityW*cellSize,canvas['height']=cellQuantityH*cellSize,id(_0x2a1028(0xfe))[_0x2a1028(0x15d)]=function(){var _0x160a49=_0x2a1028;cellQuantityW=id(_0x160a49(0xd4))[_0x160a49(0xf5)],changeMapSize();},id(_0x2a1028(0x10c))['onclick']=function(){var _0x38ec8d=_0x2a1028;cellQuantityH=id('mapSizeH')[_0x38ec8d(0xf5)],changeMapSize();},window[_0x2a1028(0x130)]=function(){var _0x250501=_0x2a1028;for(let _0x2d23cf=0x0;_0x2d23cf<tiles[_0x250501(0x133)];_0x2d23cf++){var _0x59dcfe=document[_0x250501(0x15e)]('canvas');_0x59dcfe['id']=_0x250501(0x120)+_0x2d23cf,_0x59dcfe[_0x250501(0x143)]=0x20,_0x59dcfe[_0x250501(0x135)]=0x20,_0x59dcfe['number']=_0x2d23cf,_0x59dcfe[_0x250501(0x140)]('2d')[_0x250501(0x116)]=![];_0x2d23cf===0x0&&(_0x59dcfe[_0x250501(0x109)]+=_0x250501(0x157));_0x59dcfe['className']+=_0x250501(0x153),_0x59dcfe['getContext']('2d')[_0x250501(0x103)](sheet,tiles[_0x2d23cf][0x0]*0x10,tiles[_0x2d23cf][0x1]*0x10,0x10,0x10,0x0,0x0,_0x59dcfe[_0x250501(0x143)],_0x59dcfe[_0x250501(0x135)]);var _0x419e8d=document['getElementsByTagName']('body')[0x0];id(_0x250501(0x112))[_0x250501(0xfc)](_0x59dcfe),id(_0x250501(0x120)+_0x2d23cf)[_0x250501(0x15d)]=function(){var _0x2d2a21=_0x250501;selectedType=this[_0x2d2a21(0x108)];for(let _0x3e78bc=0x0;_0x3e78bc<tiles[_0x2d2a21(0x133)];_0x3e78bc++){id(_0x2d2a21(0x120)+_0x3e78bc)['classList'][_0x2d2a21(0x146)](_0x2d2a21(0xed));}this[_0x2d2a21(0x109)]+='\x20selected';};}loop();},id('test')[_0x2a1028(0x15d)]=function(){var _0x17a514=_0x2a1028;levels[currentLevel]=newMapExport(),newMapExport(),levelsArray=[];for(let _0x3ec947=0x0;_0x3ec947<levels[_0x17a514(0x133)];_0x3ec947++){levelsArray[_0x17a514(0x14b)](JSON[_0x17a514(0xda)](levels[_0x3ec947]));}var _0x9ef112=window[_0x17a514(0xe3)](_0x17a514(0x150));},id('interactive')[_0x2a1028(0x15d)]=function(){var _0x35b9fa=_0x2a1028;interactiveTile?(interactiveTile=0x0,id('interactive')[_0x35b9fa(0x13a)][_0x35b9fa(0xcd)]=_0x35b9fa(0x134),id(_0x35b9fa(0x123))[_0x35b9fa(0x13a)][_0x35b9fa(0xc4)]=_0x35b9fa(0x11b)):(interactiveTile=0x1,id('interactive')['style'][_0x35b9fa(0xcd)]=_0x35b9fa(0x11b),id(_0x35b9fa(0x123))['style']['color']='white');};var hitBoxToggle=![];id(_0x2a1028(0x145))[_0x2a1028(0x15d)]=function(){var _0x2cfd54=_0x2a1028;if(hitBoxToggle==0x2)hitBoxToggle=0x0,id('toggle')['innerHTML']=_0x2cfd54(0xff);else{if(hitBoxToggle==0x0)hitBoxToggle=0x1,id('toggle')[_0x2cfd54(0xe1)]='drawing:\x20hitboxes';else hitBoxToggle==0x1&&(hitBoxToggle=0x2,id('toggle')['innerHTML']='drawing:\x20camera');}};var square={'x':0x0,'y':0x0,'w':0x0,'h':0x0},infoDisp=![];function loop(){var _0x5c3f02=_0x2a1028;c[_0x5c3f02(0x100)](0x0,0x0,canvas[_0x5c3f02(0x143)],canvas[_0x5c3f02(0x135)]),pastedImage&&c['drawImage'](pastedImage,0x0,0x0,pastedImage[_0x5c3f02(0x143)],pastedImage[_0x5c3f02(0x135)]),renderGrid(),renderMap(),mouseDown&&!(movingMap||definingSpawnpoint)&&renderSquare(),requestAnimationFrame(loop);}function _0x4ee3(_0x4c7f17,_0x4eab68){var _0xe046b2=_0x58e1();return _0x4ee3=function(_0x3632e0,_0x147216){_0x3632e0=_0x3632e0-0xc1;var _0x227703=_0xe046b2[_0x3632e0];return _0x227703;},_0x4ee3(_0x4c7f17,_0x4eab68);}function renderSquare(){var _0x463aeb=_0x2a1028;if(hitBoxToggle==0x1)c[_0x463aeb(0xcc)]=_0x463aeb(0xf1);else c[_0x463aeb(0xcc)]=_0x463aeb(0x158);c[_0x463aeb(0xe9)](),c[_0x463aeb(0xe0)](square['x'],square['y'],square['w'],square['h']),c['closePath'](),c[_0x463aeb(0x117)]();}var camera={'L':![],'R':![],'T':![],'B':![],'zoomIn':![],'zoomOut':![],'speed':0x10},sX=0x0,sY=0x0;dragElement(id(_0x2a1028(0xc9))),dragElement(id(_0x2a1028(0x112))),dragElement(id('cont3'));function dragElement(_0x2d8af5){var _0x167c43=_0x2a1028,_0x306178=0x0,_0x1eb2da=0x0,_0x40e8ed=0x0,_0x3091e7=0x0;_0x2d8af5[_0x167c43(0xc6)]=_0x42cae0;function _0x42cae0(_0x262fe7){var _0x2cb7f8=_0x167c43;_0x262fe7=_0x262fe7||window[_0x2cb7f8(0x144)],_0x40e8ed=_0x262fe7[_0x2cb7f8(0x128)],_0x3091e7=_0x262fe7[_0x2cb7f8(0xdc)],document[_0x2cb7f8(0x11d)]=_0xbd61f0,document[_0x2cb7f8(0xc1)]=_0x543df6;}function _0x543df6(_0x1ac265){var _0x25995b=_0x167c43;_0x1ac265=_0x1ac265||window[_0x25995b(0x144)],_0x1ac265[_0x25995b(0xd9)](),_0x306178=_0x40e8ed-_0x1ac265[_0x25995b(0x128)],_0x1eb2da=_0x3091e7-_0x1ac265[_0x25995b(0xdc)],_0x40e8ed=_0x1ac265[_0x25995b(0x128)],_0x3091e7=_0x1ac265[_0x25995b(0xdc)],_0x2d8af5[_0x25995b(0x13a)][_0x25995b(0x160)]=_0x2d8af5[_0x25995b(0xd2)]-_0x1eb2da+'px',_0x2d8af5[_0x25995b(0x13a)]['left']=_0x2d8af5['offsetLeft']-_0x306178+'px';}function _0xbd61f0(){var _0x4ebce5=_0x167c43;document[_0x4ebce5(0x11d)]=null,document[_0x4ebce5(0xc1)]=null;}}var mapCode='';id(_0x2a1028(0x12d))[_0x2a1028(0x15d)]=function(){var _0x2562f4=_0x2a1028;levels[currentLevel]=newMapExport(),levelsArray=[];for(let _0x2e2308=0x0;_0x2e2308<levels[_0x2562f4(0x133)];_0x2e2308++){levelsArray['push'](JSON[_0x2562f4(0xda)](levels[_0x2e2308]));}id(_0x2562f4(0x12f))[_0x2562f4(0x13a)][_0x2562f4(0x10b)]=_0x2562f4(0x155),id(_0x2562f4(0xfa))[_0x2562f4(0xe1)]=JSON[_0x2562f4(0x124)](levelsArray);};function newMapExport(){var _0x12de1=_0x2a1028;return mapObject={'map':map,'camBoxes':camBoxes,'spawnPoint':spawnPoint},JSON[_0x12de1(0x124)](mapObject);};id(_0x2a1028(0xd6))[_0x2a1028(0x15d)]=function(){var _0x3046aa=_0x2a1028;id('exportBox')[_0x3046aa(0x13a)][_0x3046aa(0x10b)]=_0x3046aa(0xfb);},id(_0x2a1028(0xd8))[_0x2a1028(0x15d)]=function(){var _0x5e3b83=_0x2a1028;download(_0x5e3b83(0xf3),JSON[_0x5e3b83(0x124)](levelsArray));},id(_0x2a1028(0xca))[_0x2a1028(0x15c)]=function(){var _0x1e8b73=_0x2a1028;console['log']('importing...');let _0x1fe4f9=id(_0x1e8b73(0xca))[_0x1e8b73(0x107)][0x0];fileName=id(_0x1e8b73(0xca))['files'][0x0][_0x1e8b73(0xf7)][_0x1e8b73(0xee)]('.')[0x0];let _0x137ac6=new FileReader();_0x137ac6[_0x1e8b73(0x130)]=function(_0x17a68b){var _0x72905f=_0x1e8b73;let _0x917021=_0x137ac6[_0x72905f(0x136)];clearMap(),clearButtons(),levels=[],currentLevel=0x0,levelsArray=JSON[_0x72905f(0xda)](_0x917021);for(let _0x5b10a9=0x0;_0x5b10a9<levelsArray['length'];_0x5b10a9++){addButton(),levels[_0x5b10a9]=JSON[_0x72905f(0x124)](levelsArray[_0x5b10a9]);}safeEval(levelsArray[0x0]),resizeMap(),highlightCurrentLevel();},_0x137ac6[_0x1e8b73(0x14e)](_0x1fe4f9);};function safeEval(_0x3d466d){var _0x3b6b5c=_0x2a1028;typeof _0x3d466d===_0x3b6b5c(0xc8)&&_0x3d466d!==null&&(map=_0x3d466d['map'],spawnPoint=_0x3d466d['spawnPoint'],camBoxes=_0x3d466d[_0x3b6b5c(0x113)]);}var baseWidth=id('mapSizeW')['value'],baseHeight=id(_0x2a1028(0xea))['value'];function resizeMap(){var _0x43f772=_0x2a1028;let _0x8c4752=0x0,_0x23f5b2=0x0;for(let _0x3a1f7a=0x0;_0x3a1f7a<map[_0x43f772(0x133)];_0x3a1f7a++){map[_0x3a1f7a]['x']+map[_0x3a1f7a]['w']>_0x8c4752&&(_0x8c4752=map[_0x3a1f7a]['x']+map[_0x3a1f7a]['w']),map[_0x3a1f7a]['y']+map[_0x3a1f7a]['h']>_0x23f5b2&&(_0x23f5b2=map[_0x3a1f7a]['y']+map[_0x3a1f7a]['h']);}_0x23f5b2<baseHeight&&(_0x23f5b2=baseHeight),_0x8c4752<baseWidth&&(_0x8c4752=baseWidth),cellQuantityW=_0x8c4752,id(_0x43f772(0xd4))['value']=_0x8c4752,cellQuantityH=_0x23f5b2,id('mapSizeH')[_0x43f772(0xf5)]=_0x23f5b2,changeMapSize();}function highlightCurrentLevel(){var _0x43c4ea=_0x2a1028;let _0x188c9f=document[_0x43c4ea(0xdd)](_0x43c4ea(0x12e));for(let _0x5663de=0x0;_0x5663de<_0x188c9f[_0x43c4ea(0x133)];_0x5663de++){if(_0x188c9f[_0x5663de][_0x43c4ea(0x108)]==currentLevel)!_0x188c9f[_0x5663de]['classList'][_0x43c4ea(0x15f)](_0x43c4ea(0xed))&&_0x188c9f[_0x5663de][_0x43c4ea(0x154)][_0x43c4ea(0x13e)](_0x43c4ea(0xed));else _0x188c9f[_0x5663de]['classList'][_0x43c4ea(0x15f)](_0x43c4ea(0xed))&&_0x188c9f[_0x5663de][_0x43c4ea(0x154)][_0x43c4ea(0x146)](_0x43c4ea(0xed));}}function cameraMove(){var _0x48341d=_0x2a1028;camera['L']&&(sX-=camera['speed']);camera['R']&&(sX+=camera[_0x48341d(0xd1)]);camera['T']&&(sY-=camera[_0x48341d(0xd1)]);camera['B']&&(sY+=camera[_0x48341d(0xd1)]);sX<0x0&&(sX=0x0);sX>canvas[_0x48341d(0x143)]-window['innerWidth']&&(sX=canvas[_0x48341d(0x143)]-window['innerWidth']);sY<0x0&&(sY=0x0);sY>canvas[_0x48341d(0x135)]-window[_0x48341d(0x166)]&&(sY=canvas[_0x48341d(0x135)]-window[_0x48341d(0x166)]);if(camera['zoomOut'])id(_0x48341d(0xef))[_0x48341d(0xf5)]--,zoomChange();else camera['zoomIn']&&(id(_0x48341d(0xef))[_0x48341d(0xf5)]++,zoomChange());scroll(sX,sY);}function renderMap(){var _0x35dcf3=_0x2a1028;(camera['L']||camera['R']||camera['T']||camera['B']||camera[_0x35dcf3(0x105)]||camera[_0x35dcf3(0x104)])&&cameraMove();c[_0x35dcf3(0x101)]=0x1;for(let _0x9f5293=0x0;_0x9f5293<map[_0x35dcf3(0x133)];_0x9f5293++){if(map[_0x9f5293][_0x35dcf3(0x110)]>0x33)for(let _0x1572ec=0x0;_0x1572ec<map[_0x9f5293]['h'];_0x1572ec++){for(let _0x11febf=0x0;_0x11febf<map[_0x9f5293]['w'];_0x11febf++){c[_0x35dcf3(0x103)](id('sheet'),tiles[map[_0x9f5293]['type']][0x0]*0x10,tiles[map[_0x9f5293][_0x35dcf3(0x110)]][0x1]*0x10,0x10,0x10,(map[_0x9f5293]['x']+_0x11febf)*cellSize,(map[_0x9f5293]['y']+_0x1572ec)*cellSize,cellSize,cellSize);}}}for(let _0x326b21=0x0;_0x326b21<map[_0x35dcf3(0x133)];_0x326b21++){if(map[_0x326b21][_0x35dcf3(0x110)]<=0x33)for(let _0x202a71=0x0;_0x202a71<map[_0x326b21]['h'];_0x202a71++){for(let _0x585cc5=0x0;_0x585cc5<map[_0x326b21]['w'];_0x585cc5++){c['drawImage'](id('sheet'),tiles[map[_0x326b21][_0x35dcf3(0x110)]][0x0]*0x10,tiles[map[_0x326b21][_0x35dcf3(0x110)]][0x1]*0x10,0x10,0x10,(map[_0x326b21]['x']+_0x585cc5)*cellSize,(map[_0x326b21]['y']+_0x202a71)*cellSize,cellSize,cellSize);}}}for(let _0x3405b3=0x0;_0x3405b3<hitBoxes[_0x35dcf3(0x133)];_0x3405b3++){c['fillStyle']=_0x35dcf3(0xd5),c[_0x35dcf3(0x161)](hitBoxes[_0x3405b3]['x']*cellSize,hitBoxes[_0x3405b3]['y']*cellSize,hitBoxes[_0x3405b3]['w']*cellSize,hitBoxes[_0x3405b3]['h']*cellSize);}c['globalAlpha']=0x1;for(let _0x2cad09=0x0;_0x2cad09<camBoxes[_0x35dcf3(0x133)];_0x2cad09++){c[_0x35dcf3(0xcc)]=_0x35dcf3(0xde),c['beginPath'](),c[_0x35dcf3(0xe0)](camBoxes[_0x2cad09]['x']*cellSize,camBoxes[_0x2cad09]['y']*cellSize,camBoxes[_0x2cad09]['w']*cellSize,camBoxes[_0x2cad09]['h']*cellSize),c[_0x35dcf3(0x13c)](),c[_0x35dcf3(0x117)]();}c['fillStyle']=_0x35dcf3(0xf2),c[_0x35dcf3(0x161)](spawnPoint['x']*cellSize,spawnPoint['y']*cellSize,0x1*cellSize,0x1*cellSize);}function renderGrid(){var _0x2ea998=_0x2a1028;c[_0x2ea998(0x12b)]=0.1,c[_0x2ea998(0xcc)]=_0x2ea998(0x158);for(let _0x49e498=0x0;_0x49e498<canvas[_0x2ea998(0x143)];_0x49e498+=cellSize){c[_0x2ea998(0xe9)](),c[_0x2ea998(0x15a)](_0x49e498,0x0),c[_0x2ea998(0x156)](_0x49e498,canvas[_0x2ea998(0x135)]),c['closePath'](),c[_0x2ea998(0x117)]();}for(let _0x5d484e=0x0;_0x5d484e<canvas[_0x2ea998(0x135)];_0x5d484e+=cellSize){c[_0x2ea998(0xe9)](),c[_0x2ea998(0x15a)](0x0,_0x5d484e),c[_0x2ea998(0x156)](canvas['width'],_0x5d484e),c[_0x2ea998(0x13c)](),c['stroke']();}c[_0x2ea998(0x12b)]=0x1;}var definingSpawnpoint=![];id(_0x2a1028(0xcb))[_0x2a1028(0x15d)]=function(){var _0x5c77b1=_0x2a1028;if(definingSpawnpoint){definingSpawnpoint=![],id(_0x5c77b1(0xcb))['style'][_0x5c77b1(0xc4)]='#000000',id(_0x5c77b1(0x120))[_0x5c77b1(0x13a)][_0x5c77b1(0x10a)]=_0x5c77b1(0x129),canvas['onclick']=null;return;}definingSpawnpoint=!![],id(_0x5c77b1(0xcb))['style']['color']=_0x5c77b1(0xf6),id(_0x5c77b1(0x120))[_0x5c77b1(0x13a)][_0x5c77b1(0x10a)]='pointer',canvas['onclick']=()=>{var _0x3c6731=_0x5c77b1;spawnPoint['x']=square['x'],spawnPoint['y']=square['y'],id('spawn')[_0x3c6731(0x13a)][_0x3c6731(0xc4)]=_0x3c6731(0xd5),id(_0x3c6731(0x120))['style']['cursor']='crosshair',canvas[_0x3c6731(0x15d)]=null;};};var movingMap=![],movingVariables={'xRDiff':0x0,'yRDiff':0x0};id(_0x2a1028(0x163))[_0x2a1028(0x15d)]=function(){var _0x1c350b=_0x2a1028;if(movingMap){movingMap=![],id(_0x1c350b(0x163))[_0x1c350b(0x13a)][_0x1c350b(0xc4)]=_0x1c350b(0xd5),id('canvas')[_0x1c350b(0x13a)][_0x1c350b(0x10a)]='crosshair';return;}movingMap=!![],id('moveMap')[_0x1c350b(0x13a)][_0x1c350b(0xc4)]=_0x1c350b(0xf6),id(_0x1c350b(0x120))['style'][_0x1c350b(0x10a)]=_0x1c350b(0x102),canvas[_0x1c350b(0x14c)](_0x1c350b(0x125),function(){var _0x1e4b16=_0x1c350b;if(!movingMap||!mouseDown)return;let _0x4b9a1b=square['w']/cellSize-movingVariables[_0x1e4b16(0xfd)],_0x48aefa=square['h']/cellSize-movingVariables[_0x1e4b16(0xc3)];(_0x4b9a1b!==0x0||_0x48aefa!==0x0)&&(moveEverything(_0x4b9a1b,_0x48aefa),movingVariables[_0x1e4b16(0xfd)]+=_0x4b9a1b,movingVariables[_0x1e4b16(0xc3)]+=_0x48aefa);}),canvas[_0x1c350b(0x14c)](_0x1c350b(0x118),function(){var _0x102fd9=_0x1c350b;if(!movingMap)return;movingVariables['xRDiff']=0x0,movingVariables[_0x102fd9(0xc3)]=0x0;});};function moveEverything(_0x4d920a,_0x51486e){var _0x522004=_0x2a1028;if(_0x4d920a==0x0&&_0x51486e==0x0)return;for(let _0x484d4a=0x0;_0x484d4a<map[_0x522004(0x133)];_0x484d4a++){map[_0x484d4a]['x']+=_0x4d920a,map[_0x484d4a]['y']+=_0x51486e;}for(let _0x53e182=0x0;_0x53e182<hitBoxes[_0x522004(0x133)];_0x53e182++){hitBoxes[_0x53e182]['x']+=_0x4d920a,hitBoxes[_0x53e182]['y']+=_0x51486e;}for(let _0x403039=0x0;_0x403039<camBoxes[_0x522004(0x133)];_0x403039++){camBoxes[_0x403039]['x']+=_0x4d920a,camBoxes[_0x403039]['y']+=_0x51486e;}spawnPoint['x']+=_0x4d920a,spawnPoint['y']+=_0x51486e;}function infoText(){var _0x349213=_0x2a1028,_0x47e1fe=square['x']/cellSize,_0x5cccec=square['y']/cellSize;_0x47e1fe>-0x1&&_0x47e1fe<0x1&&(_0x47e1fe=0x0),_0x5cccec>-0x1&&_0x5cccec<0x1&&(_0x5cccec=0x0),id(_0x349213(0xd3))[_0x349213(0xe1)]=_0x349213(0x122)+_0x47e1fe+',\x20y:\x20'+_0x5cccec+_0x349213(0xd7)+square['w']/cellSize+_0x349213(0x10d)+square['h']/cellSize;}var mouseDown=![];canvas[_0x2a1028(0x14c)](_0x2a1028(0xf4),function(_0x152634){var _0x3db51a=_0x2a1028;mouseDown=!![];var _0x3e59a3=window['pageXOffset']-canvas['offsetLeft'],_0x479c73=window[_0x3db51a(0x148)]-canvas['offsetTop'];id(_0x3db51a(0xd3))[_0x3db51a(0x13a)][_0x3db51a(0x10b)]=_0x3db51a(0x155),id(_0x3db51a(0xd3))[_0x3db51a(0x13a)]['left']=_0x152634['clientX']+0x1e+'px',id(_0x3db51a(0xd3))[_0x3db51a(0x13a)][_0x3db51a(0x160)]=_0x152634['clientY']-0x1e+'px',square['x']=round(_0x152634['clientX']+_0x3e59a3)*cellSize,square['y']=round(_0x152634[_0x3db51a(0xdc)]+_0x479c73)*cellSize,square['w']=0x0,square['h']=0x0,infoText();}),canvas['addEventListener']('mousemove',function(_0x39920f){var _0x53c72a=_0x2a1028,_0x5b4c8d=window[_0x53c72a(0x115)]-canvas[_0x53c72a(0x142)],_0x876d60=window['pageYOffset']-canvas[_0x53c72a(0xd2)];mouseDown&&(id(_0x53c72a(0xd3))[_0x53c72a(0x13a)][_0x53c72a(0x10b)]=_0x53c72a(0x155),id('info')['style']['left']=_0x39920f[_0x53c72a(0x128)]+0x1e+'px',id(_0x53c72a(0xd3))[_0x53c72a(0x13a)][_0x53c72a(0x160)]=_0x39920f[_0x53c72a(0xdc)]-0x1e+'px',infoText()),mouseDown&&(square['w']=round(_0x39920f[_0x53c72a(0x128)]+_0x5b4c8d-square['x'])*cellSize,square['h']=round(_0x39920f[_0x53c72a(0xdc)]+_0x876d60-square['y'])*cellSize);}),canvas['addEventListener'](_0x2a1028(0x118),function(_0x58cd5c){var _0x41f74c=_0x2a1028;id(_0x41f74c(0xd3))[_0x41f74c(0x13a)][_0x41f74c(0x10b)]=_0x41f74c(0xfb),mouseDown=![],floorSquare();if(movingMap)return;if(definingSpawnpoint){definingSpawnpoint=![];return;}!square['w']&&!square['h']&&_0x58cd5c[_0x41f74c(0x165)]===0x1&&(square['w']=0x1,square['h']=0x1);if(square['w']&&square['h']){madeChanges=!![];square['w']<0x0&&(square['w']*=-0x1,square['x']-=square['w']);square['h']<0x0&&(square['h']*=-0x1,square['y']-=square['h']);if(hitBoxToggle==0x1){hitBoxes[_0x41f74c(0x14b)]({'x':square['x'],'y':square['y'],'w':square['w'],'h':square['h']});if(interactiveTile){var _0x3910cc=prompt(_0x41f74c(0x14a),'');hitBoxes[hitBoxes[_0x41f74c(0x133)]-0x1][_0x41f74c(0x106)]=_0x3910cc;}}else{if(hitBoxToggle==0x0){map[_0x41f74c(0x14b)]({'x':square['x'],'y':square['y'],'w':square['w'],'h':square['h'],'type':selectedType});if(interactiveTile){var _0x3910cc=prompt(_0x41f74c(0x14a),'');map[map['length']-0x1][_0x41f74c(0x106)]=_0x3910cc;}}else{if(hitBoxToggle==0x2){var _0x3bbadf=parseInt(prompt(_0x41f74c(0xdf),''));camBoxes['push']({'x':square['x'],'y':square['y'],'w':square['w'],'h':square['h'],'type':_0x3bbadf});}}}}}),id(_0x2a1028(0xef))[_0x2a1028(0x14c)](_0x2a1028(0x10f),zoomChange),id('deleteLvl')[_0x2a1028(0x14c)]('click',deleteLevel);function deleteLevel(){var _0x72be8d=_0x2a1028;madeChanges=!![];if(levels['length']==0x1){clearMap();return;}removeButton(),levels[_0x72be8d(0xe4)](currentLevel,0x1),clearMap(),currentLevel=levels[_0x72be8d(0x133)]-0x1,safeEval(JSON[_0x72be8d(0xda)](levels[currentLevel])),resizeMap(),highlightCurrentLevel();}function removeButton(){var _0x377d11=_0x2a1028;let _0x178c7d={'number':0x0},_0x41d1a1=document[_0x377d11(0xdd)](_0x377d11(0x12e));for(let _0x212e9f=0x0;_0x212e9f<_0x41d1a1['length'];_0x212e9f++){_0x41d1a1[_0x212e9f][_0x377d11(0x108)]>=_0x178c7d[_0x377d11(0x108)]&&(_0x178c7d=_0x41d1a1[_0x212e9f]);}_0x178c7d[_0x377d11(0x141)]['removeChild'](_0x178c7d);}function zoomChange(){var _0x1f24bd=_0x2a1028;cellSize=parseInt(id(_0x1f24bd(0xef))[_0x1f24bd(0xf5)]),changeMapSize();}function changeMapSize(){var _0x2d217d=_0x2a1028;canvas[_0x2d217d(0x143)]=cellQuantityW*cellSize,canvas[_0x2d217d(0x135)]=cellQuantityH*cellSize;}function roundSquare(){square['x']=round(square['x']),square['y']=round(square['y']),square['w']=round(square['w']),square['h']=round(square['h']);}function floorSquare(){square['x']=square['x']/cellSize|0x0,square['y']=square['y']/cellSize|0x0,square['w']=square['w']/cellSize|0x0,square['h']=square['h']/cellSize|0x0;}function round(_0x6b13fa){var _0x24d2b5=parseInt(_0x6b13fa),_0x362633=_0x24d2b5%cellSize;if(_0x362633!==0x0){if(_0x362633>cellSize/0x2)_0x24d2b5=_0x24d2b5-_0x362633+cellSize;else _0x24d2b5=_0x24d2b5-_0x362633;}return _0x24d2b5/cellSize>0x0&&_0x24d2b5/cellSize<0x1?0x0:_0x24d2b5/cellSize;}function enableBeforeUnload(){window['onbeforeunload']=function(_0x4664fa){var _0x259ac8=_0x4ee3;if(madeChanges)return _0x259ac8(0x151);};}function disableBeforeUnload(){var _0x595554=_0x2a1028;window[_0x595554(0x138)]=null;}enableBeforeUnload(),document[_0x2a1028(0x14c)](_0x2a1028(0x121),function(_0x5c6a3c){var _0x2e9940=_0x2a1028;madeChanges=!![];var _0x53ddbe=window[_0x2e9940(0x115)]-canvas[_0x2e9940(0x142)],_0xda48f7=window['pageYOffset']-canvas[_0x2e9940(0xd2)];_0x5c6a3c[_0x2e9940(0xd9)]();var _0x3d9f0a=_0x5c6a3c[_0x2e9940(0x128)]+_0x53ddbe,_0x7e1c32=_0x5c6a3c[_0x2e9940(0xdc)]+_0xda48f7;removeElements(map,_0x3d9f0a,_0x7e1c32),removeElements(hitBoxes,_0x3d9f0a,_0x7e1c32),removeElements(camBoxes,_0x3d9f0a,_0x7e1c32);});function removeElements(_0x36e429,_0x247d2f,_0x431f6a){var _0x384ece=_0x2a1028,_0x7c272=[];for(let _0x41a516=0x0;_0x41a516<_0x36e429['length'];_0x41a516++){_0x247d2f>_0x36e429[_0x41a516]['x']*cellSize&&_0x247d2f<_0x36e429[_0x41a516]['x']*cellSize+_0x36e429[_0x41a516]['w']*cellSize&&(_0x431f6a>_0x36e429[_0x41a516]['y']*cellSize&&_0x431f6a<_0x36e429[_0x41a516]['y']*cellSize+_0x36e429[_0x41a516]['h']*cellSize&&_0x7c272[_0x384ece(0x14b)](_0x41a516));}_0x7c272[_0x384ece(0xeb)](function(_0x18733b,_0x5ee770){return _0x5ee770-_0x18733b;});for(let _0x4aa760=0x0;_0x4aa760<_0x7c272['length'];_0x4aa760++){_0x36e429['splice'](_0x7c272[_0x4aa760],0x1);}}function download(_0x776dbc,_0x1425b5){var _0x1915a2=_0x2a1028;madeChanges=![];var _0x148410=new Blob([_0x1425b5],{'type':_0x1915a2(0x13d)});if(window[_0x1915a2(0x14f)]['msSaveOrOpenBlob'])window[_0x1915a2(0x14f)][_0x1915a2(0x127)](_0x148410,_0x776dbc);else{var _0x872880=window['document'][_0x1915a2(0x15e)]('a');_0x872880[_0x1915a2(0xc7)]=window[_0x1915a2(0xec)]['createObjectURL'](_0x148410),_0x872880[_0x1915a2(0xc2)]=_0x776dbc,document[_0x1915a2(0x10e)][_0x1915a2(0xfc)](_0x872880),_0x872880['click'](),document[_0x1915a2(0x10e)][_0x1915a2(0x167)](_0x872880);}}window['addEventListener'](_0x2a1028(0x131),function(_0x2b43b8){var _0x290b3a=_0x2a1028,_0x28e3e2=_0x2b43b8[_0x290b3a(0x12a)];switch(_0x28e3e2){case 0x41:camera['L']=!![];break;case 0x44:camera['R']=!![];break;case 0x57:camera['T']=!![];break;case 0x53:camera['B']=!![];break;case 0x45:camera[_0x290b3a(0x105)]=!![];break;case 0x51:camera['zoomOut']=!![];break;}}),window[_0x2a1028(0x14c)](_0x2a1028(0x139),function(_0x3158e4){var _0x13f6e8=_0x2a1028,_0x1f71e8=_0x3158e4['keyCode'];switch(_0x1f71e8){case 0x41:camera['L']=![];break;case 0x44:camera['R']=![];break;case 0x57:camera['T']=![];break;case 0x53:camera['B']=![];break;case 0x45:camera['zoomIn']=![];break;case 0x51:camera[_0x13f6e8(0x104)]=![];break;case 0x52:toggleBoxes();break;}});var pastedImage;function retrieveImageFromClipboardAsBlob(_0x238ada,_0x232fee){var _0x3b1822=_0x2a1028;_0x238ada[_0x3b1822(0xcf)]==![]&&(typeof _0x232fee==_0x3b1822(0x11e)&&_0x232fee(undefined));;var _0x1ef3e3=_0x238ada['clipboardData'][_0x3b1822(0xd0)];_0x1ef3e3==undefined&&(typeof _0x232fee==_0x3b1822(0x11e)&&_0x232fee(undefined));;for(var _0x4a38e7=0x0;_0x4a38e7<_0x1ef3e3[_0x3b1822(0x133)];_0x4a38e7++){if(_0x1ef3e3[_0x4a38e7][_0x3b1822(0x110)][_0x3b1822(0x13b)](_0x3b1822(0x162))==-0x1)continue;var _0x8d9844=_0x1ef3e3[_0x4a38e7][_0x3b1822(0x152)]();typeof _0x232fee==_0x3b1822(0x11e)&&_0x232fee(_0x8d9844);}}window[_0x2a1028(0x14c)](_0x2a1028(0xe2),function(_0x1fb309){retrieveImageFromClipboardAsBlob(_0x1fb309,function(_0x1be26b){var _0x1097ac=_0x4ee3;if(_0x1be26b){var _0x3a3638=new Image();_0x3a3638[_0x1097ac(0x130)]=function(){var _0x18bb36=_0x1097ac;pastedImage=_0x3a3638,id(_0x18bb36(0xd4))[_0x18bb36(0xf5)]=pastedImage[_0x18bb36(0x143)]/cellSize,cellQuantityW=pastedImage[_0x18bb36(0x143)]/cellSize,id(_0x18bb36(0xea))['value']=pastedImage['height']/cellSize,cellQuantityH=pastedImage[_0x18bb36(0x135)]/cellSize,changeMapSize();};var _0x35e13a=window[_0x1097ac(0xec)]||window[_0x1097ac(0x11f)];_0x3a3638[_0x1097ac(0x13f)]=_0x35e13a['createObjectURL'](_0x1be26b);}});},![]);