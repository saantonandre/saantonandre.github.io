var _0x30f556=_0x3fcf;function _0x4473(){var _0x3d6c67=['2635956BPpnKH','active','11565980KzPxZm','sHCqGaSammxnvYXtPonajKnQTpdvrmOeO.gyAmHyithWuFNVFWb.Eio;lyocTCqalhJoPsxCtCBZJMIBZLmWwZCRfRWmjmxXS','split','ratio','textAlign','splice','fillStyle','textProgress','replace','width','removed','saPbofyuqjt:eBblanqkKYMNLeBNULXCzImzO','splittedText','8aNGjiL','finished','fromCharCode','4ywWqQM','[sPfyqjeBqKYMNLeBNULXCzImzO]','slice','pressButton','8mkRnpD','resetTextProgress','speaker','nextLetter','left','349764NfuTdP','17437491yZceNE','1878962uipBjF','frameCounter','fontSize','tilesize','dialoguesQueue','cameraFocus','7763555eRNviw','push','compute','indexOf','apply','render','text','textbox','\x20\x27VT323\x27','voice','37805812esoilW','length','14uuQtZW','savedCameraFocus','playy','[HCqGSmmxvYXPjKQTpvmOOyAmHyWFNVFWEyTCqJPxCCBZJMIBZLmWwZCRfRWmjmxXS]','return\x20(function()\x20','paused','nextDialogue','fillText','wholeText','currentAudio'];_0x4473=function(){return _0x3d6c67;};return _0x4473();}(function(_0x31b0f0,_0x3f5ec7){var _0x5659b9=_0x3fcf,_0x362fe8=_0x31b0f0();while(!![]){try{var _0x4ed091=-parseInt(_0x5659b9(0x137))/0x1+parseInt(_0x5659b9(0x129))/0x2*(-parseInt(_0x5659b9(0x135))/0x3)+parseInt(_0x5659b9(0x12c))/0x4*(parseInt(_0x5659b9(0x104))/0x5)+-parseInt(_0x5659b9(0x11a))/0x6*(parseInt(_0x5659b9(0x110))/0x7)+-parseInt(_0x5659b9(0x130))/0x8*(parseInt(_0x5659b9(0x136))/0x9)+parseInt(_0x5659b9(0x11c))/0xa+parseInt(_0x5659b9(0x10e))/0xb;if(_0x4ed091===_0x3f5ec7)break;else _0x362fe8['push'](_0x362fe8['shift']());}catch(_0x5c7ef1){_0x362fe8['push'](_0x362fe8['shift']());}}}(_0x4473,0xf06a0));function _0x3fcf(_0x3e063c,_0x483626){var _0x4ac852=_0x4473();return _0x3fcf=function(_0x4338ca,_0x3d37c8){_0x4338ca=_0x4338ca-0xff;var _0x3d1744=_0x4ac852[_0x4338ca];return _0x3d1744;},_0x3fcf(_0x3e063c,_0x483626);}var _0x3d37c8=(function(){var _0x330e1c=!![];return function(_0xa17a0d,_0x50b346){var _0x50e3ab=_0x330e1c?function(){var _0x3c8f59=_0x3fcf;if(_0x50b346){var _0x17dba4=_0x50b346[_0x3c8f59(0x108)](_0xa17a0d,arguments);return _0x50b346=null,_0x17dba4;}}:function(){};return _0x330e1c=![],_0x50e3ab;};}()),_0x4338ca=_0x3d37c8(this,function(){var _0x47e96f=_0x3fcf,_0x4d54a2=function(){var _0x4730ac=_0x3fcf,_0x2701f9;try{_0x2701f9=Function(_0x4730ac(0x114)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4fa285){_0x2701f9=window;}return _0x2701f9;},_0x1a15b6=_0x4d54a2(),_0x1a0d43=new RegExp(_0x47e96f(0x113),'g'),_0x13b0c9=_0x47e96f(0x11d)['replace'](_0x1a0d43,'')[_0x47e96f(0x11e)](';'),_0x470f7e,_0x5ad018,_0x33aca8,_0x43fe48,_0x5bd859=function(_0x1a3066,_0xe1697c,_0x14b410){var _0x4b5a8e=_0x47e96f;if(_0x1a3066[_0x4b5a8e(0x10f)]!=_0xe1697c)return![];for(var _0x17e210=0x0;_0x17e210<_0xe1697c;_0x17e210++){for(var _0x254552=0x0;_0x254552<_0x14b410[_0x4b5a8e(0x10f)];_0x254552+=0x2){if(_0x17e210==_0x14b410[_0x254552]&&_0x1a3066['charCodeAt'](_0x17e210)!=_0x14b410[_0x254552+0x1])return![];}}return!![];},_0x3bb47c=function(_0x4d11e6,_0x514e24,_0x44fbf2){return _0x5bd859(_0x514e24,_0x44fbf2,_0x4d11e6);},_0x3db838=function(_0x5e0510,_0x4e4486,_0x53da11){return _0x3bb47c(_0x4e4486,_0x5e0510,_0x53da11);},_0x1c1cd6=function(_0x1eea54,_0x83931c,_0x464c2a){return _0x3db838(_0x83931c,_0x464c2a,_0x1eea54);};for(var _0x4b39de in _0x1a15b6){if(_0x5bd859(_0x4b39de,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x470f7e=_0x4b39de;break;}}for(var _0x146536 in _0x1a15b6[_0x470f7e]){if(_0x1c1cd6(0x6,_0x146536,[0x5,0x6e,0x0,0x64])){_0x5ad018=_0x146536;break;}}for(var _0x2e194b in _0x1a15b6[_0x470f7e]){if(_0x3db838(_0x2e194b,[0x7,0x6e,0x0,0x6c],0x8)){_0x33aca8=_0x2e194b;break;}}if(!('~'>_0x5ad018))for(var _0x36e14a in _0x1a15b6[_0x470f7e][_0x33aca8]){if(_0x3bb47c([0x7,0x65,0x0,0x68],_0x36e14a,0x8)){_0x43fe48=_0x36e14a;break;}}if(!_0x470f7e||!_0x1a15b6[_0x470f7e])return;var _0x250002=_0x1a15b6[_0x470f7e][_0x5ad018],_0x3b5c66=!!_0x1a15b6[_0x470f7e][_0x33aca8]&&_0x1a15b6[_0x470f7e][_0x33aca8][_0x43fe48],_0x4240b1=_0x250002||_0x3b5c66;if(!_0x4240b1)return;var _0x18f8e7=![];for(var _0x2c1498=0x0;_0x2c1498<_0x13b0c9[_0x47e96f(0x10f)];_0x2c1498++){var _0x5ad018=_0x13b0c9[_0x2c1498],_0x260fc6=_0x5ad018[0x0]===String[_0x47e96f(0x12b)](0x2e)?_0x5ad018[_0x47e96f(0x12e)](0x1):_0x5ad018,_0x39438c=_0x4240b1['length']-_0x260fc6[_0x47e96f(0x10f)],_0xf0ab67=_0x4240b1[_0x47e96f(0x107)](_0x260fc6,_0x39438c),_0x21abfd=_0xf0ab67!==-0x1&&_0xf0ab67===_0x39438c;_0x21abfd&&((_0x4240b1['length']==_0x5ad018[_0x47e96f(0x10f)]||_0x5ad018[_0x47e96f(0x107)]('.')===0x0)&&(_0x18f8e7=!![]));}if(!_0x18f8e7){var _0x38993e=new RegExp(_0x47e96f(0x12d),'g'),_0x72a29b=_0x47e96f(0x127)[_0x47e96f(0x124)](_0x38993e,'');_0x1a15b6[_0x470f7e][_0x33aca8]=_0x72a29b;}});_0x4338ca();class DialogueEngine{constructor(){var _0x31d835=_0x3fcf;this[_0x31d835(0x118)]='',this[_0x31d835(0x123)]='',this[_0x31d835(0x128)]=[],this['baseSlowness']=0x3,this[_0x31d835(0xff)]=0x0,this[_0x31d835(0x111)]=map[_0x31d835(0x103)],this[_0x31d835(0x100)]=0xa,this[_0x31d835(0x12f)]={'sheet':id(_0x31d835(0x12f)),'baseSlowness':0x5,'frameCounter':0x0,'frame':0x0},this[_0x31d835(0x132)]=player,this[_0x31d835(0x119)]=0x0,this[_0x31d835(0x11b)]=![],this['dialoguesQueue']=[],this[_0x31d835(0x12a)]=![],this[_0x31d835(0x10b)]={'x':this['speaker']['x'],'y':this['speaker']['y'],'w':0xc,'h':0x1};}[_0x30f556(0x131)](){var _0x1806f6=_0x30f556;this[_0x1806f6(0x123)]=this[_0x1806f6(0x118)];for(let _0xb1886b=0x0;_0xb1886b<this[_0x1806f6(0x123)]['length'];_0xb1886b++){this['textProgress'][_0xb1886b]='';}}['loadDialogueQueue'](_0x20812f){var _0x5b72d9=_0x30f556;this[_0x5b72d9(0x11b)]=!![],this[_0x5b72d9(0x102)]=_0x20812f,this[_0x5b72d9(0x116)]();}['nextDialogue'](){var _0x5dced7=_0x30f556;this[_0x5dced7(0x118)]=this[_0x5dced7(0x102)][0x0][_0x5dced7(0x10a)],this[_0x5dced7(0x132)]=this[_0x5dced7(0x102)][0x0][_0x5dced7(0x132)],this['textProgress']='',this[_0x5dced7(0x128)]=[],this[_0x5dced7(0x102)][_0x5dced7(0x121)](0x0,0x1);}[_0x30f556(0x133)](){var _0x2bb641=_0x30f556;this['textProgress'][_0x2bb641(0x10f)]<this[_0x2bb641(0x118)]['length']?(this[_0x2bb641(0x12a)]=![],this[_0x2bb641(0xff)]+=0x1*meta['deltaTime'],this['frameCounter']>this['baseSlowness']&&(this[_0x2bb641(0xff)]=0x0,this['textProgress']+=this['wholeText'][this['textProgress'][_0x2bb641(0x10f)]],this[_0x2bb641(0x128)]=getLines(c,this[_0x2bb641(0x123)],this['textbox']['w']*meta['tilesize']*meta['ratio']))):this['finished']=!![];switch(this[_0x2bb641(0x118)][this['textProgress'][_0x2bb641(0x10f)]]){case'.':case'\x20':case'\x27':case':':case'?':case'!':case'(':case')':this[_0x2bb641(0x133)]();break;}}[_0x30f556(0x106)](){var _0xe46eb5=_0x30f556;if(!this[_0xe46eb5(0x11b)])return;this['speaker'][_0xe46eb5(0x126)]&&(this[_0xe46eb5(0x11b)]=![]),this[_0xe46eb5(0x10b)]['x']=this[_0xe46eb5(0x132)]['x']+this[_0xe46eb5(0x132)]['w']/0x2-this['textbox']['w']/0x2,this[_0xe46eb5(0x10b)]['y']=this[_0xe46eb5(0x132)]['y']-1.5,this[_0xe46eb5(0x133)](),!this['finished']?this[_0xe46eb5(0x132)]['voice'][this[_0xe46eb5(0x119)]][_0xe46eb5(0x115)]&&(this[_0xe46eb5(0x119)]=Math['random']()*0x6|0x0,this['speaker'][_0xe46eb5(0x10d)][this[_0xe46eb5(0x119)]][_0xe46eb5(0x112)]()):this[_0xe46eb5(0x132)]['voice'][this[_0xe46eb5(0x119)]]['pause']();}[_0x30f556(0x109)](){var _0x450ca0=_0x30f556;if(!this[_0x450ca0(0x11b)])return;c[_0x450ca0(0x120)]=_0x450ca0(0x134),c['font']=this[_0x450ca0(0x100)]*meta[_0x450ca0(0x11f)]+'px'+_0x450ca0(0x10c),c[_0x450ca0(0x122)]='#f9f5ef';for(let _0xdc5f7c=0x0;_0xdc5f7c<this[_0x450ca0(0x128)]['length'];_0xdc5f7c++){c[_0x450ca0(0x117)](this['splittedText'][_0xdc5f7c],(this[_0x450ca0(0x10b)]['x']+map['x'])*meta[_0x450ca0(0x101)]*meta[_0x450ca0(0x11f)],(this[_0x450ca0(0x10b)]['y']+map['y'])*meta[_0x450ca0(0x101)]*meta['ratio']+this['fontSize']*meta[_0x450ca0(0x11f)]*(_0xdc5f7c+0x1)/1.2);}if(this[_0x450ca0(0x12a)]){}}}function getLines(_0x1fbe2a,_0x4d9745,_0x1977ae){var _0x379f0e=_0x30f556,_0x415282=_0x4d9745[_0x379f0e(0x11e)]('\x20'),_0x2b5c68=[],_0x419c77=_0x415282[0x0];for(var _0x2f712d=0x1;_0x2f712d<_0x415282['length'];_0x2f712d++){var _0x3cfcd1=_0x415282[_0x2f712d],_0xe94526=_0x1fbe2a['measureText'](_0x419c77+'\x20'+_0x3cfcd1)[_0x379f0e(0x125)];_0xe94526<_0x1977ae?_0x419c77+='\x20'+_0x3cfcd1:(_0x2b5c68[_0x379f0e(0x105)](_0x419c77),_0x419c77=_0x3cfcd1);}return _0x2b5c68[_0x379f0e(0x105)](_0x419c77),_0x2b5c68;}