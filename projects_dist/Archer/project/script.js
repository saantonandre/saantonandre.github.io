'strict';const _0x2bbabf=_0x3b7c;(function(_0x9061a8,_0x5e0acf){const _0x2c6693=_0x3b7c,_0x7fdada=_0x9061a8();while(!![]){try{const _0x5ab808=-parseInt(_0x2c6693(0x10b))/0x1*(parseInt(_0x2c6693(0x124))/0x2)+-parseInt(_0x2c6693(0x14a))/0x3+parseInt(_0x2c6693(0xe0))/0x4*(-parseInt(_0x2c6693(0x120))/0x5)+parseInt(_0x2c6693(0x143))/0x6*(-parseInt(_0x2c6693(0xe3))/0x7)+parseInt(_0x2c6693(0xff))/0x8+parseInt(_0x2c6693(0xc9))/0x9*(-parseInt(_0x2c6693(0x125))/0xa)+parseInt(_0x2c6693(0xd4))/0xb*(parseInt(_0x2c6693(0x149))/0xc);if(_0x5ab808===_0x5e0acf)break;else _0x7fdada['push'](_0x7fdada['shift']());}catch(_0x4216b5){_0x7fdada['push'](_0x7fdada['shift']());}}}(_0x187d,0x5f1a6));var mousePP={'x':0x0,'y':0x0},fps=0x0;const DEBUG=![],CANVAS=id(_0x2bbabf(0x107)),TILESIZE=0x20;var gamePaused=![],visualFxs=[],TilesData=[],playerArrows=[],monsters=[],c=CANVAS[_0x2bbabf(0x130)]('2d');CANVAS[_0x2bbabf(0x133)]=0x2e0,CANVAS[_0x2bbabf(0xe6)]=0x1e0,CANVAS['style']['left']=(window['innerWidth']-CANVAS[_0x2bbabf(0x133)])/0x2+'px',CANVAS['style'][_0x2bbabf(0xc2)]=(window['innerHeight']-CANVAS['height'])/0x2+'px',c[_0x2bbabf(0xa8)]=![];var generatedSquare={'x':0x0,'y':0x0,'w':0x0,'h':0x0};function id(_0xd5a7e9){const _0x18a5df=_0x2bbabf,_0x40299b=(function(){let _0x40e18f=!![];return function(_0x1c4f60,_0x393134){const _0x466d49=_0x40e18f?function(){const _0x51b945=_0x3b7c;if(_0x393134){const _0x203309=_0x393134[_0x51b945(0x9a)](_0x1c4f60,arguments);return _0x393134=null,_0x203309;}}:function(){};return _0x40e18f=![],_0x466d49;};}()),_0x417661=_0x40299b(this,function(){const _0x9c7f07=_0x3b7c;let _0xb4301f;try{const _0xce0388=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xb4301f=_0xce0388();}catch(_0x3ebb3f){_0xb4301f=window;}const _0x1f9e3c=new RegExp('[LYUSZLMBQwfLHBFAPwCyjEQRJKjOpQYDvECRzZHVZfQApxCWjBXPzWwNYOAYzKZmU]','g'),_0x538325=_0x9c7f07(0x136)[_0x9c7f07(0xea)](_0x1f9e3c,'')['split'](';');let _0x2260e4,_0x2bd732,_0x368f06,_0x224fc6;const _0x17be29=function(_0x2a618e,_0x215642,_0x20f9b5){const _0x1d84ba=_0x9c7f07;if(_0x2a618e[_0x1d84ba(0xb8)]!=_0x215642)return![];for(let _0x356dfd=0x0;_0x356dfd<_0x215642;_0x356dfd++){for(let _0x5b9e9d=0x0;_0x5b9e9d<_0x20f9b5[_0x1d84ba(0xb8)];_0x5b9e9d+=0x2){if(_0x356dfd==_0x20f9b5[_0x5b9e9d]&&_0x2a618e[_0x1d84ba(0xdc)](_0x356dfd)!=_0x20f9b5[_0x5b9e9d+0x1])return![];}}return!![];},_0x2ee441=function(_0x4d771e,_0x559112,_0x3f9931){return _0x17be29(_0x559112,_0x3f9931,_0x4d771e);},_0x287a1a=function(_0x1ea38d,_0x4f41ca,_0x3bf362){return _0x2ee441(_0x4f41ca,_0x1ea38d,_0x3bf362);},_0x36a49e=function(_0x4c4d8f,_0x2c53f5,_0x32e7a3){return _0x287a1a(_0x2c53f5,_0x32e7a3,_0x4c4d8f);};for(let _0x483ec1 in _0xb4301f){if(_0x17be29(_0x483ec1,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x2260e4=_0x483ec1;break;}}for(let _0x4de521 in _0xb4301f[_0x2260e4]){if(_0x36a49e(0x6,_0x4de521,[0x5,0x6e,0x0,0x64])){_0x2bd732=_0x4de521;break;}}for(let _0x14a09d in _0xb4301f[_0x2260e4]){if(_0x287a1a(_0x14a09d,[0x7,0x6e,0x0,0x6c],0x8)){_0x368f06=_0x14a09d;break;}}if(!('~'>_0x2bd732))for(let _0xd877b8 in _0xb4301f[_0x2260e4][_0x368f06]){if(_0x2ee441([0x7,0x65,0x0,0x68],_0xd877b8,0x8)){_0x224fc6=_0xd877b8;break;}}if(!_0x2260e4||!_0xb4301f[_0x2260e4])return;const _0x53624c=_0xb4301f[_0x2260e4][_0x2bd732],_0x2342cd=!!_0xb4301f[_0x2260e4][_0x368f06]&&_0xb4301f[_0x2260e4][_0x368f06][_0x224fc6],_0x192250=_0x53624c||_0x2342cd;if(!_0x192250)return;let _0x3c6348=![];for(let _0x29fdd6=0x0;_0x29fdd6<_0x538325[_0x9c7f07(0xb8)];_0x29fdd6++){const _0x1e56c4=_0x538325[_0x29fdd6],_0x106f41=_0x1e56c4[0x0]===String[_0x9c7f07(0xaa)](0x2e)?_0x1e56c4[_0x9c7f07(0xdb)](0x1):_0x1e56c4,_0x45fc3e=_0x192250['length']-_0x106f41['length'],_0x198bb4=_0x192250[_0x9c7f07(0xe1)](_0x106f41,_0x45fc3e),_0x4b188e=_0x198bb4!==-0x1&&_0x198bb4===_0x45fc3e;_0x4b188e&&((_0x192250[_0x9c7f07(0xb8)]==_0x1e56c4[_0x9c7f07(0xb8)]||_0x1e56c4[_0x9c7f07(0xe1)]('.')===0x0)&&(_0x3c6348=!![]));}if(!_0x3c6348){const _0x2bafd9=new RegExp(_0x9c7f07(0xb3),'g'),_0x4168d6=_0x9c7f07(0x102)['replace'](_0x2bafd9,'');_0xb4301f[_0x2260e4][_0x368f06]=_0x4168d6;}});return _0x417661(),document[_0x18a5df(0xa3)](_0xd5a7e9);}function _0x187d(){const _0x14cf98=['left','then','92mRuXxK','6567830MURcUV','drawImage','arrowsArr','layout','save','framecounter','round','crop','./Archer.json','arrowCD','atkBox','getContext','color','<br>mouseTile.y\x20=\x20','width','drawBow','checkCollisions','saaLnYUStoZLnandMBrQewf.gLHBiFAPwtChub.yio;ljoEcalQRhosJKtjOpQYDvECRzZHVZfQApxCWjBXPzWwNYOAYzKZmU','properties','restore','critChance','justShot','justDamaged','speed','frameCounter','now','xRel','headX','hitbox','tiles','6pqMQxY','lengthY','fillStyle','hp-bar','atan2','active','50124RZxcsN','2315454tRCJzb','FPS:\x20','xVel','log','attacking','draw','apply','createGrid','keyup','vfxY','actionY','arrowCounter','Empty','projSpeed','FPS','getElementById','lineWidth','mpBar','beginPath','Start','imageSmoothingEnabled','attack','fromCharCode','arrow','<br>player.y\x20=\x20','sheet','#2f4447','#8b5851','collidable','counter','precision','[rCFWIMdIKveAgIizfCOdmIgyqDi]','mousedown','yVel','keydown','ended','length','translate','name','random','mousemove','sword','globalAlpha','yRel','bow','button','top','arrows','maxHp','offsetTop','yVelExt','shoot','keyCode','9VBeEEl','portrait','<br>mouseTile\x20id\x20=\x20','sin','rotate','grass','noArrows','type','centerY','lengthX','rClick','7546ZCEKHI','Goal','black','slowness','player','set','col','slice','charCodeAt','attacked','strokeStyle','toPrecision','3072tbVjUs','indexOf','abs','3472889hVSgST','unpassable','currentFrame','height','json','#ff8db5','pos','replace','hpBar','arrowsCount','shift','clearRect','vfxX','action','cos','radians','lClick','#ff0000','centerX','justDied','hole','headY','Obstacle','closePath','path','moveTo','preventDefault','radiansP','461040sAOLdy','xVelExt','onclick','arbCoutFW:blIMdanIKvkeAgIizfCOdmIgyqDi','innerHTML','maxMp','lineTo','points','canvas','stroke','<br>mouseTile.x\x20=\x20','center','12433DxoEHt','arrowSpeed','textAlign','followPlayer','free','hypot','oncontextmenu','mouseup','player.x\x20=\x20','push','stats','font','compute','damage','solid','dead','14px\x20Arial','actionX','addEventListener','colors','computeQuiver','240nIQDmp','friendly'];_0x187d=function(){return _0x14cf98;};return _0x187d();}var fpsDiv=id(_0x2bbabf(0xa2));setInterval(function(){const _0x49cc27=_0x2bbabf;fpsDiv[_0x49cc27(0x103)]=_0x49cc27(0x95)+fps,fpsDiv['innerHTML']+='<br>DTR:\x20'+DTR[_0x49cc27(0xdf)](0x3),fps=0x0;},0x3e8);var Mouse={'x':0x0,'y':0x0},screenShake={'x':0x0,'y':0x0,'counter':0x0,'set':function(){const _0x2bfcdb=_0x2bbabf;this['x']=Math[_0x2bfcdb(0xbb)]()*0x8-0x4|0x0,this['y']=Math['random']()*0x8-0x4|0x0;}};class Projectile{constructor(){const _0x2facaf=_0x2bbabf;this['x']=0x0,this['y']=0x0,this[_0x2facaf(0xb5)]=0x0,this[_0x2facaf(0x96)]=0x0,this[_0x2facaf(0x13f)]=0x0,this['yRel']=0x0,this['active']=!![],this[_0x2facaf(0x10f)]=!![],this['friendly']=!![],this[_0x2facaf(0xd2)]=0x0,this['lengthY']=0x0,this['damage']=0x1,this['color']=0x0,this[_0x2facaf(0x11e)]=[_0x2facaf(0xaf),_0x2facaf(0xe8)],this[_0x2facaf(0x106)]={'x':0x0,'y':0x0};}[_0x2bbabf(0x99)](){const _0x32b88e=_0x2bbabf;Math[_0x32b88e(0xe2)](this['xVel']*0x3)>Math[_0x32b88e(0xe2)](this[_0x32b88e(0xd2)])&&(this[_0x32b88e(0xd2)]=this[_0x32b88e(0x96)]*0x3,this[_0x32b88e(0x144)]=this[_0x32b88e(0xb5)]*0x3),this[_0x32b88e(0x106)]['x']=this['x']+this[_0x32b88e(0xd2)],this[_0x32b88e(0x106)]['y']=this['y']+this[_0x32b88e(0x144)],c[_0x32b88e(0xfc)](this['x']+map['x'],this['y']+map['y']),c[_0x32b88e(0x105)](this['x']+this['lengthX']+map['x'],this['y']+this[_0x32b88e(0x144)]+map['y']);}['compute'](){const _0x237df5=_0x2bbabf;this['x']+=this['xVel']/DTR,this['y']+=this['yVel']/DTR;if(getTileData(this['x'],this['y'])['solid'])visualFxs['push'](new Explosion(this['x']+this[_0x237df5(0x96)],this['y']+this[_0x237df5(0xb5)],this[_0x237df5(0x131)])),this['color']==0x2&&(screenShake[_0x237df5(0xb1)]=0x5),this[_0x237df5(0x96)]=0x0,this[_0x237df5(0xb5)]=0x0,this[_0x237df5(0xd2)]/=0x2,this[_0x237df5(0x144)]/=0x2,this['free']=![];else for(let _0x1bb643=monsters[_0x237df5(0xb8)]-0x1;_0x1bb643>=0x0;_0x1bb643--){let _0x29a427=monsters[_0x1bb643];!_0x29a427[_0x237df5(0x11a)]&&_0x29a427[_0x237df5(0xb0)]&&((pointSquareCol(this,_0x29a427)||pointSquareCol(this['points'],_0x29a427))&&(this['active']=![],_0x29a427[_0x237df5(0x100)]=this[_0x237df5(0x96)]/0x2,_0x29a427[_0x237df5(0xc6)]=this[_0x237df5(0xb5)]/0x2,visualFxs[_0x237df5(0x114)](new Explosion(this['x'],this['y'],this[_0x237df5(0x131)])),this[_0x237df5(0x131)]==0x2&&(screenShake[_0x237df5(0xb1)]=0x5),this[_0x237df5(0x96)]=0x0,this['yVel']=0x0,this[_0x237df5(0x13f)]=this['x']-_0x29a427['x'],this[_0x237df5(0xbf)]=this['y']-_0x29a427['y'],_0x29a427[_0x237df5(0xc3)][_0x237df5(0x114)](this),_0x29a427['hp']-=this['damage'],_0x29a427[_0x237df5(0x13b)]=0xf));}}}var enemyProjectiles=[];class EnemyProjectile{constructor(){const _0xa19d44=_0x2bbabf;this['x']=0x0,this['y']=0x0,this['w'],this['h'],this[_0xa19d44(0xb5)]=0x0,this[_0xa19d44(0x96)]=0x0,this[_0xa19d44(0x10f)]=!![],this[_0xa19d44(0x121)]=![],this[_0xa19d44(0xad)]=id('sheet'),this['actionX']=[0x5],this['actionY']=[0x18],this[_0xa19d44(0xd0)]=0x0,this[_0xa19d44(0x118)]=0x5;}[_0x2bbabf(0x117)](){const _0x21cbb1=_0x2bbabf;this['x']+=this[_0x21cbb1(0x96)]/DTR,this['y']+=this[_0x21cbb1(0xb5)]/DTR,getTileData(this['x'],this['y'])[_0x21cbb1(0x119)]?(enemyProjectiles['splice'](enemyProjectiles[_0x21cbb1(0xe1)](this),0x1),visualFxs['push'](new Explosion(this['x']+this['xVel'],this['y']+this['yVel'],0x1)),this[_0x21cbb1(0x96)]=0x0,this[_0x21cbb1(0xb5)]=0x0,this[_0x21cbb1(0xd2)]/=0x2,this[_0x21cbb1(0x144)]/=0x2,this[_0x21cbb1(0x10f)]=![]):pointSquareCol(this,player)&&(enemyProjectiles['splice'](enemyProjectiles[_0x21cbb1(0xe1)](this),0x1),player['xVelExt']+=this['xVel']/0x2,player[_0x21cbb1(0xc6)]+=this['yVel']/0x2,player['hp']-=this[_0x21cbb1(0x118)],visualFxs[_0x21cbb1(0x114)](new Explosion(this['x'],this['y'],0x1)),screenShake[_0x21cbb1(0xb1)]=0x5);}[_0x2bbabf(0x99)](){const _0x13e1ac=_0x2bbabf;c[_0x13e1ac(0x126)](this[_0x13e1ac(0xad)],this[_0x13e1ac(0x11c)][this[_0x13e1ac(0xd0)]]*TILESIZE,this[_0x13e1ac(0x9e)][this[_0x13e1ac(0xd0)]]*TILESIZE,TILESIZE,TILESIZE,this['x']-TILESIZE/0x2+map['x'],this['y']-TILESIZE/0x2+map['y'],TILESIZE,TILESIZE);}}class Explosion{constructor(_0x5e8768,_0x314988,_0x49f35a){const _0x10a26e=_0x2bbabf;this[_0x10a26e(0xad)]=id(_0x10a26e(0xad)),this['x']=_0x5e8768-0x10,this['y']=_0x314988-0x10,this['w']=0x20,this['h']=0x20,this[_0x10a26e(0x13d)]=0x0,this[_0x10a26e(0xe5)]=0x0,this[_0x10a26e(0xf0)]=_0x49f35a-0x1,this['actionX']=[[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0],[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0]],this['actionY']=[[0x0,0x20,0x40,0x60,0x80,0xa0],[0xc0,0xe0,0x100,0x120,0x140,0x160]],this[_0x10a26e(0xd7)]=0x4,this[_0x10a26e(0xb7)]=![];}[_0x2bbabf(0x99)](){const _0x3de9d3=_0x2bbabf;c['drawImage'](this[_0x3de9d3(0xad)],this[_0x3de9d3(0x11c)][this['action']][this[_0x3de9d3(0xe5)]],this[_0x3de9d3(0x9e)][this[_0x3de9d3(0xf0)]][this[_0x3de9d3(0xe5)]],TILESIZE,TILESIZE,this['x']+map['x'],this['y']+map['y'],this['w'],this['h']),this['frameCounter']++,this[_0x3de9d3(0x13d)]>this[_0x3de9d3(0xd7)]*DTR&&(this[_0x3de9d3(0x13d)]=0x0,this['currentFrame']++,this[_0x3de9d3(0xe5)]>this[_0x3de9d3(0x11c)][this[_0x3de9d3(0xf0)]][_0x3de9d3(0xb8)]-0x1&&(this[_0x3de9d3(0xb7)]=!![]));}}function _0x3b7c(_0x2ddc84,_0x377dea){const _0x529953=_0x187d();return _0x3b7c=function(_0xa2c762,_0x26915c){_0xa2c762=_0xa2c762-0x95;let _0x44e15f=_0x529953[_0xa2c762];return _0x44e15f;},_0x3b7c(_0x2ddc84,_0x377dea);}class Collidable{constructor(){}[_0x2bbabf(0x135)](){const _0x374010=_0x2bbabf;let _0x297cd3;this[_0x374010(0xda)]['T']=0x0,this['col']['B']=0x0,this['col']['L']=0x0,this['col']['R']=0x0,getTileData(this['x'],this['y'])[_0x374010(0xe4)]&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x297cd3=colCheck(this,generatedSquare),this['x']+=(this[_0x374010(0xda)]['L']-this[_0x374010(0xda)]['R'])/0x5/DTR,this['y']+=(this[_0x374010(0xda)]['T']-this['col']['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y'])[_0x374010(0xe4)]&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x297cd3=colCheck(this,generatedSquare),this['x']+=(this[_0x374010(0xda)]['L']-this[_0x374010(0xda)]['R'])/0x5/DTR,this['y']+=(this[_0x374010(0xda)]['T']-this[_0x374010(0xda)]['B'])/0x5/DTR),getTileData(this['x'],this['y']+this['h'])['unpassable']&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x297cd3=colCheck(this,generatedSquare),this['x']+=(this[_0x374010(0xda)]['L']-this['col']['R'])/0x5/DTR,this['y']+=(this[_0x374010(0xda)]['T']-this[_0x374010(0xda)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y']+this['h'])[_0x374010(0xe4)]&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x297cd3=colCheck(this,generatedSquare),this['x']+=(this[_0x374010(0xda)]['L']-this[_0x374010(0xda)]['R'])/0x5/DTR,this['y']+=(this[_0x374010(0xda)]['T']-this[_0x374010(0xda)]['B'])/0x5/DTR),this[_0x374010(0xda)]['B']&&(this[_0x374010(0xc6)]>0x0&&(this[_0x374010(0xc6)]*=-0.5)),this[_0x374010(0xda)]['T']&&(this[_0x374010(0xc6)]<0x0&&(this[_0x374010(0xc6)]*=-0.5)),this[_0x374010(0xda)]['R']&&(this[_0x374010(0x100)]>0x0&&(this['xVelExt']*=-0.5)),this[_0x374010(0xda)]['L']&&(this[_0x374010(0x100)]<0x0&&(this[_0x374010(0x100)]*=-0.5));}}class Player extends Collidable{constructor(_0x7d0c3a,_0x47416f){const _0x7d3e60=_0x2bbabf;super(Collidable),this['x']=_0x7d0c3a,this['y']=_0x47416f,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x7d3e60(0x13c)]=0x3,this[_0x7d3e60(0xb5)]=0x0,this['xVel']=0x0,this[_0x7d3e60(0xc6)]=0x0,this[_0x7d3e60(0x100)]=0x0,this['L']=![],this['R']=![],this['T']=![],this['B']=![],this[_0x7d3e60(0x10c)]=0xa,this[_0x7d3e60(0xf5)]=0x0,this[_0x7d3e60(0xd1)]=0x0,this[_0x7d3e60(0xda)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x7d3e60(0x11c)]=[0x0,0x20,0x40],this[_0x7d3e60(0x9e)]=[0x0,0x0,0x0],this[_0x7d3e60(0xf0)]=0x0,this[_0x7d3e60(0x13d)]=0x0,this[_0x7d3e60(0xd7)]=0x6,this[_0x7d3e60(0xf2)]=0x0,this[_0x7d3e60(0xbd)]=![],this[_0x7d3e60(0xb2)]=0x14,this[_0x7d3e60(0xcf)]=0x0,this[_0x7d3e60(0xdd)]=0x0,this[_0x7d3e60(0x127)]=[0x1,0x1,0x1,0x1,0x1],this[_0x7d3e60(0x12e)]=0x3c,this[_0x7d3e60(0x9f)]=0x0,this[_0x7d3e60(0xec)]=0x4,this['hp']=0x64,this[_0x7d3e60(0xc4)]=0x64,this['mp']=0x64,this[_0x7d3e60(0x104)]=0x64,this[_0x7d3e60(0x139)]=0.25,this[_0x7d3e60(0xc0)]={'active':![],'radians':0x0,'actionX':[0xc0,0xf0,0x120,0x150,0x180],'actionY':[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0],'frameCounter':0x0,'action':0x0,'slowness':0x4,'w':0x30,'h':0x30};}[_0x2bbabf(0x11f)](){const _0x15e9b6=_0x2bbabf;let _0x4ed463=!![],_0x54ddc7;for(_0x54ddc7=0x0;_0x54ddc7<this[_0x15e9b6(0x127)][_0x15e9b6(0xb8)];_0x54ddc7++){if(this[_0x15e9b6(0x127)][_0x54ddc7]===0x0){_0x4ed463=![];break;}}this[_0x15e9b6(0xec)]=_0x54ddc7;if(!_0x4ed463){this[_0x15e9b6(0x9f)]++;if(this[_0x15e9b6(0x9f)]>this[_0x15e9b6(0x12e)]*DTR)for(_0x54ddc7=0x0;_0x54ddc7<this[_0x15e9b6(0x127)][_0x15e9b6(0xb8)];_0x54ddc7++){if(this[_0x15e9b6(0x127)][_0x54ddc7]===0x0){Math['random']()<this['critChance']?this[_0x15e9b6(0x127)][_0x54ddc7]=0x2:this[_0x15e9b6(0x127)][_0x54ddc7]=0x1;this['arrowCounter']=0x0;break;}}}else this[_0x15e9b6(0x9f)]=0x0;}[_0x2bbabf(0x117)](){const _0x4efb74=_0x2bbabf;this[_0x4efb74(0x11f)](),this[_0x4efb74(0xf5)]=this['x']+this['w']/0x2,this['centerY']=this['y']+this['h']/0x2,this[_0x4efb74(0x135)]();Math[_0x4efb74(0xe2)](this['xVelExt'])>0.01?this['xVelExt']-=this[_0x4efb74(0x100)]*0.1/DTR:this['xVelExt']=0x0;Math[_0x4efb74(0xe2)](this[_0x4efb74(0xc6)])>0.01?this[_0x4efb74(0xc6)]-=this['yVelExt']*0.1/DTR:this['yVelExt']=0x0;this['L']&&this['T']||this['L']&&this['B']||this['R']&&this['T']||this['R']&&this['B']?this[_0x4efb74(0x13c)]=0x2:this[_0x4efb74(0x13c)]=0x3;this[_0x4efb74(0xf2)]=Math[_0x4efb74(0x147)](Mouse['y']-this['y']-this['h']/0x2,Mouse['x']-this['w']/0x2-this['x'])+Math['PI']/0x2;if(this['L'])this['xVel']=-this[_0x4efb74(0x13c)];else!this['R']&&(this[_0x4efb74(0x96)]=0x0);if(this['R'])this[_0x4efb74(0x96)]=this[_0x4efb74(0x13c)];else!this['L']&&(this[_0x4efb74(0x96)]=0x0);if(this['T'])this['yVel']=-this[_0x4efb74(0x13c)];else!this['B']&&(this[_0x4efb74(0xb5)]=0x0);if(this['B'])this['yVel']=this[_0x4efb74(0x13c)];else!this['T']&&(this[_0x4efb74(0xb5)]=0x0);this['x']+=(this['xVel']+this[_0x4efb74(0x100)])/DTR,this['y']+=(this[_0x4efb74(0xb5)]+this['yVelExt'])/DTR;}[_0x2bbabf(0x99)](){const _0x3352a8=_0x2bbabf;this[_0x3352a8(0x96)]===0x0&&this[_0x3352a8(0xb5)]===0x0?this[_0x3352a8(0xf0)]=0x0:(this[_0x3352a8(0x13d)]++,this['frameCounter']>=this[_0x3352a8(0xd7)]*DTR&&(this['action']++,this[_0x3352a8(0x13d)]=0x0,this[_0x3352a8(0xf0)]>=this[_0x3352a8(0x11c)][_0x3352a8(0xb8)]&&(this['action']=0x0))),c[_0x3352a8(0x129)](),c[_0x3352a8(0xb9)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x3352a8(0xcd)](this['radians']),c[_0x3352a8(0x126)](id(_0x3352a8(0xd8)),this[_0x3352a8(0x11c)][this[_0x3352a8(0xf0)]],this['actionY'][this[_0x3352a8(0xf0)]],TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c['restore'](),this[_0x3352a8(0xcf)]&&(c[_0x3352a8(0x126)](id(_0x3352a8(0xad)),0x40,0x80,0x10,0x10,this['x']+0x8+map['x'],this['y']-0x10+map['y'],0x10,0x10),this[_0x3352a8(0xcf)]--),this[_0x3352a8(0xc0)][_0x3352a8(0x148)]&&this[_0x3352a8(0x134)]();}[_0x2bbabf(0x134)](){const _0x664b68=_0x2bbabf;this['bow'][_0x664b68(0x13d)]++,this['bow'][_0x664b68(0x13d)]>=this[_0x664b68(0xc0)]['slowness']*DTR&&(this[_0x664b68(0xc0)]['action']++,this[_0x664b68(0xc0)][_0x664b68(0x13d)]=0x0,this[_0x664b68(0xc0)][_0x664b68(0x148)]>=this[_0x664b68(0xc0)][_0x664b68(0x11c)][_0x664b68(0xb8)]&&(this[_0x664b68(0xc0)][_0x664b68(0x148)]=![])),c['save'](),c[_0x664b68(0xb9)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c['rotate'](this[_0x664b68(0xf2)]),c[_0x664b68(0x126)](id(_0x664b68(0xc0)),this[_0x664b68(0xc0)][_0x664b68(0x11c)][this[_0x664b68(0xc0)][_0x664b68(0xf0)]],this[_0x664b68(0xc0)][_0x664b68(0x9e)][this[_0x664b68(0xc0)]['action']],0x30,0x30,-this[_0x664b68(0xc0)]['w']/0x2,-this['bow']['h'],this['bow']['w'],this[_0x664b68(0xc0)]['h']),c[_0x664b68(0x138)]();}['shoot'](){const _0xc2b6c=_0x2bbabf;this[_0xc2b6c(0xc0)][_0xc2b6c(0x148)]=!![],this[_0xc2b6c(0xc0)][_0xc2b6c(0x13d)]=0x0,this[_0xc2b6c(0xc0)]['currentFrame']=0x0,this[_0xc2b6c(0xc0)][_0xc2b6c(0xf0)]=0x0;let _0x20ca56=this['x']+this['w']/0x2,_0x5b05d4=this['y']+this['h']/0x2,_0x10207d=Mouse['x']-_0x20ca56+Math[_0xc2b6c(0xbb)]()*this[_0xc2b6c(0xb2)]-this[_0xc2b6c(0xb2)]/0x2,_0x125d4b=Mouse['y']-_0x5b05d4+Math[_0xc2b6c(0xbb)]()*this[_0xc2b6c(0xb2)]-this[_0xc2b6c(0xb2)]/0x2,_0x1c44f2=Math[_0xc2b6c(0x147)](_0x125d4b,_0x10207d),_0x52d197=Math[_0xc2b6c(0xf1)](_0x1c44f2),_0x49bc9e=Math[_0xc2b6c(0xcc)](_0x1c44f2),_0xec7340=new Projectile();_0xec7340[_0xc2b6c(0x96)]=_0x52d197*this['arrowSpeed'],_0xec7340[_0xc2b6c(0xb5)]=_0x49bc9e*this[_0xc2b6c(0x10c)],_0xec7340['x']=_0x20ca56,_0xec7340['y']=_0x5b05d4,_0xec7340[_0xc2b6c(0x131)]=this[_0xc2b6c(0x127)][0x0],playerArrows[_0xc2b6c(0x114)](_0xec7340),this[_0xc2b6c(0x127)][_0xc2b6c(0xed)](),this['arrowsArr'][_0xc2b6c(0x114)](0x0);}[_0x2bbabf(0xa9)](){const _0x3d425f=_0x2bbabf;if(!sword[_0x3d425f(0x148)]){sword[_0x3d425f(0x148)]=!![],sword[_0x3d425f(0xfe)]=this[_0x3d425f(0xf2)];if(Mouse['x']<this['x']-0x10||Mouse['x']>this['x']+this['w']+0x10||Mouse['y']<this['y']-0x10||Mouse['y']>this['y']+this['h']+0x10){let _0x8ca7e3=this['x']+this['w']/0x2,_0x201149=this['y']+this['h']/0x2,_0x51143f=returnCosine(Mouse['x'],Mouse['y'],_0x8ca7e3,_0x201149);this[_0x3d425f(0x100)]=_0x51143f[_0x3d425f(0xf1)]*0xe,this[_0x3d425f(0xc6)]=_0x51143f[_0x3d425f(0xcc)]*0xe;}}}}var player=new Player(CANVAS[_0x2bbabf(0x133)]/0x2,CANVAS[_0x2bbabf(0xe6)]/0x4*0x3);class UserInterface{constructor(){const _0x35d64f=_0x2bbabf;this[_0x35d64f(0xad)]=id('ui-sheet'),this['x']=0x14,this['y']=0x5,this[_0x35d64f(0xf3)]=![],this[_0x35d64f(0xd3)]=![],this['attacked']=0x0,this[_0x35d64f(0x128)]={'crop':{'x':0x0,'y':0x0,'w':0x144,'h':0x35},'pos':{'x':0x0,'y':0x0}},this[_0x35d64f(0xca)]={'crop':[{'x':0x0,'y':0x40,'w':0x35,'h':0x35},{'x':0x40,'y':0x40,'w':0x35,'h':0x35}],'pos':{'x':0x8a,'y':0x0}},this['hpBar']={'crop':{'x':0x80,'y':0x40,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0xa}},this[_0x35d64f(0xa5)]={'crop':{'x':0x80,'y':0x50,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0x17}},this['bow']={'crop':{'x':0xf0,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0xe}},this[_0x35d64f(0xbd)]={'crop':{'x':0x130,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0x56}},this[_0x35d64f(0xab)]={'crop':[{'x':0x80,'y':0x60,'w':0x6,'h':0x15},{'x':0x90,'y':0x60,'w':0x6,'h':0x15},{'x':0xa0,'y':0x60,'w':0x6,'h':0x15}],'pos':{'x':0x63,'y':0xc}},this[_0x35d64f(0x127)]=[0x1,0x1,0x1,0x1];}[_0x2bbabf(0x99)](){const _0xce29d7=_0x2bbabf;this['lClick']&&(c[_0xce29d7(0xbe)]=0.5);c[_0xce29d7(0x126)](this['sheet'],this['bow'][_0xce29d7(0x12c)]['x'],this[_0xce29d7(0xc0)]['crop']['y'],this[_0xce29d7(0xc0)][_0xce29d7(0x12c)]['w'],this[_0xce29d7(0xc0)][_0xce29d7(0x12c)]['h'],this[_0xce29d7(0xc0)]['pos']['x'],this[_0xce29d7(0xc0)][_0xce29d7(0xe9)]['y'],this[_0xce29d7(0xc0)][_0xce29d7(0x12c)]['w'],this['bow']['crop']['h']);this[_0xce29d7(0xf3)]&&(c[_0xce29d7(0xbe)]=0x1);this['rClick']&&(c['globalAlpha']=0.5);c[_0xce29d7(0x126)](this[_0xce29d7(0xad)],this[_0xce29d7(0xbd)][_0xce29d7(0x12c)]['x'],this['sword'][_0xce29d7(0x12c)]['y'],this[_0xce29d7(0xbd)][_0xce29d7(0x12c)]['w'],this['sword'][_0xce29d7(0x12c)]['h'],this[_0xce29d7(0xbd)][_0xce29d7(0xe9)]['x'],this[_0xce29d7(0xbd)][_0xce29d7(0xe9)]['y'],this[_0xce29d7(0xbd)][_0xce29d7(0x12c)]['w'],this['sword'][_0xce29d7(0x12c)]['h']);this[_0xce29d7(0xd3)]&&(c[_0xce29d7(0xbe)]=0x1);c[_0xce29d7(0x126)](this[_0xce29d7(0xad)],this[_0xce29d7(0x128)][_0xce29d7(0x12c)]['x'],this[_0xce29d7(0x128)][_0xce29d7(0x12c)]['y'],this[_0xce29d7(0x128)][_0xce29d7(0x12c)]['w'],this[_0xce29d7(0x128)]['crop']['h'],this[_0xce29d7(0x128)][_0xce29d7(0xe9)]['x']+this['x'],this[_0xce29d7(0x128)][_0xce29d7(0xe9)]['y']+this['y'],this['layout'][_0xce29d7(0x12c)]['w'],this[_0xce29d7(0x128)][_0xce29d7(0x12c)]['h']),c['drawImage'](this['sheet'],this['portrait'][_0xce29d7(0x12c)][player[_0xce29d7(0xdd)]]['x'],this[_0xce29d7(0xca)]['crop'][player[_0xce29d7(0xdd)]]['y'],this[_0xce29d7(0xca)]['crop'][player[_0xce29d7(0xdd)]]['w'],this[_0xce29d7(0xca)][_0xce29d7(0x12c)][player[_0xce29d7(0xdd)]]['h'],this[_0xce29d7(0xca)][_0xce29d7(0xe9)]['x']+this['x'],this[_0xce29d7(0xca)][_0xce29d7(0xe9)]['y']+this['y'],this[_0xce29d7(0xca)][_0xce29d7(0x12c)][player['attacked']]['w'],this['portrait'][_0xce29d7(0x12c)][player['attacked']]['h']),c[_0xce29d7(0x126)](this[_0xce29d7(0xad)],this[_0xce29d7(0xeb)][_0xce29d7(0x12c)]['x'],this[_0xce29d7(0xeb)][_0xce29d7(0x12c)]['y'],this[_0xce29d7(0xeb)][_0xce29d7(0x12c)]['w'],this['hpBar'][_0xce29d7(0x12c)]['h'],this[_0xce29d7(0xeb)][_0xce29d7(0xe9)]['x']+this['x'],this[_0xce29d7(0xeb)][_0xce29d7(0xe9)]['y']+this['y'],this['hpBar']['crop']['w']/player['maxHp']*player['hp'],this[_0xce29d7(0xeb)][_0xce29d7(0x12c)]['h']),c[_0xce29d7(0x126)](this[_0xce29d7(0xad)],this['mpBar']['crop']['x'],this['mpBar'][_0xce29d7(0x12c)]['y'],this[_0xce29d7(0xa5)][_0xce29d7(0x12c)]['w'],this[_0xce29d7(0xa5)][_0xce29d7(0x12c)]['h'],this['mpBar']['pos']['x']+this['x'],this['mpBar']['pos']['y']+this['y'],this[_0xce29d7(0xa5)][_0xce29d7(0x12c)]['w'],this[_0xce29d7(0xa5)][_0xce29d7(0x12c)]['h']);for(let _0x4af2bd=0x0;_0x4af2bd<player[_0xce29d7(0x127)][_0xce29d7(0xb8)];_0x4af2bd++){c['drawImage'](this[_0xce29d7(0xad)],this[_0xce29d7(0xab)][_0xce29d7(0x12c)][player[_0xce29d7(0x127)][_0x4af2bd]]['x'],this['arrow'][_0xce29d7(0x12c)][player[_0xce29d7(0x127)][_0x4af2bd]]['y'],this[_0xce29d7(0xab)][_0xce29d7(0x12c)][player[_0xce29d7(0x127)][_0x4af2bd]]['w'],this[_0xce29d7(0xab)][_0xce29d7(0x12c)][player[_0xce29d7(0x127)][_0x4af2bd]]['h'],this[_0xce29d7(0xab)][_0xce29d7(0xe9)]['x']+this['x']-0xa*_0x4af2bd,this[_0xce29d7(0xab)][_0xce29d7(0xe9)]['y']+this['y'],this[_0xce29d7(0xab)][_0xce29d7(0x12c)][player[_0xce29d7(0x127)][_0x4af2bd]]['w'],this[_0xce29d7(0xab)][_0xce29d7(0x12c)][player['arrowsArr'][_0x4af2bd]]['h']);}c[_0xce29d7(0x116)]=_0xce29d7(0x11b),c[_0xce29d7(0x10d)]=_0xce29d7(0x10a),c[_0xce29d7(0x145)]=_0xce29d7(0xae),c['fillText'](player[_0xce29d7(0xec)]+'/'+player[_0xce29d7(0x127)][_0xce29d7(0xb8)],0x7a+this['x'],0x20+this['y']);}}var userInterface=new UserInterface();function drawLaser(){const _0x37b841=_0x2bbabf;let _0x415a5b=player['x']+player['w']/0x2,_0x39c325=player['y']+player['h']/0x2,_0x58c797=_0x415a5b,_0x2127e5=_0x39c325,_0x10c2e3=![],_0x56db22=0x0,_0x140780=returnCosine(_0x415a5b,_0x39c325,Mouse['x'],Mouse['y']),_0x25dbd6=[],_0x56be6f={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x34280e={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x1e73a2=0x4,_0x5331a0={'x':0x0,'y':0x0};while(!_0x10c2e3&&_0x56db22<CANVAS[_0x37b841(0x133)]*0x2/_0x1e73a2){_0x58c797-=_0x140780[_0x37b841(0xf1)]*_0x1e73a2,_0x2127e5-=_0x140780[_0x37b841(0xcc)]*_0x1e73a2;getTileData(_0x58c797,_0x2127e5)[_0x37b841(0x119)]&&(_0x56be6f=getTileData(_0x58c797,_0x2127e5)['hitbox'],_0x34280e['x']=_0x56be6f['x'],_0x34280e['y']=_0x56be6f['y'],_0x34280e['w']=_0x56be6f['w'],_0x34280e['h']=_0x56be6f['h'],_0x34280e['x']+=_0x58c797-_0x58c797%TILESIZE,_0x34280e['y']+=_0x2127e5-_0x2127e5%TILESIZE,_0x10c2e3=!![]);_0x5331a0['x']=_0x58c797,_0x5331a0['y']=_0x2127e5;for(let _0x2a0604=0x0;_0x2a0604<monsters[_0x37b841(0xb8)];_0x2a0604++){if(!monsters[_0x2a0604][_0x37b841(0x11a)]&&pointSquareCol(_0x5331a0,monsters[_0x2a0604])){_0x34280e['x']=monsters[_0x2a0604]['x'],_0x34280e['y']=monsters[_0x2a0604]['y'],_0x34280e['w']=monsters[_0x2a0604]['w'],_0x34280e['h']=monsters[_0x2a0604]['h'],_0x10c2e3=!![];break;}}_0x56db22++;}_0x25dbd6=getRectSides(_0x34280e);let _0x2aa926=[],_0x3829aa={},_0x39c207;for(let _0x80dfc1=0x0;_0x80dfc1<_0x25dbd6[_0x37b841(0xb8)];_0x80dfc1++){_0x3829aa=intersect(_0x415a5b,_0x39c325,_0x58c797,_0x2127e5,_0x25dbd6[_0x80dfc1]['x1'],_0x25dbd6[_0x80dfc1]['y1'],_0x25dbd6[_0x80dfc1]['x2'],_0x25dbd6[_0x80dfc1]['y2']),_0x3829aa&&_0x2aa926[_0x37b841(0x114)](_0x3829aa);}let _0x8e074b=Math[_0x37b841(0x110)](_0x415a5b-_0x58c797,_0x39c325-_0x2127e5),_0x46d351=_0x58c797,_0x34919d=_0x58c797;for(let _0x40ccfa=0x0;_0x40ccfa<_0x2aa926[_0x37b841(0xb8)];_0x40ccfa++){_0x39c207=Math[_0x37b841(0x110)](_0x415a5b-_0x58c797,_0x39c325-_0x2127e5),_0x39c207<_0x8e074b&&(_0x8e074b=_0x39c207,_0x46d351=_0x2aa926[_0x40ccfa]['x'],_0x34919d=_0x2aa926[_0x40ccfa]['y']);}c[_0x37b841(0xde)]=_0x37b841(0xf4),c[_0x37b841(0xa6)](),c['moveTo'](_0x415a5b+map['x'],_0x39c325+map['y']),c[_0x37b841(0x105)](_0x58c797+map['x'],_0x2127e5+map['y']),c['stroke'](),c[_0x37b841(0xde)]=_0x37b841(0xd6);}function isObstructed(_0x4b0d4f,_0x54bfd4){const _0x3a860f=_0x2bbabf;let _0x3f5758=_0x4b0d4f['x']+_0x4b0d4f['w']/0x2,_0x76de7b=_0x4b0d4f['y']+_0x4b0d4f['h']/0x2,_0x1ccf78=_0x54bfd4['x']+_0x54bfd4['w']/0x2,_0x634160=_0x54bfd4['y']+_0x54bfd4['h']/0x2,_0x108334=Math[_0x3a860f(0x110)](_0x3f5758-_0x1ccf78,_0x76de7b-_0x634160),_0x51802d=_0x3f5758,_0x5c1b61=_0x76de7b,_0x396607=![],_0xe3c56c=0x0,_0x303c78=returnCosine(_0x3f5758,_0x76de7b,_0x1ccf78,_0x634160),_0x2969d1=[],_0x5a4fb5={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x160a77={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0xe86221=0x3,_0x2bac9f={'x':0x0,'y':0x0};while(!_0x396607&&_0xe3c56c<_0x108334/_0xe86221){_0x51802d-=_0x303c78['cos']*_0xe86221,_0x5c1b61-=_0x303c78[_0x3a860f(0xcc)]*_0xe86221;if(getTileData(_0x51802d,_0x5c1b61)[_0x3a860f(0x119)])return _0x5a4fb5=getTileData(_0x51802d,_0x5c1b61)[_0x3a860f(0x141)],_0x160a77['x']=_0x5a4fb5['x'],_0x160a77['y']=_0x5a4fb5['y'],_0x160a77['w']=_0x5a4fb5['w'],_0x160a77['h']=_0x5a4fb5['h'],_0x160a77['x']+=_0x51802d-_0x51802d%TILESIZE,_0x160a77['y']+=_0x5c1b61-_0x5c1b61%TILESIZE,!![];_0x2bac9f['x']=_0x51802d,_0x2bac9f['y']=_0x5c1b61;if(pointSquareCol(_0x2bac9f,_0x54bfd4))return![];_0xe3c56c++;}}function getRectSides(_0x1c3f96){const _0x25b035=_0x2bbabf;let _0x20a3ba=[];return _0x20a3ba[_0x25b035(0x114)]({'x1':_0x1c3f96['x'],'y1':_0x1c3f96['y'],'x2':_0x1c3f96['x']+_0x1c3f96['w'],'y2':_0x1c3f96['y']}),_0x20a3ba[_0x25b035(0x114)]({'x1':_0x1c3f96['x']+_0x1c3f96['w'],'y1':_0x1c3f96['y'],'x2':_0x1c3f96['x']+_0x1c3f96['w'],'y2':_0x1c3f96['y']+_0x1c3f96['h']}),_0x20a3ba[_0x25b035(0x114)]({'x1':_0x1c3f96['x']+_0x1c3f96['w'],'y1':_0x1c3f96['y']+_0x1c3f96['h'],'x2':_0x1c3f96['x'],'y2':_0x1c3f96['y']+_0x1c3f96['h']}),_0x20a3ba['push']({'x1':_0x1c3f96['x'],'y1':_0x1c3f96['y']+_0x1c3f96['h'],'x2':_0x1c3f96['x'],'y2':_0x1c3f96['y']}),_0x20a3ba;}function init(){const _0xaa9f23=_0x2bbabf;let _0xa9fe46,_0x104a66={};fetch(_0xaa9f23(0x12d))['then'](function(_0x3352bf){const _0x18a619=_0xaa9f23;return _0x3352bf[_0x18a619(0xe7)]();})[_0xaa9f23(0x123)](function(_0x5a0544){const _0x54da89=_0xaa9f23;_0xa9fe46=_0x5a0544['tiles'];for(let _0x3e1443=0x0;_0x3e1443<_0xa9fe46[_0x54da89(0xb8)];_0x3e1443++){_0x104a66={'id':0x0,'solid':![],'hole':![],'unpassable':![],'hitbox':{'x':0x0,'y':0x0,'w':TILESIZE,'h':TILESIZE}},_0x104a66['id']=_0xa9fe46[_0x3e1443]['id'];if(_0xa9fe46[_0x3e1443]['hasOwnProperty'](_0x54da89(0x137)))for(let _0x30b28c=0x0;_0x30b28c<_0xa9fe46[_0x3e1443][_0x54da89(0x137)]['length'];_0x30b28c++){if(_0xa9fe46[_0x3e1443][_0x54da89(0x137)][_0x30b28c])switch(_0xa9fe46[_0x3e1443][_0x54da89(0x137)][_0x30b28c][_0x54da89(0xba)]){case'hole':_0x104a66[_0x54da89(0xf7)]=!![],_0x104a66[_0x54da89(0xe4)]=!![];break;case _0x54da89(0x119):_0x104a66['solid']=!![],_0x104a66[_0x54da89(0xe4)]=!![];break;}}TilesData['push'](_0x104a66);}loop();});}init();var HP_BAR=id(_0x2bbabf(0x146));function renderHpBars(){const _0x20fb42=_0x2bbabf;for(let _0x4feafd=0x0;_0x4feafd<monsters[_0x20fb42(0xb8)];_0x4feafd++){if(monsters[_0x4feafd][_0x20fb42(0x11a)])continue;let _0x574475=monsters[_0x4feafd]['hp']/monsters[_0x4feafd][_0x20fb42(0xc4)],_0x487925=Math[_0x20fb42(0x12b)](TILESIZE*_0x574475);c['drawImage'](HP_BAR,0x0,0x4,_0x487925,0x4,monsters[_0x4feafd]['x']+monsters[_0x4feafd]['w']/0x2-0x10+map['x']|0x0,monsters[_0x4feafd]['y']-0x8+map['y']|0x0,_0x487925|0x0,0x4|0x0),c['drawImage'](HP_BAR,0x0,0x0,TILESIZE,0x4,monsters[_0x4feafd]['x']+monsters[_0x4feafd]['w']/0x2-0x10+map['x']|0x0,monsters[_0x4feafd]['y']-0x8+map['y']|0x0,TILESIZE|0x0,0x4|0x0);}}class Map{constructor(){const _0x27a84b=_0x2bbabf;this[_0x27a84b(0x133)]=0x17,this[_0x27a84b(0xe6)]=0xf,this['x']=0x0,this['y']=0x0,this[_0x27a84b(0x142)]=maps['m1'],this[_0x27a84b(0xad)]=id('sheet'),this[_0x27a84b(0xce)]=id(_0x27a84b(0xce));}[_0x2bbabf(0x99)](){const _0xf447fd=_0x2bbabf;for(let _0x5aa364=0x0;_0x5aa364<this['tiles'][_0xf447fd(0xb8)];_0x5aa364++){_0x5aa364==0x1&&c[_0xf447fd(0x126)](this['grass'],0x0+this['x'],0x0+this['y'],CANVAS[_0xf447fd(0x133)],CANVAS[_0xf447fd(0xe6)]);for(let _0x48e8a2=0x0;_0x48e8a2<this[_0xf447fd(0x142)][_0x5aa364][_0xf447fd(0xb8)];_0x48e8a2++){if(this['tiles'][_0x5aa364][_0x48e8a2]===0x0)continue;c[_0xf447fd(0x126)](this['sheet'],(this['tiles'][_0x5aa364][_0x48e8a2]-0x1)%0xf*TILESIZE,((this[_0xf447fd(0x142)][_0x5aa364][_0x48e8a2]-0x1)/0xf|0x0)*TILESIZE,TILESIZE,TILESIZE,_0x48e8a2%this['width']*TILESIZE+map['x'],(_0x48e8a2/this[_0xf447fd(0x133)]|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE);}}}}var map=new Map();class Sword{constructor(){const _0x5e1ede=_0x2bbabf;this['x']=player['x'],this['y']=player['y'],this['w']=0x10,this['h']=0x30,this['r']=0x32,this[_0x5e1ede(0xf2)]=0x2,this[_0x5e1ede(0xfe)]=0x0,this[_0x5e1ede(0x11c)]=[0x0],this['actionY']=[0x0],this['vfxX']=[0x0,0x0,0x0,0x0],this[_0x5e1ede(0x9d)]=[0x0,0x80,0x100,0x180],this['currentFrame']=0x0,this[_0x5e1ede(0x13d)]=0x0,this[_0x5e1ede(0xf0)]=0x0,this[_0x5e1ede(0xd7)]=0x3,this[_0x5e1ede(0x148)]=![],this[_0x5e1ede(0xad)]=id('sword-vfx'),this['swordImg']=id('sword');}[_0x2bbabf(0x117)](){const _0x329547=_0x2bbabf;this['x']=player['x']+player['w']/0x2,this['y']=player['y']+player['h']/0x2;let _0x1a63d6,_0x478a4f,_0x1d06d4;for(let _0x2fe4b9=0x0;_0x2fe4b9<monsters[_0x329547(0xb8)];_0x2fe4b9++){if(monsters[_0x2fe4b9][_0x329547(0x11a)]||!monsters[_0x2fe4b9][_0x329547(0xb0)])continue;_0x1a63d6=monsters[_0x2fe4b9][_0x329547(0x141)]['x']+monsters[_0x2fe4b9][_0x329547(0x141)]['w']/0x2,_0x478a4f=monsters[_0x2fe4b9][_0x329547(0x141)]['y']+monsters[_0x2fe4b9][_0x329547(0x141)]['h']/0x2,_0x1d06d4=(monsters[_0x2fe4b9]['w']+monsters[_0x2fe4b9]['h'])/0x2*0.5;if(circleCollision(this['x'],this['y'],this['r'],_0x1a63d6,_0x478a4f,_0x1d06d4)){let _0x51da12=this['x']+this['w']/0x2,_0x9c9cfe=this['y']+this['h']/0x2,_0x45d082=monsters[_0x2fe4b9]['x']-_0x51da12,_0x50e580=monsters[_0x2fe4b9]['y']-_0x9c9cfe,_0x23a964=Math[_0x329547(0x147)](_0x50e580,_0x45d082),_0x115c98=Math['cos'](_0x23a964),_0x3f57b2=Math['sin'](_0x23a964);monsters[_0x2fe4b9]['xVelExt']=_0x115c98*0xa,monsters[_0x2fe4b9][_0x329547(0xc6)]=_0x3f57b2*0xa,monsters[_0x2fe4b9]['hp']-=0.25,monsters[_0x2fe4b9][_0x329547(0x13b)]=0xf;}}}[_0x2bbabf(0x99)](){const _0x1045ee=_0x2bbabf;this[_0x1045ee(0x13d)]++,this[_0x1045ee(0x13d)]>this[_0x1045ee(0xd7)]*DTR&&(this['frameCounter']=0x0,this[_0x1045ee(0xe5)]++,this[_0x1045ee(0xe5)]>=this[_0x1045ee(0xef)][_0x1045ee(0xb8)]&&(this[_0x1045ee(0xe5)]=0x0)),c[_0x1045ee(0x126)](this[_0x1045ee(0xad)],this['vfxX'][this[_0x1045ee(0xe5)]],this[_0x1045ee(0x9d)][this[_0x1045ee(0xe5)]],0x80,0x40,this['x']-0x40-player[_0x1045ee(0x100)]*0x4+map['x'],this['y']-0x40-player[_0x1045ee(0xc6)]*0x4+map['y'],0x80,0x40),c[_0x1045ee(0x129)](),c[_0x1045ee(0xb9)](player['x']+player['w']/0x2+map['x'],player['y']+player['h']/0x2+map['y']),c['rotate'](this[_0x1045ee(0xfe)]+this[_0x1045ee(0xf2)]),c[_0x1045ee(0x126)](this['swordImg'],this[_0x1045ee(0x11c)][this[_0x1045ee(0xf0)]],this['actionY'][this['action']],this['w'],this['h'],-this['w']/0x2,-this['h']/0x2-player['h'],this['w'],this['h']),c[_0x1045ee(0x138)](),this[_0x1045ee(0xf2)]-=0.5/DTR,this[_0x1045ee(0xf2)]<=-0x9&&(this[_0x1045ee(0x148)]=![],this[_0x1045ee(0xf2)]=0x2),c[_0x1045ee(0x126)](this[_0x1045ee(0xad)],this[_0x1045ee(0xef)][this[_0x1045ee(0xe5)]],this[_0x1045ee(0x9d)][this[_0x1045ee(0xe5)]]+0x40,0x80,0x40,this['x']-0x40-player[_0x1045ee(0x100)]*0x4+map['x'],this['y']-player[_0x1045ee(0xc6)]*0x4+map['y'],0x80,0x40);}}var sword=new Sword();function sortMonsters(){monsters['sort'](function(_0x110ffa,_0x571f7d){const _0x487d52=_0x3b7c;if(_0x110ffa[_0x487d52(0x11a)]&&!_0x571f7d['dead'])return-0x1;else return!_0x110ffa[_0x487d52(0x11a)]&&_0x571f7d['dead']?0x1:_0x110ffa['y']+0xf-_0x571f7d['y'];});}function adjustCollidingMonsters(){const _0xb24fdf=_0x2bbabf;for(let _0x371f72=0x0;_0x371f72<monsters[_0xb24fdf(0xb8)];_0x371f72++){if(monsters[_0x371f72][_0xb24fdf(0x11a)])continue;monsters[_0x371f72][_0xb24fdf(0xda)]['T']=0x0,monsters[_0x371f72]['col']['B']=0x0,monsters[_0x371f72]['col']['L']=0x0,monsters[_0x371f72][_0xb24fdf(0xda)]['R']=0x0;for(let _0x41ae4b=0x0;_0x41ae4b<monsters['length'];_0x41ae4b++){if(monsters[_0x41ae4b]['dead'])continue;if(collided(monsters[_0x371f72],monsters[_0x41ae4b])){let _0x579649=colCheck(monsters[_0x371f72],monsters[_0x41ae4b]);switch(_0x579649){case'l':this['xVel']<0x0&&(this[_0xb24fdf(0x96)]=0x0);break;case'r':this[_0xb24fdf(0x96)]>0x0&&(this[_0xb24fdf(0x96)]=0x0);break;case'b':this[_0xb24fdf(0xb5)]>0x0&&(this[_0xb24fdf(0xb5)]=0x0);break;case't':this['yVel']<0x0&&(this['yVel']=0x0);break;}monsters[_0x371f72][_0xb24fdf(0x96)]+=(monsters[_0x371f72][_0xb24fdf(0xda)]['L']-monsters[_0x371f72][_0xb24fdf(0xda)]['R'])/0x5,monsters[_0x371f72][_0xb24fdf(0xb5)]+=(monsters[_0x371f72]['col']['T']-monsters[_0x371f72][_0xb24fdf(0xda)]['B'])/0x5;}}}}class Monster extends Collidable{constructor(_0xb07aa1,_0x3edee2){const _0x193fec=_0x2bbabf;super(Collidable),this['x']=_0xb07aa1,this['y']=_0x3edee2,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x193fec(0x96)]=0x0,this[_0x193fec(0xb5)]=0x0,this['xVelExt']=0x0,this[_0x193fec(0xc6)]=0x0,this[_0x193fec(0x13c)]=0x2,this[_0x193fec(0x122)]=0x0,this['justDied']=![],this[_0x193fec(0x13b)]=0x0,this['dead']=![],this['arrows']=[],this[_0x193fec(0xc4)]=0x3,this['hp']=0x3,this[_0x193fec(0x13d)]=0x0,this[_0x193fec(0xd7)]=0x4,this[_0x193fec(0xe5)]=0x0,this[_0x193fec(0xb0)]=!![],this[_0x193fec(0xad)]=id(_0x193fec(0xad)),this[_0x193fec(0xf0)]=0x0,this[_0x193fec(0xda)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x193fec(0x141)]={'x':0x0,'y':0x0,'w':0x13,'h':0x11},this[_0x193fec(0x11c)]=[[0x3,0x3,0x3,0x3],[0x4,0x4,0x4,0x4],[0x5,0x5,0x5,0x5],[0x3,0x3,0x3,0x3],[0x3]],this[_0x193fec(0x9e)]=[[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x9,0x8,0x7,0x6],[0x9]];}[_0x2bbabf(0x10e)](){const _0x4c67f5=_0x2bbabf;if(this[_0x4c67f5(0xf0)]!==0x0){let _0x1f97eb=this['x']+this['w']/0x2-player['x']-player['w']/0x2,_0x4a16f1=this['y']+this['h']/0x2-player['y']-player['h']/0x2,_0x383f63=_0x1f97eb>0x0?-0x1:0x1,_0x708054=_0x4a16f1>0x0?-0x1:0x1,_0x6bcb9;_0x4a16f1!==0x0?_0x6bcb9=Math[_0x4c67f5(0xe2)](_0x1f97eb)/(Math['abs'](_0x4a16f1)+Math[_0x4c67f5(0xe2)](_0x1f97eb)):_0x6bcb9=0x0;this[_0x4c67f5(0x96)]=this[_0x4c67f5(0x13c)]*_0x6bcb9*_0x383f63,this[_0x4c67f5(0xb5)]=this['speed']*(0x1-_0x6bcb9)*_0x708054;if(this['x']+this['w']<player['x'])this['left']=![];else player['x']+player['w']<this['x']&&(this[_0x4c67f5(0x122)]=!![]);}}[_0x2bbabf(0x117)](){const _0x4a4a26=_0x2bbabf;if(!this[_0x4a4a26(0x11a)]){this['followPlayer']();Math[_0x4a4a26(0xe2)](this['xVelExt'])>0.01?this[_0x4a4a26(0x100)]*=0.9:this['xVelExt']=0x0;Math[_0x4a4a26(0xe2)](this[_0x4a4a26(0xc6)])>0.01?this[_0x4a4a26(0xc6)]*=0.9:this[_0x4a4a26(0xc6)]=0x0;(this[_0x4a4a26(0xda)]['T']&&this['yVel']<0x0||this[_0x4a4a26(0xda)]['B']&&this[_0x4a4a26(0xb5)]>0x0)&&(this[_0x4a4a26(0xb5)]=0x0);(this[_0x4a4a26(0xda)]['L']&&this['xVel']<0x0||this['col']['R']&&this[_0x4a4a26(0x96)]>0x0)&&(this[_0x4a4a26(0x96)]=0x0);this[_0x4a4a26(0xf0)]!==0x0&&(this[_0x4a4a26(0x122)]?this['action']=0x2:this[_0x4a4a26(0xf0)]=0x1);this['checkCollisions'](),this['x']+=(this[_0x4a4a26(0x96)]+this[_0x4a4a26(0x100)])/DTR,this['y']+=(this[_0x4a4a26(0xb5)]+this['yVelExt'])/DTR;for(let _0x3a5c30=0x0;_0x3a5c30<this['arrows'][_0x4a4a26(0xb8)];_0x3a5c30++){this[_0x4a4a26(0xc3)][_0x3a5c30]['x']=this['x']+this['arrows'][_0x3a5c30][_0x4a4a26(0x13f)],this['arrows'][_0x3a5c30]['y']=this['y']+this[_0x4a4a26(0xc3)][_0x3a5c30][_0x4a4a26(0xbf)];}this[_0x4a4a26(0x141)]['x']=this['x']+0x6,this[_0x4a4a26(0x141)]['y']=this['y']+0x4,this['hp']<=0x0&&(this[_0x4a4a26(0xf6)]=!![]),this['justDied']&&(this[_0x4a4a26(0x13b)]=0x0,this['dead']=!![],this[_0x4a4a26(0xf0)]=0x3,this[_0x4a4a26(0x13d)]=0x0,this[_0x4a4a26(0xe5)]=0x0,this['slowness']=0xa);}}['draw'](){const _0x281082=_0x2bbabf;this[_0x281082(0x13d)]++;this[_0x281082(0x13d)]>this[_0x281082(0xd7)]*DTR&&(this[_0x281082(0x13d)]=0x0,this['currentFrame']++,this[_0x281082(0xe5)]>=this[_0x281082(0x11c)][this[_0x281082(0xf0)]][_0x281082(0xb8)]&&(this[_0x281082(0xf0)]==0x0&&(this[_0x281082(0xf0)]=0x1+this[_0x281082(0x122)]),this[_0x281082(0xe5)]=0x0));this[_0x281082(0xf0)]==0x3&&(this[_0x281082(0xe5)]==this[_0x281082(0x11c)][this[_0x281082(0xf0)]][_0x281082(0xb8)]-0x1&&(this[_0x281082(0x13d)]=0x0));if(!this[_0x281082(0x11a)])for(let _0x5857a3=0x0;_0x5857a3<this[_0x281082(0xc3)][_0x281082(0xb8)];_0x5857a3++){this[_0x281082(0xc3)][_0x5857a3]['draw']();}this[_0x281082(0x13b)]>0x0&&(this[_0x281082(0xf0)]=0x4,this[_0x281082(0xe5)]=0x0,this[_0x281082(0x12a)]=0x0,this[_0x281082(0x13b)]-=0x1/DTR),c[_0x281082(0x126)](this[_0x281082(0xad)],this['actionX'][this['action']][this[_0x281082(0xe5)]]*TILESIZE,this[_0x281082(0x9e)][this[_0x281082(0xf0)]][this[_0x281082(0xe5)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}}class Mole extends Collidable{constructor(_0x538063,_0x44564c){const _0xfe69ab=_0x2bbabf;super(Collidable),this['x']=(_0x538063/TILESIZE|0x0)*TILESIZE,this['y']=(_0x44564c/TILESIZE|0x0)*TILESIZE,this['w']=TILESIZE,this['h']=TILESIZE,this[_0xfe69ab(0x96)]=0x0,this['yVel']=0x0,this[_0xfe69ab(0x100)]=0x0,this[_0xfe69ab(0xc6)]=0x0,this[_0xfe69ab(0x13c)]=0x2,this[_0xfe69ab(0x122)]=0x0,this['justDied']=![],this['justDamaged']=0x0,this[_0xfe69ab(0x11a)]=![],this[_0xfe69ab(0x98)]=![],this[_0xfe69ab(0xc3)]=[],this[_0xfe69ab(0xc4)]=0x3,this['hp']=0x3,this[_0xfe69ab(0x13d)]=0x0,this['slowness']=0x4,this[_0xfe69ab(0xe5)]=0x0,this[_0xfe69ab(0xad)]=id(_0xfe69ab(0xad)),this[_0xfe69ab(0xf0)]=0x0,this[_0xfe69ab(0xb0)]=!![],this[_0xfe69ab(0xfb)]=[],this['col']={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this['hitbox']={'x':0x0,'y':0x0,'w':0xe,'h':0x1a},this[_0xfe69ab(0x12f)]={'x':0x0,'y':0x0,'w':0x0,'h':0x0},this[_0xfe69ab(0x11c)]=[[0x9,0x9,0x9,0x9],[0xa,0xa,0xa,0xa,0xb,0xb,0xb,0xb],[0xc,0xc,0xc,0xc],[0xd,0xd,0xd,0xd],[0xe,0xe,0xe,0xe,0xe]],this[_0xfe69ab(0x9e)]=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x18]],this[_0xfe69ab(0xb1)]=0x0;}[_0x2bbabf(0x10e)](){const _0x48021e=_0x2bbabf;this['atkBox']['x']=this['x']-0x5*TILESIZE,this[_0x48021e(0x12f)]['y']=this['y']-0x5*TILESIZE,this[_0x48021e(0x12f)]['w']=0xb*TILESIZE,this[_0x48021e(0x12f)]['h']=0xb*TILESIZE;if(collided(this[_0x48021e(0x12f)],player)){if(this[_0x48021e(0x98)]){if(this[_0x48021e(0xe5)]==0x0&&this[_0x48021e(0x13d)]==0x0){this[_0x48021e(0x9b)]();switch(this[_0x48021e(0xfb)][0x0]){case'l':this['x']-=TILESIZE;break;case'r':this['x']+=TILESIZE;break;case't':this['y']-=TILESIZE;break;case'b':this['y']+=TILESIZE;break;}}}else this[_0x48021e(0xf0)]!==0x1&&(this[_0x48021e(0xf0)]=0x1,this[_0x48021e(0xe5)]=0x0,this[_0x48021e(0x13d)]=0x0);}else this['attacking']&&this[_0x48021e(0xf0)]!==0x0&&this[_0x48021e(0xf0)]!==0x2&&(this['attacking']=![],this[_0x48021e(0xb0)]=!![],this[_0x48021e(0xf0)]=0x2,this[_0x48021e(0xe5)]=0x0,this[_0x48021e(0x13d)]=0x0);}[_0x2bbabf(0x117)](){const _0x19be38=_0x2bbabf;this['followPlayer'](),this[_0x19be38(0x141)]['x']=this['x']+(this['w']-0xe)/0x2,this[_0x19be38(0x141)]['y']=this['y']+(this['h']-0x1a)/0x2;for(let _0x556887=0x0;_0x556887<this['arrows'][_0x19be38(0xb8)];_0x556887++){this['arrows'][_0x556887]['x']=this['x']+this['arrows'][_0x556887][_0x19be38(0x13f)],this['arrows'][_0x556887]['y']=this['y']+this[_0x19be38(0xc3)][_0x556887][_0x19be38(0xbf)];}this['hp']<=0x0&&(this[_0x19be38(0xf6)]=!![]),this[_0x19be38(0xf6)]&&(this[_0x19be38(0x13b)]=0x0,this[_0x19be38(0x11a)]=!![],this[_0x19be38(0xf0)]=0x3,this[_0x19be38(0x13d)]=0x0,this[_0x19be38(0xe5)]=0x0,this[_0x19be38(0xd7)]=0xa);}[_0x2bbabf(0x99)](){const _0x5ae244=_0x2bbabf;this[_0x5ae244(0x13d)]++;this[_0x5ae244(0xf0)]==0x4?this[_0x5ae244(0xd7)]=0x3:this['slowness']=0x5;if(this[_0x5ae244(0x13d)]>this[_0x5ae244(0xd7)]*DTR){this['frameCounter']=0x0,this[_0x5ae244(0xe5)]++;if(this[_0x5ae244(0xe5)]>=this[_0x5ae244(0x11c)][this['action']]['length']){if(this['dead'])this[_0x5ae244(0xe5)]=this[_0x5ae244(0x11c)][this[_0x5ae244(0xf0)]][_0x5ae244(0xb8)]-0x1;else{if(this[_0x5ae244(0xf0)]==0x1)this[_0x5ae244(0x98)]=!![],this[_0x5ae244(0xb0)]=![],this[_0x5ae244(0xf0)]=0x4,this[_0x5ae244(0xe5)]=0x0;else this[_0x5ae244(0xf0)]==0x2?(this[_0x5ae244(0xf0)]=0x0,this[_0x5ae244(0xe5)]=0x0):this[_0x5ae244(0xe5)]=0x0;}}}if(!this[_0x5ae244(0x11a)]){if(this[_0x5ae244(0xf0)]==0x0)for(let _0x53477d=0x0;_0x53477d<this[_0x5ae244(0xc3)]['length'];_0x53477d++){this[_0x5ae244(0xc3)][_0x53477d]['draw']();}}this[_0x5ae244(0x13b)]>0x0&&(this[_0x5ae244(0xf0)]=0x3,this[_0x5ae244(0xe5)]=0x0,this[_0x5ae244(0x12a)]=0x0,this[_0x5ae244(0x13b)]-=0x1/DTR,this[_0x5ae244(0x13b)]<=0x0&&(this[_0x5ae244(0xf0)]=0x0)),c[_0x5ae244(0x126)](this[_0x5ae244(0xad)],this[_0x5ae244(0x11c)][this[_0x5ae244(0xf0)]][this[_0x5ae244(0xe5)]]*TILESIZE,this['actionY'][this[_0x5ae244(0xf0)]][this[_0x5ae244(0xe5)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}[_0x2bbabf(0x9b)](){const _0x40d159=_0x2bbabf;let _0x295f94=0xb,_0x3483ba=[],_0xc22bd7=this['x']+this['w']/0x2-TILESIZE*0x5,_0x2b0f05=this['y']+this['h']/0x2-TILESIZE*0x5,_0x5cf6d1;for(let _0x1fe173=0x0;_0x1fe173<_0x295f94;_0x1fe173++){_0x3483ba[_0x1fe173]=[];for(let _0x4b4550=0x0;_0x4b4550<_0x295f94;_0x4b4550++){_0x5cf6d1=getTileData(_0xc22bd7+_0x1fe173*TILESIZE,_0x2b0f05+_0x4b4550*TILESIZE),_0x5cf6d1===![]?_0x3483ba[_0x1fe173][_0x4b4550]=_0x40d159(0xa0):_0x3483ba[_0x1fe173][_0x4b4550]=_0x40d159(0xf9);}}_0x3483ba[0x5][0x5]=_0x40d159(0xa7),_0x3483ba[((player['x']-this['x'])/TILESIZE|0x0)+0x5][((player['y']-this['y'])/TILESIZE|0x0)+0x5]=_0x40d159(0xd5),this['path']=findShortestPath([0x5,0x5],_0x3483ba);}}class Flower extends Collidable{constructor(_0x14ccb5,_0x55f71b){const _0x7040f0=_0x2bbabf;super(Collidable),this['x']=_0x14ccb5,this['y']=_0x55f71b,this['w']=TILESIZE,this['h']=TILESIZE,this['xVel']=0x0,this[_0x7040f0(0xb5)]=0x0,this[_0x7040f0(0x100)]=0x0,this[_0x7040f0(0xc6)]=0x0,this[_0x7040f0(0x13c)]=0x2,this['left']=0x0,this[_0x7040f0(0xf6)]=![],this[_0x7040f0(0x13b)]=0x0,this[_0x7040f0(0x11a)]=![],this[_0x7040f0(0xc3)]=[],this[_0x7040f0(0xc4)]=0x3,this['hp']=0x3,this[_0x7040f0(0x13d)]=0x0,this[_0x7040f0(0xd7)]=0x8,this['attacking']=![],this[_0x7040f0(0xe5)]=0x0,this['sheet']=id(_0x7040f0(0xad)),this[_0x7040f0(0xb2)]=0x5,this['projSpeed']=0x8,this[_0x7040f0(0xb0)]=!![],this[_0x7040f0(0xda)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x7040f0(0x141)]={'x':0x0,'y':0x0,'w':this['w']/0x3,'h':this['h']-this['h']/0x5*0x2},this[_0x7040f0(0xf0)]=0x0,this[_0x7040f0(0x11c)]=[[0x5,0x5,0x5,0x5],[0x5,0x5,0x5,0x5],[0x8,0x8,0x8,0x8]],this['actionY']=[[0x14,0x15,0x16,0x17],[0x14,0x14,0x15,0x16],[0x14,0x15,0x16,0x17]],this[_0x7040f0(0x140)]=[[0x7,0x7,0x7,0x7],[0x6,0x6,0x6,0x6]],this[_0x7040f0(0xf8)]=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17]],this[_0x7040f0(0xf2)]=0x0,this[_0x7040f0(0x13a)]=![];}['shoot'](){const _0x543a74=_0x2bbabf;if(!isObstructed(this,player)){this[_0x543a74(0x98)]=!![];if(this['currentFrame']==0x2){if(!this['justShot']){let _0x58e447=new EnemyProjectile(),_0x4f518f=this['x']+this['w']/0x2,_0x5c370d=this['y']+this['h']/0x2,_0x16886e=player['x']+player['w']/0x2-_0x4f518f+Math[_0x543a74(0xbb)]()*this['precision']-this[_0x543a74(0xb2)]/0x2,_0x898b38=player['y']+player['h']/0x2-_0x5c370d+Math[_0x543a74(0xbb)]()*this[_0x543a74(0xb2)]-this[_0x543a74(0xb2)]/0x2,_0xb6f897=Math[_0x543a74(0x147)](_0x898b38,_0x16886e),_0x1e08a2=Math[_0x543a74(0xf1)](_0xb6f897),_0x96f46f=Math['sin'](_0xb6f897);_0x58e447['xVel']=_0x1e08a2*this['projSpeed'],_0x58e447['yVel']=_0x96f46f*this[_0x543a74(0xa1)],_0x58e447['x']=_0x4f518f,_0x58e447['y']=_0x5c370d,enemyProjectiles[_0x543a74(0x114)](_0x58e447),this[_0x543a74(0x13a)]=!![];}}else this[_0x543a74(0x13a)]=![];}else this[_0x543a74(0x98)]=![];}['compute'](){const _0x358ae8=_0x2bbabf;this[_0x358ae8(0xc7)](),this[_0x358ae8(0x141)]['x']=this['x']+this['w']/0x3,this['hitbox']['y']=this['y']+this['h']/0x5,this[_0x358ae8(0xf2)]=Math[_0x358ae8(0x147)](player['y']+player['h']/0x2-this['y']-this['h']/0x2,player['x']+player['w']/0x2-this['w']/0x2-this['x'])+Math['PI']/0x2;for(let _0x305ff5=0x0;_0x305ff5<this[_0x358ae8(0xc3)]['length'];_0x305ff5++){this[_0x358ae8(0xc3)][_0x305ff5]['x']=this['x']+this[_0x358ae8(0xc3)][_0x305ff5][_0x358ae8(0x13f)],this['arrows'][_0x305ff5]['y']=this['y']+this['arrows'][_0x305ff5][_0x358ae8(0xbf)];}this['hp']<=0x0&&(this[_0x358ae8(0xf6)]=!![]),this[_0x358ae8(0xf6)]&&(this[_0x358ae8(0x13b)]=0x0,this[_0x358ae8(0x11a)]=!![],this[_0x358ae8(0xf0)]=0x2,this['frameCounter']=0x0,this[_0x358ae8(0xe5)]=0x0,this[_0x358ae8(0xd7)]=0xa);}['draw'](){const _0x19ca2a=_0x2bbabf;this[_0x19ca2a(0x13d)]++;this[_0x19ca2a(0x13d)]>this[_0x19ca2a(0xd7)]*DTR&&(this[_0x19ca2a(0x13d)]=0x0,this[_0x19ca2a(0xe5)]++,this['currentFrame']>=this[_0x19ca2a(0x11c)][this[_0x19ca2a(0xf0)]]['length']&&(this[_0x19ca2a(0x11a)]?this[_0x19ca2a(0xe5)]=this[_0x19ca2a(0x11c)][this[_0x19ca2a(0xf0)]]['length']-0x1:this[_0x19ca2a(0xe5)]=0x0));if(!this[_0x19ca2a(0x11a)]){this[_0x19ca2a(0x98)]?this[_0x19ca2a(0xf0)]=0x1:this[_0x19ca2a(0xf0)]=0x0;for(let _0x4a8189=0x0;_0x4a8189<this['arrows']['length'];_0x4a8189++){this[_0x19ca2a(0xc3)][_0x4a8189][_0x19ca2a(0x99)]();}}this[_0x19ca2a(0x98)]?this[_0x19ca2a(0xd7)]=0x4:this['slowness']=0x8,this[_0x19ca2a(0x13b)]&&(this[_0x19ca2a(0xf0)]=0x2,this[_0x19ca2a(0xe5)]=0x0,this['framecounter']=0x0,this['justDamaged']--),c[_0x19ca2a(0x126)](this[_0x19ca2a(0xad)],this['actionX'][this[_0x19ca2a(0xf0)]][this[_0x19ca2a(0xe5)]]*TILESIZE,this[_0x19ca2a(0x9e)][this['action']][this['currentFrame']]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']),(this[_0x19ca2a(0xf0)]==0x0||this[_0x19ca2a(0xf0)]==0x1)&&(c['save'](),c[_0x19ca2a(0xb9)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']-0x6),c['rotate'](this['radians']),c[_0x19ca2a(0x126)](this[_0x19ca2a(0xad)],this[_0x19ca2a(0x140)][this[_0x19ca2a(0xf0)]][this[_0x19ca2a(0xe5)]]*TILESIZE,this[_0x19ca2a(0xf8)][this[_0x19ca2a(0xf0)]][this[_0x19ca2a(0xe5)]]*TILESIZE,TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c[_0x19ca2a(0x138)]());}}function getTileData(_0x168e3c,_0x1abf1d){const _0x4789a7=_0x2bbabf;let _0x462e43=(_0x168e3c/TILESIZE|0x0)+(_0x1abf1d/TILESIZE|0x0)*map[_0x4789a7(0x133)];for(let _0x20618b=0x0;_0x20618b<map['tiles'][_0x4789a7(0xb8)];_0x20618b++){for(let _0x34821b=0x0;_0x34821b<TilesData[_0x4789a7(0xb8)];_0x34821b++){if(TilesData[_0x34821b]['id']==map[_0x4789a7(0x142)][_0x20618b][_0x462e43]-0x1)return TilesData[_0x34821b];}}return![];}window[_0x2bbabf(0x101)]=function(){const _0x69f166=_0x2bbabf;player[_0x69f166(0xec)]!==0x0?player[_0x69f166(0xc7)]():player[_0x69f166(0xcf)]=0xa;},window[_0x2bbabf(0x111)]=function(_0x21ad96){const _0x1484a9=_0x2bbabf;_0x21ad96[_0x1484a9(0xfd)](),player[_0x1484a9(0xa9)]();},document[_0x2bbabf(0x11d)](_0x2bbabf(0xb4),function(_0x1e4166){const _0x441eb7=_0x2bbabf;switch(_0x1e4166[_0x441eb7(0xc1)]){case 0x0:userInterface[_0x441eb7(0xf3)]=!![];break;case 0x2:userInterface[_0x441eb7(0xd3)]=!![];break;}}),document[_0x2bbabf(0x11d)](_0x2bbabf(0x112),function(_0x1d1966){const _0x14444b=_0x2bbabf;switch(_0x1d1966[_0x14444b(0xc1)]){case 0x0:userInterface[_0x14444b(0xf3)]=![];break;case 0x2:userInterface[_0x14444b(0xd3)]=![];break;}});var stats=id(_0x2bbabf(0x115));function drawStats(){const _0x60ccd5=_0x2bbabf;stats['innerHTML']=_0x60ccd5(0x113)+player['x'],stats[_0x60ccd5(0x103)]+=_0x60ccd5(0xac)+player['y'],stats[_0x60ccd5(0x103)]+=_0x60ccd5(0x109)+(Mouse['x']/TILESIZE|0x0)*TILESIZE,stats['innerHTML']+=_0x60ccd5(0x132)+(Mouse['y']/TILESIZE|0x0)*TILESIZE,stats['innerHTML']+='<br>mouseTile\x20pos\x20=\x20'+((Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x60ccd5(0x133)]),stats[_0x60ccd5(0x103)]+=_0x60ccd5(0xcb)+map[_0x60ccd5(0x142)][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x60ccd5(0x133)]],map[_0x60ccd5(0x142)][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map['width']],DEBUG&&(c['rect']((Mouse['x']/TILESIZE|0x0)*TILESIZE+map['x'],(Mouse['y']/TILESIZE|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE),c[_0x60ccd5(0x108)]());}window[_0x2bbabf(0x11d)](_0x2bbabf(0xb6),function(_0x1d5b14){const _0x9e97fd=_0x2bbabf;switch(_0x1d5b14[_0x9e97fd(0xc8)]){case 0x41:player['L']=!![];break;case 0x44:player['R']=!![];break;case 0x57:player['T']=!![];break;case 0x53:player['B']=!![];break;case 0x31:monsters[_0x9e97fd(0x114)](new Mole(Mouse['x']-0x10,Mouse['y']-0x10));break;case 0x32:console[_0x9e97fd(0x97)](getTileData(Mouse['x'],Mouse['y']));break;case 0x33:for(let _0x427d3e=0x0;_0x427d3e<0x32;_0x427d3e++){player[_0x9e97fd(0xc7)](),player[_0x9e97fd(0x9f)]=player[_0x9e97fd(0x12e)]*DTR,player[_0x9e97fd(0x11f)]();}break;case 0x20:!gamePaused?gamePaused=!![]:gamePaused=![];break;}}),window[_0x2bbabf(0x11d)](_0x2bbabf(0x9c),function(_0x5741f1){const _0x318882=_0x2bbabf;switch(_0x5741f1[_0x318882(0xc8)]){case 0x41:player['L']=![];break;case 0x44:player['R']=![];break;case 0x57:player['T']=![];break;case 0x53:player['B']=![];break;}}),window['addEventListener'](_0x2bbabf(0xbc),function(_0x486851){const _0x6adf2f=_0x2bbabf;mousePP['x']=_0x486851['clientX']-CANVAS['offsetLeft'],mousePP['y']=_0x486851['clientY']-CANVAS[_0x6adf2f(0xc5)];});function moveCamera(){const _0x50eb15=_0x2bbabf;map['x']=-player['x']/0x3+CANVAS['width']/0x6,map['y']=-player['y']/0x3+CANVAS[_0x50eb15(0xe6)]/0x6,screenShake[_0x50eb15(0xb1)]&&(screenShake[_0x50eb15(0xb1)]--,screenShake[_0x50eb15(0xd9)](),map['x']+=screenShake['x'],map['y']+=screenShake['y']),map['x']=map['x']|0x0,map['y']=map['y']|0x0;}var sampleArrow=new Projectile();function computeDrawArrows(){const _0x23c439=_0x2bbabf;c[_0x23c439(0xa4)]=0x2,c[_0x23c439(0xde)]=sampleArrow[_0x23c439(0x11e)][0x0],c[_0x23c439(0xa6)]();for(let _0x3e122c=playerArrows[_0x23c439(0xb8)]-0x1;_0x3e122c>=0x0;_0x3e122c--){if(!playerArrows[_0x3e122c][_0x23c439(0x148)]||playerArrows[_0x3e122c][_0x23c439(0x131)]!=0x1)continue;playerArrows[_0x3e122c][_0x23c439(0x10f)]&&playerArrows[_0x3e122c][_0x23c439(0x117)]();if(playerArrows[_0x3e122c]!==undefined)playerArrows[_0x3e122c][_0x23c439(0x99)]();}c['closePath'](),c[_0x23c439(0x108)](),c[_0x23c439(0xde)]=sampleArrow[_0x23c439(0x11e)][0x1],c[_0x23c439(0xa6)]();for(let _0x39b23b=playerArrows[_0x23c439(0xb8)]-0x1;_0x39b23b>=0x0;_0x39b23b--){if(!playerArrows[_0x39b23b][_0x23c439(0x148)]||playerArrows[_0x39b23b]['color']!=0x2)continue;playerArrows[_0x39b23b][_0x23c439(0x10f)]&&playerArrows[_0x39b23b]['compute']();if(playerArrows[_0x39b23b]!==undefined)playerArrows[_0x39b23b][_0x23c439(0x99)]();}c[_0x23c439(0xfa)](),c[_0x23c439(0x108)]();}function loop(){const _0x267b18=_0x2bbabf;fps++,c[_0x267b18(0xee)](0x0,0x0,CANVAS[_0x267b18(0x133)],CANVAS[_0x267b18(0xe6)]),moveCamera(),map[_0x267b18(0x99)](),player[_0x267b18(0x117)]();for(let _0x533120=enemyProjectiles[_0x267b18(0xb8)]-0x1;_0x533120>=0x0;_0x533120--){enemyProjectiles[_0x533120][_0x267b18(0x117)]();}sortMonsters(),Mouse['x']=mousePP['x']-map['x'],Mouse['y']=mousePP['y']-map['y'];for(let _0x1c4689=0x0;_0x1c4689<monsters[_0x267b18(0xb8)];_0x1c4689++){!monsters[_0x1c4689][_0x267b18(0x11a)]&&monsters[_0x1c4689][_0x267b18(0x117)](),monsters[_0x1c4689][_0x267b18(0x99)]();}player[_0x267b18(0x99)](),adjustCollidingMonsters(),renderHpBars(),computeDrawArrows();for(let _0x243c6a=enemyProjectiles['length']-0x1;_0x243c6a>=0x0;_0x243c6a--){enemyProjectiles[_0x243c6a][_0x267b18(0x99)]();}sword['active']&&(sword[_0x267b18(0x117)](),sword[_0x267b18(0x99)]());for(let _0x271039=visualFxs['length']-0x1;_0x271039>=0x0;_0x271039--){!visualFxs[_0x271039]['ended']&&visualFxs[_0x271039][_0x267b18(0x99)]();}userInterface[_0x267b18(0x99)](),drawStats();}var lastUpdate=Date[_0x2bbabf(0x13e)](),myInterval=setInterval(tick,0x3e8/0x3c),DTR=0x1;function tick(){var _0x4bd338=Date['now'](),_0x4a8c8c=_0x4bd338-lastUpdate;lastUpdate=_0x4bd338,DTR=0x3e8/0x3c/_0x4a8c8c,!gamePaused&&loop();}