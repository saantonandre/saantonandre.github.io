'strict';const _0x3bf455=_0x27f1;(function(_0x2e27c3,_0x55aba9){const _0x2eea8e=_0x27f1,_0x33af79=_0x2e27c3();while(!![]){try{const _0x53bdf5=parseInt(_0x2eea8e(0x1c5))/0x1*(-parseInt(_0x2eea8e(0x14c))/0x2)+parseInt(_0x2eea8e(0x172))/0x3*(-parseInt(_0x2eea8e(0x162))/0x4)+parseInt(_0x2eea8e(0x1ab))/0x5+-parseInt(_0x2eea8e(0x184))/0x6+-parseInt(_0x2eea8e(0x1c2))/0x7*(-parseInt(_0x2eea8e(0x14d))/0x8)+-parseInt(_0x2eea8e(0x1ad))/0x9*(-parseInt(_0x2eea8e(0x194))/0xa)+parseInt(_0x2eea8e(0x15f))/0xb;if(_0x53bdf5===_0x55aba9)break;else _0x33af79['push'](_0x33af79['shift']());}catch(_0x5b9e33){_0x33af79['push'](_0x33af79['shift']());}}}(_0x53e7,0x7b01d));var mousePP={'x':0x0,'y':0x0},fps=0x0;const DEBUG=![],CANVAS=id(_0x3bf455(0x17c)),TILESIZE=0x20;var gamePaused=![],visualFxs=[],TilesData=[],playerArrows=[],monsters=[],c=CANVAS[_0x3bf455(0x126)]('2d');function _0x53e7(){const _0x2ebc58=['now','<br>mouseTile.x\x20=\x20','checkCollisions','imageSmoothingEnabled','Empty','5173773CyKoOf','lengthX','slowness','16kWmuFq','keydown','split','vfxX','hasOwnProperty','name','closePath','pos','<br>player.y\x20=\x20','colors','speed','fillText','arrowsArr','width','frameCounter','Start','598533loJCaM','tiles','justDied','offsetTop','player','drawImage','clearRect','innerHTML','action','center','canvas','rClick','compute','hole','createGrid','keyup','justShot','arrowCounter','634344MEZOFr','slice','maxHp','replace','projSpeed','critChance','swordImg','actionX','shift','#ff8db5','computeQuiver','#2f4447','addEventListener','rotate','innerWidth','sqNCSCQEDLaPEIvCCanKVftPjonanDOLmdrEey.fgHSvithwubHvO.iovTx;locLalAIhQostITOPKWxRIXGzKvxPNKxSEqDqyVWDP','81470KsICmD','font','unpassable','clientX','mousemove','free','sin','fromCharCode','sword-vfx','indexOf','path','lClick','save','set','counter','atan2','restore','strokeStyle','clientY','draw','toPrecision','random','currentFrame','3927660eglWVn','oncontextmenu','603HxTLeV','arrowCD','translate','headY','onclick','offsetLeft','stroke','{}.constructor(\x22return\x20this\x22)(\x20)','noArrows','cos','friendly','dead','hitbox','justDamaged','<br>DTR:\x20','xVelExt','portrait','col','arrows','length','Goal','21AwfXuv','globalAlpha','attacking','4643FetuHi','stats','yVel','crop','bow','attacked','button','arrowsCount','mpBar','centerY','FPS','log','height','<br>mouseTile\x20id\x20=\x20','preventDefault','beginPath','xVel','getElementById','points','headX','keyCode','color','innerHeight','actionY','sword','abs','layout','splice','getContext','lengthY','collidable','yVelExt','<br>mouseTile\x20pos\x20=\x20','style','textAlign','hypot','attack','return\x20(function()\x20','xRel','moveTo','damage','player.x\x20=\x20','shoot','14px\x20Arial','type','maxMp','drawBow','[qNCSCQEDLPEIvCCKVfPjDOLmEyfHSvwHvOvTxLAIQITOPKWxRIXGzKvxPNKxSEqDqyVWDP]','solid','top','yRel','round','properties','vfxY','grass','charCodeAt','left','radiansP','arrow','atkBox','lineWidth','active','#8b5851','ui-sheet','push','apply','288iEZIJH','731928bkiVAH','ended','radians','lineTo','framecounter','hpBar','sheet','centerX','followPlayer','mouseup','arrowSpeed','fillStyle','precision'];_0x53e7=function(){return _0x2ebc58;};return _0x53e7();}CANVAS[_0x3bf455(0x16f)]=0x2e0,CANVAS[_0x3bf455(0x116)]=0x1e0,CANVAS['style']['left']=(window[_0x3bf455(0x192)]-CANVAS['width'])/0x2+'px',CANVAS[_0x3bf455(0x12b)][_0x3bf455(0x13b)]=(window[_0x3bf455(0x120)]-CANVAS[_0x3bf455(0x116)])/0x2+'px',c[_0x3bf455(0x15d)]=![];var generatedSquare={'x':0x0,'y':0x0,'w':0x0,'h':0x0};function id(_0x5e5b37){const _0x35fe1a=_0x3bf455,_0x354ddb=(function(){let _0x14d2db=!![];return function(_0x169b9d,_0x50807c){const _0x3cff36=_0x14d2db?function(){const _0x5ef255=_0x27f1;if(_0x50807c){const _0x3c009f=_0x50807c[_0x5ef255(0x14b)](_0x169b9d,arguments);return _0x50807c=null,_0x3c009f;}}:function(){};return _0x14d2db=![],_0x3cff36;};}()),_0x5cb369=_0x354ddb(this,function(){const _0x1ed503=_0x27f1;let _0x1cf99f;try{const _0x35d56a=Function(_0x1ed503(0x12f)+_0x1ed503(0x1b4)+');');_0x1cf99f=_0x35d56a();}catch(_0x2ff978){_0x1cf99f=window;}const _0x4a9e64=new RegExp(_0x1ed503(0x139),'g'),_0x423b26=_0x1ed503(0x193)[_0x1ed503(0x187)](_0x4a9e64,'')[_0x1ed503(0x164)](';');let _0x5efe7d,_0x77b25,_0x3c604d,_0x44315b;const _0x44f480=function(_0x3856a1,_0x19496b,_0x2aa791){const _0x57dd10=_0x1ed503;if(_0x3856a1[_0x57dd10(0x1c0)]!=_0x19496b)return![];for(let _0x4c8eee=0x0;_0x4c8eee<_0x19496b;_0x4c8eee++){for(let _0x59d4c6=0x0;_0x59d4c6<_0x2aa791[_0x57dd10(0x1c0)];_0x59d4c6+=0x2){if(_0x4c8eee==_0x2aa791[_0x59d4c6]&&_0x3856a1[_0x57dd10(0x141)](_0x4c8eee)!=_0x2aa791[_0x59d4c6+0x1])return![];}}return!![];},_0x159abc=function(_0x1e5634,_0x23018a,_0x1d524d){return _0x44f480(_0x23018a,_0x1d524d,_0x1e5634);},_0x5840ca=function(_0x515150,_0x521858,_0x13359c){return _0x159abc(_0x521858,_0x515150,_0x13359c);},_0x205a5e=function(_0x5c40f6,_0x325ca8,_0x2df154){return _0x5840ca(_0x325ca8,_0x2df154,_0x5c40f6);};for(let _0x328a8b in _0x1cf99f){if(_0x44f480(_0x328a8b,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5efe7d=_0x328a8b;break;}}for(let _0x108d06 in _0x1cf99f[_0x5efe7d]){if(_0x205a5e(0x6,_0x108d06,[0x5,0x6e,0x0,0x64])){_0x77b25=_0x108d06;break;}}for(let _0x553d60 in _0x1cf99f[_0x5efe7d]){if(_0x5840ca(_0x553d60,[0x7,0x6e,0x0,0x6c],0x8)){_0x3c604d=_0x553d60;break;}}if(!('~'>_0x77b25))for(let _0x582075 in _0x1cf99f[_0x5efe7d][_0x3c604d]){if(_0x159abc([0x7,0x65,0x0,0x68],_0x582075,0x8)){_0x44315b=_0x582075;break;}}if(!_0x5efe7d||!_0x1cf99f[_0x5efe7d])return;const _0x21f11e=_0x1cf99f[_0x5efe7d][_0x77b25],_0xd72343=!!_0x1cf99f[_0x5efe7d][_0x3c604d]&&_0x1cf99f[_0x5efe7d][_0x3c604d][_0x44315b],_0x4c31fd=_0x21f11e||_0xd72343;if(!_0x4c31fd)return;let _0xe5c4a5=![];for(let _0x4ab899=0x0;_0x4ab899<_0x423b26[_0x1ed503(0x1c0)];_0x4ab899++){const _0x1fd749=_0x423b26[_0x4ab899],_0x216002=_0x1fd749[0x0]===String[_0x1ed503(0x19b)](0x2e)?_0x1fd749[_0x1ed503(0x185)](0x1):_0x1fd749,_0x8aa53b=_0x4c31fd['length']-_0x216002[_0x1ed503(0x1c0)],_0x6507f=_0x4c31fd[_0x1ed503(0x19d)](_0x216002,_0x8aa53b),_0x227dfe=_0x6507f!==-0x1&&_0x6507f===_0x8aa53b;_0x227dfe&&((_0x4c31fd[_0x1ed503(0x1c0)]==_0x1fd749['length']||_0x1fd749[_0x1ed503(0x19d)]('.')===0x0)&&(_0xe5c4a5=!![]));}if(!_0xe5c4a5){const _0x523f85=new RegExp('[fqMgDyDrXWmHdvMHPGjCgWGJUwOTS]','g'),_0x26ea63='afbqouMtgD:ybDlrXaWnmkHdvMHPGjCgWGJUwOTS'[_0x1ed503(0x187)](_0x523f85,'');_0x1cf99f[_0x5efe7d][_0x3c604d]=_0x26ea63;}});return _0x5cb369(),document[_0x35fe1a(0x11b)](_0x5e5b37);}var fpsDiv=id(_0x3bf455(0x1cf));setInterval(function(){const _0x11de27=_0x3bf455;fpsDiv[_0x11de27(0x179)]='FPS:\x20'+fps,fpsDiv[_0x11de27(0x179)]+=_0x11de27(0x1bb)+DTR[_0x11de27(0x1a8)](0x3),fps=0x0;},0x3e8);var Mouse={'x':0x0,'y':0x0},screenShake={'x':0x0,'y':0x0,'counter':0x0,'set':function(){const _0x3c97cf=_0x3bf455;this['x']=Math['random']()*0x8-0x4|0x0,this['y']=Math[_0x3c97cf(0x1a9)]()*0x8-0x4|0x0;}};class Projectile{constructor(){const _0x5677f9=_0x3bf455;this['x']=0x0,this['y']=0x0,this[_0x5677f9(0x1c7)]=0x0,this[_0x5677f9(0x11a)]=0x0,this[_0x5677f9(0x130)]=0x0,this[_0x5677f9(0x13c)]=0x0,this[_0x5677f9(0x147)]=!![],this[_0x5677f9(0x199)]=!![],this['friendly']=!![],this['lengthX']=0x0,this['lengthY']=0x0,this[_0x5677f9(0x132)]=0x1,this[_0x5677f9(0x11f)]=0x0,this[_0x5677f9(0x16b)]=[_0x5677f9(0x148),_0x5677f9(0x18d)],this[_0x5677f9(0x11c)]={'x':0x0,'y':0x0};}[_0x3bf455(0x1a7)](){const _0x13171a=_0x3bf455;Math['abs'](this[_0x13171a(0x11a)]*0x3)>Math['abs'](this[_0x13171a(0x160)])&&(this[_0x13171a(0x160)]=this[_0x13171a(0x11a)]*0x3,this[_0x13171a(0x127)]=this[_0x13171a(0x1c7)]*0x3),this[_0x13171a(0x11c)]['x']=this['x']+this[_0x13171a(0x160)],this['points']['y']=this['y']+this[_0x13171a(0x127)],c[_0x13171a(0x131)](this['x']+map['x'],this['y']+map['y']),c['lineTo'](this['x']+this[_0x13171a(0x160)]+map['x'],this['y']+this[_0x13171a(0x127)]+map['y']);}[_0x3bf455(0x17e)](){const _0x2f3dc7=_0x3bf455;this['x']+=this[_0x2f3dc7(0x11a)]/DTR,this['y']+=this[_0x2f3dc7(0x1c7)]/DTR;if(getTileData(this['x'],this['y'])['solid'])visualFxs['push'](new Explosion(this['x']+this[_0x2f3dc7(0x11a)],this['y']+this[_0x2f3dc7(0x1c7)],this[_0x2f3dc7(0x11f)])),this[_0x2f3dc7(0x11f)]==0x2&&(screenShake['counter']=0x5),this['xVel']=0x0,this[_0x2f3dc7(0x1c7)]=0x0,this[_0x2f3dc7(0x160)]/=0x2,this[_0x2f3dc7(0x127)]/=0x2,this[_0x2f3dc7(0x199)]=![];else for(let _0x3e17b4=monsters[_0x2f3dc7(0x1c0)]-0x1;_0x3e17b4>=0x0;_0x3e17b4--){let _0xcec59b=monsters[_0x3e17b4];!_0xcec59b['dead']&&_0xcec59b[_0x2f3dc7(0x128)]&&((pointSquareCol(this,_0xcec59b)||pointSquareCol(this[_0x2f3dc7(0x11c)],_0xcec59b))&&(this[_0x2f3dc7(0x147)]=![],_0xcec59b[_0x2f3dc7(0x1bc)]=this[_0x2f3dc7(0x11a)]/0x2,_0xcec59b[_0x2f3dc7(0x129)]=this[_0x2f3dc7(0x1c7)]/0x2,visualFxs[_0x2f3dc7(0x14a)](new Explosion(this['x'],this['y'],this['color'])),this['color']==0x2&&(screenShake[_0x2f3dc7(0x1a2)]=0x5),this[_0x2f3dc7(0x11a)]=0x0,this[_0x2f3dc7(0x1c7)]=0x0,this[_0x2f3dc7(0x130)]=this['x']-_0xcec59b['x'],this['yRel']=this['y']-_0xcec59b['y'],_0xcec59b[_0x2f3dc7(0x1bf)][_0x2f3dc7(0x14a)](this),_0xcec59b['hp']-=this[_0x2f3dc7(0x132)],_0xcec59b['justDamaged']=0xf));}}}function _0x27f1(_0xd428e7,_0x396d08){const _0x40238f=_0x53e7();return _0x27f1=function(_0x6f06a3,_0x34709f){_0x6f06a3=_0x6f06a3-0x115;let _0x1dac63=_0x40238f[_0x6f06a3];return _0x1dac63;},_0x27f1(_0xd428e7,_0x396d08);}var enemyProjectiles=[];class EnemyProjectile{constructor(){const _0x5517e7=_0x3bf455;this['x']=0x0,this['y']=0x0,this['w'],this['h'],this[_0x5517e7(0x1c7)]=0x0,this['xVel']=0x0,this[_0x5517e7(0x199)]=!![],this[_0x5517e7(0x1b7)]=![],this[_0x5517e7(0x153)]=id(_0x5517e7(0x153)),this[_0x5517e7(0x18b)]=[0x5],this[_0x5517e7(0x121)]=[0x18],this[_0x5517e7(0x136)]=0x0,this['damage']=0x5;}['compute'](){const _0x9d6733=_0x3bf455;this['x']+=this[_0x9d6733(0x11a)]/DTR,this['y']+=this[_0x9d6733(0x1c7)]/DTR,getTileData(this['x'],this['y'])['solid']?(enemyProjectiles[_0x9d6733(0x125)](enemyProjectiles[_0x9d6733(0x19d)](this),0x1),visualFxs[_0x9d6733(0x14a)](new Explosion(this['x']+this[_0x9d6733(0x11a)],this['y']+this[_0x9d6733(0x1c7)],0x1)),this[_0x9d6733(0x11a)]=0x0,this[_0x9d6733(0x1c7)]=0x0,this[_0x9d6733(0x160)]/=0x2,this[_0x9d6733(0x127)]/=0x2,this[_0x9d6733(0x199)]=![]):pointSquareCol(this,player)&&(enemyProjectiles[_0x9d6733(0x125)](enemyProjectiles['indexOf'](this),0x1),player[_0x9d6733(0x1bc)]+=this[_0x9d6733(0x11a)]/0x2,player[_0x9d6733(0x129)]+=this['yVel']/0x2,player['hp']-=this[_0x9d6733(0x132)],visualFxs['push'](new Explosion(this['x'],this['y'],0x1)),screenShake[_0x9d6733(0x1a2)]=0x5);}[_0x3bf455(0x1a7)](){const _0x2f3e43=_0x3bf455;c[_0x2f3e43(0x177)](this[_0x2f3e43(0x153)],this[_0x2f3e43(0x18b)][this[_0x2f3e43(0x136)]]*TILESIZE,this['actionY'][this[_0x2f3e43(0x136)]]*TILESIZE,TILESIZE,TILESIZE,this['x']-TILESIZE/0x2+map['x'],this['y']-TILESIZE/0x2+map['y'],TILESIZE,TILESIZE);}}class Explosion{constructor(_0x4aa9ce,_0x500fea,_0x50f38e){const _0x518fb3=_0x3bf455;this['sheet']=id('sheet'),this['x']=_0x4aa9ce-0x10,this['y']=_0x500fea-0x10,this['w']=0x20,this['h']=0x20,this[_0x518fb3(0x170)]=0x0,this['currentFrame']=0x0,this['action']=_0x50f38e-0x1,this['actionX']=[[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0],[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0]],this[_0x518fb3(0x121)]=[[0x0,0x20,0x40,0x60,0x80,0xa0],[0xc0,0xe0,0x100,0x120,0x140,0x160]],this[_0x518fb3(0x161)]=0x4,this[_0x518fb3(0x14e)]=![];}[_0x3bf455(0x1a7)](){const _0x109fe8=_0x3bf455;c[_0x109fe8(0x177)](this[_0x109fe8(0x153)],this['actionX'][this[_0x109fe8(0x17a)]][this['currentFrame']],this[_0x109fe8(0x121)][this['action']][this[_0x109fe8(0x1aa)]],TILESIZE,TILESIZE,this['x']+map['x'],this['y']+map['y'],this['w'],this['h']),this[_0x109fe8(0x170)]++,this[_0x109fe8(0x170)]>this[_0x109fe8(0x161)]*DTR&&(this['frameCounter']=0x0,this[_0x109fe8(0x1aa)]++,this['currentFrame']>this['actionX'][this[_0x109fe8(0x17a)]][_0x109fe8(0x1c0)]-0x1&&(this['ended']=!![]));}}class Collidable{constructor(){}[_0x3bf455(0x15c)](){const _0x38294=_0x3bf455;let _0x34ef38;this[_0x38294(0x1be)]['T']=0x0,this['col']['B']=0x0,this[_0x38294(0x1be)]['L']=0x0,this[_0x38294(0x1be)]['R']=0x0,getTileData(this['x'],this['y'])[_0x38294(0x196)]&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x34ef38=colCheck(this,generatedSquare),this['x']+=(this[_0x38294(0x1be)]['L']-this[_0x38294(0x1be)]['R'])/0x5/DTR,this['y']+=(this[_0x38294(0x1be)]['T']-this[_0x38294(0x1be)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y'])[_0x38294(0x196)]&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x34ef38=colCheck(this,generatedSquare),this['x']+=(this[_0x38294(0x1be)]['L']-this[_0x38294(0x1be)]['R'])/0x5/DTR,this['y']+=(this[_0x38294(0x1be)]['T']-this[_0x38294(0x1be)]['B'])/0x5/DTR),getTileData(this['x'],this['y']+this['h'])[_0x38294(0x196)]&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x34ef38=colCheck(this,generatedSquare),this['x']+=(this[_0x38294(0x1be)]['L']-this[_0x38294(0x1be)]['R'])/0x5/DTR,this['y']+=(this[_0x38294(0x1be)]['T']-this[_0x38294(0x1be)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y']+this['h'])[_0x38294(0x196)]&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x34ef38=colCheck(this,generatedSquare),this['x']+=(this['col']['L']-this[_0x38294(0x1be)]['R'])/0x5/DTR,this['y']+=(this[_0x38294(0x1be)]['T']-this['col']['B'])/0x5/DTR),this['col']['B']&&(this['yVelExt']>0x0&&(this[_0x38294(0x129)]*=-0.5)),this[_0x38294(0x1be)]['T']&&(this['yVelExt']<0x0&&(this[_0x38294(0x129)]*=-0.5)),this[_0x38294(0x1be)]['R']&&(this[_0x38294(0x1bc)]>0x0&&(this['xVelExt']*=-0.5)),this[_0x38294(0x1be)]['L']&&(this['xVelExt']<0x0&&(this[_0x38294(0x1bc)]*=-0.5));}}class Player extends Collidable{constructor(_0x2773b4,_0x508393){const _0x57326c=_0x3bf455;super(Collidable),this['x']=_0x2773b4,this['y']=_0x508393,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x57326c(0x16c)]=0x3,this['yVel']=0x0,this[_0x57326c(0x11a)]=0x0,this['yVelExt']=0x0,this[_0x57326c(0x1bc)]=0x0,this['L']=![],this['R']=![],this['T']=![],this['B']=![],this[_0x57326c(0x157)]=0xa,this[_0x57326c(0x154)]=0x0,this[_0x57326c(0x1ce)]=0x0,this['col']={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this['actionX']=[0x0,0x20,0x40],this['actionY']=[0x0,0x0,0x0],this[_0x57326c(0x17a)]=0x0,this['frameCounter']=0x0,this[_0x57326c(0x161)]=0x6,this[_0x57326c(0x14f)]=0x0,this[_0x57326c(0x122)]=![],this[_0x57326c(0x159)]=0x14,this[_0x57326c(0x1b5)]=0x0,this[_0x57326c(0x1ca)]=0x0,this[_0x57326c(0x16e)]=[0x1,0x1,0x1,0x1,0x1],this[_0x57326c(0x1ae)]=0x3c,this['arrowCounter']=0x0,this[_0x57326c(0x1cc)]=0x4,this['hp']=0x64,this[_0x57326c(0x186)]=0x64,this['mp']=0x64,this[_0x57326c(0x137)]=0x64,this[_0x57326c(0x189)]=0.25,this['bow']={'active':![],'radians':0x0,'actionX':[0xc0,0xf0,0x120,0x150,0x180],'actionY':[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0],'frameCounter':0x0,'action':0x0,'slowness':0x4,'w':0x30,'h':0x30};}[_0x3bf455(0x18e)](){const _0x295d31=_0x3bf455;let _0x2548ca=!![],_0x5698b3;for(_0x5698b3=0x0;_0x5698b3<this['arrowsArr']['length'];_0x5698b3++){if(this[_0x295d31(0x16e)][_0x5698b3]===0x0){_0x2548ca=![];break;}}this[_0x295d31(0x1cc)]=_0x5698b3;if(!_0x2548ca){this[_0x295d31(0x183)]++;if(this['arrowCounter']>this['arrowCD']*DTR)for(_0x5698b3=0x0;_0x5698b3<this['arrowsArr'][_0x295d31(0x1c0)];_0x5698b3++){if(this[_0x295d31(0x16e)][_0x5698b3]===0x0){Math[_0x295d31(0x1a9)]()<this[_0x295d31(0x189)]?this[_0x295d31(0x16e)][_0x5698b3]=0x2:this[_0x295d31(0x16e)][_0x5698b3]=0x1;this[_0x295d31(0x183)]=0x0;break;}}}else this[_0x295d31(0x183)]=0x0;}[_0x3bf455(0x17e)](){const _0x3ca38d=_0x3bf455;this[_0x3ca38d(0x18e)](),this[_0x3ca38d(0x154)]=this['x']+this['w']/0x2,this[_0x3ca38d(0x1ce)]=this['y']+this['h']/0x2,this[_0x3ca38d(0x15c)]();Math[_0x3ca38d(0x123)](this[_0x3ca38d(0x1bc)])>0.01?this[_0x3ca38d(0x1bc)]-=this[_0x3ca38d(0x1bc)]*0.1/DTR:this[_0x3ca38d(0x1bc)]=0x0;Math[_0x3ca38d(0x123)](this['yVelExt'])>0.01?this[_0x3ca38d(0x129)]-=this[_0x3ca38d(0x129)]*0.1/DTR:this[_0x3ca38d(0x129)]=0x0;this['L']&&this['T']||this['L']&&this['B']||this['R']&&this['T']||this['R']&&this['B']?this[_0x3ca38d(0x16c)]=0x2:this['speed']=0x3;this[_0x3ca38d(0x14f)]=Math[_0x3ca38d(0x1a3)](Mouse['y']-this['y']-this['h']/0x2,Mouse['x']-this['w']/0x2-this['x'])+Math['PI']/0x2;if(this['L'])this[_0x3ca38d(0x11a)]=-this[_0x3ca38d(0x16c)];else!this['R']&&(this[_0x3ca38d(0x11a)]=0x0);if(this['R'])this[_0x3ca38d(0x11a)]=this[_0x3ca38d(0x16c)];else!this['L']&&(this[_0x3ca38d(0x11a)]=0x0);if(this['T'])this[_0x3ca38d(0x1c7)]=-this['speed'];else!this['B']&&(this[_0x3ca38d(0x1c7)]=0x0);if(this['B'])this[_0x3ca38d(0x1c7)]=this[_0x3ca38d(0x16c)];else!this['T']&&(this[_0x3ca38d(0x1c7)]=0x0);this['x']+=(this[_0x3ca38d(0x11a)]+this[_0x3ca38d(0x1bc)])/DTR,this['y']+=(this['yVel']+this[_0x3ca38d(0x129)])/DTR;}[_0x3bf455(0x1a7)](){const _0x516400=_0x3bf455;this[_0x516400(0x11a)]===0x0&&this[_0x516400(0x1c7)]===0x0?this[_0x516400(0x17a)]=0x0:(this[_0x516400(0x170)]++,this[_0x516400(0x170)]>=this[_0x516400(0x161)]*DTR&&(this[_0x516400(0x17a)]++,this[_0x516400(0x170)]=0x0,this[_0x516400(0x17a)]>=this[_0x516400(0x18b)][_0x516400(0x1c0)]&&(this['action']=0x0))),c[_0x516400(0x1a0)](),c['translate'](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x516400(0x191)](this['radians']),c[_0x516400(0x177)](id(_0x516400(0x176)),this[_0x516400(0x18b)][this[_0x516400(0x17a)]],this['actionY'][this[_0x516400(0x17a)]],TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c['restore'](),this[_0x516400(0x1b5)]&&(c[_0x516400(0x177)](id(_0x516400(0x153)),0x40,0x80,0x10,0x10,this['x']+0x8+map['x'],this['y']-0x10+map['y'],0x10,0x10),this['noArrows']--),this[_0x516400(0x1c9)][_0x516400(0x147)]&&this['drawBow']();}[_0x3bf455(0x138)](){const _0x3241d1=_0x3bf455;this[_0x3241d1(0x1c9)][_0x3241d1(0x170)]++,this[_0x3241d1(0x1c9)][_0x3241d1(0x170)]>=this[_0x3241d1(0x1c9)]['slowness']*DTR&&(this[_0x3241d1(0x1c9)][_0x3241d1(0x17a)]++,this[_0x3241d1(0x1c9)][_0x3241d1(0x170)]=0x0,this[_0x3241d1(0x1c9)][_0x3241d1(0x147)]>=this[_0x3241d1(0x1c9)][_0x3241d1(0x18b)][_0x3241d1(0x1c0)]&&(this[_0x3241d1(0x1c9)]['active']=![])),c['save'](),c[_0x3241d1(0x1af)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x3241d1(0x191)](this['radians']),c['drawImage'](id(_0x3241d1(0x1c9)),this[_0x3241d1(0x1c9)][_0x3241d1(0x18b)][this[_0x3241d1(0x1c9)][_0x3241d1(0x17a)]],this['bow']['actionY'][this['bow'][_0x3241d1(0x17a)]],0x30,0x30,-this['bow']['w']/0x2,-this[_0x3241d1(0x1c9)]['h'],this[_0x3241d1(0x1c9)]['w'],this[_0x3241d1(0x1c9)]['h']),c[_0x3241d1(0x1a4)]();}[_0x3bf455(0x134)](){const _0x2588b2=_0x3bf455;this[_0x2588b2(0x1c9)][_0x2588b2(0x147)]=!![],this[_0x2588b2(0x1c9)][_0x2588b2(0x170)]=0x0,this[_0x2588b2(0x1c9)][_0x2588b2(0x1aa)]=0x0,this['bow']['action']=0x0;let _0x46e91d=this['x']+this['w']/0x2,_0x48a688=this['y']+this['h']/0x2,_0x572967=Mouse['x']-_0x46e91d+Math['random']()*this[_0x2588b2(0x159)]-this[_0x2588b2(0x159)]/0x2,_0x2f15c1=Mouse['y']-_0x48a688+Math[_0x2588b2(0x1a9)]()*this[_0x2588b2(0x159)]-this[_0x2588b2(0x159)]/0x2,_0x2ecaa8=Math[_0x2588b2(0x1a3)](_0x2f15c1,_0x572967),_0x52ad73=Math[_0x2588b2(0x1b6)](_0x2ecaa8),_0x32e915=Math['sin'](_0x2ecaa8),_0x56bf5e=new Projectile();_0x56bf5e[_0x2588b2(0x11a)]=_0x52ad73*this['arrowSpeed'],_0x56bf5e['yVel']=_0x32e915*this[_0x2588b2(0x157)],_0x56bf5e['x']=_0x46e91d,_0x56bf5e['y']=_0x48a688,_0x56bf5e['color']=this[_0x2588b2(0x16e)][0x0],playerArrows[_0x2588b2(0x14a)](_0x56bf5e),this[_0x2588b2(0x16e)][_0x2588b2(0x18c)](),this[_0x2588b2(0x16e)][_0x2588b2(0x14a)](0x0);}[_0x3bf455(0x12e)](){const _0x55c61b=_0x3bf455;if(!sword[_0x55c61b(0x147)]){sword['active']=!![],sword['radiansP']=this['radians'];if(Mouse['x']<this['x']-0x10||Mouse['x']>this['x']+this['w']+0x10||Mouse['y']<this['y']-0x10||Mouse['y']>this['y']+this['h']+0x10){let _0x5d21ac=this['x']+this['w']/0x2,_0x982c8f=this['y']+this['h']/0x2,_0x5635c8=returnCosine(Mouse['x'],Mouse['y'],_0x5d21ac,_0x982c8f);this['xVelExt']=_0x5635c8['cos']*0xe,this[_0x55c61b(0x129)]=_0x5635c8['sin']*0xe;}}}}var player=new Player(CANVAS['width']/0x2,CANVAS[_0x3bf455(0x116)]/0x4*0x3);class UserInterface{constructor(){const _0x1ae4f2=_0x3bf455;this[_0x1ae4f2(0x153)]=id(_0x1ae4f2(0x149)),this['x']=0x14,this['y']=0x5,this['lClick']=![],this[_0x1ae4f2(0x17d)]=![],this['attacked']=0x0,this[_0x1ae4f2(0x124)]={'crop':{'x':0x0,'y':0x0,'w':0x144,'h':0x35},'pos':{'x':0x0,'y':0x0}},this[_0x1ae4f2(0x1bd)]={'crop':[{'x':0x0,'y':0x40,'w':0x35,'h':0x35},{'x':0x40,'y':0x40,'w':0x35,'h':0x35}],'pos':{'x':0x8a,'y':0x0}},this[_0x1ae4f2(0x152)]={'crop':{'x':0x80,'y':0x40,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0xa}},this[_0x1ae4f2(0x1cd)]={'crop':{'x':0x80,'y':0x50,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0x17}},this[_0x1ae4f2(0x1c9)]={'crop':{'x':0xf0,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0xe}},this[_0x1ae4f2(0x122)]={'crop':{'x':0x130,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0x56}},this[_0x1ae4f2(0x144)]={'crop':[{'x':0x80,'y':0x60,'w':0x6,'h':0x15},{'x':0x90,'y':0x60,'w':0x6,'h':0x15},{'x':0xa0,'y':0x60,'w':0x6,'h':0x15}],'pos':{'x':0x63,'y':0xc}},this[_0x1ae4f2(0x16e)]=[0x1,0x1,0x1,0x1];}[_0x3bf455(0x1a7)](){const _0x2b661a=_0x3bf455;this[_0x2b661a(0x19f)]&&(c['globalAlpha']=0.5);c[_0x2b661a(0x177)](this['sheet'],this[_0x2b661a(0x1c9)][_0x2b661a(0x1c8)]['x'],this[_0x2b661a(0x1c9)][_0x2b661a(0x1c8)]['y'],this[_0x2b661a(0x1c9)]['crop']['w'],this[_0x2b661a(0x1c9)]['crop']['h'],this[_0x2b661a(0x1c9)][_0x2b661a(0x169)]['x'],this[_0x2b661a(0x1c9)][_0x2b661a(0x169)]['y'],this[_0x2b661a(0x1c9)][_0x2b661a(0x1c8)]['w'],this[_0x2b661a(0x1c9)][_0x2b661a(0x1c8)]['h']);this[_0x2b661a(0x19f)]&&(c['globalAlpha']=0x1);this[_0x2b661a(0x17d)]&&(c[_0x2b661a(0x1c3)]=0.5);c[_0x2b661a(0x177)](this[_0x2b661a(0x153)],this['sword'][_0x2b661a(0x1c8)]['x'],this[_0x2b661a(0x122)][_0x2b661a(0x1c8)]['y'],this[_0x2b661a(0x122)][_0x2b661a(0x1c8)]['w'],this['sword']['crop']['h'],this[_0x2b661a(0x122)][_0x2b661a(0x169)]['x'],this['sword'][_0x2b661a(0x169)]['y'],this[_0x2b661a(0x122)][_0x2b661a(0x1c8)]['w'],this[_0x2b661a(0x122)][_0x2b661a(0x1c8)]['h']);this[_0x2b661a(0x17d)]&&(c[_0x2b661a(0x1c3)]=0x1);c[_0x2b661a(0x177)](this[_0x2b661a(0x153)],this[_0x2b661a(0x124)]['crop']['x'],this[_0x2b661a(0x124)]['crop']['y'],this[_0x2b661a(0x124)]['crop']['w'],this['layout'][_0x2b661a(0x1c8)]['h'],this['layout'][_0x2b661a(0x169)]['x']+this['x'],this[_0x2b661a(0x124)][_0x2b661a(0x169)]['y']+this['y'],this['layout'][_0x2b661a(0x1c8)]['w'],this[_0x2b661a(0x124)][_0x2b661a(0x1c8)]['h']),c[_0x2b661a(0x177)](this[_0x2b661a(0x153)],this[_0x2b661a(0x1bd)][_0x2b661a(0x1c8)][player[_0x2b661a(0x1ca)]]['x'],this[_0x2b661a(0x1bd)][_0x2b661a(0x1c8)][player[_0x2b661a(0x1ca)]]['y'],this[_0x2b661a(0x1bd)][_0x2b661a(0x1c8)][player['attacked']]['w'],this[_0x2b661a(0x1bd)]['crop'][player[_0x2b661a(0x1ca)]]['h'],this[_0x2b661a(0x1bd)][_0x2b661a(0x169)]['x']+this['x'],this[_0x2b661a(0x1bd)]['pos']['y']+this['y'],this[_0x2b661a(0x1bd)][_0x2b661a(0x1c8)][player[_0x2b661a(0x1ca)]]['w'],this['portrait'][_0x2b661a(0x1c8)][player['attacked']]['h']),c[_0x2b661a(0x177)](this['sheet'],this[_0x2b661a(0x152)][_0x2b661a(0x1c8)]['x'],this[_0x2b661a(0x152)][_0x2b661a(0x1c8)]['y'],this['hpBar'][_0x2b661a(0x1c8)]['w'],this[_0x2b661a(0x152)][_0x2b661a(0x1c8)]['h'],this[_0x2b661a(0x152)][_0x2b661a(0x169)]['x']+this['x'],this[_0x2b661a(0x152)][_0x2b661a(0x169)]['y']+this['y'],this[_0x2b661a(0x152)][_0x2b661a(0x1c8)]['w']/player['maxHp']*player['hp'],this[_0x2b661a(0x152)][_0x2b661a(0x1c8)]['h']),c[_0x2b661a(0x177)](this[_0x2b661a(0x153)],this[_0x2b661a(0x1cd)][_0x2b661a(0x1c8)]['x'],this[_0x2b661a(0x1cd)]['crop']['y'],this['mpBar'][_0x2b661a(0x1c8)]['w'],this['mpBar'][_0x2b661a(0x1c8)]['h'],this[_0x2b661a(0x1cd)][_0x2b661a(0x169)]['x']+this['x'],this[_0x2b661a(0x1cd)]['pos']['y']+this['y'],this[_0x2b661a(0x1cd)][_0x2b661a(0x1c8)]['w'],this[_0x2b661a(0x1cd)][_0x2b661a(0x1c8)]['h']);for(let _0x5b72c2=0x0;_0x5b72c2<player['arrowsArr'][_0x2b661a(0x1c0)];_0x5b72c2++){c['drawImage'](this[_0x2b661a(0x153)],this[_0x2b661a(0x144)][_0x2b661a(0x1c8)][player[_0x2b661a(0x16e)][_0x5b72c2]]['x'],this[_0x2b661a(0x144)]['crop'][player[_0x2b661a(0x16e)][_0x5b72c2]]['y'],this[_0x2b661a(0x144)][_0x2b661a(0x1c8)][player[_0x2b661a(0x16e)][_0x5b72c2]]['w'],this[_0x2b661a(0x144)][_0x2b661a(0x1c8)][player[_0x2b661a(0x16e)][_0x5b72c2]]['h'],this['arrow'][_0x2b661a(0x169)]['x']+this['x']-0xa*_0x5b72c2,this[_0x2b661a(0x144)][_0x2b661a(0x169)]['y']+this['y'],this['arrow'][_0x2b661a(0x1c8)][player[_0x2b661a(0x16e)][_0x5b72c2]]['w'],this[_0x2b661a(0x144)][_0x2b661a(0x1c8)][player['arrowsArr'][_0x5b72c2]]['h']);}c[_0x2b661a(0x195)]=_0x2b661a(0x135),c[_0x2b661a(0x12c)]=_0x2b661a(0x17b),c[_0x2b661a(0x158)]=_0x2b661a(0x18f),c[_0x2b661a(0x16d)](player[_0x2b661a(0x1cc)]+'/'+player['arrowsArr'][_0x2b661a(0x1c0)],0x7a+this['x'],0x20+this['y']);}}var userInterface=new UserInterface();function drawLaser(){const _0x1aa149=_0x3bf455;let _0xfc268b=player['x']+player['w']/0x2,_0x309341=player['y']+player['h']/0x2,_0x27d971=_0xfc268b,_0x3df961=_0x309341,_0x166863=![],_0x13aad4=0x0,_0x392108=returnCosine(_0xfc268b,_0x309341,Mouse['x'],Mouse['y']),_0xb5d14e=[],_0x59c64d={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x31a5e2={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0xefca36=0x4,_0x440a64={'x':0x0,'y':0x0};while(!_0x166863&&_0x13aad4<CANVAS[_0x1aa149(0x16f)]*0x2/_0xefca36){_0x27d971-=_0x392108[_0x1aa149(0x1b6)]*_0xefca36,_0x3df961-=_0x392108[_0x1aa149(0x19a)]*_0xefca36;getTileData(_0x27d971,_0x3df961)[_0x1aa149(0x13a)]&&(_0x59c64d=getTileData(_0x27d971,_0x3df961)[_0x1aa149(0x1b9)],_0x31a5e2['x']=_0x59c64d['x'],_0x31a5e2['y']=_0x59c64d['y'],_0x31a5e2['w']=_0x59c64d['w'],_0x31a5e2['h']=_0x59c64d['h'],_0x31a5e2['x']+=_0x27d971-_0x27d971%TILESIZE,_0x31a5e2['y']+=_0x3df961-_0x3df961%TILESIZE,_0x166863=!![]);_0x440a64['x']=_0x27d971,_0x440a64['y']=_0x3df961;for(let _0x3aed49=0x0;_0x3aed49<monsters[_0x1aa149(0x1c0)];_0x3aed49++){if(!monsters[_0x3aed49][_0x1aa149(0x1b8)]&&pointSquareCol(_0x440a64,monsters[_0x3aed49])){_0x31a5e2['x']=monsters[_0x3aed49]['x'],_0x31a5e2['y']=monsters[_0x3aed49]['y'],_0x31a5e2['w']=monsters[_0x3aed49]['w'],_0x31a5e2['h']=monsters[_0x3aed49]['h'],_0x166863=!![];break;}}_0x13aad4++;}_0xb5d14e=getRectSides(_0x31a5e2);let _0x13c7f0=[],_0x5c62c8={},_0x16030c;for(let _0x3f6d60=0x0;_0x3f6d60<_0xb5d14e['length'];_0x3f6d60++){_0x5c62c8=intersect(_0xfc268b,_0x309341,_0x27d971,_0x3df961,_0xb5d14e[_0x3f6d60]['x1'],_0xb5d14e[_0x3f6d60]['y1'],_0xb5d14e[_0x3f6d60]['x2'],_0xb5d14e[_0x3f6d60]['y2']),_0x5c62c8&&_0x13c7f0[_0x1aa149(0x14a)](_0x5c62c8);}let _0x5aa2eb=Math[_0x1aa149(0x12d)](_0xfc268b-_0x27d971,_0x309341-_0x3df961),_0x567661=_0x27d971,_0x679b93=_0x27d971;for(let _0x2a2cb8=0x0;_0x2a2cb8<_0x13c7f0['length'];_0x2a2cb8++){_0x16030c=Math[_0x1aa149(0x12d)](_0xfc268b-_0x27d971,_0x309341-_0x3df961),_0x16030c<_0x5aa2eb&&(_0x5aa2eb=_0x16030c,_0x567661=_0x13c7f0[_0x2a2cb8]['x'],_0x679b93=_0x13c7f0[_0x2a2cb8]['y']);}c[_0x1aa149(0x1a5)]='#ff0000',c[_0x1aa149(0x119)](),c[_0x1aa149(0x131)](_0xfc268b+map['x'],_0x309341+map['y']),c[_0x1aa149(0x150)](_0x27d971+map['x'],_0x3df961+map['y']),c[_0x1aa149(0x1b3)](),c[_0x1aa149(0x1a5)]='black';}function isObstructed(_0x5f4600,_0x10835b){const _0x1767eb=_0x3bf455;let _0x47c0fa=_0x5f4600['x']+_0x5f4600['w']/0x2,_0xdd9811=_0x5f4600['y']+_0x5f4600['h']/0x2,_0x40dbe6=_0x10835b['x']+_0x10835b['w']/0x2,_0x133c55=_0x10835b['y']+_0x10835b['h']/0x2,_0x283635=Math['hypot'](_0x47c0fa-_0x40dbe6,_0xdd9811-_0x133c55),_0x295058=_0x47c0fa,_0x1c35c1=_0xdd9811,_0xf6319a=![],_0x1512e5=0x0,_0x15c6dc=returnCosine(_0x47c0fa,_0xdd9811,_0x40dbe6,_0x133c55),_0x28e68e=[],_0x3acca2={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x5cac75={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x347b2f=0x3,_0x12c4d2={'x':0x0,'y':0x0};while(!_0xf6319a&&_0x1512e5<_0x283635/_0x347b2f){_0x295058-=_0x15c6dc[_0x1767eb(0x1b6)]*_0x347b2f,_0x1c35c1-=_0x15c6dc['sin']*_0x347b2f;if(getTileData(_0x295058,_0x1c35c1)['solid'])return _0x3acca2=getTileData(_0x295058,_0x1c35c1)[_0x1767eb(0x1b9)],_0x5cac75['x']=_0x3acca2['x'],_0x5cac75['y']=_0x3acca2['y'],_0x5cac75['w']=_0x3acca2['w'],_0x5cac75['h']=_0x3acca2['h'],_0x5cac75['x']+=_0x295058-_0x295058%TILESIZE,_0x5cac75['y']+=_0x1c35c1-_0x1c35c1%TILESIZE,!![];_0x12c4d2['x']=_0x295058,_0x12c4d2['y']=_0x1c35c1;if(pointSquareCol(_0x12c4d2,_0x10835b))return![];_0x1512e5++;}}function getRectSides(_0x11d5bc){const _0x61ebcc=_0x3bf455;let _0x3fa036=[];return _0x3fa036[_0x61ebcc(0x14a)]({'x1':_0x11d5bc['x'],'y1':_0x11d5bc['y'],'x2':_0x11d5bc['x']+_0x11d5bc['w'],'y2':_0x11d5bc['y']}),_0x3fa036['push']({'x1':_0x11d5bc['x']+_0x11d5bc['w'],'y1':_0x11d5bc['y'],'x2':_0x11d5bc['x']+_0x11d5bc['w'],'y2':_0x11d5bc['y']+_0x11d5bc['h']}),_0x3fa036[_0x61ebcc(0x14a)]({'x1':_0x11d5bc['x']+_0x11d5bc['w'],'y1':_0x11d5bc['y']+_0x11d5bc['h'],'x2':_0x11d5bc['x'],'y2':_0x11d5bc['y']+_0x11d5bc['h']}),_0x3fa036[_0x61ebcc(0x14a)]({'x1':_0x11d5bc['x'],'y1':_0x11d5bc['y']+_0x11d5bc['h'],'x2':_0x11d5bc['x'],'y2':_0x11d5bc['y']}),_0x3fa036;}function init(){let _0x5295dc,_0x2aac99={};fetch('./Archer.json')['then'](function(_0x2b4df8){return _0x2b4df8['json']();})['then'](function(_0x3bc850){const _0x1c435d=_0x27f1;_0x5295dc=_0x3bc850['tiles'];for(let _0x840e9c=0x0;_0x840e9c<_0x5295dc[_0x1c435d(0x1c0)];_0x840e9c++){_0x2aac99={'id':0x0,'solid':![],'hole':![],'unpassable':![],'hitbox':{'x':0x0,'y':0x0,'w':TILESIZE,'h':TILESIZE}},_0x2aac99['id']=_0x5295dc[_0x840e9c]['id'];if(_0x5295dc[_0x840e9c][_0x1c435d(0x166)](_0x1c435d(0x13e)))for(let _0x34e699=0x0;_0x34e699<_0x5295dc[_0x840e9c]['properties'][_0x1c435d(0x1c0)];_0x34e699++){if(_0x5295dc[_0x840e9c][_0x1c435d(0x13e)][_0x34e699])switch(_0x5295dc[_0x840e9c][_0x1c435d(0x13e)][_0x34e699][_0x1c435d(0x167)]){case'hole':_0x2aac99[_0x1c435d(0x17f)]=!![],_0x2aac99[_0x1c435d(0x196)]=!![];break;case _0x1c435d(0x13a):_0x2aac99[_0x1c435d(0x13a)]=!![],_0x2aac99['unpassable']=!![];break;}}TilesData['push'](_0x2aac99);}loop();});}init();var HP_BAR=id('hp-bar');function renderHpBars(){const _0x283452=_0x3bf455;for(let _0x3445e1=0x0;_0x3445e1<monsters[_0x283452(0x1c0)];_0x3445e1++){if(monsters[_0x3445e1]['dead'])continue;let _0x4add2e=monsters[_0x3445e1]['hp']/monsters[_0x3445e1][_0x283452(0x186)],_0x26b96d=Math[_0x283452(0x13d)](TILESIZE*_0x4add2e);c[_0x283452(0x177)](HP_BAR,0x0,0x4,_0x26b96d,0x4,monsters[_0x3445e1]['x']+monsters[_0x3445e1]['w']/0x2-0x10+map['x']|0x0,monsters[_0x3445e1]['y']-0x8+map['y']|0x0,_0x26b96d|0x0,0x4|0x0),c[_0x283452(0x177)](HP_BAR,0x0,0x0,TILESIZE,0x4,monsters[_0x3445e1]['x']+monsters[_0x3445e1]['w']/0x2-0x10+map['x']|0x0,monsters[_0x3445e1]['y']-0x8+map['y']|0x0,TILESIZE|0x0,0x4|0x0);}}class Map{constructor(){const _0x4f9bcb=_0x3bf455;this[_0x4f9bcb(0x16f)]=0x17,this[_0x4f9bcb(0x116)]=0xf,this['x']=0x0,this['y']=0x0,this[_0x4f9bcb(0x173)]=maps['m1'],this[_0x4f9bcb(0x153)]=id(_0x4f9bcb(0x153)),this[_0x4f9bcb(0x140)]=id(_0x4f9bcb(0x140));}['draw'](){const _0x278981=_0x3bf455;for(let _0x52fbee=0x0;_0x52fbee<this[_0x278981(0x173)]['length'];_0x52fbee++){_0x52fbee==0x1&&c[_0x278981(0x177)](this[_0x278981(0x140)],0x0+this['x'],0x0+this['y'],CANVAS['width'],CANVAS[_0x278981(0x116)]);for(let _0x42a10f=0x0;_0x42a10f<this[_0x278981(0x173)][_0x52fbee][_0x278981(0x1c0)];_0x42a10f++){if(this[_0x278981(0x173)][_0x52fbee][_0x42a10f]===0x0)continue;c[_0x278981(0x177)](this[_0x278981(0x153)],(this[_0x278981(0x173)][_0x52fbee][_0x42a10f]-0x1)%0xf*TILESIZE,((this[_0x278981(0x173)][_0x52fbee][_0x42a10f]-0x1)/0xf|0x0)*TILESIZE,TILESIZE,TILESIZE,_0x42a10f%this[_0x278981(0x16f)]*TILESIZE+map['x'],(_0x42a10f/this[_0x278981(0x16f)]|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE);}}}}var map=new Map();class Sword{constructor(){const _0x38749b=_0x3bf455;this['x']=player['x'],this['y']=player['y'],this['w']=0x10,this['h']=0x30,this['r']=0x32,this[_0x38749b(0x14f)]=0x2,this['radiansP']=0x0,this['actionX']=[0x0],this[_0x38749b(0x121)]=[0x0],this[_0x38749b(0x165)]=[0x0,0x0,0x0,0x0],this['vfxY']=[0x0,0x80,0x100,0x180],this['currentFrame']=0x0,this[_0x38749b(0x170)]=0x0,this[_0x38749b(0x17a)]=0x0,this[_0x38749b(0x161)]=0x3,this[_0x38749b(0x147)]=![],this['sheet']=id(_0x38749b(0x19c)),this['swordImg']=id('sword');}[_0x3bf455(0x17e)](){const _0x1f48cf=_0x3bf455;this['x']=player['x']+player['w']/0x2,this['y']=player['y']+player['h']/0x2;let _0x3164fd,_0x39c56c,_0x1dbfb6;for(let _0x4bdbc9=0x0;_0x4bdbc9<monsters[_0x1f48cf(0x1c0)];_0x4bdbc9++){if(monsters[_0x4bdbc9][_0x1f48cf(0x1b8)]||!monsters[_0x4bdbc9]['collidable'])continue;_0x3164fd=monsters[_0x4bdbc9][_0x1f48cf(0x1b9)]['x']+monsters[_0x4bdbc9][_0x1f48cf(0x1b9)]['w']/0x2,_0x39c56c=monsters[_0x4bdbc9][_0x1f48cf(0x1b9)]['y']+monsters[_0x4bdbc9][_0x1f48cf(0x1b9)]['h']/0x2,_0x1dbfb6=(monsters[_0x4bdbc9]['w']+monsters[_0x4bdbc9]['h'])/0x2*0.5;if(circleCollision(this['x'],this['y'],this['r'],_0x3164fd,_0x39c56c,_0x1dbfb6)){let _0x3491b1=this['x']+this['w']/0x2,_0x9f6431=this['y']+this['h']/0x2,_0x370cee=monsters[_0x4bdbc9]['x']-_0x3491b1,_0x37b985=monsters[_0x4bdbc9]['y']-_0x9f6431,_0x49ab46=Math['atan2'](_0x37b985,_0x370cee),_0x5091e7=Math[_0x1f48cf(0x1b6)](_0x49ab46),_0x42c02d=Math[_0x1f48cf(0x19a)](_0x49ab46);monsters[_0x4bdbc9]['xVelExt']=_0x5091e7*0xa,monsters[_0x4bdbc9][_0x1f48cf(0x129)]=_0x42c02d*0xa,monsters[_0x4bdbc9]['hp']-=0.25,monsters[_0x4bdbc9][_0x1f48cf(0x1ba)]=0xf;}}}[_0x3bf455(0x1a7)](){const _0x7093b1=_0x3bf455;this[_0x7093b1(0x170)]++,this[_0x7093b1(0x170)]>this[_0x7093b1(0x161)]*DTR&&(this[_0x7093b1(0x170)]=0x0,this[_0x7093b1(0x1aa)]++,this[_0x7093b1(0x1aa)]>=this['vfxX'][_0x7093b1(0x1c0)]&&(this[_0x7093b1(0x1aa)]=0x0)),c[_0x7093b1(0x177)](this[_0x7093b1(0x153)],this[_0x7093b1(0x165)][this['currentFrame']],this[_0x7093b1(0x13f)][this['currentFrame']],0x80,0x40,this['x']-0x40-player[_0x7093b1(0x1bc)]*0x4+map['x'],this['y']-0x40-player['yVelExt']*0x4+map['y'],0x80,0x40),c['save'](),c[_0x7093b1(0x1af)](player['x']+player['w']/0x2+map['x'],player['y']+player['h']/0x2+map['y']),c['rotate'](this[_0x7093b1(0x143)]+this[_0x7093b1(0x14f)]),c[_0x7093b1(0x177)](this[_0x7093b1(0x18a)],this[_0x7093b1(0x18b)][this[_0x7093b1(0x17a)]],this[_0x7093b1(0x121)][this[_0x7093b1(0x17a)]],this['w'],this['h'],-this['w']/0x2,-this['h']/0x2-player['h'],this['w'],this['h']),c[_0x7093b1(0x1a4)](),this[_0x7093b1(0x14f)]-=0.5/DTR,this[_0x7093b1(0x14f)]<=-0x9&&(this[_0x7093b1(0x147)]=![],this[_0x7093b1(0x14f)]=0x2),c[_0x7093b1(0x177)](this[_0x7093b1(0x153)],this[_0x7093b1(0x165)][this['currentFrame']],this[_0x7093b1(0x13f)][this[_0x7093b1(0x1aa)]]+0x40,0x80,0x40,this['x']-0x40-player[_0x7093b1(0x1bc)]*0x4+map['x'],this['y']-player[_0x7093b1(0x129)]*0x4+map['y'],0x80,0x40);}}var sword=new Sword();function sortMonsters(){monsters['sort'](function(_0x33ba92,_0x2c18b7){const _0x5877f3=_0x27f1;if(_0x33ba92[_0x5877f3(0x1b8)]&&!_0x2c18b7['dead'])return-0x1;else return!_0x33ba92['dead']&&_0x2c18b7[_0x5877f3(0x1b8)]?0x1:_0x33ba92['y']+0xf-_0x2c18b7['y'];});}function adjustCollidingMonsters(){const _0xd2121b=_0x3bf455;for(let _0x2febc4=0x0;_0x2febc4<monsters['length'];_0x2febc4++){if(monsters[_0x2febc4][_0xd2121b(0x1b8)])continue;monsters[_0x2febc4]['col']['T']=0x0,monsters[_0x2febc4]['col']['B']=0x0,monsters[_0x2febc4][_0xd2121b(0x1be)]['L']=0x0,monsters[_0x2febc4][_0xd2121b(0x1be)]['R']=0x0;for(let _0x35e358=0x0;_0x35e358<monsters['length'];_0x35e358++){if(monsters[_0x35e358][_0xd2121b(0x1b8)])continue;if(collided(monsters[_0x2febc4],monsters[_0x35e358])){let _0x42c53b=colCheck(monsters[_0x2febc4],monsters[_0x35e358]);switch(_0x42c53b){case'l':this[_0xd2121b(0x11a)]<0x0&&(this[_0xd2121b(0x11a)]=0x0);break;case'r':this[_0xd2121b(0x11a)]>0x0&&(this[_0xd2121b(0x11a)]=0x0);break;case'b':this[_0xd2121b(0x1c7)]>0x0&&(this[_0xd2121b(0x1c7)]=0x0);break;case't':this[_0xd2121b(0x1c7)]<0x0&&(this[_0xd2121b(0x1c7)]=0x0);break;}monsters[_0x2febc4][_0xd2121b(0x11a)]+=(monsters[_0x2febc4]['col']['L']-monsters[_0x2febc4][_0xd2121b(0x1be)]['R'])/0x5,monsters[_0x2febc4]['yVel']+=(monsters[_0x2febc4][_0xd2121b(0x1be)]['T']-monsters[_0x2febc4]['col']['B'])/0x5;}}}}class Monster extends Collidable{constructor(_0x242dfd,_0x2ef98c){const _0x5b8ab8=_0x3bf455;super(Collidable),this['x']=_0x242dfd,this['y']=_0x2ef98c,this['w']=TILESIZE,this['h']=TILESIZE,this['xVel']=0x0,this[_0x5b8ab8(0x1c7)]=0x0,this[_0x5b8ab8(0x1bc)]=0x0,this[_0x5b8ab8(0x129)]=0x0,this['speed']=0x2,this['left']=0x0,this['justDied']=![],this[_0x5b8ab8(0x1ba)]=0x0,this[_0x5b8ab8(0x1b8)]=![],this['arrows']=[],this[_0x5b8ab8(0x186)]=0x3,this['hp']=0x3,this[_0x5b8ab8(0x170)]=0x0,this['slowness']=0x4,this['currentFrame']=0x0,this['collidable']=!![],this['sheet']=id(_0x5b8ab8(0x153)),this[_0x5b8ab8(0x17a)]=0x0,this[_0x5b8ab8(0x1be)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this['hitbox']={'x':0x0,'y':0x0,'w':0x13,'h':0x11},this['actionX']=[[0x3,0x3,0x3,0x3],[0x4,0x4,0x4,0x4],[0x5,0x5,0x5,0x5],[0x3,0x3,0x3,0x3],[0x3]],this[_0x5b8ab8(0x121)]=[[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x9,0x8,0x7,0x6],[0x9]];}['followPlayer'](){const _0x4a1454=_0x3bf455;if(this[_0x4a1454(0x17a)]!==0x0){let _0x3e855c=this['x']+this['w']/0x2-player['x']-player['w']/0x2,_0x22f22d=this['y']+this['h']/0x2-player['y']-player['h']/0x2,_0x4a7c8b=_0x3e855c>0x0?-0x1:0x1,_0x2ec115=_0x22f22d>0x0?-0x1:0x1,_0x35f071;_0x22f22d!==0x0?_0x35f071=Math['abs'](_0x3e855c)/(Math[_0x4a1454(0x123)](_0x22f22d)+Math[_0x4a1454(0x123)](_0x3e855c)):_0x35f071=0x0;this['xVel']=this[_0x4a1454(0x16c)]*_0x35f071*_0x4a7c8b,this[_0x4a1454(0x1c7)]=this[_0x4a1454(0x16c)]*(0x1-_0x35f071)*_0x2ec115;if(this['x']+this['w']<player['x'])this['left']=![];else player['x']+player['w']<this['x']&&(this[_0x4a1454(0x142)]=!![]);}}[_0x3bf455(0x17e)](){const _0x2e0795=_0x3bf455;if(!this['dead']){this[_0x2e0795(0x155)]();Math[_0x2e0795(0x123)](this['xVelExt'])>0.01?this[_0x2e0795(0x1bc)]*=0.9:this['xVelExt']=0x0;Math[_0x2e0795(0x123)](this[_0x2e0795(0x129)])>0.01?this[_0x2e0795(0x129)]*=0.9:this[_0x2e0795(0x129)]=0x0;(this[_0x2e0795(0x1be)]['T']&&this['yVel']<0x0||this[_0x2e0795(0x1be)]['B']&&this[_0x2e0795(0x1c7)]>0x0)&&(this[_0x2e0795(0x1c7)]=0x0);(this[_0x2e0795(0x1be)]['L']&&this['xVel']<0x0||this['col']['R']&&this[_0x2e0795(0x11a)]>0x0)&&(this[_0x2e0795(0x11a)]=0x0);this[_0x2e0795(0x17a)]!==0x0&&(this[_0x2e0795(0x142)]?this[_0x2e0795(0x17a)]=0x2:this['action']=0x1);this[_0x2e0795(0x15c)](),this['x']+=(this[_0x2e0795(0x11a)]+this[_0x2e0795(0x1bc)])/DTR,this['y']+=(this[_0x2e0795(0x1c7)]+this['yVelExt'])/DTR;for(let _0x2eb67d=0x0;_0x2eb67d<this[_0x2e0795(0x1bf)][_0x2e0795(0x1c0)];_0x2eb67d++){this[_0x2e0795(0x1bf)][_0x2eb67d]['x']=this['x']+this[_0x2e0795(0x1bf)][_0x2eb67d][_0x2e0795(0x130)],this[_0x2e0795(0x1bf)][_0x2eb67d]['y']=this['y']+this['arrows'][_0x2eb67d][_0x2e0795(0x13c)];}this[_0x2e0795(0x1b9)]['x']=this['x']+0x6,this[_0x2e0795(0x1b9)]['y']=this['y']+0x4,this['hp']<=0x0&&(this[_0x2e0795(0x174)]=!![]),this['justDied']&&(this[_0x2e0795(0x1ba)]=0x0,this[_0x2e0795(0x1b8)]=!![],this[_0x2e0795(0x17a)]=0x3,this[_0x2e0795(0x170)]=0x0,this[_0x2e0795(0x1aa)]=0x0,this[_0x2e0795(0x161)]=0xa);}}[_0x3bf455(0x1a7)](){const _0x5db23d=_0x3bf455;this[_0x5db23d(0x170)]++;this[_0x5db23d(0x170)]>this[_0x5db23d(0x161)]*DTR&&(this[_0x5db23d(0x170)]=0x0,this[_0x5db23d(0x1aa)]++,this[_0x5db23d(0x1aa)]>=this[_0x5db23d(0x18b)][this[_0x5db23d(0x17a)]]['length']&&(this[_0x5db23d(0x17a)]==0x0&&(this[_0x5db23d(0x17a)]=0x1+this[_0x5db23d(0x142)]),this['currentFrame']=0x0));this[_0x5db23d(0x17a)]==0x3&&(this['currentFrame']==this['actionX'][this[_0x5db23d(0x17a)]]['length']-0x1&&(this[_0x5db23d(0x170)]=0x0));if(!this[_0x5db23d(0x1b8)])for(let _0x36d53c=0x0;_0x36d53c<this[_0x5db23d(0x1bf)]['length'];_0x36d53c++){this[_0x5db23d(0x1bf)][_0x36d53c][_0x5db23d(0x1a7)]();}this[_0x5db23d(0x1ba)]>0x0&&(this[_0x5db23d(0x17a)]=0x4,this[_0x5db23d(0x1aa)]=0x0,this[_0x5db23d(0x151)]=0x0,this[_0x5db23d(0x1ba)]-=0x1/DTR),c[_0x5db23d(0x177)](this['sheet'],this[_0x5db23d(0x18b)][this[_0x5db23d(0x17a)]][this[_0x5db23d(0x1aa)]]*TILESIZE,this['actionY'][this[_0x5db23d(0x17a)]][this[_0x5db23d(0x1aa)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}}class Mole extends Collidable{constructor(_0x314d07,_0xdb9489){const _0x4d6abc=_0x3bf455;super(Collidable),this['x']=(_0x314d07/TILESIZE|0x0)*TILESIZE,this['y']=(_0xdb9489/TILESIZE|0x0)*TILESIZE,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x4d6abc(0x11a)]=0x0,this[_0x4d6abc(0x1c7)]=0x0,this['xVelExt']=0x0,this['yVelExt']=0x0,this[_0x4d6abc(0x16c)]=0x2,this[_0x4d6abc(0x142)]=0x0,this['justDied']=![],this['justDamaged']=0x0,this[_0x4d6abc(0x1b8)]=![],this[_0x4d6abc(0x1c4)]=![],this[_0x4d6abc(0x1bf)]=[],this[_0x4d6abc(0x186)]=0x3,this['hp']=0x3,this['frameCounter']=0x0,this['slowness']=0x4,this[_0x4d6abc(0x1aa)]=0x0,this[_0x4d6abc(0x153)]=id(_0x4d6abc(0x153)),this[_0x4d6abc(0x17a)]=0x0,this['collidable']=!![],this[_0x4d6abc(0x19e)]=[],this[_0x4d6abc(0x1be)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x4d6abc(0x1b9)]={'x':0x0,'y':0x0,'w':0xe,'h':0x1a},this[_0x4d6abc(0x145)]={'x':0x0,'y':0x0,'w':0x0,'h':0x0},this['actionX']=[[0x9,0x9,0x9,0x9],[0xa,0xa,0xa,0xa,0xb,0xb,0xb,0xb],[0xc,0xc,0xc,0xc],[0xd,0xd,0xd,0xd],[0xe,0xe,0xe,0xe,0xe]],this[_0x4d6abc(0x121)]=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x18]],this[_0x4d6abc(0x1a2)]=0x0;}[_0x3bf455(0x155)](){const _0x3a0e60=_0x3bf455;this['atkBox']['x']=this['x']-0x5*TILESIZE,this[_0x3a0e60(0x145)]['y']=this['y']-0x5*TILESIZE,this[_0x3a0e60(0x145)]['w']=0xb*TILESIZE,this['atkBox']['h']=0xb*TILESIZE;if(collided(this[_0x3a0e60(0x145)],player)){if(this['attacking']){if(this['currentFrame']==0x0&&this[_0x3a0e60(0x170)]==0x0){this[_0x3a0e60(0x180)]();switch(this[_0x3a0e60(0x19e)][0x0]){case'l':this['x']-=TILESIZE;break;case'r':this['x']+=TILESIZE;break;case't':this['y']-=TILESIZE;break;case'b':this['y']+=TILESIZE;break;}}}else this[_0x3a0e60(0x17a)]!==0x1&&(this[_0x3a0e60(0x17a)]=0x1,this[_0x3a0e60(0x1aa)]=0x0,this['frameCounter']=0x0);}else this[_0x3a0e60(0x1c4)]&&this['action']!==0x0&&this[_0x3a0e60(0x17a)]!==0x2&&(this[_0x3a0e60(0x1c4)]=![],this[_0x3a0e60(0x128)]=!![],this[_0x3a0e60(0x17a)]=0x2,this[_0x3a0e60(0x1aa)]=0x0,this[_0x3a0e60(0x170)]=0x0);}['compute'](){const _0x4aa1d3=_0x3bf455;this[_0x4aa1d3(0x155)](),this[_0x4aa1d3(0x1b9)]['x']=this['x']+(this['w']-0xe)/0x2,this[_0x4aa1d3(0x1b9)]['y']=this['y']+(this['h']-0x1a)/0x2;for(let _0x1106e2=0x0;_0x1106e2<this['arrows']['length'];_0x1106e2++){this[_0x4aa1d3(0x1bf)][_0x1106e2]['x']=this['x']+this[_0x4aa1d3(0x1bf)][_0x1106e2][_0x4aa1d3(0x130)],this[_0x4aa1d3(0x1bf)][_0x1106e2]['y']=this['y']+this[_0x4aa1d3(0x1bf)][_0x1106e2][_0x4aa1d3(0x13c)];}this['hp']<=0x0&&(this[_0x4aa1d3(0x174)]=!![]),this[_0x4aa1d3(0x174)]&&(this[_0x4aa1d3(0x1ba)]=0x0,this['dead']=!![],this[_0x4aa1d3(0x17a)]=0x3,this[_0x4aa1d3(0x170)]=0x0,this[_0x4aa1d3(0x1aa)]=0x0,this['slowness']=0xa);}[_0x3bf455(0x1a7)](){const _0x73aae2=_0x3bf455;this['frameCounter']++;this['action']==0x4?this[_0x73aae2(0x161)]=0x3:this[_0x73aae2(0x161)]=0x5;if(this[_0x73aae2(0x170)]>this[_0x73aae2(0x161)]*DTR){this['frameCounter']=0x0,this[_0x73aae2(0x1aa)]++;if(this[_0x73aae2(0x1aa)]>=this['actionX'][this[_0x73aae2(0x17a)]][_0x73aae2(0x1c0)]){if(this[_0x73aae2(0x1b8)])this[_0x73aae2(0x1aa)]=this['actionX'][this['action']][_0x73aae2(0x1c0)]-0x1;else{if(this['action']==0x1)this['attacking']=!![],this[_0x73aae2(0x128)]=![],this[_0x73aae2(0x17a)]=0x4,this[_0x73aae2(0x1aa)]=0x0;else this[_0x73aae2(0x17a)]==0x2?(this[_0x73aae2(0x17a)]=0x0,this[_0x73aae2(0x1aa)]=0x0):this[_0x73aae2(0x1aa)]=0x0;}}}if(!this[_0x73aae2(0x1b8)]){if(this['action']==0x0)for(let _0x4bedc7=0x0;_0x4bedc7<this[_0x73aae2(0x1bf)]['length'];_0x4bedc7++){this[_0x73aae2(0x1bf)][_0x4bedc7]['draw']();}}this[_0x73aae2(0x1ba)]>0x0&&(this[_0x73aae2(0x17a)]=0x3,this[_0x73aae2(0x1aa)]=0x0,this[_0x73aae2(0x151)]=0x0,this[_0x73aae2(0x1ba)]-=0x1/DTR,this['justDamaged']<=0x0&&(this[_0x73aae2(0x17a)]=0x0)),c[_0x73aae2(0x177)](this[_0x73aae2(0x153)],this['actionX'][this['action']][this[_0x73aae2(0x1aa)]]*TILESIZE,this[_0x73aae2(0x121)][this[_0x73aae2(0x17a)]][this[_0x73aae2(0x1aa)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}[_0x3bf455(0x180)](){const _0x2643ec=_0x3bf455;let _0x1c971c=0xb,_0x4b054b=[],_0x35869f=this['x']+this['w']/0x2-TILESIZE*0x5,_0x10738c=this['y']+this['h']/0x2-TILESIZE*0x5,_0x3d6dcf;for(let _0x1c8ddd=0x0;_0x1c8ddd<_0x1c971c;_0x1c8ddd++){_0x4b054b[_0x1c8ddd]=[];for(let _0x4256de=0x0;_0x4256de<_0x1c971c;_0x4256de++){_0x3d6dcf=getTileData(_0x35869f+_0x1c8ddd*TILESIZE,_0x10738c+_0x4256de*TILESIZE),_0x3d6dcf===![]?_0x4b054b[_0x1c8ddd][_0x4256de]=_0x2643ec(0x15e):_0x4b054b[_0x1c8ddd][_0x4256de]='Obstacle';}}_0x4b054b[0x5][0x5]=_0x2643ec(0x171),_0x4b054b[((player['x']-this['x'])/TILESIZE|0x0)+0x5][((player['y']-this['y'])/TILESIZE|0x0)+0x5]=_0x2643ec(0x1c1),this[_0x2643ec(0x19e)]=findShortestPath([0x5,0x5],_0x4b054b);}}class Flower extends Collidable{constructor(_0x2cab04,_0x52a6fa){const _0x2a18ed=_0x3bf455;super(Collidable),this['x']=_0x2cab04,this['y']=_0x52a6fa,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x2a18ed(0x11a)]=0x0,this[_0x2a18ed(0x1c7)]=0x0,this[_0x2a18ed(0x1bc)]=0x0,this[_0x2a18ed(0x129)]=0x0,this[_0x2a18ed(0x16c)]=0x2,this['left']=0x0,this[_0x2a18ed(0x174)]=![],this[_0x2a18ed(0x1ba)]=0x0,this[_0x2a18ed(0x1b8)]=![],this['arrows']=[],this[_0x2a18ed(0x186)]=0x3,this['hp']=0x3,this[_0x2a18ed(0x170)]=0x0,this['slowness']=0x8,this['attacking']=![],this[_0x2a18ed(0x1aa)]=0x0,this[_0x2a18ed(0x153)]=id('sheet'),this[_0x2a18ed(0x159)]=0x5,this[_0x2a18ed(0x188)]=0x8,this[_0x2a18ed(0x128)]=!![],this[_0x2a18ed(0x1be)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this['hitbox']={'x':0x0,'y':0x0,'w':this['w']/0x3,'h':this['h']-this['h']/0x5*0x2},this[_0x2a18ed(0x17a)]=0x0,this[_0x2a18ed(0x18b)]=[[0x5,0x5,0x5,0x5],[0x5,0x5,0x5,0x5],[0x8,0x8,0x8,0x8]],this[_0x2a18ed(0x121)]=[[0x14,0x15,0x16,0x17],[0x14,0x14,0x15,0x16],[0x14,0x15,0x16,0x17]],this[_0x2a18ed(0x11d)]=[[0x7,0x7,0x7,0x7],[0x6,0x6,0x6,0x6]],this['headY']=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17]],this['radians']=0x0,this[_0x2a18ed(0x182)]=![];}[_0x3bf455(0x134)](){const _0x1cf3a6=_0x3bf455;if(!isObstructed(this,player)){this['attacking']=!![];if(this[_0x1cf3a6(0x1aa)]==0x2){if(!this['justShot']){let _0x5147a2=new EnemyProjectile(),_0x44bc34=this['x']+this['w']/0x2,_0x5874a3=this['y']+this['h']/0x2,_0x2b2912=player['x']+player['w']/0x2-_0x44bc34+Math[_0x1cf3a6(0x1a9)]()*this[_0x1cf3a6(0x159)]-this['precision']/0x2,_0x530743=player['y']+player['h']/0x2-_0x5874a3+Math[_0x1cf3a6(0x1a9)]()*this[_0x1cf3a6(0x159)]-this['precision']/0x2,_0x3ac92e=Math[_0x1cf3a6(0x1a3)](_0x530743,_0x2b2912),_0x337aaf=Math[_0x1cf3a6(0x1b6)](_0x3ac92e),_0x5e17b3=Math[_0x1cf3a6(0x19a)](_0x3ac92e);_0x5147a2[_0x1cf3a6(0x11a)]=_0x337aaf*this[_0x1cf3a6(0x188)],_0x5147a2[_0x1cf3a6(0x1c7)]=_0x5e17b3*this[_0x1cf3a6(0x188)],_0x5147a2['x']=_0x44bc34,_0x5147a2['y']=_0x5874a3,enemyProjectiles['push'](_0x5147a2),this['justShot']=!![];}}else this[_0x1cf3a6(0x182)]=![];}else this['attacking']=![];}[_0x3bf455(0x17e)](){const _0x91830e=_0x3bf455;this[_0x91830e(0x134)](),this[_0x91830e(0x1b9)]['x']=this['x']+this['w']/0x3,this['hitbox']['y']=this['y']+this['h']/0x5,this[_0x91830e(0x14f)]=Math['atan2'](player['y']+player['h']/0x2-this['y']-this['h']/0x2,player['x']+player['w']/0x2-this['w']/0x2-this['x'])+Math['PI']/0x2;for(let _0x223536=0x0;_0x223536<this[_0x91830e(0x1bf)][_0x91830e(0x1c0)];_0x223536++){this[_0x91830e(0x1bf)][_0x223536]['x']=this['x']+this[_0x91830e(0x1bf)][_0x223536][_0x91830e(0x130)],this['arrows'][_0x223536]['y']=this['y']+this[_0x91830e(0x1bf)][_0x223536]['yRel'];}this['hp']<=0x0&&(this[_0x91830e(0x174)]=!![]),this[_0x91830e(0x174)]&&(this[_0x91830e(0x1ba)]=0x0,this[_0x91830e(0x1b8)]=!![],this[_0x91830e(0x17a)]=0x2,this[_0x91830e(0x170)]=0x0,this[_0x91830e(0x1aa)]=0x0,this[_0x91830e(0x161)]=0xa);}[_0x3bf455(0x1a7)](){const _0x24024b=_0x3bf455;this[_0x24024b(0x170)]++;this[_0x24024b(0x170)]>this[_0x24024b(0x161)]*DTR&&(this[_0x24024b(0x170)]=0x0,this[_0x24024b(0x1aa)]++,this[_0x24024b(0x1aa)]>=this['actionX'][this[_0x24024b(0x17a)]][_0x24024b(0x1c0)]&&(this['dead']?this['currentFrame']=this[_0x24024b(0x18b)][this[_0x24024b(0x17a)]][_0x24024b(0x1c0)]-0x1:this['currentFrame']=0x0));if(!this['dead']){this[_0x24024b(0x1c4)]?this['action']=0x1:this[_0x24024b(0x17a)]=0x0;for(let _0x1ec03a=0x0;_0x1ec03a<this[_0x24024b(0x1bf)][_0x24024b(0x1c0)];_0x1ec03a++){this[_0x24024b(0x1bf)][_0x1ec03a]['draw']();}}this[_0x24024b(0x1c4)]?this['slowness']=0x4:this[_0x24024b(0x161)]=0x8,this[_0x24024b(0x1ba)]&&(this[_0x24024b(0x17a)]=0x2,this['currentFrame']=0x0,this[_0x24024b(0x151)]=0x0,this[_0x24024b(0x1ba)]--),c[_0x24024b(0x177)](this[_0x24024b(0x153)],this['actionX'][this[_0x24024b(0x17a)]][this[_0x24024b(0x1aa)]]*TILESIZE,this[_0x24024b(0x121)][this[_0x24024b(0x17a)]][this[_0x24024b(0x1aa)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']),(this[_0x24024b(0x17a)]==0x0||this[_0x24024b(0x17a)]==0x1)&&(c['save'](),c['translate'](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']-0x6),c[_0x24024b(0x191)](this[_0x24024b(0x14f)]),c[_0x24024b(0x177)](this[_0x24024b(0x153)],this['headX'][this[_0x24024b(0x17a)]][this['currentFrame']]*TILESIZE,this[_0x24024b(0x1b0)][this[_0x24024b(0x17a)]][this[_0x24024b(0x1aa)]]*TILESIZE,TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c['restore']());}}function getTileData(_0x1a4375,_0x2b6dfd){const _0x342019=_0x3bf455;let _0x476217=(_0x1a4375/TILESIZE|0x0)+(_0x2b6dfd/TILESIZE|0x0)*map['width'];for(let _0xd58292=0x0;_0xd58292<map['tiles'][_0x342019(0x1c0)];_0xd58292++){for(let _0x3c93b2=0x0;_0x3c93b2<TilesData[_0x342019(0x1c0)];_0x3c93b2++){if(TilesData[_0x3c93b2]['id']==map[_0x342019(0x173)][_0xd58292][_0x476217]-0x1)return TilesData[_0x3c93b2];}}return![];}window[_0x3bf455(0x1b1)]=function(){const _0x172e7b=_0x3bf455;player[_0x172e7b(0x1cc)]!==0x0?player[_0x172e7b(0x134)]():player[_0x172e7b(0x1b5)]=0xa;},window[_0x3bf455(0x1ac)]=function(_0x7a80d6){const _0x3b9254=_0x3bf455;_0x7a80d6[_0x3b9254(0x118)](),player['attack']();},document[_0x3bf455(0x190)]('mousedown',function(_0x10a2fa){const _0x168224=_0x3bf455;switch(_0x10a2fa[_0x168224(0x1cb)]){case 0x0:userInterface['lClick']=!![];break;case 0x2:userInterface[_0x168224(0x17d)]=!![];break;}}),document['addEventListener'](_0x3bf455(0x156),function(_0x3425be){const _0x13c9e1=_0x3bf455;switch(_0x3425be[_0x13c9e1(0x1cb)]){case 0x0:userInterface[_0x13c9e1(0x19f)]=![];break;case 0x2:userInterface['rClick']=![];break;}});var stats=id(_0x3bf455(0x1c6));function drawStats(){const _0x493194=_0x3bf455;stats['innerHTML']=_0x493194(0x133)+player['x'],stats[_0x493194(0x179)]+=_0x493194(0x16a)+player['y'],stats[_0x493194(0x179)]+=_0x493194(0x15b)+(Mouse['x']/TILESIZE|0x0)*TILESIZE,stats[_0x493194(0x179)]+='<br>mouseTile.y\x20=\x20'+(Mouse['y']/TILESIZE|0x0)*TILESIZE,stats[_0x493194(0x179)]+=_0x493194(0x12a)+((Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x493194(0x16f)]),stats[_0x493194(0x179)]+=_0x493194(0x117)+map[_0x493194(0x173)][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x493194(0x16f)]],map[_0x493194(0x173)][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map['width']],DEBUG&&(c['rect']((Mouse['x']/TILESIZE|0x0)*TILESIZE+map['x'],(Mouse['y']/TILESIZE|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE),c[_0x493194(0x1b3)]());}window[_0x3bf455(0x190)](_0x3bf455(0x163),function(_0x5ea0ef){const _0x6f5d79=_0x3bf455;switch(_0x5ea0ef[_0x6f5d79(0x11e)]){case 0x41:player['L']=!![];break;case 0x44:player['R']=!![];break;case 0x57:player['T']=!![];break;case 0x53:player['B']=!![];break;case 0x31:monsters['push'](new Mole(Mouse['x']-0x10,Mouse['y']-0x10));break;case 0x32:console[_0x6f5d79(0x115)](getTileData(Mouse['x'],Mouse['y']));break;case 0x33:for(let _0x3370f2=0x0;_0x3370f2<0x32;_0x3370f2++){player['shoot'](),player[_0x6f5d79(0x183)]=player[_0x6f5d79(0x1ae)]*DTR,player['computeQuiver']();}break;case 0x20:!gamePaused?gamePaused=!![]:gamePaused=![];break;}}),window[_0x3bf455(0x190)](_0x3bf455(0x181),function(_0x4cb5be){const _0x5c7691=_0x3bf455;switch(_0x4cb5be[_0x5c7691(0x11e)]){case 0x41:player['L']=![];break;case 0x44:player['R']=![];break;case 0x57:player['T']=![];break;case 0x53:player['B']=![];break;}}),window[_0x3bf455(0x190)](_0x3bf455(0x198),function(_0x498b66){const _0x448710=_0x3bf455;mousePP['x']=_0x498b66[_0x448710(0x197)]-CANVAS[_0x448710(0x1b2)],mousePP['y']=_0x498b66[_0x448710(0x1a6)]-CANVAS[_0x448710(0x175)];});function moveCamera(){const _0x924aa9=_0x3bf455;map['x']=-player['x']/0x3+CANVAS[_0x924aa9(0x16f)]/0x6,map['y']=-player['y']/0x3+CANVAS['height']/0x6,screenShake['counter']&&(screenShake['counter']--,screenShake[_0x924aa9(0x1a1)](),map['x']+=screenShake['x'],map['y']+=screenShake['y']),map['x']=map['x']|0x0,map['y']=map['y']|0x0;}var sampleArrow=new Projectile();function computeDrawArrows(){const _0x467679=_0x3bf455;c[_0x467679(0x146)]=0x2,c[_0x467679(0x1a5)]=sampleArrow[_0x467679(0x16b)][0x0],c[_0x467679(0x119)]();for(let _0x5e922f=playerArrows[_0x467679(0x1c0)]-0x1;_0x5e922f>=0x0;_0x5e922f--){if(!playerArrows[_0x5e922f][_0x467679(0x147)]||playerArrows[_0x5e922f][_0x467679(0x11f)]!=0x1)continue;playerArrows[_0x5e922f]['free']&&playerArrows[_0x5e922f][_0x467679(0x17e)]();if(playerArrows[_0x5e922f]!==undefined)playerArrows[_0x5e922f][_0x467679(0x1a7)]();}c['closePath'](),c['stroke'](),c[_0x467679(0x1a5)]=sampleArrow['colors'][0x1],c['beginPath']();for(let _0x248294=playerArrows[_0x467679(0x1c0)]-0x1;_0x248294>=0x0;_0x248294--){if(!playerArrows[_0x248294][_0x467679(0x147)]||playerArrows[_0x248294][_0x467679(0x11f)]!=0x2)continue;playerArrows[_0x248294][_0x467679(0x199)]&&playerArrows[_0x248294][_0x467679(0x17e)]();if(playerArrows[_0x248294]!==undefined)playerArrows[_0x248294]['draw']();}c[_0x467679(0x168)](),c[_0x467679(0x1b3)]();}function loop(){const _0x4f80a9=_0x3bf455;fps++,c[_0x4f80a9(0x178)](0x0,0x0,CANVAS[_0x4f80a9(0x16f)],CANVAS[_0x4f80a9(0x116)]),moveCamera(),map[_0x4f80a9(0x1a7)](),player[_0x4f80a9(0x17e)]();for(let _0xe25bce=enemyProjectiles[_0x4f80a9(0x1c0)]-0x1;_0xe25bce>=0x0;_0xe25bce--){enemyProjectiles[_0xe25bce][_0x4f80a9(0x17e)]();}sortMonsters(),Mouse['x']=mousePP['x']-map['x'],Mouse['y']=mousePP['y']-map['y'];for(let _0x1f092e=0x0;_0x1f092e<monsters[_0x4f80a9(0x1c0)];_0x1f092e++){!monsters[_0x1f092e][_0x4f80a9(0x1b8)]&&monsters[_0x1f092e][_0x4f80a9(0x17e)](),monsters[_0x1f092e][_0x4f80a9(0x1a7)]();}player[_0x4f80a9(0x1a7)](),adjustCollidingMonsters(),renderHpBars(),computeDrawArrows();for(let _0xd2cb8a=enemyProjectiles['length']-0x1;_0xd2cb8a>=0x0;_0xd2cb8a--){enemyProjectiles[_0xd2cb8a]['draw']();}sword[_0x4f80a9(0x147)]&&(sword[_0x4f80a9(0x17e)](),sword['draw']());for(let _0x4e0858=visualFxs[_0x4f80a9(0x1c0)]-0x1;_0x4e0858>=0x0;_0x4e0858--){!visualFxs[_0x4e0858][_0x4f80a9(0x14e)]&&visualFxs[_0x4e0858][_0x4f80a9(0x1a7)]();}userInterface['draw'](),drawStats();}var lastUpdate=Date[_0x3bf455(0x15a)](),myInterval=setInterval(tick,0x3e8/0x3c),DTR=0x1;function tick(){const _0x52de96=_0x3bf455;var _0x500177=Date[_0x52de96(0x15a)](),_0x5aeb1d=_0x500177-lastUpdate;lastUpdate=_0x500177,DTR=0x3e8/0x3c/_0x5aeb1d,!gamePaused&&loop();}