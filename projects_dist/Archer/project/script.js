'strict';const _0x48ef28=_0x4af0;(function(_0x427526,_0x5352f1){const _0x1528b0=_0x4af0,_0x410b95=_0x427526();while(!![]){try{const _0x3aa425=-parseInt(_0x1528b0(0x11a))/0x1*(parseInt(_0x1528b0(0x147))/0x2)+-parseInt(_0x1528b0(0xcc))/0x3+-parseInt(_0x1528b0(0x10d))/0x4*(parseInt(_0x1528b0(0xd7))/0x5)+-parseInt(_0x1528b0(0x168))/0x6*(parseInt(_0x1528b0(0xbf))/0x7)+-parseInt(_0x1528b0(0xe3))/0x8*(-parseInt(_0x1528b0(0x115))/0x9)+-parseInt(_0x1528b0(0x162))/0xa*(parseInt(_0x1528b0(0x16b))/0xb)+parseInt(_0x1528b0(0x109))/0xc*(parseInt(_0x1528b0(0x15f))/0xd);if(_0x3aa425===_0x5352f1)break;else _0x410b95['push'](_0x410b95['shift']());}catch(_0x3f03b8){_0x410b95['push'](_0x410b95['shift']());}}}(_0x355c,0x3932e));var mousePP={'x':0x0,'y':0x0},fps=0x0;const DEBUG=![],CANVAS=id('canvas'),TILESIZE=0x20;var gamePaused=![],visualFxs=[],TilesData=[],playerArrows=[],monsters=[],c=CANVAS[_0x48ef28(0x110)]('2d');CANVAS[_0x48ef28(0xc6)]=0x2e0,CANVAS[_0x48ef28(0x13a)]=0x1e0,CANVAS['style'][_0x48ef28(0xd5)]=(window[_0x48ef28(0xea)]-CANVAS[_0x48ef28(0xc6)])/0x2+'px',CANVAS[_0x48ef28(0x138)][_0x48ef28(0x10f)]=(window[_0x48ef28(0x143)]-CANVAS[_0x48ef28(0x13a)])/0x2+'px',c[_0x48ef28(0xfe)]=![];function _0x4af0(_0x5e4ab2,_0x25f6da){const _0xc09680=_0x355c();return _0x4af0=function(_0x493245,_0x49030d){_0x493245=_0x493245-0xbc;let _0x8d4c54=_0xc09680[_0x493245];return _0x8d4c54;},_0x4af0(_0x5e4ab2,_0x25f6da);}var generatedSquare={'x':0x0,'y':0x0,'w':0x0,'h':0x0};function id(_0x4a979f){const _0x1071a2=_0x48ef28,_0x903bbe=(function(){let _0x269980=!![];return function(_0x510610,_0x1d2b73){const _0x253309=_0x269980?function(){const _0x4df214=_0x4af0;if(_0x1d2b73){const _0x5a8019=_0x1d2b73[_0x4df214(0xf7)](_0x510610,arguments);return _0x1d2b73=null,_0x5a8019;}}:function(){};return _0x269980=![],_0x253309;};}()),_0x39ce9c=_0x903bbe(this,function(){const _0x3e9766=_0x4af0;let _0x4a7299;try{const _0x3281fe=Function(_0x3e9766(0x124)+_0x3e9766(0x129)+');');_0x4a7299=_0x3281fe();}catch(_0x1226f9){_0x4a7299=window;}const _0xbf7d02=new RegExp(_0x3e9766(0xca),'g'),_0x14bacf='VXsawawnHtCownBDXkxZHSEAaqndqrfTe.gMQjkithquyfyRbGTZ.LiEo;QlQPCocTFRalfhoSstzNIOvjEzBpjZLHKLKfZOmGwkF'['replace'](_0xbf7d02,'')[_0x3e9766(0x127)](';');let _0x301257,_0x440976,_0x2fc6a6,_0x3ec3cd;const _0x325c40=function(_0x184709,_0x319720,_0x224bf1){const _0x5ddb59=_0x3e9766;if(_0x184709[_0x5ddb59(0xdb)]!=_0x319720)return![];for(let _0x32b027=0x0;_0x32b027<_0x319720;_0x32b027++){for(let _0x456f5a=0x0;_0x456f5a<_0x224bf1['length'];_0x456f5a+=0x2){if(_0x32b027==_0x224bf1[_0x456f5a]&&_0x184709[_0x5ddb59(0x131)](_0x32b027)!=_0x224bf1[_0x456f5a+0x1])return![];}}return!![];},_0x4c3225=function(_0x5b6ae0,_0x5bdc6c,_0x49706d){return _0x325c40(_0x5bdc6c,_0x49706d,_0x5b6ae0);},_0x166f98=function(_0x50603c,_0x5b7eef,_0x52a784){return _0x4c3225(_0x5b7eef,_0x50603c,_0x52a784);},_0x175147=function(_0x570f6a,_0x2755d2,_0x27e718){return _0x166f98(_0x2755d2,_0x27e718,_0x570f6a);};for(let _0x17519b in _0x4a7299){if(_0x325c40(_0x17519b,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x301257=_0x17519b;break;}}for(let _0x27caac in _0x4a7299[_0x301257]){if(_0x175147(0x6,_0x27caac,[0x5,0x6e,0x0,0x64])){_0x440976=_0x27caac;break;}}for(let _0x36e445 in _0x4a7299[_0x301257]){if(_0x166f98(_0x36e445,[0x7,0x6e,0x0,0x6c],0x8)){_0x2fc6a6=_0x36e445;break;}}if(!('~'>_0x440976))for(let _0x34680e in _0x4a7299[_0x301257][_0x2fc6a6]){if(_0x4c3225([0x7,0x65,0x0,0x68],_0x34680e,0x8)){_0x3ec3cd=_0x34680e;break;}}if(!_0x301257||!_0x4a7299[_0x301257])return;const _0x289da5=_0x4a7299[_0x301257][_0x440976],_0xea4393=!!_0x4a7299[_0x301257][_0x2fc6a6]&&_0x4a7299[_0x301257][_0x2fc6a6][_0x3ec3cd],_0x1615ac=_0x289da5||_0xea4393;if(!_0x1615ac)return;let _0x4e939a=![];for(let _0x4b2741=0x0;_0x4b2741<_0x14bacf[_0x3e9766(0xdb)];_0x4b2741++){const _0x35a4cf=_0x14bacf[_0x4b2741],_0x2c89f0=_0x35a4cf[0x0]===String[_0x3e9766(0xf8)](0x2e)?_0x35a4cf[_0x3e9766(0x13e)](0x1):_0x35a4cf,_0x390da=_0x1615ac[_0x3e9766(0xdb)]-_0x2c89f0['length'],_0x20ab2d=_0x1615ac['indexOf'](_0x2c89f0,_0x390da),_0x492937=_0x20ab2d!==-0x1&&_0x20ab2d===_0x390da;_0x492937&&((_0x1615ac['length']==_0x35a4cf[_0x3e9766(0xdb)]||_0x35a4cf[_0x3e9766(0xe1)]('.')===0x0)&&(_0x4e939a=!![]));}if(!_0x4e939a){const _0x5bb1af=new RegExp(_0x3e9766(0xdd),'g'),_0x2bf0d3=_0x3e9766(0x108)['replace'](_0x5bb1af,'');_0x4a7299[_0x301257][_0x2fc6a6]=_0x2bf0d3;}});return _0x39ce9c(),document[_0x1071a2(0xe8)](_0x4a979f);}var fpsDiv=id(_0x48ef28(0xf5));setInterval(function(){const _0x150b90=_0x48ef28;fpsDiv[_0x150b90(0xed)]=_0x150b90(0xda)+fps,fpsDiv['innerHTML']+=_0x150b90(0xef)+DTR[_0x150b90(0x122)](0x3),fps=0x0;},0x3e8);var Mouse={'x':0x0,'y':0x0},screenShake={'x':0x0,'y':0x0,'counter':0x0,'set':function(){const _0x52ec4d=_0x48ef28;this['x']=Math[_0x52ec4d(0xcb)]()*0x8-0x4|0x0,this['y']=Math[_0x52ec4d(0xcb)]()*0x8-0x4|0x0;}};class Projectile{constructor(){const _0x2a7c9a=_0x48ef28;this['x']=0x0,this['y']=0x0,this[_0x2a7c9a(0x16d)]=0x0,this['xVel']=0x0,this[_0x2a7c9a(0x16f)]=0x0,this['yRel']=0x0,this[_0x2a7c9a(0xe5)]=!![],this[_0x2a7c9a(0x10b)]=!![],this['friendly']=!![],this[_0x2a7c9a(0x130)]=0x0,this['lengthY']=0x0,this['damage']=0x1,this[_0x2a7c9a(0x16c)]=0x0,this['colors']=[_0x2a7c9a(0xc3),'#ff8db5'],this[_0x2a7c9a(0x15a)]={'x':0x0,'y':0x0};}[_0x48ef28(0x14b)](){const _0x135355=_0x48ef28;Math[_0x135355(0xe7)](this[_0x135355(0x15b)]*0x3)>Math[_0x135355(0xe7)](this['lengthX'])&&(this['lengthX']=this[_0x135355(0x15b)]*0x3,this['lengthY']=this[_0x135355(0x16d)]*0x3),this['points']['x']=this['x']+this[_0x135355(0x130)],this[_0x135355(0x15a)]['y']=this['y']+this[_0x135355(0x119)],c[_0x135355(0x151)](this['x']+map['x'],this['y']+map['y']),c['lineTo'](this['x']+this[_0x135355(0x130)]+map['x'],this['y']+this[_0x135355(0x119)]+map['y']);}['compute'](){const _0x4badf0=_0x48ef28;this['x']+=this[_0x4badf0(0x15b)]/DTR,this['y']+=this[_0x4badf0(0x16d)]/DTR;if(getTileData(this['x'],this['y'])[_0x4badf0(0x170)])visualFxs[_0x4badf0(0x116)](new Explosion(this['x']+this[_0x4badf0(0x15b)],this['y']+this[_0x4badf0(0x16d)],this[_0x4badf0(0x16c)])),this[_0x4badf0(0x16c)]==0x2&&(screenShake[_0x4badf0(0x113)]=0x5),this[_0x4badf0(0x15b)]=0x0,this[_0x4badf0(0x16d)]=0x0,this[_0x4badf0(0x130)]/=0x2,this[_0x4badf0(0x119)]/=0x2,this[_0x4badf0(0x10b)]=![];else for(let _0x1da8f2=monsters[_0x4badf0(0xdb)]-0x1;_0x1da8f2>=0x0;_0x1da8f2--){let _0x3c93b3=monsters[_0x1da8f2];!_0x3c93b3[_0x4badf0(0x111)]&&_0x3c93b3[_0x4badf0(0xfa)]&&((pointSquareCol(this,_0x3c93b3)||pointSquareCol(this[_0x4badf0(0x15a)],_0x3c93b3))&&(this[_0x4badf0(0xe5)]=![],_0x3c93b3[_0x4badf0(0x150)]=this[_0x4badf0(0x15b)]/0x2,_0x3c93b3[_0x4badf0(0xde)]=this['yVel']/0x2,visualFxs['push'](new Explosion(this['x'],this['y'],this[_0x4badf0(0x16c)])),this[_0x4badf0(0x16c)]==0x2&&(screenShake[_0x4badf0(0x113)]=0x5),this[_0x4badf0(0x15b)]=0x0,this[_0x4badf0(0x16d)]=0x0,this[_0x4badf0(0x16f)]=this['x']-_0x3c93b3['x'],this[_0x4badf0(0x12d)]=this['y']-_0x3c93b3['y'],_0x3c93b3[_0x4badf0(0xc4)]['push'](this),_0x3c93b3['hp']-=this[_0x4badf0(0x153)],_0x3c93b3[_0x4badf0(0x16e)]=0xf));}}}var enemyProjectiles=[];class EnemyProjectile{constructor(){const _0x47290f=_0x48ef28;this['x']=0x0,this['y']=0x0,this['w'],this['h'],this[_0x47290f(0x16d)]=0x0,this[_0x47290f(0x15b)]=0x0,this[_0x47290f(0x10b)]=!![],this[_0x47290f(0x10e)]=![],this[_0x47290f(0x133)]=id(_0x47290f(0x133)),this[_0x47290f(0xeb)]=[0x5],this[_0x47290f(0xc0)]=[0x18],this['type']=0x0,this[_0x47290f(0x153)]=0x5;}[_0x48ef28(0x15c)](){const _0x1412fc=_0x48ef28;this['x']+=this[_0x1412fc(0x15b)]/DTR,this['y']+=this[_0x1412fc(0x16d)]/DTR,getTileData(this['x'],this['y'])[_0x1412fc(0x170)]?(enemyProjectiles['splice'](enemyProjectiles[_0x1412fc(0xe1)](this),0x1),visualFxs[_0x1412fc(0x116)](new Explosion(this['x']+this[_0x1412fc(0x15b)],this['y']+this[_0x1412fc(0x16d)],0x1)),this[_0x1412fc(0x15b)]=0x0,this[_0x1412fc(0x16d)]=0x0,this[_0x1412fc(0x130)]/=0x2,this[_0x1412fc(0x119)]/=0x2,this['free']=![]):pointSquareCol(this,player)&&(enemyProjectiles[_0x1412fc(0x126)](enemyProjectiles[_0x1412fc(0xe1)](this),0x1),player[_0x1412fc(0x150)]+=this[_0x1412fc(0x15b)]/0x2,player[_0x1412fc(0xde)]+=this[_0x1412fc(0x16d)]/0x2,player['hp']-=this['damage'],visualFxs['push'](new Explosion(this['x'],this['y'],0x1)),screenShake[_0x1412fc(0x113)]=0x5);}[_0x48ef28(0x14b)](){const _0x5987b4=_0x48ef28;c['drawImage'](this['sheet'],this[_0x5987b4(0xeb)][this[_0x5987b4(0x167)]]*TILESIZE,this[_0x5987b4(0xc0)][this['type']]*TILESIZE,TILESIZE,TILESIZE,this['x']-TILESIZE/0x2+map['x'],this['y']-TILESIZE/0x2+map['y'],TILESIZE,TILESIZE);}}class Explosion{constructor(_0x5562a9,_0x3ddf46,_0x18a0db){const _0x330eb5=_0x48ef28;this[_0x330eb5(0x133)]=id(_0x330eb5(0x133)),this['x']=_0x5562a9-0x10,this['y']=_0x3ddf46-0x10,this['w']=0x20,this['h']=0x20,this[_0x330eb5(0x134)]=0x0,this[_0x330eb5(0x141)]=0x0,this[_0x330eb5(0x103)]=_0x18a0db-0x1,this[_0x330eb5(0xeb)]=[[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0],[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0]],this[_0x330eb5(0xc0)]=[[0x0,0x20,0x40,0x60,0x80,0xa0],[0xc0,0xe0,0x100,0x120,0x140,0x160]],this[_0x330eb5(0x14c)]=0x4,this[_0x330eb5(0xf3)]=![];}[_0x48ef28(0x14b)](){const _0x57afa5=_0x48ef28;c[_0x57afa5(0x13c)](this['sheet'],this['actionX'][this[_0x57afa5(0x103)]][this[_0x57afa5(0x141)]],this[_0x57afa5(0xc0)][this[_0x57afa5(0x103)]][this['currentFrame']],TILESIZE,TILESIZE,this['x']+map['x'],this['y']+map['y'],this['w'],this['h']),this[_0x57afa5(0x134)]++,this[_0x57afa5(0x134)]>this['slowness']*DTR&&(this[_0x57afa5(0x134)]=0x0,this['currentFrame']++,this['currentFrame']>this['actionX'][this[_0x57afa5(0x103)]][_0x57afa5(0xdb)]-0x1&&(this[_0x57afa5(0xf3)]=!![]));}}class Collidable{constructor(){}[_0x48ef28(0x16a)](){const _0x204266=_0x48ef28;let _0x174b7f;this[_0x204266(0x102)]['T']=0x0,this[_0x204266(0x102)]['B']=0x0,this[_0x204266(0x102)]['L']=0x0,this['col']['R']=0x0,getTileData(this['x'],this['y'])['unpassable']&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x174b7f=colCheck(this,generatedSquare),this['x']+=(this[_0x204266(0x102)]['L']-this[_0x204266(0x102)]['R'])/0x5/DTR,this['y']+=(this[_0x204266(0x102)]['T']-this[_0x204266(0x102)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y'])[_0x204266(0xd6)]&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x174b7f=colCheck(this,generatedSquare),this['x']+=(this[_0x204266(0x102)]['L']-this[_0x204266(0x102)]['R'])/0x5/DTR,this['y']+=(this['col']['T']-this[_0x204266(0x102)]['B'])/0x5/DTR),getTileData(this['x'],this['y']+this['h'])[_0x204266(0xd6)]&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x174b7f=colCheck(this,generatedSquare),this['x']+=(this['col']['L']-this[_0x204266(0x102)]['R'])/0x5/DTR,this['y']+=(this[_0x204266(0x102)]['T']-this[_0x204266(0x102)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y']+this['h'])[_0x204266(0xd6)]&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x174b7f=colCheck(this,generatedSquare),this['x']+=(this[_0x204266(0x102)]['L']-this[_0x204266(0x102)]['R'])/0x5/DTR,this['y']+=(this[_0x204266(0x102)]['T']-this[_0x204266(0x102)]['B'])/0x5/DTR),this[_0x204266(0x102)]['B']&&(this[_0x204266(0xde)]>0x0&&(this[_0x204266(0xde)]*=-0.5)),this[_0x204266(0x102)]['T']&&(this[_0x204266(0xde)]<0x0&&(this['yVelExt']*=-0.5)),this['col']['R']&&(this['xVelExt']>0x0&&(this[_0x204266(0x150)]*=-0.5)),this[_0x204266(0x102)]['L']&&(this['xVelExt']<0x0&&(this[_0x204266(0x150)]*=-0.5));}}class Player extends Collidable{constructor(_0x495dc9,_0x3241f4){const _0x49d5d5=_0x48ef28;super(Collidable),this['x']=_0x495dc9,this['y']=_0x3241f4,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x49d5d5(0x163)]=0x3,this[_0x49d5d5(0x16d)]=0x0,this[_0x49d5d5(0x15b)]=0x0,this[_0x49d5d5(0xde)]=0x0,this[_0x49d5d5(0x150)]=0x0,this['L']=![],this['R']=![],this['T']=![],this['B']=![],this[_0x49d5d5(0xfb)]=0xa,this['centerX']=0x0,this[_0x49d5d5(0xf6)]=0x0,this['col']={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this['actionX']=[0x0,0x20,0x40],this[_0x49d5d5(0xc0)]=[0x0,0x0,0x0],this[_0x49d5d5(0x103)]=0x0,this[_0x49d5d5(0x134)]=0x0,this[_0x49d5d5(0x14c)]=0x6,this['radians']=0x0,this['sword']=![],this['precision']=0x14,this[_0x49d5d5(0x11b)]=0x0,this[_0x49d5d5(0xf9)]=0x0,this[_0x49d5d5(0x125)]=[0x1,0x1,0x1,0x1,0x1],this[_0x49d5d5(0x13d)]=0x3c,this[_0x49d5d5(0xf1)]=0x0,this[_0x49d5d5(0x13b)]=0x4,this['hp']=0x64,this[_0x49d5d5(0x135)]=0x64,this['mp']=0x64,this[_0x49d5d5(0x12a)]=0x64,this[_0x49d5d5(0xd2)]=0.25,this[_0x49d5d5(0xec)]={'active':![],'radians':0x0,'actionX':[0xc0,0xf0,0x120,0x150,0x180],'actionY':[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0],'frameCounter':0x0,'action':0x0,'slowness':0x4,'w':0x30,'h':0x30};}[_0x48ef28(0xd0)](){const _0x40f19c=_0x48ef28;let _0x203a6c=!![],_0x53108d;for(_0x53108d=0x0;_0x53108d<this[_0x40f19c(0x125)]['length'];_0x53108d++){if(this[_0x40f19c(0x125)][_0x53108d]===0x0){_0x203a6c=![];break;}}this[_0x40f19c(0x13b)]=_0x53108d;if(!_0x203a6c){this[_0x40f19c(0xf1)]++;if(this['arrowCounter']>this[_0x40f19c(0x13d)]*DTR)for(_0x53108d=0x0;_0x53108d<this[_0x40f19c(0x125)][_0x40f19c(0xdb)];_0x53108d++){if(this[_0x40f19c(0x125)][_0x53108d]===0x0){Math[_0x40f19c(0xcb)]()<this[_0x40f19c(0xd2)]?this[_0x40f19c(0x125)][_0x53108d]=0x2:this[_0x40f19c(0x125)][_0x53108d]=0x1;this[_0x40f19c(0xf1)]=0x0;break;}}}else this['arrowCounter']=0x0;}[_0x48ef28(0x15c)](){const _0x11ecf2=_0x48ef28;this['computeQuiver'](),this[_0x11ecf2(0xce)]=this['x']+this['w']/0x2,this[_0x11ecf2(0xf6)]=this['y']+this['h']/0x2,this[_0x11ecf2(0x16a)]();Math[_0x11ecf2(0xe7)](this[_0x11ecf2(0x150)])>0.01?this[_0x11ecf2(0x150)]-=this[_0x11ecf2(0x150)]*0.1/DTR:this[_0x11ecf2(0x150)]=0x0;Math['abs'](this[_0x11ecf2(0xde)])>0.01?this[_0x11ecf2(0xde)]-=this[_0x11ecf2(0xde)]*0.1/DTR:this['yVelExt']=0x0;this['L']&&this['T']||this['L']&&this['B']||this['R']&&this['T']||this['R']&&this['B']?this[_0x11ecf2(0x163)]=0x2:this[_0x11ecf2(0x163)]=0x3;this['radians']=Math[_0x11ecf2(0xbd)](Mouse['y']-this['y']-this['h']/0x2,Mouse['x']-this['w']/0x2-this['x'])+Math['PI']/0x2;if(this['L'])this['xVel']=-this[_0x11ecf2(0x163)];else!this['R']&&(this[_0x11ecf2(0x15b)]=0x0);if(this['R'])this[_0x11ecf2(0x15b)]=this[_0x11ecf2(0x163)];else!this['L']&&(this[_0x11ecf2(0x15b)]=0x0);if(this['T'])this['yVel']=-this[_0x11ecf2(0x163)];else!this['B']&&(this[_0x11ecf2(0x16d)]=0x0);if(this['B'])this[_0x11ecf2(0x16d)]=this[_0x11ecf2(0x163)];else!this['T']&&(this['yVel']=0x0);this['x']+=(this[_0x11ecf2(0x15b)]+this[_0x11ecf2(0x150)])/DTR,this['y']+=(this['yVel']+this['yVelExt'])/DTR;}[_0x48ef28(0x14b)](){const _0x59c224=_0x48ef28;this[_0x59c224(0x15b)]===0x0&&this['yVel']===0x0?this[_0x59c224(0x103)]=0x0:(this[_0x59c224(0x134)]++,this[_0x59c224(0x134)]>=this[_0x59c224(0x14c)]*DTR&&(this['action']++,this[_0x59c224(0x134)]=0x0,this[_0x59c224(0x103)]>=this[_0x59c224(0xeb)][_0x59c224(0xdb)]&&(this[_0x59c224(0x103)]=0x0))),c[_0x59c224(0xdc)](),c['translate'](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x59c224(0x140)](this[_0x59c224(0x144)]),c[_0x59c224(0x13c)](id(_0x59c224(0xc8)),this[_0x59c224(0xeb)][this[_0x59c224(0x103)]],this[_0x59c224(0xc0)][this['action']],TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c[_0x59c224(0x12c)](),this[_0x59c224(0x11b)]&&(c[_0x59c224(0x13c)](id(_0x59c224(0x133)),0x40,0x80,0x10,0x10,this['x']+0x8+map['x'],this['y']-0x10+map['y'],0x10,0x10),this[_0x59c224(0x11b)]--),this[_0x59c224(0xec)][_0x59c224(0xe5)]&&this['drawBow']();}['drawBow'](){const _0x3fb22f=_0x48ef28;this['bow'][_0x3fb22f(0x134)]++,this['bow'][_0x3fb22f(0x134)]>=this['bow']['slowness']*DTR&&(this[_0x3fb22f(0xec)][_0x3fb22f(0x103)]++,this[_0x3fb22f(0xec)]['frameCounter']=0x0,this[_0x3fb22f(0xec)]['active']>=this[_0x3fb22f(0xec)][_0x3fb22f(0xeb)][_0x3fb22f(0xdb)]&&(this[_0x3fb22f(0xec)][_0x3fb22f(0xe5)]=![])),c[_0x3fb22f(0xdc)](),c['translate'](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x3fb22f(0x140)](this[_0x3fb22f(0x144)]),c[_0x3fb22f(0x13c)](id('bow'),this[_0x3fb22f(0xec)]['actionX'][this[_0x3fb22f(0xec)]['action']],this[_0x3fb22f(0xec)][_0x3fb22f(0xc0)][this['bow'][_0x3fb22f(0x103)]],0x30,0x30,-this[_0x3fb22f(0xec)]['w']/0x2,-this['bow']['h'],this[_0x3fb22f(0xec)]['w'],this['bow']['h']),c[_0x3fb22f(0x12c)]();}[_0x48ef28(0xee)](){const _0x57627e=_0x48ef28;this[_0x57627e(0xec)]['active']=!![],this['bow'][_0x57627e(0x134)]=0x0,this[_0x57627e(0xec)][_0x57627e(0x141)]=0x0,this[_0x57627e(0xec)]['action']=0x0;let _0x1389a5=this['x']+this['w']/0x2,_0x3deba7=this['y']+this['h']/0x2,_0x275a50=Mouse['x']-_0x1389a5+Math['random']()*this[_0x57627e(0x107)]-this[_0x57627e(0x107)]/0x2,_0x1e9c0a=Mouse['y']-_0x3deba7+Math[_0x57627e(0xcb)]()*this['precision']-this[_0x57627e(0x107)]/0x2,_0x23411d=Math[_0x57627e(0xbd)](_0x1e9c0a,_0x275a50),_0xe54f99=Math['cos'](_0x23411d),_0x21d868=Math[_0x57627e(0xbc)](_0x23411d),_0xffed06=new Projectile();_0xffed06[_0x57627e(0x15b)]=_0xe54f99*this[_0x57627e(0xfb)],_0xffed06[_0x57627e(0x16d)]=_0x21d868*this[_0x57627e(0xfb)],_0xffed06['x']=_0x1389a5,_0xffed06['y']=_0x3deba7,_0xffed06[_0x57627e(0x16c)]=this[_0x57627e(0x125)][0x0],playerArrows[_0x57627e(0x116)](_0xffed06),this['arrowsArr'][_0x57627e(0x161)](),this[_0x57627e(0x125)]['push'](0x0);}['attack'](){const _0x55c855=_0x48ef28;if(!sword[_0x55c855(0xe5)]){sword[_0x55c855(0xe5)]=!![],sword[_0x55c855(0x132)]=this[_0x55c855(0x144)];if(Mouse['x']<this['x']-0x10||Mouse['x']>this['x']+this['w']+0x10||Mouse['y']<this['y']-0x10||Mouse['y']>this['y']+this['h']+0x10){let _0x259a59=this['x']+this['w']/0x2,_0x36c472=this['y']+this['h']/0x2,_0x5b34db=returnCosine(Mouse['x'],Mouse['y'],_0x259a59,_0x36c472);this['xVelExt']=_0x5b34db[_0x55c855(0x15e)]*0xe,this['yVelExt']=_0x5b34db[_0x55c855(0xbc)]*0xe;}}}}var player=new Player(CANVAS[_0x48ef28(0xc6)]/0x2,CANVAS[_0x48ef28(0x13a)]/0x4*0x3);class UserInterface{constructor(){const _0x1f7407=_0x48ef28;this[_0x1f7407(0x133)]=id(_0x1f7407(0x14d)),this['x']=0x14,this['y']=0x5,this[_0x1f7407(0x154)]=![],this['rClick']=![],this[_0x1f7407(0xf9)]=0x0,this[_0x1f7407(0xff)]={'crop':{'x':0x0,'y':0x0,'w':0x144,'h':0x35},'pos':{'x':0x0,'y':0x0}},this['portrait']={'crop':[{'x':0x0,'y':0x40,'w':0x35,'h':0x35},{'x':0x40,'y':0x40,'w':0x35,'h':0x35}],'pos':{'x':0x8a,'y':0x0}},this[_0x1f7407(0x13f)]={'crop':{'x':0x80,'y':0x40,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0xa}},this[_0x1f7407(0x121)]={'crop':{'x':0x80,'y':0x50,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0x17}},this[_0x1f7407(0xec)]={'crop':{'x':0xf0,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0xe}},this[_0x1f7407(0xbe)]={'crop':{'x':0x130,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0x56}},this['arrow']={'crop':[{'x':0x80,'y':0x60,'w':0x6,'h':0x15},{'x':0x90,'y':0x60,'w':0x6,'h':0x15},{'x':0xa0,'y':0x60,'w':0x6,'h':0x15}],'pos':{'x':0x63,'y':0xc}},this[_0x1f7407(0x125)]=[0x1,0x1,0x1,0x1];}[_0x48ef28(0x14b)](){const _0x212a76=_0x48ef28;this[_0x212a76(0x154)]&&(c['globalAlpha']=0.5);c['drawImage'](this[_0x212a76(0x133)],this['bow'][_0x212a76(0xc9)]['x'],this['bow'][_0x212a76(0xc9)]['y'],this[_0x212a76(0xec)][_0x212a76(0xc9)]['w'],this[_0x212a76(0xec)]['crop']['h'],this[_0x212a76(0xec)][_0x212a76(0x159)]['x'],this['bow'][_0x212a76(0x159)]['y'],this[_0x212a76(0xec)]['crop']['w'],this[_0x212a76(0xec)]['crop']['h']);this[_0x212a76(0x154)]&&(c[_0x212a76(0x136)]=0x1);this['rClick']&&(c['globalAlpha']=0.5);c['drawImage'](this[_0x212a76(0x133)],this[_0x212a76(0xbe)]['crop']['x'],this[_0x212a76(0xbe)][_0x212a76(0xc9)]['y'],this[_0x212a76(0xbe)][_0x212a76(0xc9)]['w'],this[_0x212a76(0xbe)][_0x212a76(0xc9)]['h'],this[_0x212a76(0xbe)][_0x212a76(0x159)]['x'],this[_0x212a76(0xbe)][_0x212a76(0x159)]['y'],this[_0x212a76(0xbe)][_0x212a76(0xc9)]['w'],this[_0x212a76(0xbe)][_0x212a76(0xc9)]['h']);this[_0x212a76(0x164)]&&(c['globalAlpha']=0x1);c[_0x212a76(0x13c)](this['sheet'],this[_0x212a76(0xff)][_0x212a76(0xc9)]['x'],this['layout'][_0x212a76(0xc9)]['y'],this[_0x212a76(0xff)]['crop']['w'],this['layout']['crop']['h'],this[_0x212a76(0xff)]['pos']['x']+this['x'],this[_0x212a76(0xff)][_0x212a76(0x159)]['y']+this['y'],this['layout']['crop']['w'],this['layout']['crop']['h']),c[_0x212a76(0x13c)](this[_0x212a76(0x133)],this[_0x212a76(0x120)][_0x212a76(0xc9)][player['attacked']]['x'],this[_0x212a76(0x120)][_0x212a76(0xc9)][player[_0x212a76(0xf9)]]['y'],this[_0x212a76(0x120)]['crop'][player[_0x212a76(0xf9)]]['w'],this['portrait'][_0x212a76(0xc9)][player[_0x212a76(0xf9)]]['h'],this[_0x212a76(0x120)]['pos']['x']+this['x'],this['portrait'][_0x212a76(0x159)]['y']+this['y'],this[_0x212a76(0x120)][_0x212a76(0xc9)][player[_0x212a76(0xf9)]]['w'],this[_0x212a76(0x120)][_0x212a76(0xc9)][player[_0x212a76(0xf9)]]['h']),c[_0x212a76(0x13c)](this[_0x212a76(0x133)],this['hpBar'][_0x212a76(0xc9)]['x'],this[_0x212a76(0x13f)][_0x212a76(0xc9)]['y'],this[_0x212a76(0x13f)]['crop']['w'],this['hpBar'][_0x212a76(0xc9)]['h'],this['hpBar'][_0x212a76(0x159)]['x']+this['x'],this[_0x212a76(0x13f)]['pos']['y']+this['y'],this[_0x212a76(0x13f)]['crop']['w']/player[_0x212a76(0x135)]*player['hp'],this[_0x212a76(0x13f)][_0x212a76(0xc9)]['h']),c['drawImage'](this[_0x212a76(0x133)],this[_0x212a76(0x121)][_0x212a76(0xc9)]['x'],this[_0x212a76(0x121)][_0x212a76(0xc9)]['y'],this[_0x212a76(0x121)][_0x212a76(0xc9)]['w'],this['mpBar']['crop']['h'],this[_0x212a76(0x121)][_0x212a76(0x159)]['x']+this['x'],this[_0x212a76(0x121)][_0x212a76(0x159)]['y']+this['y'],this[_0x212a76(0x121)][_0x212a76(0xc9)]['w'],this['mpBar'][_0x212a76(0xc9)]['h']);for(let _0x3c030c=0x0;_0x3c030c<player[_0x212a76(0x125)][_0x212a76(0xdb)];_0x3c030c++){c['drawImage'](this[_0x212a76(0x133)],this[_0x212a76(0x15d)][_0x212a76(0xc9)][player[_0x212a76(0x125)][_0x3c030c]]['x'],this[_0x212a76(0x15d)][_0x212a76(0xc9)][player['arrowsArr'][_0x3c030c]]['y'],this[_0x212a76(0x15d)][_0x212a76(0xc9)][player[_0x212a76(0x125)][_0x3c030c]]['w'],this[_0x212a76(0x15d)][_0x212a76(0xc9)][player[_0x212a76(0x125)][_0x3c030c]]['h'],this[_0x212a76(0x15d)][_0x212a76(0x159)]['x']+this['x']-0xa*_0x3c030c,this[_0x212a76(0x15d)][_0x212a76(0x159)]['y']+this['y'],this[_0x212a76(0x15d)]['crop'][player['arrowsArr'][_0x3c030c]]['w'],this[_0x212a76(0x15d)][_0x212a76(0xc9)][player[_0x212a76(0x125)][_0x3c030c]]['h']);}c['font']=_0x212a76(0x105),c['textAlign']='center',c[_0x212a76(0xe6)]='#2f4447',c['fillText'](player[_0x212a76(0x13b)]+'/'+player[_0x212a76(0x125)][_0x212a76(0xdb)],0x7a+this['x'],0x20+this['y']);}}var userInterface=new UserInterface();function drawLaser(){const _0x296d35=_0x48ef28;let _0x1dd47d=player['x']+player['w']/0x2,_0x360519=player['y']+player['h']/0x2,_0x2c9f9b=_0x1dd47d,_0x28208d=_0x360519,_0x60dbe3=![],_0x51ff7c=0x0,_0x3c5f28=returnCosine(_0x1dd47d,_0x360519,Mouse['x'],Mouse['y']),_0x55659f=[],_0x5006ff={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x1b5746={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x3eec04=0x4,_0x217951={'x':0x0,'y':0x0};while(!_0x60dbe3&&_0x51ff7c<CANVAS[_0x296d35(0xc6)]*0x2/_0x3eec04){_0x2c9f9b-=_0x3c5f28['cos']*_0x3eec04,_0x28208d-=_0x3c5f28[_0x296d35(0xbc)]*_0x3eec04;getTileData(_0x2c9f9b,_0x28208d)[_0x296d35(0x170)]&&(_0x5006ff=getTileData(_0x2c9f9b,_0x28208d)['hitbox'],_0x1b5746['x']=_0x5006ff['x'],_0x1b5746['y']=_0x5006ff['y'],_0x1b5746['w']=_0x5006ff['w'],_0x1b5746['h']=_0x5006ff['h'],_0x1b5746['x']+=_0x2c9f9b-_0x2c9f9b%TILESIZE,_0x1b5746['y']+=_0x28208d-_0x28208d%TILESIZE,_0x60dbe3=!![]);_0x217951['x']=_0x2c9f9b,_0x217951['y']=_0x28208d;for(let _0x36cd71=0x0;_0x36cd71<monsters[_0x296d35(0xdb)];_0x36cd71++){if(!monsters[_0x36cd71][_0x296d35(0x111)]&&pointSquareCol(_0x217951,monsters[_0x36cd71])){_0x1b5746['x']=monsters[_0x36cd71]['x'],_0x1b5746['y']=monsters[_0x36cd71]['y'],_0x1b5746['w']=monsters[_0x36cd71]['w'],_0x1b5746['h']=monsters[_0x36cd71]['h'],_0x60dbe3=!![];break;}}_0x51ff7c++;}_0x55659f=getRectSides(_0x1b5746);let _0x369351=[],_0x1be8fd={},_0x17c839;for(let _0x45fe99=0x0;_0x45fe99<_0x55659f[_0x296d35(0xdb)];_0x45fe99++){_0x1be8fd=intersect(_0x1dd47d,_0x360519,_0x2c9f9b,_0x28208d,_0x55659f[_0x45fe99]['x1'],_0x55659f[_0x45fe99]['y1'],_0x55659f[_0x45fe99]['x2'],_0x55659f[_0x45fe99]['y2']),_0x1be8fd&&_0x369351[_0x296d35(0x116)](_0x1be8fd);}let _0x1a1d32=Math[_0x296d35(0x12e)](_0x1dd47d-_0x2c9f9b,_0x360519-_0x28208d),_0x5f5845=_0x2c9f9b,_0x32164e=_0x2c9f9b;for(let _0x33282a=0x0;_0x33282a<_0x369351['length'];_0x33282a++){_0x17c839=Math[_0x296d35(0x12e)](_0x1dd47d-_0x2c9f9b,_0x360519-_0x28208d),_0x17c839<_0x1a1d32&&(_0x1a1d32=_0x17c839,_0x5f5845=_0x369351[_0x33282a]['x'],_0x32164e=_0x369351[_0x33282a]['y']);}c['strokeStyle']=_0x296d35(0xd3),c[_0x296d35(0x128)](),c[_0x296d35(0x151)](_0x1dd47d+map['x'],_0x360519+map['y']),c[_0x296d35(0xfd)](_0x2c9f9b+map['x'],_0x28208d+map['y']),c[_0x296d35(0x12b)](),c[_0x296d35(0xf2)]=_0x296d35(0xcd);}function isObstructed(_0x30f149,_0x25fd3c){const _0x2e8fff=_0x48ef28;let _0x4e3aa8=_0x30f149['x']+_0x30f149['w']/0x2,_0x4dc9db=_0x30f149['y']+_0x30f149['h']/0x2,_0x5abf39=_0x25fd3c['x']+_0x25fd3c['w']/0x2,_0x2d1ae0=_0x25fd3c['y']+_0x25fd3c['h']/0x2,_0x19852b=Math[_0x2e8fff(0x12e)](_0x4e3aa8-_0x5abf39,_0x4dc9db-_0x2d1ae0),_0x314d40=_0x4e3aa8,_0x5c6fe3=_0x4dc9db,_0x17fcde=![],_0x3111f0=0x0,_0x582114=returnCosine(_0x4e3aa8,_0x4dc9db,_0x5abf39,_0x2d1ae0),_0x19a780=[],_0x26863d={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x3e5e27={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x185ec5=0x3,_0x481f0d={'x':0x0,'y':0x0};while(!_0x17fcde&&_0x3111f0<_0x19852b/_0x185ec5){_0x314d40-=_0x582114['cos']*_0x185ec5,_0x5c6fe3-=_0x582114['sin']*_0x185ec5;if(getTileData(_0x314d40,_0x5c6fe3)[_0x2e8fff(0x170)])return _0x26863d=getTileData(_0x314d40,_0x5c6fe3)[_0x2e8fff(0x11c)],_0x3e5e27['x']=_0x26863d['x'],_0x3e5e27['y']=_0x26863d['y'],_0x3e5e27['w']=_0x26863d['w'],_0x3e5e27['h']=_0x26863d['h'],_0x3e5e27['x']+=_0x314d40-_0x314d40%TILESIZE,_0x3e5e27['y']+=_0x5c6fe3-_0x5c6fe3%TILESIZE,!![];_0x481f0d['x']=_0x314d40,_0x481f0d['y']=_0x5c6fe3;if(pointSquareCol(_0x481f0d,_0x25fd3c))return![];_0x3111f0++;}}function getRectSides(_0x2198d1){const _0x4a8cf7=_0x48ef28;let _0x46ef21=[];return _0x46ef21[_0x4a8cf7(0x116)]({'x1':_0x2198d1['x'],'y1':_0x2198d1['y'],'x2':_0x2198d1['x']+_0x2198d1['w'],'y2':_0x2198d1['y']}),_0x46ef21[_0x4a8cf7(0x116)]({'x1':_0x2198d1['x']+_0x2198d1['w'],'y1':_0x2198d1['y'],'x2':_0x2198d1['x']+_0x2198d1['w'],'y2':_0x2198d1['y']+_0x2198d1['h']}),_0x46ef21[_0x4a8cf7(0x116)]({'x1':_0x2198d1['x']+_0x2198d1['w'],'y1':_0x2198d1['y']+_0x2198d1['h'],'x2':_0x2198d1['x'],'y2':_0x2198d1['y']+_0x2198d1['h']}),_0x46ef21[_0x4a8cf7(0x116)]({'x1':_0x2198d1['x'],'y1':_0x2198d1['y']+_0x2198d1['h'],'x2':_0x2198d1['x'],'y2':_0x2198d1['y']}),_0x46ef21;}function init(){const _0x3e2f7c=_0x48ef28;let _0x36ea76,_0x1333fc={};fetch(_0x3e2f7c(0x156))[_0x3e2f7c(0x14e)](function(_0x8c710){const _0x4fb05e=_0x3e2f7c;return _0x8c710[_0x4fb05e(0xd8)]();})[_0x3e2f7c(0x14e)](function(_0x27eb34){const _0x3c4e75=_0x3e2f7c;_0x36ea76=_0x27eb34[_0x3c4e75(0x123)];for(let _0x4a810a=0x0;_0x4a810a<_0x36ea76[_0x3c4e75(0xdb)];_0x4a810a++){_0x1333fc={'id':0x0,'solid':![],'hole':![],'unpassable':![],'hitbox':{'x':0x0,'y':0x0,'w':TILESIZE,'h':TILESIZE}},_0x1333fc['id']=_0x36ea76[_0x4a810a]['id'];if(_0x36ea76[_0x4a810a]['hasOwnProperty'](_0x3c4e75(0xc2)))for(let _0x1cfb97=0x0;_0x1cfb97<_0x36ea76[_0x4a810a][_0x3c4e75(0xc2)][_0x3c4e75(0xdb)];_0x1cfb97++){if(_0x36ea76[_0x4a810a][_0x3c4e75(0xc2)][_0x1cfb97])switch(_0x36ea76[_0x4a810a][_0x3c4e75(0xc2)][_0x1cfb97][_0x3c4e75(0x158)]){case _0x3c4e75(0x101):_0x1333fc[_0x3c4e75(0x101)]=!![],_0x1333fc[_0x3c4e75(0xd6)]=!![];break;case _0x3c4e75(0x170):_0x1333fc['solid']=!![],_0x1333fc[_0x3c4e75(0xd6)]=!![];break;}}TilesData['push'](_0x1333fc);}loop();});}init();var HP_BAR=id(_0x48ef28(0xcf));function renderHpBars(){const _0x10add6=_0x48ef28;for(let _0x2df3fe=0x0;_0x2df3fe<monsters[_0x10add6(0xdb)];_0x2df3fe++){if(monsters[_0x2df3fe][_0x10add6(0x111)])continue;let _0x295d41=monsters[_0x2df3fe]['hp']/monsters[_0x2df3fe][_0x10add6(0x135)],_0x13c7f6=Math[_0x10add6(0x104)](TILESIZE*_0x295d41);c[_0x10add6(0x13c)](HP_BAR,0x0,0x4,_0x13c7f6,0x4,monsters[_0x2df3fe]['x']+monsters[_0x2df3fe]['w']/0x2-0x10+map['x']|0x0,monsters[_0x2df3fe]['y']-0x8+map['y']|0x0,_0x13c7f6|0x0,0x4|0x0),c[_0x10add6(0x13c)](HP_BAR,0x0,0x0,TILESIZE,0x4,monsters[_0x2df3fe]['x']+monsters[_0x2df3fe]['w']/0x2-0x10+map['x']|0x0,monsters[_0x2df3fe]['y']-0x8+map['y']|0x0,TILESIZE|0x0,0x4|0x0);}}class Map{constructor(){const _0x4f74c2=_0x48ef28;this['width']=0x17,this[_0x4f74c2(0x13a)]=0xf,this['x']=0x0,this['y']=0x0,this['tiles']=maps['m1'],this[_0x4f74c2(0x133)]=id(_0x4f74c2(0x133)),this[_0x4f74c2(0x11f)]=id(_0x4f74c2(0x11f));}[_0x48ef28(0x14b)](){const _0x59fa2f=_0x48ef28;for(let _0x4fbb32=0x0;_0x4fbb32<this[_0x59fa2f(0x123)][_0x59fa2f(0xdb)];_0x4fbb32++){_0x4fbb32==0x1&&c['drawImage'](this['grass'],0x0+this['x'],0x0+this['y'],CANVAS['width'],CANVAS[_0x59fa2f(0x13a)]);for(let _0x36bcff=0x0;_0x36bcff<this[_0x59fa2f(0x123)][_0x4fbb32][_0x59fa2f(0xdb)];_0x36bcff++){if(this['tiles'][_0x4fbb32][_0x36bcff]===0x0)continue;c[_0x59fa2f(0x13c)](this[_0x59fa2f(0x133)],(this[_0x59fa2f(0x123)][_0x4fbb32][_0x36bcff]-0x1)%0xf*TILESIZE,((this['tiles'][_0x4fbb32][_0x36bcff]-0x1)/0xf|0x0)*TILESIZE,TILESIZE,TILESIZE,_0x36bcff%this[_0x59fa2f(0xc6)]*TILESIZE+map['x'],(_0x36bcff/this['width']|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE);}}}}var map=new Map();class Sword{constructor(){const _0x4c9548=_0x48ef28;this['x']=player['x'],this['y']=player['y'],this['w']=0x10,this['h']=0x30,this['r']=0x32,this[_0x4c9548(0x144)]=0x2,this[_0x4c9548(0x132)]=0x0,this[_0x4c9548(0xeb)]=[0x0],this['actionY']=[0x0],this[_0x4c9548(0x11e)]=[0x0,0x0,0x0,0x0],this[_0x4c9548(0x157)]=[0x0,0x80,0x100,0x180],this[_0x4c9548(0x141)]=0x0,this['frameCounter']=0x0,this[_0x4c9548(0x103)]=0x0,this[_0x4c9548(0x14c)]=0x3,this[_0x4c9548(0xe5)]=![],this['sheet']=id('sword-vfx'),this['swordImg']=id('sword');}[_0x48ef28(0x15c)](){const _0x119500=_0x48ef28;this['x']=player['x']+player['w']/0x2,this['y']=player['y']+player['h']/0x2;let _0x8a88c0,_0x1ee417,_0x45f6aa;for(let _0x5c7f5b=0x0;_0x5c7f5b<monsters[_0x119500(0xdb)];_0x5c7f5b++){if(monsters[_0x5c7f5b]['dead']||!monsters[_0x5c7f5b][_0x119500(0xfa)])continue;_0x8a88c0=monsters[_0x5c7f5b][_0x119500(0x11c)]['x']+monsters[_0x5c7f5b][_0x119500(0x11c)]['w']/0x2,_0x1ee417=monsters[_0x5c7f5b][_0x119500(0x11c)]['y']+monsters[_0x5c7f5b][_0x119500(0x11c)]['h']/0x2,_0x45f6aa=(monsters[_0x5c7f5b]['w']+monsters[_0x5c7f5b]['h'])/0x2*0.5;if(circleCollision(this['x'],this['y'],this['r'],_0x8a88c0,_0x1ee417,_0x45f6aa)){let _0x5bd191=this['x']+this['w']/0x2,_0x5f5017=this['y']+this['h']/0x2,_0x21c039=monsters[_0x5c7f5b]['x']-_0x5bd191,_0x360d9a=monsters[_0x5c7f5b]['y']-_0x5f5017,_0x90caaa=Math['atan2'](_0x360d9a,_0x21c039),_0x271fe5=Math[_0x119500(0x15e)](_0x90caaa),_0x53db52=Math[_0x119500(0xbc)](_0x90caaa);monsters[_0x5c7f5b][_0x119500(0x150)]=_0x271fe5*0xa,monsters[_0x5c7f5b][_0x119500(0xde)]=_0x53db52*0xa,monsters[_0x5c7f5b]['hp']-=0.25,monsters[_0x5c7f5b][_0x119500(0x16e)]=0xf;}}}[_0x48ef28(0x14b)](){const _0x11b292=_0x48ef28;this[_0x11b292(0x134)]++,this[_0x11b292(0x134)]>this[_0x11b292(0x14c)]*DTR&&(this['frameCounter']=0x0,this['currentFrame']++,this[_0x11b292(0x141)]>=this[_0x11b292(0x11e)][_0x11b292(0xdb)]&&(this[_0x11b292(0x141)]=0x0)),c[_0x11b292(0x13c)](this[_0x11b292(0x133)],this[_0x11b292(0x11e)][this[_0x11b292(0x141)]],this[_0x11b292(0x157)][this['currentFrame']],0x80,0x40,this['x']-0x40-player['xVelExt']*0x4+map['x'],this['y']-0x40-player[_0x11b292(0xde)]*0x4+map['y'],0x80,0x40),c[_0x11b292(0xdc)](),c[_0x11b292(0xf4)](player['x']+player['w']/0x2+map['x'],player['y']+player['h']/0x2+map['y']),c[_0x11b292(0x140)](this[_0x11b292(0x132)]+this['radians']),c[_0x11b292(0x13c)](this[_0x11b292(0x106)],this[_0x11b292(0xeb)][this[_0x11b292(0x103)]],this['actionY'][this['action']],this['w'],this['h'],-this['w']/0x2,-this['h']/0x2-player['h'],this['w'],this['h']),c[_0x11b292(0x12c)](),this[_0x11b292(0x144)]-=0.5/DTR,this['radians']<=-0x9&&(this[_0x11b292(0xe5)]=![],this[_0x11b292(0x144)]=0x2),c[_0x11b292(0x13c)](this['sheet'],this[_0x11b292(0x11e)][this[_0x11b292(0x141)]],this[_0x11b292(0x157)][this[_0x11b292(0x141)]]+0x40,0x80,0x40,this['x']-0x40-player[_0x11b292(0x150)]*0x4+map['x'],this['y']-player['yVelExt']*0x4+map['y'],0x80,0x40);}}var sword=new Sword();function sortMonsters(){const _0x6d361b=_0x48ef28;monsters[_0x6d361b(0xe2)](function(_0x41044e,_0x2ad28a){const _0x4a7253=_0x6d361b;if(_0x41044e[_0x4a7253(0x111)]&&!_0x2ad28a['dead'])return-0x1;else return!_0x41044e[_0x4a7253(0x111)]&&_0x2ad28a[_0x4a7253(0x111)]?0x1:_0x41044e['y']+0xf-_0x2ad28a['y'];});}function adjustCollidingMonsters(){const _0x26a7db=_0x48ef28;for(let _0x4b6e85=0x0;_0x4b6e85<monsters[_0x26a7db(0xdb)];_0x4b6e85++){if(monsters[_0x4b6e85][_0x26a7db(0x111)])continue;monsters[_0x4b6e85][_0x26a7db(0x102)]['T']=0x0,monsters[_0x4b6e85][_0x26a7db(0x102)]['B']=0x0,monsters[_0x4b6e85][_0x26a7db(0x102)]['L']=0x0,monsters[_0x4b6e85][_0x26a7db(0x102)]['R']=0x0;for(let _0x23adce=0x0;_0x23adce<monsters['length'];_0x23adce++){if(monsters[_0x23adce]['dead'])continue;if(collided(monsters[_0x4b6e85],monsters[_0x23adce])){let _0x4aa7a4=colCheck(monsters[_0x4b6e85],monsters[_0x23adce]);switch(_0x4aa7a4){case'l':this['xVel']<0x0&&(this[_0x26a7db(0x15b)]=0x0);break;case'r':this[_0x26a7db(0x15b)]>0x0&&(this[_0x26a7db(0x15b)]=0x0);break;case'b':this[_0x26a7db(0x16d)]>0x0&&(this[_0x26a7db(0x16d)]=0x0);break;case't':this[_0x26a7db(0x16d)]<0x0&&(this[_0x26a7db(0x16d)]=0x0);break;}monsters[_0x4b6e85][_0x26a7db(0x15b)]+=(monsters[_0x4b6e85][_0x26a7db(0x102)]['L']-monsters[_0x4b6e85][_0x26a7db(0x102)]['R'])/0x5,monsters[_0x4b6e85][_0x26a7db(0x16d)]+=(monsters[_0x4b6e85][_0x26a7db(0x102)]['T']-monsters[_0x4b6e85][_0x26a7db(0x102)]['B'])/0x5;}}}}class Monster extends Collidable{constructor(_0x62e82f,_0x4c0eac){const _0x5bc277=_0x48ef28;super(Collidable),this['x']=_0x62e82f,this['y']=_0x4c0eac,this['w']=TILESIZE,this['h']=TILESIZE,this['xVel']=0x0,this[_0x5bc277(0x16d)]=0x0,this[_0x5bc277(0x150)]=0x0,this[_0x5bc277(0xde)]=0x0,this['speed']=0x2,this[_0x5bc277(0xd5)]=0x0,this[_0x5bc277(0x160)]=![],this[_0x5bc277(0x16e)]=0x0,this[_0x5bc277(0x111)]=![],this[_0x5bc277(0xc4)]=[],this[_0x5bc277(0x135)]=0x3,this['hp']=0x3,this[_0x5bc277(0x134)]=0x0,this[_0x5bc277(0x14c)]=0x4,this[_0x5bc277(0x141)]=0x0,this[_0x5bc277(0xfa)]=!![],this[_0x5bc277(0x133)]=id('sheet'),this['action']=0x0,this[_0x5bc277(0x102)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x5bc277(0x11c)]={'x':0x0,'y':0x0,'w':0x13,'h':0x11},this[_0x5bc277(0xeb)]=[[0x3,0x3,0x3,0x3],[0x4,0x4,0x4,0x4],[0x5,0x5,0x5,0x5],[0x3,0x3,0x3,0x3],[0x3]],this[_0x5bc277(0xc0)]=[[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x9,0x8,0x7,0x6],[0x9]];}[_0x48ef28(0x14f)](){const _0x323d43=_0x48ef28;if(this['action']!==0x0){let _0x46c788=this['x']+this['w']/0x2-player['x']-player['w']/0x2,_0x3b6b57=this['y']+this['h']/0x2-player['y']-player['h']/0x2,_0x5598fe=_0x46c788>0x0?-0x1:0x1,_0x417ec4=_0x3b6b57>0x0?-0x1:0x1,_0x1d02c5;_0x3b6b57!==0x0?_0x1d02c5=Math['abs'](_0x46c788)/(Math['abs'](_0x3b6b57)+Math[_0x323d43(0xe7)](_0x46c788)):_0x1d02c5=0x0;this['xVel']=this[_0x323d43(0x163)]*_0x1d02c5*_0x5598fe,this[_0x323d43(0x16d)]=this[_0x323d43(0x163)]*(0x1-_0x1d02c5)*_0x417ec4;if(this['x']+this['w']<player['x'])this[_0x323d43(0xd5)]=![];else player['x']+player['w']<this['x']&&(this[_0x323d43(0xd5)]=!![]);}}[_0x48ef28(0x15c)](){const _0x3d1ce7=_0x48ef28;if(!this[_0x3d1ce7(0x111)]){this[_0x3d1ce7(0x14f)]();Math['abs'](this[_0x3d1ce7(0x150)])>0.01?this[_0x3d1ce7(0x150)]*=0.9:this['xVelExt']=0x0;Math[_0x3d1ce7(0xe7)](this['yVelExt'])>0.01?this[_0x3d1ce7(0xde)]*=0.9:this[_0x3d1ce7(0xde)]=0x0;(this[_0x3d1ce7(0x102)]['T']&&this[_0x3d1ce7(0x16d)]<0x0||this[_0x3d1ce7(0x102)]['B']&&this['yVel']>0x0)&&(this[_0x3d1ce7(0x16d)]=0x0);(this[_0x3d1ce7(0x102)]['L']&&this[_0x3d1ce7(0x15b)]<0x0||this[_0x3d1ce7(0x102)]['R']&&this[_0x3d1ce7(0x15b)]>0x0)&&(this[_0x3d1ce7(0x15b)]=0x0);this[_0x3d1ce7(0x103)]!==0x0&&(this[_0x3d1ce7(0xd5)]?this[_0x3d1ce7(0x103)]=0x2:this[_0x3d1ce7(0x103)]=0x1);this[_0x3d1ce7(0x16a)](),this['x']+=(this['xVel']+this[_0x3d1ce7(0x150)])/DTR,this['y']+=(this[_0x3d1ce7(0x16d)]+this[_0x3d1ce7(0xde)])/DTR;for(let _0x554cca=0x0;_0x554cca<this['arrows'][_0x3d1ce7(0xdb)];_0x554cca++){this[_0x3d1ce7(0xc4)][_0x554cca]['x']=this['x']+this[_0x3d1ce7(0xc4)][_0x554cca][_0x3d1ce7(0x16f)],this[_0x3d1ce7(0xc4)][_0x554cca]['y']=this['y']+this[_0x3d1ce7(0xc4)][_0x554cca][_0x3d1ce7(0x12d)];}this[_0x3d1ce7(0x11c)]['x']=this['x']+0x6,this[_0x3d1ce7(0x11c)]['y']=this['y']+0x4,this['hp']<=0x0&&(this['justDied']=!![]),this[_0x3d1ce7(0x160)]&&(this[_0x3d1ce7(0x16e)]=0x0,this[_0x3d1ce7(0x111)]=!![],this[_0x3d1ce7(0x103)]=0x3,this[_0x3d1ce7(0x134)]=0x0,this[_0x3d1ce7(0x141)]=0x0,this[_0x3d1ce7(0x14c)]=0xa);}}[_0x48ef28(0x14b)](){const _0x25b472=_0x48ef28;this[_0x25b472(0x134)]++;this[_0x25b472(0x134)]>this[_0x25b472(0x14c)]*DTR&&(this[_0x25b472(0x134)]=0x0,this['currentFrame']++,this['currentFrame']>=this['actionX'][this['action']]['length']&&(this[_0x25b472(0x103)]==0x0&&(this[_0x25b472(0x103)]=0x1+this[_0x25b472(0xd5)]),this['currentFrame']=0x0));this[_0x25b472(0x103)]==0x3&&(this['currentFrame']==this['actionX'][this[_0x25b472(0x103)]][_0x25b472(0xdb)]-0x1&&(this[_0x25b472(0x134)]=0x0));if(!this[_0x25b472(0x111)])for(let _0x2ae6f8=0x0;_0x2ae6f8<this[_0x25b472(0xc4)][_0x25b472(0xdb)];_0x2ae6f8++){this[_0x25b472(0xc4)][_0x2ae6f8]['draw']();}this[_0x25b472(0x16e)]>0x0&&(this['action']=0x4,this[_0x25b472(0x141)]=0x0,this[_0x25b472(0x155)]=0x0,this[_0x25b472(0x16e)]-=0x1/DTR),c[_0x25b472(0x13c)](this[_0x25b472(0x133)],this[_0x25b472(0xeb)][this[_0x25b472(0x103)]][this[_0x25b472(0x141)]]*TILESIZE,this[_0x25b472(0xc0)][this[_0x25b472(0x103)]][this[_0x25b472(0x141)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}}class Mole extends Collidable{constructor(_0x5684a7,_0x475f27){const _0x1ae989=_0x48ef28;super(Collidable),this['x']=(_0x5684a7/TILESIZE|0x0)*TILESIZE,this['y']=(_0x475f27/TILESIZE|0x0)*TILESIZE,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x1ae989(0x15b)]=0x0,this[_0x1ae989(0x16d)]=0x0,this[_0x1ae989(0x150)]=0x0,this[_0x1ae989(0xde)]=0x0,this['speed']=0x2,this[_0x1ae989(0xd5)]=0x0,this[_0x1ae989(0x160)]=![],this[_0x1ae989(0x16e)]=0x0,this[_0x1ae989(0x111)]=![],this[_0x1ae989(0x145)]=![],this['arrows']=[],this[_0x1ae989(0x135)]=0x3,this['hp']=0x3,this[_0x1ae989(0x134)]=0x0,this[_0x1ae989(0x14c)]=0x4,this[_0x1ae989(0x141)]=0x0,this[_0x1ae989(0x133)]=id(_0x1ae989(0x133)),this[_0x1ae989(0x103)]=0x0,this[_0x1ae989(0xfa)]=!![],this[_0x1ae989(0xfc)]=[],this[_0x1ae989(0x102)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x1ae989(0x11c)]={'x':0x0,'y':0x0,'w':0xe,'h':0x1a},this['atkBox']={'x':0x0,'y':0x0,'w':0x0,'h':0x0},this[_0x1ae989(0xeb)]=[[0x9,0x9,0x9,0x9],[0xa,0xa,0xa,0xa,0xb,0xb,0xb,0xb],[0xc,0xc,0xc,0xc],[0xd,0xd,0xd,0xd],[0xe,0xe,0xe,0xe,0xe]],this[_0x1ae989(0xc0)]=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x18]],this[_0x1ae989(0x113)]=0x0;}['followPlayer'](){const _0x5d47be=_0x48ef28;this[_0x5d47be(0x169)]['x']=this['x']-0x5*TILESIZE,this['atkBox']['y']=this['y']-0x5*TILESIZE,this[_0x5d47be(0x169)]['w']=0xb*TILESIZE,this[_0x5d47be(0x169)]['h']=0xb*TILESIZE;if(collided(this[_0x5d47be(0x169)],player)){if(this[_0x5d47be(0x145)]){if(this['currentFrame']==0x0&&this[_0x5d47be(0x134)]==0x0){this[_0x5d47be(0x117)]();switch(this[_0x5d47be(0xfc)][0x0]){case'l':this['x']-=TILESIZE;break;case'r':this['x']+=TILESIZE;break;case't':this['y']-=TILESIZE;break;case'b':this['y']+=TILESIZE;break;}}}else this[_0x5d47be(0x103)]!==0x1&&(this[_0x5d47be(0x103)]=0x1,this[_0x5d47be(0x141)]=0x0,this[_0x5d47be(0x134)]=0x0);}else this[_0x5d47be(0x145)]&&this[_0x5d47be(0x103)]!==0x0&&this[_0x5d47be(0x103)]!==0x2&&(this[_0x5d47be(0x145)]=![],this[_0x5d47be(0xfa)]=!![],this['action']=0x2,this[_0x5d47be(0x141)]=0x0,this[_0x5d47be(0x134)]=0x0);}[_0x48ef28(0x15c)](){const _0x1831af=_0x48ef28;this['followPlayer'](),this['hitbox']['x']=this['x']+(this['w']-0xe)/0x2,this['hitbox']['y']=this['y']+(this['h']-0x1a)/0x2;for(let _0x14659a=0x0;_0x14659a<this['arrows'][_0x1831af(0xdb)];_0x14659a++){this[_0x1831af(0xc4)][_0x14659a]['x']=this['x']+this[_0x1831af(0xc4)][_0x14659a][_0x1831af(0x16f)],this[_0x1831af(0xc4)][_0x14659a]['y']=this['y']+this[_0x1831af(0xc4)][_0x14659a]['yRel'];}this['hp']<=0x0&&(this[_0x1831af(0x160)]=!![]),this[_0x1831af(0x160)]&&(this[_0x1831af(0x16e)]=0x0,this['dead']=!![],this[_0x1831af(0x103)]=0x3,this[_0x1831af(0x134)]=0x0,this[_0x1831af(0x141)]=0x0,this[_0x1831af(0x14c)]=0xa);}[_0x48ef28(0x14b)](){const _0x5cd147=_0x48ef28;this[_0x5cd147(0x134)]++;this['action']==0x4?this['slowness']=0x3:this['slowness']=0x5;if(this[_0x5cd147(0x134)]>this[_0x5cd147(0x14c)]*DTR){this['frameCounter']=0x0,this['currentFrame']++;if(this[_0x5cd147(0x141)]>=this[_0x5cd147(0xeb)][this['action']][_0x5cd147(0xdb)]){if(this[_0x5cd147(0x111)])this['currentFrame']=this[_0x5cd147(0xeb)][this[_0x5cd147(0x103)]][_0x5cd147(0xdb)]-0x1;else{if(this[_0x5cd147(0x103)]==0x1)this[_0x5cd147(0x145)]=!![],this[_0x5cd147(0xfa)]=![],this[_0x5cd147(0x103)]=0x4,this[_0x5cd147(0x141)]=0x0;else this['action']==0x2?(this['action']=0x0,this['currentFrame']=0x0):this[_0x5cd147(0x141)]=0x0;}}}if(!this[_0x5cd147(0x111)]){if(this[_0x5cd147(0x103)]==0x0)for(let _0x580089=0x0;_0x580089<this['arrows']['length'];_0x580089++){this['arrows'][_0x580089][_0x5cd147(0x14b)]();}}this[_0x5cd147(0x16e)]>0x0&&(this[_0x5cd147(0x103)]=0x3,this['currentFrame']=0x0,this['framecounter']=0x0,this[_0x5cd147(0x16e)]-=0x1/DTR,this['justDamaged']<=0x0&&(this['action']=0x0)),c[_0x5cd147(0x13c)](this['sheet'],this[_0x5cd147(0xeb)][this['action']][this[_0x5cd147(0x141)]]*TILESIZE,this['actionY'][this[_0x5cd147(0x103)]][this[_0x5cd147(0x141)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}[_0x48ef28(0x117)](){const _0x5cdc90=_0x48ef28;let _0x9a6878=0xb,_0x2c6f2f=[],_0x3f2b93=this['x']+this['w']/0x2-TILESIZE*0x5,_0x20829b=this['y']+this['h']/0x2-TILESIZE*0x5,_0x43ef88;for(let _0x424a01=0x0;_0x424a01<_0x9a6878;_0x424a01++){_0x2c6f2f[_0x424a01]=[];for(let _0x475fe2=0x0;_0x475fe2<_0x9a6878;_0x475fe2++){_0x43ef88=getTileData(_0x3f2b93+_0x424a01*TILESIZE,_0x20829b+_0x475fe2*TILESIZE),_0x43ef88===![]?_0x2c6f2f[_0x424a01][_0x475fe2]=_0x5cdc90(0x152):_0x2c6f2f[_0x424a01][_0x475fe2]=_0x5cdc90(0xc1);}}_0x2c6f2f[0x5][0x5]=_0x5cdc90(0x10c),_0x2c6f2f[((player['x']-this['x'])/TILESIZE|0x0)+0x5][((player['y']-this['y'])/TILESIZE|0x0)+0x5]=_0x5cdc90(0x11d),this[_0x5cdc90(0xfc)]=findShortestPath([0x5,0x5],_0x2c6f2f);}}class Flower extends Collidable{constructor(_0x24f3a0,_0x55b58c){const _0x14822e=_0x48ef28;super(Collidable),this['x']=_0x24f3a0,this['y']=_0x55b58c,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x14822e(0x15b)]=0x0,this[_0x14822e(0x16d)]=0x0,this[_0x14822e(0x150)]=0x0,this[_0x14822e(0xde)]=0x0,this[_0x14822e(0x163)]=0x2,this[_0x14822e(0xd5)]=0x0,this[_0x14822e(0x160)]=![],this['justDamaged']=0x0,this[_0x14822e(0x111)]=![],this['arrows']=[],this[_0x14822e(0x135)]=0x3,this['hp']=0x3,this[_0x14822e(0x134)]=0x0,this[_0x14822e(0x14c)]=0x8,this[_0x14822e(0x145)]=![],this[_0x14822e(0x141)]=0x0,this['sheet']=id(_0x14822e(0x133)),this[_0x14822e(0x107)]=0x5,this[_0x14822e(0x14a)]=0x8,this['collidable']=!![],this[_0x14822e(0x102)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this['hitbox']={'x':0x0,'y':0x0,'w':this['w']/0x3,'h':this['h']-this['h']/0x5*0x2},this[_0x14822e(0x103)]=0x0,this[_0x14822e(0xeb)]=[[0x5,0x5,0x5,0x5],[0x5,0x5,0x5,0x5],[0x8,0x8,0x8,0x8]],this['actionY']=[[0x14,0x15,0x16,0x17],[0x14,0x14,0x15,0x16],[0x14,0x15,0x16,0x17]],this[_0x14822e(0xdf)]=[[0x7,0x7,0x7,0x7],[0x6,0x6,0x6,0x6]],this[_0x14822e(0xd4)]=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17]],this[_0x14822e(0x144)]=0x0,this[_0x14822e(0x139)]=![];}[_0x48ef28(0xee)](){const _0x26eae3=_0x48ef28;if(!isObstructed(this,player)){this[_0x26eae3(0x145)]=!![];if(this[_0x26eae3(0x141)]==0x2){if(!this[_0x26eae3(0x139)]){let _0x583399=new EnemyProjectile(),_0x4cd298=this['x']+this['w']/0x2,_0x123180=this['y']+this['h']/0x2,_0x3eea1f=player['x']+player['w']/0x2-_0x4cd298+Math[_0x26eae3(0xcb)]()*this[_0x26eae3(0x107)]-this[_0x26eae3(0x107)]/0x2,_0x394f17=player['y']+player['h']/0x2-_0x123180+Math[_0x26eae3(0xcb)]()*this[_0x26eae3(0x107)]-this[_0x26eae3(0x107)]/0x2,_0x5e3054=Math[_0x26eae3(0xbd)](_0x394f17,_0x3eea1f),_0x16a1b1=Math[_0x26eae3(0x15e)](_0x5e3054),_0x220e70=Math['sin'](_0x5e3054);_0x583399[_0x26eae3(0x15b)]=_0x16a1b1*this[_0x26eae3(0x14a)],_0x583399[_0x26eae3(0x16d)]=_0x220e70*this[_0x26eae3(0x14a)],_0x583399['x']=_0x4cd298,_0x583399['y']=_0x123180,enemyProjectiles[_0x26eae3(0x116)](_0x583399),this[_0x26eae3(0x139)]=!![];}}else this[_0x26eae3(0x139)]=![];}else this['attacking']=![];}[_0x48ef28(0x15c)](){const _0x4195a0=_0x48ef28;this[_0x4195a0(0xee)](),this[_0x4195a0(0x11c)]['x']=this['x']+this['w']/0x3,this['hitbox']['y']=this['y']+this['h']/0x5,this[_0x4195a0(0x144)]=Math[_0x4195a0(0xbd)](player['y']+player['h']/0x2-this['y']-this['h']/0x2,player['x']+player['w']/0x2-this['w']/0x2-this['x'])+Math['PI']/0x2;for(let _0x4f20a4=0x0;_0x4f20a4<this[_0x4195a0(0xc4)][_0x4195a0(0xdb)];_0x4f20a4++){this[_0x4195a0(0xc4)][_0x4f20a4]['x']=this['x']+this[_0x4195a0(0xc4)][_0x4f20a4][_0x4195a0(0x16f)],this[_0x4195a0(0xc4)][_0x4f20a4]['y']=this['y']+this['arrows'][_0x4f20a4]['yRel'];}this['hp']<=0x0&&(this[_0x4195a0(0x160)]=!![]),this[_0x4195a0(0x160)]&&(this['justDamaged']=0x0,this[_0x4195a0(0x111)]=!![],this[_0x4195a0(0x103)]=0x2,this[_0x4195a0(0x134)]=0x0,this[_0x4195a0(0x141)]=0x0,this[_0x4195a0(0x14c)]=0xa);}[_0x48ef28(0x14b)](){const _0x10997e=_0x48ef28;this['frameCounter']++;this['frameCounter']>this[_0x10997e(0x14c)]*DTR&&(this[_0x10997e(0x134)]=0x0,this[_0x10997e(0x141)]++,this['currentFrame']>=this[_0x10997e(0xeb)][this[_0x10997e(0x103)]][_0x10997e(0xdb)]&&(this['dead']?this[_0x10997e(0x141)]=this[_0x10997e(0xeb)][this[_0x10997e(0x103)]][_0x10997e(0xdb)]-0x1:this[_0x10997e(0x141)]=0x0));if(!this[_0x10997e(0x111)]){this['attacking']?this[_0x10997e(0x103)]=0x1:this[_0x10997e(0x103)]=0x0;for(let _0x4fba89=0x0;_0x4fba89<this[_0x10997e(0xc4)][_0x10997e(0xdb)];_0x4fba89++){this[_0x10997e(0xc4)][_0x4fba89][_0x10997e(0x14b)]();}}this[_0x10997e(0x145)]?this['slowness']=0x4:this[_0x10997e(0x14c)]=0x8,this[_0x10997e(0x16e)]&&(this[_0x10997e(0x103)]=0x2,this[_0x10997e(0x141)]=0x0,this[_0x10997e(0x155)]=0x0,this[_0x10997e(0x16e)]--),c[_0x10997e(0x13c)](this['sheet'],this['actionX'][this['action']][this[_0x10997e(0x141)]]*TILESIZE,this[_0x10997e(0xc0)][this[_0x10997e(0x103)]][this[_0x10997e(0x141)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']),(this[_0x10997e(0x103)]==0x0||this[_0x10997e(0x103)]==0x1)&&(c['save'](),c[_0x10997e(0xf4)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']-0x6),c['rotate'](this['radians']),c[_0x10997e(0x13c)](this[_0x10997e(0x133)],this[_0x10997e(0xdf)][this[_0x10997e(0x103)]][this[_0x10997e(0x141)]]*TILESIZE,this['headY'][this[_0x10997e(0x103)]][this['currentFrame']]*TILESIZE,TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c['restore']());}}function getTileData(_0x10dc99,_0x380246){const _0x31b226=_0x48ef28;let _0x588b7c=(_0x10dc99/TILESIZE|0x0)+(_0x380246/TILESIZE|0x0)*map['width'];for(let _0x19535b=0x0;_0x19535b<map[_0x31b226(0x123)][_0x31b226(0xdb)];_0x19535b++){for(let _0x4569f5=0x0;_0x4569f5<TilesData[_0x31b226(0xdb)];_0x4569f5++){if(TilesData[_0x4569f5]['id']==map[_0x31b226(0x123)][_0x19535b][_0x588b7c]-0x1)return TilesData[_0x4569f5];}}return![];}window[_0x48ef28(0xd1)]=function(){const _0x5d7799=_0x48ef28;player[_0x5d7799(0x13b)]!==0x0?player['shoot']():player['noArrows']=0xa;},window['oncontextmenu']=function(_0x29e0e8){const _0x1d3cf8=_0x48ef28;_0x29e0e8['preventDefault'](),player[_0x1d3cf8(0xf0)]();},document[_0x48ef28(0x114)]('mousedown',function(_0x344f23){const _0x3cfb75=_0x48ef28;switch(_0x344f23[_0x3cfb75(0xd9)]){case 0x0:userInterface[_0x3cfb75(0x154)]=!![];break;case 0x2:userInterface[_0x3cfb75(0x164)]=!![];break;}}),document[_0x48ef28(0x114)](_0x48ef28(0x148),function(_0x21cc92){const _0x344e1b=_0x48ef28;switch(_0x21cc92[_0x344e1b(0xd9)]){case 0x0:userInterface[_0x344e1b(0x154)]=![];break;case 0x2:userInterface[_0x344e1b(0x164)]=![];break;}});var stats=id(_0x48ef28(0x118));function drawStats(){const _0x5f184e=_0x48ef28;stats[_0x5f184e(0xed)]=_0x5f184e(0xe4)+player['x'],stats[_0x5f184e(0xed)]+='<br>player.y\x20=\x20'+player['y'],stats['innerHTML']+='<br>mouseTile.x\x20=\x20'+(Mouse['x']/TILESIZE|0x0)*TILESIZE,stats[_0x5f184e(0xed)]+=_0x5f184e(0xc7)+(Mouse['y']/TILESIZE|0x0)*TILESIZE,stats['innerHTML']+='<br>mouseTile\x20pos\x20=\x20'+((Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x5f184e(0xc6)]),stats[_0x5f184e(0xed)]+=_0x5f184e(0xe9)+map[_0x5f184e(0x123)][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x5f184e(0xc6)]],map[_0x5f184e(0x123)][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x5f184e(0xc6)]],DEBUG&&(c[_0x5f184e(0xc5)]((Mouse['x']/TILESIZE|0x0)*TILESIZE+map['x'],(Mouse['y']/TILESIZE|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE),c[_0x5f184e(0x12b)]());}function _0x355c(){const _0x55685e=['layout','lineWidth','hole','col','action','round','14px\x20Arial','swordImg','precision','faBbHojwrcrutC:cbdlzRNaLNwpBidPnkWVDzvMNGLD','7964844ULanYC','keyup','free','Start','4720mZyivW','friendly','top','getContext','dead','offsetLeft','counter','addEventListener','9aVHfCr','push','createGrid','stats','lengthY','1mPqcEc','noArrows','hitbox','Goal','vfxX','grass','portrait','mpBar','toPrecision','tiles','return\x20(function()\x20','arrowsArr','splice','split','beginPath','{}.constructor(\x22return\x20this\x22)(\x20)','maxMp','stroke','restore','yRel','hypot','log','lengthX','charCodeAt','radiansP','sheet','frameCounter','maxHp','globalAlpha','now','style','justShot','height','arrowsCount','drawImage','arrowCD','slice','hpBar','rotate','currentFrame','keydown','innerHeight','radians','attacking','mousemove','905962cKpAJV','mouseup','clearRect','projSpeed','draw','slowness','ui-sheet','then','followPlayer','xVelExt','moveTo','Empty','damage','lClick','framecounter','./Archer.json','vfxY','name','pos','points','xVel','compute','arrow','cos','26QTbRSy','justDied','shift','3565670KFMfKg','speed','rClick','closePath','keyCode','type','618YGPasz','atkBox','checkCollisions','11aCHnUt','color','yVel','justDamaged','xRel','solid','sin','atan2','sword','28707QHgCtV','actionY','Obstacle','properties','#8b5851','arrows','rect','width','<br>mouseTile.y\x20=\x20','player','crop','[VXwwHCwBDXkxZHSEAqqfTMQjkqyfyRGTZLEQQPCTFRfSzNIOvjEzBpjZLHKLKfZOmGwkF]','random','805344uddGYr','black','centerX','hp-bar','computeQuiver','onclick','critChance','#ff0000','headY','left','unpassable','200QxPiYE','json','button','FPS:\x20','length','save','[fBHjwrcrCcdzRNLNwpBidPWVDzvMNGLD]','yVelExt','headX','clientY','indexOf','sort','3635288eHydgw','player.x\x20=\x20','active','fillStyle','abs','getElementById','<br>mouseTile\x20id\x20=\x20','innerWidth','actionX','bow','innerHTML','shoot','<br>DTR:\x20','attack','arrowCounter','strokeStyle','ended','translate','FPS','centerY','apply','fromCharCode','attacked','collidable','arrowSpeed','path','lineTo','imageSmoothingEnabled'];_0x355c=function(){return _0x55685e;};return _0x355c();}window[_0x48ef28(0x114)](_0x48ef28(0x142),function(_0x38dd77){const _0x19c22f=_0x48ef28;switch(_0x38dd77[_0x19c22f(0x166)]){case 0x41:player['L']=!![];break;case 0x44:player['R']=!![];break;case 0x57:player['T']=!![];break;case 0x53:player['B']=!![];break;case 0x31:monsters[_0x19c22f(0x116)](new Mole(Mouse['x']-0x10,Mouse['y']-0x10));break;case 0x32:console[_0x19c22f(0x12f)](getTileData(Mouse['x'],Mouse['y']));break;case 0x33:for(let _0x4af8dd=0x0;_0x4af8dd<0x32;_0x4af8dd++){player[_0x19c22f(0xee)](),player[_0x19c22f(0xf1)]=player[_0x19c22f(0x13d)]*DTR,player[_0x19c22f(0xd0)]();}break;case 0x20:!gamePaused?gamePaused=!![]:gamePaused=![];break;}}),window[_0x48ef28(0x114)](_0x48ef28(0x10a),function(_0x7fc6d4){const _0x29ab4a=_0x48ef28;switch(_0x7fc6d4[_0x29ab4a(0x166)]){case 0x41:player['L']=![];break;case 0x44:player['R']=![];break;case 0x57:player['T']=![];break;case 0x53:player['B']=![];break;}}),window[_0x48ef28(0x114)](_0x48ef28(0x146),function(_0x15d19a){const _0xfd7a2d=_0x48ef28;mousePP['x']=_0x15d19a['clientX']-CANVAS[_0xfd7a2d(0x112)],mousePP['y']=_0x15d19a[_0xfd7a2d(0xe0)]-CANVAS['offsetTop'];});function moveCamera(){const _0x53f0c1=_0x48ef28;map['x']=-player['x']/0x3+CANVAS[_0x53f0c1(0xc6)]/0x6,map['y']=-player['y']/0x3+CANVAS['height']/0x6,screenShake[_0x53f0c1(0x113)]&&(screenShake[_0x53f0c1(0x113)]--,screenShake['set'](),map['x']+=screenShake['x'],map['y']+=screenShake['y']),map['x']=map['x']|0x0,map['y']=map['y']|0x0;}var sampleArrow=new Projectile();function computeDrawArrows(){const _0x235f13=_0x48ef28;c[_0x235f13(0x100)]=0x2,c[_0x235f13(0xf2)]=sampleArrow['colors'][0x0],c['beginPath']();for(let _0x5eb265=playerArrows[_0x235f13(0xdb)]-0x1;_0x5eb265>=0x0;_0x5eb265--){if(!playerArrows[_0x5eb265][_0x235f13(0xe5)]||playerArrows[_0x5eb265]['color']!=0x1)continue;playerArrows[_0x5eb265]['free']&&playerArrows[_0x5eb265][_0x235f13(0x15c)]();if(playerArrows[_0x5eb265]!==undefined)playerArrows[_0x5eb265]['draw']();}c['closePath'](),c[_0x235f13(0x12b)](),c[_0x235f13(0xf2)]=sampleArrow['colors'][0x1],c[_0x235f13(0x128)]();for(let _0x16f000=playerArrows[_0x235f13(0xdb)]-0x1;_0x16f000>=0x0;_0x16f000--){if(!playerArrows[_0x16f000][_0x235f13(0xe5)]||playerArrows[_0x16f000][_0x235f13(0x16c)]!=0x2)continue;playerArrows[_0x16f000]['free']&&playerArrows[_0x16f000][_0x235f13(0x15c)]();if(playerArrows[_0x16f000]!==undefined)playerArrows[_0x16f000]['draw']();}c[_0x235f13(0x165)](),c['stroke']();}function loop(){const _0x2d6437=_0x48ef28;fps++,c[_0x2d6437(0x149)](0x0,0x0,CANVAS['width'],CANVAS[_0x2d6437(0x13a)]),moveCamera(),map[_0x2d6437(0x14b)](),player[_0x2d6437(0x15c)]();for(let _0x3e74d7=enemyProjectiles[_0x2d6437(0xdb)]-0x1;_0x3e74d7>=0x0;_0x3e74d7--){enemyProjectiles[_0x3e74d7]['compute']();}sortMonsters(),Mouse['x']=mousePP['x']-map['x'],Mouse['y']=mousePP['y']-map['y'];for(let _0x27c198=0x0;_0x27c198<monsters[_0x2d6437(0xdb)];_0x27c198++){!monsters[_0x27c198][_0x2d6437(0x111)]&&monsters[_0x27c198][_0x2d6437(0x15c)](),monsters[_0x27c198][_0x2d6437(0x14b)]();}player['draw'](),adjustCollidingMonsters(),renderHpBars(),computeDrawArrows();for(let _0x305cd4=enemyProjectiles['length']-0x1;_0x305cd4>=0x0;_0x305cd4--){enemyProjectiles[_0x305cd4][_0x2d6437(0x14b)]();}sword['active']&&(sword[_0x2d6437(0x15c)](),sword[_0x2d6437(0x14b)]());for(let _0x25fa7d=visualFxs[_0x2d6437(0xdb)]-0x1;_0x25fa7d>=0x0;_0x25fa7d--){!visualFxs[_0x25fa7d][_0x2d6437(0xf3)]&&visualFxs[_0x25fa7d]['draw']();}userInterface['draw'](),drawStats();}var lastUpdate=Date[_0x48ef28(0x137)](),myInterval=setInterval(tick,0x3e8/0x3c),DTR=0x1;function tick(){const _0x1835de=_0x48ef28;var _0x3cb39d=Date[_0x1835de(0x137)](),_0x269e65=_0x3cb39d-lastUpdate;lastUpdate=_0x3cb39d,DTR=0x3e8/0x3c/_0x269e65,!gamePaused&&loop();}