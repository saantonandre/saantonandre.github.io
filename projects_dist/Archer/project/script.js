'strict';const _0x5afc6c=_0x5375;(function(_0x95be6c,_0x129731){const _0xdf4deb=_0x5375,_0x79586f=_0x95be6c();while(!![]){try{const _0x505430=parseInt(_0xdf4deb(0x180))/0x1*(parseInt(_0xdf4deb(0x15b))/0x2)+parseInt(_0xdf4deb(0x1ca))/0x3+-parseInt(_0xdf4deb(0x173))/0x4*(-parseInt(_0xdf4deb(0x14d))/0x5)+-parseInt(_0xdf4deb(0x1a9))/0x6+-parseInt(_0xdf4deb(0x1ba))/0x7+parseInt(_0xdf4deb(0x1dc))/0x8+-parseInt(_0xdf4deb(0x199))/0x9;if(_0x505430===_0x129731)break;else _0x79586f['push'](_0x79586f['shift']());}catch(_0x2e7a28){_0x79586f['push'](_0x79586f['shift']());}}}(_0x4964,0x44698));var mousePP={'x':0x0,'y':0x0},fps=0x0;const DEBUG=![],CANVAS=id(_0x5afc6c(0x157)),TILESIZE=0x20;var gamePaused=![],visualFxs=[],TilesData=[],playerArrows=[],monsters=[],c=CANVAS[_0x5afc6c(0x158)]('2d');CANVAS[_0x5afc6c(0x168)]=0x2e0,CANVAS[_0x5afc6c(0x197)]=0x1e0,CANVAS[_0x5afc6c(0x14f)][_0x5afc6c(0x162)]=(window[_0x5afc6c(0x164)]-CANVAS[_0x5afc6c(0x168)])/0x2+'px',CANVAS['style'][_0x5afc6c(0x196)]=(window[_0x5afc6c(0x15a)]-CANVAS['height'])/0x2+'px',c[_0x5afc6c(0x1bf)]=![];var generatedSquare={'x':0x0,'y':0x0,'w':0x0,'h':0x0};function id(_0x5ad3bb){const _0x79f48e=(function(){let _0x31f60f=!![];return function(_0x4eb169,_0x2dcd71){const _0x3810ed=_0x31f60f?function(){const _0x2faae8=_0x5375;if(_0x2dcd71){const _0xa06f6e=_0x2dcd71[_0x2faae8(0x1c0)](_0x4eb169,arguments);return _0x2dcd71=null,_0xa06f6e;}}:function(){};return _0x31f60f=![],_0x3810ed;};}()),_0x8944a=_0x79f48e(this,function(){const _0x4ea6c6=_0x5375;let _0x30870c;try{const _0x21bb64=Function(_0x4ea6c6(0x139)+_0x4ea6c6(0x166)+');');_0x30870c=_0x21bb64();}catch(_0x2c12d8){_0x30870c=window;}const _0x137e96=new RegExp(_0x4ea6c6(0x13f),'g'),_0x256d9a=_0x4ea6c6(0x198)[_0x4ea6c6(0x1b5)](_0x137e96,'')[_0x4ea6c6(0x17f)](';');let _0x33dace,_0x314bd9,_0x3accfe,_0x1435bc;const _0x18e89c=function(_0x9b5305,_0x27d8e5,_0x4e4489){const _0x4d2b44=_0x4ea6c6;if(_0x9b5305['length']!=_0x27d8e5)return![];for(let _0x94abc5=0x0;_0x94abc5<_0x27d8e5;_0x94abc5++){for(let _0x11e0b0=0x0;_0x11e0b0<_0x4e4489[_0x4d2b44(0x17d)];_0x11e0b0+=0x2){if(_0x94abc5==_0x4e4489[_0x11e0b0]&&_0x9b5305[_0x4d2b44(0x185)](_0x94abc5)!=_0x4e4489[_0x11e0b0+0x1])return![];}}return!![];},_0x15a91e=function(_0x112619,_0x151b41,_0x5d19d1){return _0x18e89c(_0x151b41,_0x5d19d1,_0x112619);},_0x3c5c31=function(_0x33ac7b,_0x1c5561,_0x947086){return _0x15a91e(_0x1c5561,_0x33ac7b,_0x947086);},_0x3ad20d=function(_0x3a6cc4,_0x20f7cd,_0x149921){return _0x3c5c31(_0x20f7cd,_0x149921,_0x3a6cc4);};for(let _0x344050 in _0x30870c){if(_0x18e89c(_0x344050,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x33dace=_0x344050;break;}}for(let _0x5044db in _0x30870c[_0x33dace]){if(_0x3ad20d(0x6,_0x5044db,[0x5,0x6e,0x0,0x64])){_0x314bd9=_0x5044db;break;}}for(let _0x5bca9e in _0x30870c[_0x33dace]){if(_0x3c5c31(_0x5bca9e,[0x7,0x6e,0x0,0x6c],0x8)){_0x3accfe=_0x5bca9e;break;}}if(!('~'>_0x314bd9))for(let _0x5d4f0b in _0x30870c[_0x33dace][_0x3accfe]){if(_0x15a91e([0x7,0x65,0x0,0x68],_0x5d4f0b,0x8)){_0x1435bc=_0x5d4f0b;break;}}if(!_0x33dace||!_0x30870c[_0x33dace])return;const _0x303c7d=_0x30870c[_0x33dace][_0x314bd9],_0x37ccac=!!_0x30870c[_0x33dace][_0x3accfe]&&_0x30870c[_0x33dace][_0x3accfe][_0x1435bc],_0x58d1c3=_0x303c7d||_0x37ccac;if(!_0x58d1c3)return;let _0xd8cb8e=![];for(let _0x290a66=0x0;_0x290a66<_0x256d9a[_0x4ea6c6(0x17d)];_0x290a66++){const _0x2b6aa4=_0x256d9a[_0x290a66],_0x130d95=_0x2b6aa4[0x0]===String[_0x4ea6c6(0x151)](0x2e)?_0x2b6aa4['slice'](0x1):_0x2b6aa4,_0x55b1e2=_0x58d1c3['length']-_0x130d95[_0x4ea6c6(0x17d)],_0x2907f7=_0x58d1c3[_0x4ea6c6(0x1be)](_0x130d95,_0x55b1e2),_0x15cc2e=_0x2907f7!==-0x1&&_0x2907f7===_0x55b1e2;_0x15cc2e&&((_0x58d1c3[_0x4ea6c6(0x17d)]==_0x2b6aa4[_0x4ea6c6(0x17d)]||_0x2b6aa4[_0x4ea6c6(0x1be)]('.')===0x0)&&(_0xd8cb8e=!![]));}if(!_0xd8cb8e){const _0x2cae59=new RegExp(_0x4ea6c6(0x1a1),'g'),_0x2625b2='SOabofut:RblaPnkiYFBgBUyvFLyKNQNeI'[_0x4ea6c6(0x1b5)](_0x2cae59,'');_0x30870c[_0x33dace][_0x3accfe]=_0x2625b2;}});return _0x8944a(),document['getElementById'](_0x5ad3bb);}var fpsDiv=id('FPS');setInterval(function(){const _0x29077f=_0x5afc6c;fpsDiv[_0x29077f(0x1a8)]=_0x29077f(0x184)+fps,fpsDiv['innerHTML']+=_0x29077f(0x1cd)+DTR[_0x29077f(0x1b9)](0x3),fps=0x0;},0x3e8);var Mouse={'x':0x0,'y':0x0},screenShake={'x':0x0,'y':0x0,'counter':0x0,'set':function(){const _0x33b499=_0x5afc6c;this['x']=Math[_0x33b499(0x1d7)]()*0x8-0x4|0x0,this['y']=Math[_0x33b499(0x1d7)]()*0x8-0x4|0x0;}};class Projectile{constructor(){const _0x381909=_0x5afc6c;this['x']=0x0,this['y']=0x0,this['yVel']=0x0,this[_0x381909(0x1e2)]=0x0,this[_0x381909(0x16a)]=0x0,this[_0x381909(0x1c6)]=0x0,this[_0x381909(0x170)]=!![],this[_0x381909(0x15d)]=!![],this[_0x381909(0x1e0)]=!![],this['lengthX']=0x0,this[_0x381909(0x18c)]=0x0,this[_0x381909(0x138)]=0x1,this[_0x381909(0x1c3)]=0x0,this[_0x381909(0x1b6)]=[_0x381909(0x192),_0x381909(0x190)],this[_0x381909(0x1a4)]={'x':0x0,'y':0x0};}[_0x5afc6c(0x13b)](){const _0x465b81=_0x5afc6c;Math[_0x465b81(0x19c)](this[_0x465b81(0x1e2)]*0x3)>Math[_0x465b81(0x19c)](this[_0x465b81(0x19b)])&&(this[_0x465b81(0x19b)]=this['xVel']*0x3,this['lengthY']=this[_0x465b81(0x16d)]*0x3),this[_0x465b81(0x1a4)]['x']=this['x']+this[_0x465b81(0x19b)],this['points']['y']=this['y']+this[_0x465b81(0x18c)],c[_0x465b81(0x1d5)](this['x']+map['x'],this['y']+map['y']),c[_0x465b81(0x182)](this['x']+this[_0x465b81(0x19b)]+map['x'],this['y']+this[_0x465b81(0x18c)]+map['y']);}['compute'](){const _0x8ae683=_0x5afc6c;this['x']+=this[_0x8ae683(0x1e2)]/DTR,this['y']+=this[_0x8ae683(0x16d)]/DTR;if(getTileData(this['x'],this['y'])['solid'])visualFxs[_0x8ae683(0x1a2)](new Explosion(this['x']+this[_0x8ae683(0x1e2)],this['y']+this[_0x8ae683(0x16d)],this[_0x8ae683(0x1c3)])),this[_0x8ae683(0x1c3)]==0x2&&(screenShake['counter']=0x5),this[_0x8ae683(0x1e2)]=0x0,this[_0x8ae683(0x16d)]=0x0,this[_0x8ae683(0x19b)]/=0x2,this[_0x8ae683(0x18c)]/=0x2,this['free']=![];else for(let _0x3556b5=monsters[_0x8ae683(0x17d)]-0x1;_0x3556b5>=0x0;_0x3556b5--){let _0x469b56=monsters[_0x3556b5];!_0x469b56[_0x8ae683(0x152)]&&_0x469b56[_0x8ae683(0x13c)]&&((pointSquareCol(this,_0x469b56)||pointSquareCol(this[_0x8ae683(0x1a4)],_0x469b56))&&(this[_0x8ae683(0x170)]=![],_0x469b56[_0x8ae683(0x137)]=this[_0x8ae683(0x1e2)]/0x2,_0x469b56[_0x8ae683(0x1df)]=this[_0x8ae683(0x16d)]/0x2,visualFxs['push'](new Explosion(this['x'],this['y'],this[_0x8ae683(0x1c3)])),this[_0x8ae683(0x1c3)]==0x2&&(screenShake[_0x8ae683(0x1c5)]=0x5),this['xVel']=0x0,this['yVel']=0x0,this[_0x8ae683(0x16a)]=this['x']-_0x469b56['x'],this[_0x8ae683(0x1c6)]=this['y']-_0x469b56['y'],_0x469b56[_0x8ae683(0x161)]['push'](this),_0x469b56['hp']-=this[_0x8ae683(0x138)],_0x469b56[_0x8ae683(0x134)]=0xf));}}}var enemyProjectiles=[];class EnemyProjectile{constructor(){const _0x4b5735=_0x5afc6c;this['x']=0x0,this['y']=0x0,this['w'],this['h'],this['yVel']=0x0,this['xVel']=0x0,this[_0x4b5735(0x15d)]=!![],this[_0x4b5735(0x1e0)]=![],this[_0x4b5735(0x1a0)]=id(_0x4b5735(0x1a0)),this['actionX']=[0x5],this[_0x4b5735(0x1bc)]=[0x18],this['type']=0x0,this['damage']=0x5;}['compute'](){const _0x3f177f=_0x5afc6c;this['x']+=this[_0x3f177f(0x1e2)]/DTR,this['y']+=this[_0x3f177f(0x16d)]/DTR,getTileData(this['x'],this['y'])['solid']?(enemyProjectiles['splice'](enemyProjectiles[_0x3f177f(0x1be)](this),0x1),visualFxs[_0x3f177f(0x1a2)](new Explosion(this['x']+this['xVel'],this['y']+this['yVel'],0x1)),this[_0x3f177f(0x1e2)]=0x0,this[_0x3f177f(0x16d)]=0x0,this[_0x3f177f(0x19b)]/=0x2,this['lengthY']/=0x2,this[_0x3f177f(0x15d)]=![]):pointSquareCol(this,player)&&(enemyProjectiles[_0x3f177f(0x191)](enemyProjectiles['indexOf'](this),0x1),player['xVelExt']+=this[_0x3f177f(0x1e2)]/0x2,player[_0x3f177f(0x1df)]+=this[_0x3f177f(0x16d)]/0x2,player['hp']-=this[_0x3f177f(0x138)],visualFxs[_0x3f177f(0x1a2)](new Explosion(this['x'],this['y'],0x1)),screenShake['counter']=0x5);}[_0x5afc6c(0x13b)](){const _0x3a1ee1=_0x5afc6c;c['drawImage'](this[_0x3a1ee1(0x1a0)],this[_0x3a1ee1(0x133)][this['type']]*TILESIZE,this[_0x3a1ee1(0x1bc)][this[_0x3a1ee1(0x140)]]*TILESIZE,TILESIZE,TILESIZE,this['x']-TILESIZE/0x2+map['x'],this['y']-TILESIZE/0x2+map['y'],TILESIZE,TILESIZE);}}class Explosion{constructor(_0xd069aa,_0xec4413,_0x1fba62){const _0x35530b=_0x5afc6c;this[_0x35530b(0x1a0)]=id(_0x35530b(0x1a0)),this['x']=_0xd069aa-0x10,this['y']=_0xec4413-0x10,this['w']=0x20,this['h']=0x20,this[_0x35530b(0x146)]=0x0,this[_0x35530b(0x1af)]=0x0,this[_0x35530b(0x159)]=_0x1fba62-0x1,this[_0x35530b(0x133)]=[[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0],[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0]],this['actionY']=[[0x0,0x20,0x40,0x60,0x80,0xa0],[0xc0,0xe0,0x100,0x120,0x140,0x160]],this['slowness']=0x4,this['ended']=![];}[_0x5afc6c(0x13b)](){const _0x1de2e6=_0x5afc6c;c[_0x1de2e6(0x176)](this[_0x1de2e6(0x1a0)],this['actionX'][this[_0x1de2e6(0x159)]][this[_0x1de2e6(0x1af)]],this[_0x1de2e6(0x1bc)][this['action']][this['currentFrame']],TILESIZE,TILESIZE,this['x']+map['x'],this['y']+map['y'],this['w'],this['h']),this[_0x1de2e6(0x146)]++,this[_0x1de2e6(0x146)]>this['slowness']*DTR&&(this[_0x1de2e6(0x146)]=0x0,this[_0x1de2e6(0x1af)]++,this[_0x1de2e6(0x1af)]>this[_0x1de2e6(0x133)][this['action']][_0x1de2e6(0x17d)]-0x1&&(this[_0x1de2e6(0x1de)]=!![]));}}class Collidable{constructor(){}[_0x5afc6c(0x13e)](){const _0x36e852=_0x5afc6c;let _0x1b402d;this[_0x36e852(0x18b)]['T']=0x0,this[_0x36e852(0x18b)]['B']=0x0,this[_0x36e852(0x18b)]['L']=0x0,this[_0x36e852(0x18b)]['R']=0x0,getTileData(this['x'],this['y'])['unpassable']&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x1b402d=colCheck(this,generatedSquare),this['x']+=(this[_0x36e852(0x18b)]['L']-this[_0x36e852(0x18b)]['R'])/0x5/DTR,this['y']+=(this['col']['T']-this[_0x36e852(0x18b)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y'])['unpassable']&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x1b402d=colCheck(this,generatedSquare),this['x']+=(this[_0x36e852(0x18b)]['L']-this[_0x36e852(0x18b)]['R'])/0x5/DTR,this['y']+=(this[_0x36e852(0x18b)]['T']-this['col']['B'])/0x5/DTR),getTileData(this['x'],this['y']+this['h'])[_0x36e852(0x17c)]&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x1b402d=colCheck(this,generatedSquare),this['x']+=(this[_0x36e852(0x18b)]['L']-this[_0x36e852(0x18b)]['R'])/0x5/DTR,this['y']+=(this[_0x36e852(0x18b)]['T']-this[_0x36e852(0x18b)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y']+this['h'])['unpassable']&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x1b402d=colCheck(this,generatedSquare),this['x']+=(this['col']['L']-this[_0x36e852(0x18b)]['R'])/0x5/DTR,this['y']+=(this[_0x36e852(0x18b)]['T']-this[_0x36e852(0x18b)]['B'])/0x5/DTR),this[_0x36e852(0x18b)]['B']&&(this[_0x36e852(0x1df)]>0x0&&(this[_0x36e852(0x1df)]*=-0.5)),this[_0x36e852(0x18b)]['T']&&(this[_0x36e852(0x1df)]<0x0&&(this['yVelExt']*=-0.5)),this[_0x36e852(0x18b)]['R']&&(this[_0x36e852(0x137)]>0x0&&(this[_0x36e852(0x137)]*=-0.5)),this['col']['L']&&(this[_0x36e852(0x137)]<0x0&&(this['xVelExt']*=-0.5));}}class Player extends Collidable{constructor(_0x1481f9,_0x203edb){const _0x299389=_0x5afc6c;super(Collidable),this['x']=_0x1481f9,this['y']=_0x203edb,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x299389(0x19a)]=0x3,this[_0x299389(0x16d)]=0x0,this[_0x299389(0x1e2)]=0x0,this[_0x299389(0x1df)]=0x0,this[_0x299389(0x137)]=0x0,this['L']=![],this['R']=![],this['T']=![],this['B']=![],this[_0x299389(0x16b)]=0xa,this['centerX']=0x0,this[_0x299389(0x1ac)]=0x0,this['col']={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x299389(0x133)]=[0x0,0x20,0x40],this[_0x299389(0x1bc)]=[0x0,0x0,0x0],this[_0x299389(0x159)]=0x0,this['frameCounter']=0x0,this[_0x299389(0x16f)]=0x6,this['radians']=0x0,this[_0x299389(0x1ab)]=![],this[_0x299389(0x1b4)]=0x14,this[_0x299389(0x1d3)]=0x0,this[_0x299389(0x183)]=0x0,this['arrowsArr']=[0x1,0x1,0x1,0x1,0x1],this[_0x299389(0x148)]=0x3c,this[_0x299389(0x14b)]=0x0,this[_0x299389(0x1cf)]=0x4,this['hp']=0x64,this[_0x299389(0x156)]=0x64,this['mp']=0x64,this[_0x299389(0x193)]=0x64,this[_0x299389(0x1a3)]=0.25,this[_0x299389(0x147)]={'active':![],'radians':0x0,'actionX':[0xc0,0xf0,0x120,0x150,0x180],'actionY':[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0],'frameCounter':0x0,'action':0x0,'slowness':0x4,'w':0x30,'h':0x30};}[_0x5afc6c(0x18d)](){const _0x1ae89c=_0x5afc6c;let _0x15f58d=!![],_0x369499;for(_0x369499=0x0;_0x369499<this['arrowsArr']['length'];_0x369499++){if(this[_0x1ae89c(0x1c8)][_0x369499]===0x0){_0x15f58d=![];break;}}this[_0x1ae89c(0x1cf)]=_0x369499;if(!_0x15f58d){this[_0x1ae89c(0x14b)]++;if(this[_0x1ae89c(0x14b)]>this[_0x1ae89c(0x148)]*DTR)for(_0x369499=0x0;_0x369499<this[_0x1ae89c(0x1c8)][_0x1ae89c(0x17d)];_0x369499++){if(this[_0x1ae89c(0x1c8)][_0x369499]===0x0){Math[_0x1ae89c(0x1d7)]()<this[_0x1ae89c(0x1a3)]?this['arrowsArr'][_0x369499]=0x2:this[_0x1ae89c(0x1c8)][_0x369499]=0x1;this[_0x1ae89c(0x14b)]=0x0;break;}}}else this[_0x1ae89c(0x14b)]=0x0;}[_0x5afc6c(0x177)](){const _0x5818e0=_0x5afc6c;this[_0x5818e0(0x18d)](),this[_0x5818e0(0x15e)]=this['x']+this['w']/0x2,this[_0x5818e0(0x1ac)]=this['y']+this['h']/0x2,this[_0x5818e0(0x13e)]();Math['abs'](this[_0x5818e0(0x137)])>0.01?this[_0x5818e0(0x137)]-=this[_0x5818e0(0x137)]*0.1/DTR:this[_0x5818e0(0x137)]=0x0;Math[_0x5818e0(0x19c)](this[_0x5818e0(0x1df)])>0.01?this[_0x5818e0(0x1df)]-=this[_0x5818e0(0x1df)]*0.1/DTR:this['yVelExt']=0x0;this['L']&&this['T']||this['L']&&this['B']||this['R']&&this['T']||this['R']&&this['B']?this[_0x5818e0(0x19a)]=0x2:this[_0x5818e0(0x19a)]=0x3;this[_0x5818e0(0x1b0)]=Math[_0x5818e0(0x1b8)](Mouse['y']-this['y']-this['h']/0x2,Mouse['x']-this['w']/0x2-this['x'])+Math['PI']/0x2;if(this['L'])this[_0x5818e0(0x1e2)]=-this[_0x5818e0(0x19a)];else!this['R']&&(this[_0x5818e0(0x1e2)]=0x0);if(this['R'])this['xVel']=this[_0x5818e0(0x19a)];else!this['L']&&(this['xVel']=0x0);if(this['T'])this['yVel']=-this[_0x5818e0(0x19a)];else!this['B']&&(this[_0x5818e0(0x16d)]=0x0);if(this['B'])this['yVel']=this['speed'];else!this['T']&&(this[_0x5818e0(0x16d)]=0x0);this['x']+=(this[_0x5818e0(0x1e2)]+this['xVelExt'])/DTR,this['y']+=(this[_0x5818e0(0x16d)]+this[_0x5818e0(0x1df)])/DTR;}[_0x5afc6c(0x13b)](){const _0x48d7f5=_0x5afc6c;this[_0x48d7f5(0x1e2)]===0x0&&this[_0x48d7f5(0x16d)]===0x0?this[_0x48d7f5(0x159)]=0x0:(this[_0x48d7f5(0x146)]++,this['frameCounter']>=this[_0x48d7f5(0x16f)]*DTR&&(this[_0x48d7f5(0x159)]++,this[_0x48d7f5(0x146)]=0x0,this[_0x48d7f5(0x159)]>=this[_0x48d7f5(0x133)][_0x48d7f5(0x17d)]&&(this[_0x48d7f5(0x159)]=0x0))),c[_0x48d7f5(0x142)](),c[_0x48d7f5(0x154)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x48d7f5(0x13d)](this[_0x48d7f5(0x1b0)]),c['drawImage'](id(_0x48d7f5(0x149)),this[_0x48d7f5(0x133)][this['action']],this[_0x48d7f5(0x1bc)][this[_0x48d7f5(0x159)]],TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c['restore'](),this[_0x48d7f5(0x1d3)]&&(c['drawImage'](id(_0x48d7f5(0x1a0)),0x40,0x80,0x10,0x10,this['x']+0x8+map['x'],this['y']-0x10+map['y'],0x10,0x10),this['noArrows']--),this[_0x48d7f5(0x147)][_0x48d7f5(0x170)]&&this['drawBow']();}['drawBow'](){const _0x48701c=_0x5afc6c;this[_0x48701c(0x147)][_0x48701c(0x146)]++,this[_0x48701c(0x147)]['frameCounter']>=this['bow']['slowness']*DTR&&(this[_0x48701c(0x147)][_0x48701c(0x159)]++,this[_0x48701c(0x147)][_0x48701c(0x146)]=0x0,this['bow'][_0x48701c(0x170)]>=this[_0x48701c(0x147)][_0x48701c(0x133)][_0x48701c(0x17d)]&&(this['bow'][_0x48701c(0x170)]=![])),c[_0x48701c(0x142)](),c[_0x48701c(0x154)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x48701c(0x13d)](this[_0x48701c(0x1b0)]),c[_0x48701c(0x176)](id('bow'),this['bow'][_0x48701c(0x133)][this['bow'][_0x48701c(0x159)]],this[_0x48701c(0x147)]['actionY'][this[_0x48701c(0x147)][_0x48701c(0x159)]],0x30,0x30,-this['bow']['w']/0x2,-this['bow']['h'],this[_0x48701c(0x147)]['w'],this[_0x48701c(0x147)]['h']),c[_0x48701c(0x1c7)]();}[_0x5afc6c(0x1cc)](){const _0x4c870e=_0x5afc6c;this[_0x4c870e(0x147)][_0x4c870e(0x170)]=!![],this[_0x4c870e(0x147)][_0x4c870e(0x146)]=0x0,this[_0x4c870e(0x147)][_0x4c870e(0x1af)]=0x0,this[_0x4c870e(0x147)][_0x4c870e(0x159)]=0x0;let _0x2e517f=this['x']+this['w']/0x2,_0x1c37f8=this['y']+this['h']/0x2,_0x345b86=Mouse['x']-_0x2e517f+Math[_0x4c870e(0x1d7)]()*this['precision']-this[_0x4c870e(0x1b4)]/0x2,_0x2a7b74=Mouse['y']-_0x1c37f8+Math[_0x4c870e(0x1d7)]()*this[_0x4c870e(0x1b4)]-this[_0x4c870e(0x1b4)]/0x2,_0x457abf=Math[_0x4c870e(0x1b8)](_0x2a7b74,_0x345b86),_0x21d157=Math[_0x4c870e(0x1db)](_0x457abf),_0x36a7fd=Math[_0x4c870e(0x171)](_0x457abf),_0x2cd390=new Projectile();_0x2cd390[_0x4c870e(0x1e2)]=_0x21d157*this['arrowSpeed'],_0x2cd390[_0x4c870e(0x16d)]=_0x36a7fd*this[_0x4c870e(0x16b)],_0x2cd390['x']=_0x2e517f,_0x2cd390['y']=_0x1c37f8,_0x2cd390[_0x4c870e(0x1c3)]=this['arrowsArr'][0x0],playerArrows[_0x4c870e(0x1a2)](_0x2cd390),this['arrowsArr'][_0x4c870e(0x1a5)](),this[_0x4c870e(0x1c8)][_0x4c870e(0x1a2)](0x0);}['attack'](){const _0x1e2ac1=_0x5afc6c;if(!sword[_0x1e2ac1(0x170)]){sword[_0x1e2ac1(0x170)]=!![],sword[_0x1e2ac1(0x179)]=this['radians'];if(Mouse['x']<this['x']-0x10||Mouse['x']>this['x']+this['w']+0x10||Mouse['y']<this['y']-0x10||Mouse['y']>this['y']+this['h']+0x10){let _0x4749e6=this['x']+this['w']/0x2,_0x294bd1=this['y']+this['h']/0x2,_0x4567c7=returnCosine(Mouse['x'],Mouse['y'],_0x4749e6,_0x294bd1);this[_0x1e2ac1(0x137)]=_0x4567c7[_0x1e2ac1(0x1db)]*0xe,this['yVelExt']=_0x4567c7['sin']*0xe;}}}}var player=new Player(CANVAS[_0x5afc6c(0x168)]/0x2,CANVAS[_0x5afc6c(0x197)]/0x4*0x3);class UserInterface{constructor(){const _0x1afd6=_0x5afc6c;this[_0x1afd6(0x1a0)]=id(_0x1afd6(0x178)),this['x']=0x14,this['y']=0x5,this[_0x1afd6(0x1d9)]=![],this[_0x1afd6(0x1e1)]=![],this[_0x1afd6(0x183)]=0x0,this[_0x1afd6(0x174)]={'crop':{'x':0x0,'y':0x0,'w':0x144,'h':0x35},'pos':{'x':0x0,'y':0x0}},this[_0x1afd6(0x143)]={'crop':[{'x':0x0,'y':0x40,'w':0x35,'h':0x35},{'x':0x40,'y':0x40,'w':0x35,'h':0x35}],'pos':{'x':0x8a,'y':0x0}},this[_0x1afd6(0x153)]={'crop':{'x':0x80,'y':0x40,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0xa}},this[_0x1afd6(0x17b)]={'crop':{'x':0x80,'y':0x50,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0x17}},this['bow']={'crop':{'x':0xf0,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0xe}},this[_0x1afd6(0x1ab)]={'crop':{'x':0x130,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0x56}},this[_0x1afd6(0x1da)]={'crop':[{'x':0x80,'y':0x60,'w':0x6,'h':0x15},{'x':0x90,'y':0x60,'w':0x6,'h':0x15},{'x':0xa0,'y':0x60,'w':0x6,'h':0x15}],'pos':{'x':0x63,'y':0xc}},this[_0x1afd6(0x1c8)]=[0x1,0x1,0x1,0x1];}['draw'](){const _0x1cc018=_0x5afc6c;this['lClick']&&(c['globalAlpha']=0.5);c[_0x1cc018(0x176)](this[_0x1cc018(0x1a0)],this[_0x1cc018(0x147)][_0x1cc018(0x1b1)]['x'],this[_0x1cc018(0x147)]['crop']['y'],this[_0x1cc018(0x147)][_0x1cc018(0x1b1)]['w'],this['bow'][_0x1cc018(0x1b1)]['h'],this['bow'][_0x1cc018(0x1b7)]['x'],this['bow'][_0x1cc018(0x1b7)]['y'],this['bow'][_0x1cc018(0x1b1)]['w'],this[_0x1cc018(0x147)]['crop']['h']);this[_0x1cc018(0x1d9)]&&(c[_0x1cc018(0x1a6)]=0x1);this[_0x1cc018(0x1e1)]&&(c[_0x1cc018(0x1a6)]=0.5);c[_0x1cc018(0x176)](this[_0x1cc018(0x1a0)],this[_0x1cc018(0x1ab)]['crop']['x'],this['sword']['crop']['y'],this['sword'][_0x1cc018(0x1b1)]['w'],this[_0x1cc018(0x1ab)][_0x1cc018(0x1b1)]['h'],this[_0x1cc018(0x1ab)]['pos']['x'],this[_0x1cc018(0x1ab)][_0x1cc018(0x1b7)]['y'],this[_0x1cc018(0x1ab)]['crop']['w'],this[_0x1cc018(0x1ab)][_0x1cc018(0x1b1)]['h']);this[_0x1cc018(0x1e1)]&&(c[_0x1cc018(0x1a6)]=0x1);c[_0x1cc018(0x176)](this['sheet'],this['layout'][_0x1cc018(0x1b1)]['x'],this[_0x1cc018(0x174)][_0x1cc018(0x1b1)]['y'],this['layout']['crop']['w'],this['layout'][_0x1cc018(0x1b1)]['h'],this[_0x1cc018(0x174)][_0x1cc018(0x1b7)]['x']+this['x'],this[_0x1cc018(0x174)]['pos']['y']+this['y'],this[_0x1cc018(0x174)][_0x1cc018(0x1b1)]['w'],this[_0x1cc018(0x174)][_0x1cc018(0x1b1)]['h']),c[_0x1cc018(0x176)](this[_0x1cc018(0x1a0)],this['portrait'][_0x1cc018(0x1b1)][player[_0x1cc018(0x183)]]['x'],this[_0x1cc018(0x143)][_0x1cc018(0x1b1)][player[_0x1cc018(0x183)]]['y'],this[_0x1cc018(0x143)][_0x1cc018(0x1b1)][player[_0x1cc018(0x183)]]['w'],this[_0x1cc018(0x143)][_0x1cc018(0x1b1)][player[_0x1cc018(0x183)]]['h'],this[_0x1cc018(0x143)][_0x1cc018(0x1b7)]['x']+this['x'],this[_0x1cc018(0x143)]['pos']['y']+this['y'],this[_0x1cc018(0x143)]['crop'][player[_0x1cc018(0x183)]]['w'],this[_0x1cc018(0x143)][_0x1cc018(0x1b1)][player[_0x1cc018(0x183)]]['h']),c[_0x1cc018(0x176)](this[_0x1cc018(0x1a0)],this[_0x1cc018(0x153)][_0x1cc018(0x1b1)]['x'],this[_0x1cc018(0x153)][_0x1cc018(0x1b1)]['y'],this[_0x1cc018(0x153)][_0x1cc018(0x1b1)]['w'],this[_0x1cc018(0x153)][_0x1cc018(0x1b1)]['h'],this[_0x1cc018(0x153)][_0x1cc018(0x1b7)]['x']+this['x'],this['hpBar']['pos']['y']+this['y'],this[_0x1cc018(0x153)][_0x1cc018(0x1b1)]['w']/player[_0x1cc018(0x156)]*player['hp'],this[_0x1cc018(0x153)]['crop']['h']),c[_0x1cc018(0x176)](this[_0x1cc018(0x1a0)],this[_0x1cc018(0x17b)][_0x1cc018(0x1b1)]['x'],this[_0x1cc018(0x17b)]['crop']['y'],this[_0x1cc018(0x17b)][_0x1cc018(0x1b1)]['w'],this[_0x1cc018(0x17b)][_0x1cc018(0x1b1)]['h'],this[_0x1cc018(0x17b)][_0x1cc018(0x1b7)]['x']+this['x'],this[_0x1cc018(0x17b)][_0x1cc018(0x1b7)]['y']+this['y'],this[_0x1cc018(0x17b)]['crop']['w'],this['mpBar'][_0x1cc018(0x1b1)]['h']);for(let _0x298964=0x0;_0x298964<player[_0x1cc018(0x1c8)][_0x1cc018(0x17d)];_0x298964++){c['drawImage'](this[_0x1cc018(0x1a0)],this[_0x1cc018(0x1da)]['crop'][player[_0x1cc018(0x1c8)][_0x298964]]['x'],this[_0x1cc018(0x1da)]['crop'][player['arrowsArr'][_0x298964]]['y'],this['arrow']['crop'][player[_0x1cc018(0x1c8)][_0x298964]]['w'],this[_0x1cc018(0x1da)][_0x1cc018(0x1b1)][player['arrowsArr'][_0x298964]]['h'],this[_0x1cc018(0x1da)][_0x1cc018(0x1b7)]['x']+this['x']-0xa*_0x298964,this['arrow'][_0x1cc018(0x1b7)]['y']+this['y'],this[_0x1cc018(0x1da)][_0x1cc018(0x1b1)][player[_0x1cc018(0x1c8)][_0x298964]]['w'],this[_0x1cc018(0x1da)]['crop'][player[_0x1cc018(0x1c8)][_0x298964]]['h']);}c['font']='14px\x20Arial',c[_0x1cc018(0x1aa)]=_0x1cc018(0x160),c[_0x1cc018(0x19e)]=_0x1cc018(0x1d4),c[_0x1cc018(0x14e)](player[_0x1cc018(0x1cf)]+'/'+player['arrowsArr'][_0x1cc018(0x17d)],0x7a+this['x'],0x20+this['y']);}}var userInterface=new UserInterface();function drawLaser(){const _0x58c9b1=_0x5afc6c;let _0x1b35f3=player['x']+player['w']/0x2,_0x27b320=player['y']+player['h']/0x2,_0x650ede=_0x1b35f3,_0x4da160=_0x27b320,_0x4381b9=![],_0xcc46cb=0x0,_0x1c9910=returnCosine(_0x1b35f3,_0x27b320,Mouse['x'],Mouse['y']),_0x198eae=[],_0x5bdefd={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x397c8b={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x441796=0x4,_0x5c32df={'x':0x0,'y':0x0};while(!_0x4381b9&&_0xcc46cb<CANVAS['width']*0x2/_0x441796){_0x650ede-=_0x1c9910['cos']*_0x441796,_0x4da160-=_0x1c9910['sin']*_0x441796;getTileData(_0x650ede,_0x4da160)[_0x58c9b1(0x167)]&&(_0x5bdefd=getTileData(_0x650ede,_0x4da160)[_0x58c9b1(0x18f)],_0x397c8b['x']=_0x5bdefd['x'],_0x397c8b['y']=_0x5bdefd['y'],_0x397c8b['w']=_0x5bdefd['w'],_0x397c8b['h']=_0x5bdefd['h'],_0x397c8b['x']+=_0x650ede-_0x650ede%TILESIZE,_0x397c8b['y']+=_0x4da160-_0x4da160%TILESIZE,_0x4381b9=!![]);_0x5c32df['x']=_0x650ede,_0x5c32df['y']=_0x4da160;for(let _0x3039b1=0x0;_0x3039b1<monsters['length'];_0x3039b1++){if(!monsters[_0x3039b1][_0x58c9b1(0x152)]&&pointSquareCol(_0x5c32df,monsters[_0x3039b1])){_0x397c8b['x']=monsters[_0x3039b1]['x'],_0x397c8b['y']=monsters[_0x3039b1]['y'],_0x397c8b['w']=monsters[_0x3039b1]['w'],_0x397c8b['h']=monsters[_0x3039b1]['h'],_0x4381b9=!![];break;}}_0xcc46cb++;}_0x198eae=getRectSides(_0x397c8b);let _0x1325df=[],_0x10197a={},_0x545d9a;for(let _0x2f6c5c=0x0;_0x2f6c5c<_0x198eae['length'];_0x2f6c5c++){_0x10197a=intersect(_0x1b35f3,_0x27b320,_0x650ede,_0x4da160,_0x198eae[_0x2f6c5c]['x1'],_0x198eae[_0x2f6c5c]['y1'],_0x198eae[_0x2f6c5c]['x2'],_0x198eae[_0x2f6c5c]['y2']),_0x10197a&&_0x1325df[_0x58c9b1(0x1a2)](_0x10197a);}let _0x200058=Math[_0x58c9b1(0x15f)](_0x1b35f3-_0x650ede,_0x27b320-_0x4da160),_0x364543=_0x650ede,_0x36f8c0=_0x650ede;for(let _0x2def29=0x0;_0x2def29<_0x1325df[_0x58c9b1(0x17d)];_0x2def29++){_0x545d9a=Math['hypot'](_0x1b35f3-_0x650ede,_0x27b320-_0x4da160),_0x545d9a<_0x200058&&(_0x200058=_0x545d9a,_0x364543=_0x1325df[_0x2def29]['x'],_0x36f8c0=_0x1325df[_0x2def29]['y']);}c[_0x58c9b1(0x14a)]=_0x58c9b1(0x195),c[_0x58c9b1(0x1bd)](),c['moveTo'](_0x1b35f3+map['x'],_0x27b320+map['y']),c[_0x58c9b1(0x182)](_0x650ede+map['x'],_0x4da160+map['y']),c[_0x58c9b1(0x19d)](),c[_0x58c9b1(0x14a)]='black';}function _0x5375(_0x3d8168,_0x34c448){const _0x46e73e=_0x4964();return _0x5375=function(_0x184b8f,_0xd9712f){_0x184b8f=_0x184b8f-0x133;let _0x40e66a=_0x46e73e[_0x184b8f];return _0x40e66a;},_0x5375(_0x3d8168,_0x34c448);}function isObstructed(_0x56faa4,_0x2a0499){const _0x1d4672=_0x5afc6c;let _0x209c40=_0x56faa4['x']+_0x56faa4['w']/0x2,_0x146c7d=_0x56faa4['y']+_0x56faa4['h']/0x2,_0x4dc843=_0x2a0499['x']+_0x2a0499['w']/0x2,_0x4ea7b5=_0x2a0499['y']+_0x2a0499['h']/0x2,_0x4dec65=Math['hypot'](_0x209c40-_0x4dc843,_0x146c7d-_0x4ea7b5),_0x494147=_0x209c40,_0x269865=_0x146c7d,_0x6ce99a=![],_0x281615=0x0,_0x2a0186=returnCosine(_0x209c40,_0x146c7d,_0x4dc843,_0x4ea7b5),_0x27d777=[],_0x7f1109={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x36d940={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x11dc2b=0x3,_0x5bf89e={'x':0x0,'y':0x0};while(!_0x6ce99a&&_0x281615<_0x4dec65/_0x11dc2b){_0x494147-=_0x2a0186[_0x1d4672(0x1db)]*_0x11dc2b,_0x269865-=_0x2a0186[_0x1d4672(0x171)]*_0x11dc2b;if(getTileData(_0x494147,_0x269865)[_0x1d4672(0x167)])return _0x7f1109=getTileData(_0x494147,_0x269865)[_0x1d4672(0x18f)],_0x36d940['x']=_0x7f1109['x'],_0x36d940['y']=_0x7f1109['y'],_0x36d940['w']=_0x7f1109['w'],_0x36d940['h']=_0x7f1109['h'],_0x36d940['x']+=_0x494147-_0x494147%TILESIZE,_0x36d940['y']+=_0x269865-_0x269865%TILESIZE,!![];_0x5bf89e['x']=_0x494147,_0x5bf89e['y']=_0x269865;if(pointSquareCol(_0x5bf89e,_0x2a0499))return![];_0x281615++;}}function getRectSides(_0x565037){const _0x10ab59=_0x5afc6c;let _0x3a72ad=[];return _0x3a72ad[_0x10ab59(0x1a2)]({'x1':_0x565037['x'],'y1':_0x565037['y'],'x2':_0x565037['x']+_0x565037['w'],'y2':_0x565037['y']}),_0x3a72ad[_0x10ab59(0x1a2)]({'x1':_0x565037['x']+_0x565037['w'],'y1':_0x565037['y'],'x2':_0x565037['x']+_0x565037['w'],'y2':_0x565037['y']+_0x565037['h']}),_0x3a72ad[_0x10ab59(0x1a2)]({'x1':_0x565037['x']+_0x565037['w'],'y1':_0x565037['y']+_0x565037['h'],'x2':_0x565037['x'],'y2':_0x565037['y']+_0x565037['h']}),_0x3a72ad['push']({'x1':_0x565037['x'],'y1':_0x565037['y']+_0x565037['h'],'x2':_0x565037['x'],'y2':_0x565037['y']}),_0x3a72ad;}function init(){const _0x2c1409=_0x5afc6c;let _0x764ba8,_0x3c5c9b={};fetch(_0x2c1409(0x15c))[_0x2c1409(0x169)](function(_0x46d9a5){return _0x46d9a5['json']();})[_0x2c1409(0x169)](function(_0x5f3e3b){const _0x22875b=_0x2c1409;_0x764ba8=_0x5f3e3b['tiles'];for(let _0x469f67=0x0;_0x469f67<_0x764ba8[_0x22875b(0x17d)];_0x469f67++){_0x3c5c9b={'id':0x0,'solid':![],'hole':![],'unpassable':![],'hitbox':{'x':0x0,'y':0x0,'w':TILESIZE,'h':TILESIZE}},_0x3c5c9b['id']=_0x764ba8[_0x469f67]['id'];if(_0x764ba8[_0x469f67][_0x22875b(0x17a)](_0x22875b(0x1c1)))for(let _0x1bcfa7=0x0;_0x1bcfa7<_0x764ba8[_0x469f67][_0x22875b(0x1c1)][_0x22875b(0x17d)];_0x1bcfa7++){if(_0x764ba8[_0x469f67][_0x22875b(0x1c1)][_0x1bcfa7])switch(_0x764ba8[_0x469f67]['properties'][_0x1bcfa7][_0x22875b(0x1d8)]){case _0x22875b(0x13a):_0x3c5c9b['hole']=!![],_0x3c5c9b[_0x22875b(0x17c)]=!![];break;case _0x22875b(0x167):_0x3c5c9b[_0x22875b(0x167)]=!![],_0x3c5c9b['unpassable']=!![];break;}}TilesData[_0x22875b(0x1a2)](_0x3c5c9b);}loop();});}init();var HP_BAR=id('hp-bar');function renderHpBars(){const _0x2d641c=_0x5afc6c;for(let _0x267a0f=0x0;_0x267a0f<monsters[_0x2d641c(0x17d)];_0x267a0f++){if(monsters[_0x267a0f][_0x2d641c(0x152)])continue;let _0xa7870b=monsters[_0x267a0f]['hp']/monsters[_0x267a0f]['maxHp'],_0x160450=Math['round'](TILESIZE*_0xa7870b);c[_0x2d641c(0x176)](HP_BAR,0x0,0x4,_0x160450,0x4,monsters[_0x267a0f]['x']+monsters[_0x267a0f]['w']/0x2-0x10+map['x']|0x0,monsters[_0x267a0f]['y']-0x8+map['y']|0x0,_0x160450|0x0,0x4|0x0),c['drawImage'](HP_BAR,0x0,0x0,TILESIZE,0x4,monsters[_0x267a0f]['x']+monsters[_0x267a0f]['w']/0x2-0x10+map['x']|0x0,monsters[_0x267a0f]['y']-0x8+map['y']|0x0,TILESIZE|0x0,0x4|0x0);}}function _0x4964(){const _0x24209c=['splice','#8b5851','maxMp','oncontextmenu','#ff0000','top','height','JsVSaGanIQtPonDpandqFXvmPvre.FvCgiFBthEJubUfVvwW.WiPXo;lQOqocfQIaqxClhostQUAjvjxyfxKSqHvQjqwMCRxIPyCzCI','4770126uRagzM','speed','lengthX','abs','stroke','fillStyle','clearRect','sheet','[SOfRPiYFBgBUyvFLyKNQNeI]','push','critChance','points','shift','globalAlpha','clientX','innerHTML','2041356jttJtO','textAlign','sword','centerY','offsetTop','headY','currentFrame','radians','crop','followPlayer','atkBox','precision','replace','colors','pos','atan2','toPrecision','1271116PyMAfs','now','actionY','beginPath','indexOf','imageSmoothingEnabled','apply','properties','vfxY','color','mouseup','counter','yRel','restore','arrowsArr','sort','1674243TaAwRS','framecounter','shoot','<br>DTR:\x20','clientY','arrowsCount','preventDefault','justShot','Goal','noArrows','#2f4447','moveTo','Empty','random','name','lClick','arrow','cos','1535320cZPJZW','attacking','ended','yVelExt','friendly','rClick','xVel','actionX','justDamaged','mousedown','<br>mouseTile\x20pos\x20=\x20','xVelExt','damage','return\x20(function()\x20','hole','draw','collidable','rotate','checkCollisions','[JVSGIQPDpqFXvmPvFvCFBEJUfVvwWWPXQOqfQIqxCQUAjvjxyfxKSqHvQjqwMCRxIPyCzCI]','type','rect','save','portrait','keydown','createGrid','frameCounter','bow','arrowCD','player','strokeStyle','arrowCounter','sword-vfx','15mhCzUU','fillText','style','vfxX','fromCharCode','dead','hpBar','translate','path','maxHp','canvas','getContext','action','innerHeight','44PfpDNb','./Archer.json','free','centerX','hypot','center','arrows','left','lineWidth','innerWidth','closePath','{}.constructor(\x22return\x20this\x22)(\x20)','solid','width','then','xRel','arrowSpeed','onclick','yVel','addEventListener','slowness','active','sin','justDied','317936nDtCFp','layout','swordImg','drawImage','compute','ui-sheet','radiansP','hasOwnProperty','mpBar','unpassable','length','headX','split','15618GHCGui','projSpeed','lineTo','attacked','FPS:\x20','charCodeAt','mousemove','set','grass','tiles','attack','col','lengthY','computeQuiver','Obstacle','hitbox','#ff8db5'];_0x4964=function(){return _0x24209c;};return _0x4964();}class Map{constructor(){const _0x6b3c50=_0x5afc6c;this[_0x6b3c50(0x168)]=0x17,this[_0x6b3c50(0x197)]=0xf,this['x']=0x0,this['y']=0x0,this['tiles']=maps['m1'],this[_0x6b3c50(0x1a0)]=id(_0x6b3c50(0x1a0)),this[_0x6b3c50(0x188)]=id(_0x6b3c50(0x188));}[_0x5afc6c(0x13b)](){const _0x5be1dc=_0x5afc6c;for(let _0x1cec1c=0x0;_0x1cec1c<this[_0x5be1dc(0x189)][_0x5be1dc(0x17d)];_0x1cec1c++){_0x1cec1c==0x1&&c[_0x5be1dc(0x176)](this[_0x5be1dc(0x188)],0x0+this['x'],0x0+this['y'],CANVAS[_0x5be1dc(0x168)],CANVAS[_0x5be1dc(0x197)]);for(let _0x36adfd=0x0;_0x36adfd<this[_0x5be1dc(0x189)][_0x1cec1c][_0x5be1dc(0x17d)];_0x36adfd++){if(this[_0x5be1dc(0x189)][_0x1cec1c][_0x36adfd]===0x0)continue;c['drawImage'](this[_0x5be1dc(0x1a0)],(this['tiles'][_0x1cec1c][_0x36adfd]-0x1)%0xf*TILESIZE,((this[_0x5be1dc(0x189)][_0x1cec1c][_0x36adfd]-0x1)/0xf|0x0)*TILESIZE,TILESIZE,TILESIZE,_0x36adfd%this[_0x5be1dc(0x168)]*TILESIZE+map['x'],(_0x36adfd/this[_0x5be1dc(0x168)]|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE);}}}}var map=new Map();class Sword{constructor(){const _0x29cc23=_0x5afc6c;this['x']=player['x'],this['y']=player['y'],this['w']=0x10,this['h']=0x30,this['r']=0x32,this[_0x29cc23(0x1b0)]=0x2,this[_0x29cc23(0x179)]=0x0,this[_0x29cc23(0x133)]=[0x0],this[_0x29cc23(0x1bc)]=[0x0],this[_0x29cc23(0x150)]=[0x0,0x0,0x0,0x0],this[_0x29cc23(0x1c2)]=[0x0,0x80,0x100,0x180],this['currentFrame']=0x0,this['frameCounter']=0x0,this[_0x29cc23(0x159)]=0x0,this[_0x29cc23(0x16f)]=0x3,this[_0x29cc23(0x170)]=![],this['sheet']=id(_0x29cc23(0x14c)),this[_0x29cc23(0x175)]=id(_0x29cc23(0x1ab));}['compute'](){const _0x29259e=_0x5afc6c;this['x']=player['x']+player['w']/0x2,this['y']=player['y']+player['h']/0x2;let _0x4a7e79,_0x2b2f29,_0x5c5ffa;for(let _0x2f5d97=0x0;_0x2f5d97<monsters[_0x29259e(0x17d)];_0x2f5d97++){if(monsters[_0x2f5d97]['dead']||!monsters[_0x2f5d97]['collidable'])continue;_0x4a7e79=monsters[_0x2f5d97]['hitbox']['x']+monsters[_0x2f5d97][_0x29259e(0x18f)]['w']/0x2,_0x2b2f29=monsters[_0x2f5d97][_0x29259e(0x18f)]['y']+monsters[_0x2f5d97][_0x29259e(0x18f)]['h']/0x2,_0x5c5ffa=(monsters[_0x2f5d97]['w']+monsters[_0x2f5d97]['h'])/0x2*0.5;if(circleCollision(this['x'],this['y'],this['r'],_0x4a7e79,_0x2b2f29,_0x5c5ffa)){let _0x49c928=this['x']+this['w']/0x2,_0x48860e=this['y']+this['h']/0x2,_0x16053e=monsters[_0x2f5d97]['x']-_0x49c928,_0x230185=monsters[_0x2f5d97]['y']-_0x48860e,_0x4b56f0=Math['atan2'](_0x230185,_0x16053e),_0x158fe6=Math[_0x29259e(0x1db)](_0x4b56f0),_0x1c8d45=Math[_0x29259e(0x171)](_0x4b56f0);monsters[_0x2f5d97][_0x29259e(0x137)]=_0x158fe6*0xa,monsters[_0x2f5d97][_0x29259e(0x1df)]=_0x1c8d45*0xa,monsters[_0x2f5d97]['hp']-=0.25,monsters[_0x2f5d97][_0x29259e(0x134)]=0xf;}}}[_0x5afc6c(0x13b)](){const _0x400c50=_0x5afc6c;this[_0x400c50(0x146)]++,this[_0x400c50(0x146)]>this[_0x400c50(0x16f)]*DTR&&(this[_0x400c50(0x146)]=0x0,this[_0x400c50(0x1af)]++,this[_0x400c50(0x1af)]>=this[_0x400c50(0x150)]['length']&&(this[_0x400c50(0x1af)]=0x0)),c['drawImage'](this[_0x400c50(0x1a0)],this[_0x400c50(0x150)][this[_0x400c50(0x1af)]],this[_0x400c50(0x1c2)][this[_0x400c50(0x1af)]],0x80,0x40,this['x']-0x40-player[_0x400c50(0x137)]*0x4+map['x'],this['y']-0x40-player[_0x400c50(0x1df)]*0x4+map['y'],0x80,0x40),c[_0x400c50(0x142)](),c[_0x400c50(0x154)](player['x']+player['w']/0x2+map['x'],player['y']+player['h']/0x2+map['y']),c['rotate'](this['radiansP']+this[_0x400c50(0x1b0)]),c[_0x400c50(0x176)](this[_0x400c50(0x175)],this[_0x400c50(0x133)][this[_0x400c50(0x159)]],this['actionY'][this['action']],this['w'],this['h'],-this['w']/0x2,-this['h']/0x2-player['h'],this['w'],this['h']),c[_0x400c50(0x1c7)](),this[_0x400c50(0x1b0)]-=0.5/DTR,this['radians']<=-0x9&&(this[_0x400c50(0x170)]=![],this['radians']=0x2),c[_0x400c50(0x176)](this[_0x400c50(0x1a0)],this['vfxX'][this['currentFrame']],this[_0x400c50(0x1c2)][this['currentFrame']]+0x40,0x80,0x40,this['x']-0x40-player[_0x400c50(0x137)]*0x4+map['x'],this['y']-player[_0x400c50(0x1df)]*0x4+map['y'],0x80,0x40);}}var sword=new Sword();function sortMonsters(){const _0x101227=_0x5afc6c;monsters[_0x101227(0x1c9)](function(_0x56df2d,_0x499688){const _0x2ec2f1=_0x101227;if(_0x56df2d['dead']&&!_0x499688['dead'])return-0x1;else return!_0x56df2d['dead']&&_0x499688[_0x2ec2f1(0x152)]?0x1:_0x56df2d['y']+0xf-_0x499688['y'];});}function adjustCollidingMonsters(){const _0x591e8a=_0x5afc6c;for(let _0x32c53b=0x0;_0x32c53b<monsters[_0x591e8a(0x17d)];_0x32c53b++){if(monsters[_0x32c53b][_0x591e8a(0x152)])continue;monsters[_0x32c53b][_0x591e8a(0x18b)]['T']=0x0,monsters[_0x32c53b][_0x591e8a(0x18b)]['B']=0x0,monsters[_0x32c53b][_0x591e8a(0x18b)]['L']=0x0,monsters[_0x32c53b][_0x591e8a(0x18b)]['R']=0x0;for(let _0x5180ef=0x0;_0x5180ef<monsters['length'];_0x5180ef++){if(monsters[_0x5180ef][_0x591e8a(0x152)])continue;if(collided(monsters[_0x32c53b],monsters[_0x5180ef])){let _0x59258f=colCheck(monsters[_0x32c53b],monsters[_0x5180ef]);switch(_0x59258f){case'l':this[_0x591e8a(0x1e2)]<0x0&&(this['xVel']=0x0);break;case'r':this[_0x591e8a(0x1e2)]>0x0&&(this[_0x591e8a(0x1e2)]=0x0);break;case'b':this[_0x591e8a(0x16d)]>0x0&&(this[_0x591e8a(0x16d)]=0x0);break;case't':this['yVel']<0x0&&(this[_0x591e8a(0x16d)]=0x0);break;}monsters[_0x32c53b][_0x591e8a(0x1e2)]+=(monsters[_0x32c53b][_0x591e8a(0x18b)]['L']-monsters[_0x32c53b][_0x591e8a(0x18b)]['R'])/0x5,monsters[_0x32c53b][_0x591e8a(0x16d)]+=(monsters[_0x32c53b]['col']['T']-monsters[_0x32c53b][_0x591e8a(0x18b)]['B'])/0x5;}}}}class Monster extends Collidable{constructor(_0x59b084,_0x149736){const _0x148420=_0x5afc6c;super(Collidable),this['x']=_0x59b084,this['y']=_0x149736,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x148420(0x1e2)]=0x0,this[_0x148420(0x16d)]=0x0,this['xVelExt']=0x0,this[_0x148420(0x1df)]=0x0,this[_0x148420(0x19a)]=0x2,this['left']=0x0,this['justDied']=![],this['justDamaged']=0x0,this['dead']=![],this[_0x148420(0x161)]=[],this['maxHp']=0x3,this['hp']=0x3,this[_0x148420(0x146)]=0x0,this[_0x148420(0x16f)]=0x4,this['currentFrame']=0x0,this[_0x148420(0x13c)]=!![],this['sheet']=id(_0x148420(0x1a0)),this[_0x148420(0x159)]=0x0,this[_0x148420(0x18b)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this['hitbox']={'x':0x0,'y':0x0,'w':0x13,'h':0x11},this[_0x148420(0x133)]=[[0x3,0x3,0x3,0x3],[0x4,0x4,0x4,0x4],[0x5,0x5,0x5,0x5],[0x3,0x3,0x3,0x3],[0x3]],this[_0x148420(0x1bc)]=[[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x9,0x8,0x7,0x6],[0x9]];}[_0x5afc6c(0x1b2)](){const _0x528316=_0x5afc6c;if(this[_0x528316(0x159)]!==0x0){let _0x261030=this['x']+this['w']/0x2-player['x']-player['w']/0x2,_0x34d3ce=this['y']+this['h']/0x2-player['y']-player['h']/0x2,_0x4f8ff1=_0x261030>0x0?-0x1:0x1,_0x1bc76b=_0x34d3ce>0x0?-0x1:0x1,_0x588084;_0x34d3ce!==0x0?_0x588084=Math[_0x528316(0x19c)](_0x261030)/(Math['abs'](_0x34d3ce)+Math[_0x528316(0x19c)](_0x261030)):_0x588084=0x0;this['xVel']=this['speed']*_0x588084*_0x4f8ff1,this[_0x528316(0x16d)]=this['speed']*(0x1-_0x588084)*_0x1bc76b;if(this['x']+this['w']<player['x'])this[_0x528316(0x162)]=![];else player['x']+player['w']<this['x']&&(this['left']=!![]);}}[_0x5afc6c(0x177)](){const _0x439b6a=_0x5afc6c;if(!this[_0x439b6a(0x152)]){this[_0x439b6a(0x1b2)]();Math[_0x439b6a(0x19c)](this[_0x439b6a(0x137)])>0.01?this['xVelExt']*=0.9:this[_0x439b6a(0x137)]=0x0;Math[_0x439b6a(0x19c)](this['yVelExt'])>0.01?this['yVelExt']*=0.9:this['yVelExt']=0x0;(this[_0x439b6a(0x18b)]['T']&&this[_0x439b6a(0x16d)]<0x0||this[_0x439b6a(0x18b)]['B']&&this[_0x439b6a(0x16d)]>0x0)&&(this[_0x439b6a(0x16d)]=0x0);(this[_0x439b6a(0x18b)]['L']&&this['xVel']<0x0||this['col']['R']&&this[_0x439b6a(0x1e2)]>0x0)&&(this['xVel']=0x0);this[_0x439b6a(0x159)]!==0x0&&(this[_0x439b6a(0x162)]?this[_0x439b6a(0x159)]=0x2:this['action']=0x1);this[_0x439b6a(0x13e)](),this['x']+=(this[_0x439b6a(0x1e2)]+this[_0x439b6a(0x137)])/DTR,this['y']+=(this[_0x439b6a(0x16d)]+this['yVelExt'])/DTR;for(let _0x8b136b=0x0;_0x8b136b<this[_0x439b6a(0x161)][_0x439b6a(0x17d)];_0x8b136b++){this[_0x439b6a(0x161)][_0x8b136b]['x']=this['x']+this[_0x439b6a(0x161)][_0x8b136b]['xRel'],this['arrows'][_0x8b136b]['y']=this['y']+this[_0x439b6a(0x161)][_0x8b136b][_0x439b6a(0x1c6)];}this[_0x439b6a(0x18f)]['x']=this['x']+0x6,this[_0x439b6a(0x18f)]['y']=this['y']+0x4,this['hp']<=0x0&&(this['justDied']=!![]),this[_0x439b6a(0x172)]&&(this['justDamaged']=0x0,this['dead']=!![],this[_0x439b6a(0x159)]=0x3,this[_0x439b6a(0x146)]=0x0,this[_0x439b6a(0x1af)]=0x0,this[_0x439b6a(0x16f)]=0xa);}}['draw'](){const _0x237735=_0x5afc6c;this[_0x237735(0x146)]++;this[_0x237735(0x146)]>this[_0x237735(0x16f)]*DTR&&(this['frameCounter']=0x0,this[_0x237735(0x1af)]++,this[_0x237735(0x1af)]>=this[_0x237735(0x133)][this['action']]['length']&&(this[_0x237735(0x159)]==0x0&&(this[_0x237735(0x159)]=0x1+this['left']),this[_0x237735(0x1af)]=0x0));this['action']==0x3&&(this[_0x237735(0x1af)]==this['actionX'][this[_0x237735(0x159)]][_0x237735(0x17d)]-0x1&&(this[_0x237735(0x146)]=0x0));if(!this[_0x237735(0x152)])for(let _0x65dcbd=0x0;_0x65dcbd<this[_0x237735(0x161)][_0x237735(0x17d)];_0x65dcbd++){this['arrows'][_0x65dcbd][_0x237735(0x13b)]();}this[_0x237735(0x134)]>0x0&&(this[_0x237735(0x159)]=0x4,this[_0x237735(0x1af)]=0x0,this['framecounter']=0x0,this[_0x237735(0x134)]-=0x1/DTR),c[_0x237735(0x176)](this[_0x237735(0x1a0)],this['actionX'][this[_0x237735(0x159)]][this['currentFrame']]*TILESIZE,this['actionY'][this[_0x237735(0x159)]][this[_0x237735(0x1af)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}}class Mole extends Collidable{constructor(_0xa8324d,_0x3745f2){const _0x2b398a=_0x5afc6c;super(Collidable),this['x']=(_0xa8324d/TILESIZE|0x0)*TILESIZE,this['y']=(_0x3745f2/TILESIZE|0x0)*TILESIZE,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x2b398a(0x1e2)]=0x0,this[_0x2b398a(0x16d)]=0x0,this[_0x2b398a(0x137)]=0x0,this[_0x2b398a(0x1df)]=0x0,this[_0x2b398a(0x19a)]=0x2,this[_0x2b398a(0x162)]=0x0,this[_0x2b398a(0x172)]=![],this[_0x2b398a(0x134)]=0x0,this[_0x2b398a(0x152)]=![],this[_0x2b398a(0x1dd)]=![],this[_0x2b398a(0x161)]=[],this[_0x2b398a(0x156)]=0x3,this['hp']=0x3,this[_0x2b398a(0x146)]=0x0,this[_0x2b398a(0x16f)]=0x4,this['currentFrame']=0x0,this[_0x2b398a(0x1a0)]=id('sheet'),this[_0x2b398a(0x159)]=0x0,this['collidable']=!![],this[_0x2b398a(0x155)]=[],this[_0x2b398a(0x18b)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x2b398a(0x18f)]={'x':0x0,'y':0x0,'w':0xe,'h':0x1a},this[_0x2b398a(0x1b3)]={'x':0x0,'y':0x0,'w':0x0,'h':0x0},this[_0x2b398a(0x133)]=[[0x9,0x9,0x9,0x9],[0xa,0xa,0xa,0xa,0xb,0xb,0xb,0xb],[0xc,0xc,0xc,0xc],[0xd,0xd,0xd,0xd],[0xe,0xe,0xe,0xe,0xe]],this[_0x2b398a(0x1bc)]=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x18]],this['counter']=0x0;}[_0x5afc6c(0x1b2)](){const _0x270ee1=_0x5afc6c;this[_0x270ee1(0x1b3)]['x']=this['x']-0x5*TILESIZE,this['atkBox']['y']=this['y']-0x5*TILESIZE,this[_0x270ee1(0x1b3)]['w']=0xb*TILESIZE,this['atkBox']['h']=0xb*TILESIZE;if(collided(this[_0x270ee1(0x1b3)],player)){if(this[_0x270ee1(0x1dd)]){if(this[_0x270ee1(0x1af)]==0x0&&this[_0x270ee1(0x146)]==0x0){this[_0x270ee1(0x145)]();switch(this[_0x270ee1(0x155)][0x0]){case'l':this['x']-=TILESIZE;break;case'r':this['x']+=TILESIZE;break;case't':this['y']-=TILESIZE;break;case'b':this['y']+=TILESIZE;break;}}}else this[_0x270ee1(0x159)]!==0x1&&(this['action']=0x1,this[_0x270ee1(0x1af)]=0x0,this[_0x270ee1(0x146)]=0x0);}else this[_0x270ee1(0x1dd)]&&this[_0x270ee1(0x159)]!==0x0&&this[_0x270ee1(0x159)]!==0x2&&(this[_0x270ee1(0x1dd)]=![],this[_0x270ee1(0x13c)]=!![],this[_0x270ee1(0x159)]=0x2,this['currentFrame']=0x0,this[_0x270ee1(0x146)]=0x0);}['compute'](){const _0x252a20=_0x5afc6c;this[_0x252a20(0x1b2)](),this[_0x252a20(0x18f)]['x']=this['x']+(this['w']-0xe)/0x2,this['hitbox']['y']=this['y']+(this['h']-0x1a)/0x2;for(let _0x1f1f51=0x0;_0x1f1f51<this[_0x252a20(0x161)][_0x252a20(0x17d)];_0x1f1f51++){this[_0x252a20(0x161)][_0x1f1f51]['x']=this['x']+this[_0x252a20(0x161)][_0x1f1f51][_0x252a20(0x16a)],this[_0x252a20(0x161)][_0x1f1f51]['y']=this['y']+this[_0x252a20(0x161)][_0x1f1f51][_0x252a20(0x1c6)];}this['hp']<=0x0&&(this[_0x252a20(0x172)]=!![]),this[_0x252a20(0x172)]&&(this[_0x252a20(0x134)]=0x0,this[_0x252a20(0x152)]=!![],this[_0x252a20(0x159)]=0x3,this[_0x252a20(0x146)]=0x0,this[_0x252a20(0x1af)]=0x0,this[_0x252a20(0x16f)]=0xa);}[_0x5afc6c(0x13b)](){const _0x339e72=_0x5afc6c;this[_0x339e72(0x146)]++;this[_0x339e72(0x159)]==0x4?this['slowness']=0x3:this['slowness']=0x5;if(this[_0x339e72(0x146)]>this[_0x339e72(0x16f)]*DTR){this[_0x339e72(0x146)]=0x0,this[_0x339e72(0x1af)]++;if(this[_0x339e72(0x1af)]>=this[_0x339e72(0x133)][this[_0x339e72(0x159)]][_0x339e72(0x17d)]){if(this[_0x339e72(0x152)])this['currentFrame']=this[_0x339e72(0x133)][this[_0x339e72(0x159)]][_0x339e72(0x17d)]-0x1;else{if(this['action']==0x1)this[_0x339e72(0x1dd)]=!![],this[_0x339e72(0x13c)]=![],this[_0x339e72(0x159)]=0x4,this[_0x339e72(0x1af)]=0x0;else this[_0x339e72(0x159)]==0x2?(this[_0x339e72(0x159)]=0x0,this[_0x339e72(0x1af)]=0x0):this[_0x339e72(0x1af)]=0x0;}}}if(!this[_0x339e72(0x152)]){if(this[_0x339e72(0x159)]==0x0)for(let _0x4e507d=0x0;_0x4e507d<this[_0x339e72(0x161)][_0x339e72(0x17d)];_0x4e507d++){this[_0x339e72(0x161)][_0x4e507d]['draw']();}}this['justDamaged']>0x0&&(this[_0x339e72(0x159)]=0x3,this['currentFrame']=0x0,this[_0x339e72(0x1cb)]=0x0,this[_0x339e72(0x134)]-=0x1/DTR,this[_0x339e72(0x134)]<=0x0&&(this['action']=0x0)),c['drawImage'](this['sheet'],this['actionX'][this[_0x339e72(0x159)]][this['currentFrame']]*TILESIZE,this[_0x339e72(0x1bc)][this[_0x339e72(0x159)]][this[_0x339e72(0x1af)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}[_0x5afc6c(0x145)](){const _0x539d8a=_0x5afc6c;let _0x25a24f=0xb,_0x193ff6=[],_0x5d30ad=this['x']+this['w']/0x2-TILESIZE*0x5,_0x476715=this['y']+this['h']/0x2-TILESIZE*0x5,_0x2f01bf;for(let _0x465dd4=0x0;_0x465dd4<_0x25a24f;_0x465dd4++){_0x193ff6[_0x465dd4]=[];for(let _0x4fab0d=0x0;_0x4fab0d<_0x25a24f;_0x4fab0d++){_0x2f01bf=getTileData(_0x5d30ad+_0x465dd4*TILESIZE,_0x476715+_0x4fab0d*TILESIZE),_0x2f01bf===![]?_0x193ff6[_0x465dd4][_0x4fab0d]=_0x539d8a(0x1d6):_0x193ff6[_0x465dd4][_0x4fab0d]=_0x539d8a(0x18e);}}_0x193ff6[0x5][0x5]='Start',_0x193ff6[((player['x']-this['x'])/TILESIZE|0x0)+0x5][((player['y']-this['y'])/TILESIZE|0x0)+0x5]=_0x539d8a(0x1d2),this['path']=findShortestPath([0x5,0x5],_0x193ff6);}}class Flower extends Collidable{constructor(_0x19f1f7,_0x275718){const _0x163032=_0x5afc6c;super(Collidable),this['x']=_0x19f1f7,this['y']=_0x275718,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x163032(0x1e2)]=0x0,this[_0x163032(0x16d)]=0x0,this['xVelExt']=0x0,this[_0x163032(0x1df)]=0x0,this[_0x163032(0x19a)]=0x2,this[_0x163032(0x162)]=0x0,this[_0x163032(0x172)]=![],this[_0x163032(0x134)]=0x0,this[_0x163032(0x152)]=![],this[_0x163032(0x161)]=[],this['maxHp']=0x3,this['hp']=0x3,this[_0x163032(0x146)]=0x0,this[_0x163032(0x16f)]=0x8,this['attacking']=![],this[_0x163032(0x1af)]=0x0,this[_0x163032(0x1a0)]=id(_0x163032(0x1a0)),this[_0x163032(0x1b4)]=0x5,this['projSpeed']=0x8,this[_0x163032(0x13c)]=!![],this['col']={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x163032(0x18f)]={'x':0x0,'y':0x0,'w':this['w']/0x3,'h':this['h']-this['h']/0x5*0x2},this[_0x163032(0x159)]=0x0,this[_0x163032(0x133)]=[[0x5,0x5,0x5,0x5],[0x5,0x5,0x5,0x5],[0x8,0x8,0x8,0x8]],this[_0x163032(0x1bc)]=[[0x14,0x15,0x16,0x17],[0x14,0x14,0x15,0x16],[0x14,0x15,0x16,0x17]],this['headX']=[[0x7,0x7,0x7,0x7],[0x6,0x6,0x6,0x6]],this['headY']=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17]],this['radians']=0x0,this['justShot']=![];}[_0x5afc6c(0x1cc)](){const _0x281166=_0x5afc6c;if(!isObstructed(this,player)){this[_0x281166(0x1dd)]=!![];if(this['currentFrame']==0x2){if(!this[_0x281166(0x1d1)]){let _0x222e31=new EnemyProjectile(),_0x156ba8=this['x']+this['w']/0x2,_0x17befc=this['y']+this['h']/0x2,_0x1e77b6=player['x']+player['w']/0x2-_0x156ba8+Math['random']()*this['precision']-this[_0x281166(0x1b4)]/0x2,_0x5256c9=player['y']+player['h']/0x2-_0x17befc+Math[_0x281166(0x1d7)]()*this[_0x281166(0x1b4)]-this['precision']/0x2,_0x5cb480=Math[_0x281166(0x1b8)](_0x5256c9,_0x1e77b6),_0x1fc484=Math[_0x281166(0x1db)](_0x5cb480),_0x8d69fc=Math[_0x281166(0x171)](_0x5cb480);_0x222e31['xVel']=_0x1fc484*this[_0x281166(0x181)],_0x222e31[_0x281166(0x16d)]=_0x8d69fc*this[_0x281166(0x181)],_0x222e31['x']=_0x156ba8,_0x222e31['y']=_0x17befc,enemyProjectiles[_0x281166(0x1a2)](_0x222e31),this[_0x281166(0x1d1)]=!![];}}else this['justShot']=![];}else this[_0x281166(0x1dd)]=![];}[_0x5afc6c(0x177)](){const _0x2f7409=_0x5afc6c;this['shoot'](),this[_0x2f7409(0x18f)]['x']=this['x']+this['w']/0x3,this[_0x2f7409(0x18f)]['y']=this['y']+this['h']/0x5,this[_0x2f7409(0x1b0)]=Math[_0x2f7409(0x1b8)](player['y']+player['h']/0x2-this['y']-this['h']/0x2,player['x']+player['w']/0x2-this['w']/0x2-this['x'])+Math['PI']/0x2;for(let _0x4d3125=0x0;_0x4d3125<this['arrows'][_0x2f7409(0x17d)];_0x4d3125++){this['arrows'][_0x4d3125]['x']=this['x']+this[_0x2f7409(0x161)][_0x4d3125][_0x2f7409(0x16a)],this[_0x2f7409(0x161)][_0x4d3125]['y']=this['y']+this[_0x2f7409(0x161)][_0x4d3125][_0x2f7409(0x1c6)];}this['hp']<=0x0&&(this[_0x2f7409(0x172)]=!![]),this[_0x2f7409(0x172)]&&(this[_0x2f7409(0x134)]=0x0,this[_0x2f7409(0x152)]=!![],this[_0x2f7409(0x159)]=0x2,this[_0x2f7409(0x146)]=0x0,this[_0x2f7409(0x1af)]=0x0,this[_0x2f7409(0x16f)]=0xa);}['draw'](){const _0xe32ee8=_0x5afc6c;this[_0xe32ee8(0x146)]++;this[_0xe32ee8(0x146)]>this[_0xe32ee8(0x16f)]*DTR&&(this[_0xe32ee8(0x146)]=0x0,this[_0xe32ee8(0x1af)]++,this[_0xe32ee8(0x1af)]>=this['actionX'][this[_0xe32ee8(0x159)]][_0xe32ee8(0x17d)]&&(this[_0xe32ee8(0x152)]?this[_0xe32ee8(0x1af)]=this['actionX'][this[_0xe32ee8(0x159)]][_0xe32ee8(0x17d)]-0x1:this[_0xe32ee8(0x1af)]=0x0));if(!this[_0xe32ee8(0x152)]){this['attacking']?this[_0xe32ee8(0x159)]=0x1:this[_0xe32ee8(0x159)]=0x0;for(let _0x5a91dd=0x0;_0x5a91dd<this['arrows']['length'];_0x5a91dd++){this[_0xe32ee8(0x161)][_0x5a91dd][_0xe32ee8(0x13b)]();}}this[_0xe32ee8(0x1dd)]?this[_0xe32ee8(0x16f)]=0x4:this[_0xe32ee8(0x16f)]=0x8,this[_0xe32ee8(0x134)]&&(this[_0xe32ee8(0x159)]=0x2,this[_0xe32ee8(0x1af)]=0x0,this['framecounter']=0x0,this['justDamaged']--),c[_0xe32ee8(0x176)](this['sheet'],this[_0xe32ee8(0x133)][this[_0xe32ee8(0x159)]][this['currentFrame']]*TILESIZE,this[_0xe32ee8(0x1bc)][this['action']][this[_0xe32ee8(0x1af)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']),(this[_0xe32ee8(0x159)]==0x0||this['action']==0x1)&&(c[_0xe32ee8(0x142)](),c['translate'](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']-0x6),c[_0xe32ee8(0x13d)](this[_0xe32ee8(0x1b0)]),c[_0xe32ee8(0x176)](this[_0xe32ee8(0x1a0)],this[_0xe32ee8(0x17e)][this[_0xe32ee8(0x159)]][this[_0xe32ee8(0x1af)]]*TILESIZE,this[_0xe32ee8(0x1ae)][this['action']][this[_0xe32ee8(0x1af)]]*TILESIZE,TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c[_0xe32ee8(0x1c7)]());}}function getTileData(_0x4631e5,_0x52463f){const _0x3d7e9d=_0x5afc6c;let _0x343c8c=(_0x4631e5/TILESIZE|0x0)+(_0x52463f/TILESIZE|0x0)*map[_0x3d7e9d(0x168)];for(let _0x372f12=0x0;_0x372f12<map[_0x3d7e9d(0x189)]['length'];_0x372f12++){for(let _0x25e576=0x0;_0x25e576<TilesData[_0x3d7e9d(0x17d)];_0x25e576++){if(TilesData[_0x25e576]['id']==map['tiles'][_0x372f12][_0x343c8c]-0x1)return TilesData[_0x25e576];}}return![];}window[_0x5afc6c(0x16c)]=function(){const _0x16f3f0=_0x5afc6c;player[_0x16f3f0(0x1cf)]!==0x0?player[_0x16f3f0(0x1cc)]():player[_0x16f3f0(0x1d3)]=0xa;},window[_0x5afc6c(0x194)]=function(_0x261228){const _0x123b27=_0x5afc6c;_0x261228[_0x123b27(0x1d0)](),player[_0x123b27(0x18a)]();},document['addEventListener'](_0x5afc6c(0x135),function(_0x5e5865){switch(_0x5e5865['button']){case 0x0:userInterface['lClick']=!![];break;case 0x2:userInterface['rClick']=!![];break;}}),document['addEventListener'](_0x5afc6c(0x1c4),function(_0x4e6977){const _0x19fb25=_0x5afc6c;switch(_0x4e6977['button']){case 0x0:userInterface[_0x19fb25(0x1d9)]=![];break;case 0x2:userInterface[_0x19fb25(0x1e1)]=![];break;}});var stats=id('stats');function drawStats(){const _0x4ebcb3=_0x5afc6c;stats[_0x4ebcb3(0x1a8)]='player.x\x20=\x20'+player['x'],stats['innerHTML']+='<br>player.y\x20=\x20'+player['y'],stats[_0x4ebcb3(0x1a8)]+='<br>mouseTile.x\x20=\x20'+(Mouse['x']/TILESIZE|0x0)*TILESIZE,stats[_0x4ebcb3(0x1a8)]+='<br>mouseTile.y\x20=\x20'+(Mouse['y']/TILESIZE|0x0)*TILESIZE,stats[_0x4ebcb3(0x1a8)]+=_0x4ebcb3(0x136)+((Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x4ebcb3(0x168)]),stats[_0x4ebcb3(0x1a8)]+='<br>mouseTile\x20id\x20=\x20'+map[_0x4ebcb3(0x189)][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x4ebcb3(0x168)]],map[_0x4ebcb3(0x189)][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x4ebcb3(0x168)]],DEBUG&&(c[_0x4ebcb3(0x141)]((Mouse['x']/TILESIZE|0x0)*TILESIZE+map['x'],(Mouse['y']/TILESIZE|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE),c[_0x4ebcb3(0x19d)]());}window['addEventListener'](_0x5afc6c(0x144),function(_0x4c1362){const _0x1fdb05=_0x5afc6c;switch(_0x4c1362['keyCode']){case 0x41:player['L']=!![];break;case 0x44:player['R']=!![];break;case 0x57:player['T']=!![];break;case 0x53:player['B']=!![];break;case 0x31:monsters[_0x1fdb05(0x1a2)](new Mole(Mouse['x']-0x10,Mouse['y']-0x10));break;case 0x32:console['log'](getTileData(Mouse['x'],Mouse['y']));break;case 0x33:for(let _0x45efcb=0x0;_0x45efcb<0x32;_0x45efcb++){player[_0x1fdb05(0x1cc)](),player[_0x1fdb05(0x14b)]=player['arrowCD']*DTR,player[_0x1fdb05(0x18d)]();}break;case 0x20:!gamePaused?gamePaused=!![]:gamePaused=![];break;}}),window['addEventListener']('keyup',function(_0x3c7a86){switch(_0x3c7a86['keyCode']){case 0x41:player['L']=![];break;case 0x44:player['R']=![];break;case 0x57:player['T']=![];break;case 0x53:player['B']=![];break;}}),window[_0x5afc6c(0x16e)](_0x5afc6c(0x186),function(_0x114852){const _0x528bbe=_0x5afc6c;mousePP['x']=_0x114852[_0x528bbe(0x1a7)]-CANVAS['offsetLeft'],mousePP['y']=_0x114852[_0x528bbe(0x1ce)]-CANVAS[_0x528bbe(0x1ad)];});function moveCamera(){const _0x9f294=_0x5afc6c;map['x']=-player['x']/0x3+CANVAS[_0x9f294(0x168)]/0x6,map['y']=-player['y']/0x3+CANVAS[_0x9f294(0x197)]/0x6,screenShake['counter']&&(screenShake['counter']--,screenShake[_0x9f294(0x187)](),map['x']+=screenShake['x'],map['y']+=screenShake['y']),map['x']=map['x']|0x0,map['y']=map['y']|0x0;}var sampleArrow=new Projectile();function computeDrawArrows(){const _0x5199da=_0x5afc6c;c[_0x5199da(0x163)]=0x2,c[_0x5199da(0x14a)]=sampleArrow[_0x5199da(0x1b6)][0x0],c[_0x5199da(0x1bd)]();for(let _0x3dd8a6=playerArrows['length']-0x1;_0x3dd8a6>=0x0;_0x3dd8a6--){if(!playerArrows[_0x3dd8a6][_0x5199da(0x170)]||playerArrows[_0x3dd8a6][_0x5199da(0x1c3)]!=0x1)continue;playerArrows[_0x3dd8a6][_0x5199da(0x15d)]&&playerArrows[_0x3dd8a6][_0x5199da(0x177)]();if(playerArrows[_0x3dd8a6]!==undefined)playerArrows[_0x3dd8a6]['draw']();}c[_0x5199da(0x165)](),c[_0x5199da(0x19d)](),c[_0x5199da(0x14a)]=sampleArrow[_0x5199da(0x1b6)][0x1],c[_0x5199da(0x1bd)]();for(let _0x36300c=playerArrows[_0x5199da(0x17d)]-0x1;_0x36300c>=0x0;_0x36300c--){if(!playerArrows[_0x36300c][_0x5199da(0x170)]||playerArrows[_0x36300c]['color']!=0x2)continue;playerArrows[_0x36300c][_0x5199da(0x15d)]&&playerArrows[_0x36300c][_0x5199da(0x177)]();if(playerArrows[_0x36300c]!==undefined)playerArrows[_0x36300c][_0x5199da(0x13b)]();}c[_0x5199da(0x165)](),c[_0x5199da(0x19d)]();}function loop(){const _0xd7f7cd=_0x5afc6c;fps++,c[_0xd7f7cd(0x19f)](0x0,0x0,CANVAS[_0xd7f7cd(0x168)],CANVAS['height']),moveCamera(),map[_0xd7f7cd(0x13b)](),player[_0xd7f7cd(0x177)]();for(let _0x13aa21=enemyProjectiles[_0xd7f7cd(0x17d)]-0x1;_0x13aa21>=0x0;_0x13aa21--){enemyProjectiles[_0x13aa21]['compute']();}sortMonsters(),Mouse['x']=mousePP['x']-map['x'],Mouse['y']=mousePP['y']-map['y'];for(let _0x915811=0x0;_0x915811<monsters[_0xd7f7cd(0x17d)];_0x915811++){!monsters[_0x915811][_0xd7f7cd(0x152)]&&monsters[_0x915811][_0xd7f7cd(0x177)](),monsters[_0x915811][_0xd7f7cd(0x13b)]();}player[_0xd7f7cd(0x13b)](),adjustCollidingMonsters(),renderHpBars(),computeDrawArrows();for(let _0x8e5779=enemyProjectiles[_0xd7f7cd(0x17d)]-0x1;_0x8e5779>=0x0;_0x8e5779--){enemyProjectiles[_0x8e5779][_0xd7f7cd(0x13b)]();}sword[_0xd7f7cd(0x170)]&&(sword[_0xd7f7cd(0x177)](),sword[_0xd7f7cd(0x13b)]());for(let _0x14e5cb=visualFxs[_0xd7f7cd(0x17d)]-0x1;_0x14e5cb>=0x0;_0x14e5cb--){!visualFxs[_0x14e5cb][_0xd7f7cd(0x1de)]&&visualFxs[_0x14e5cb][_0xd7f7cd(0x13b)]();}userInterface[_0xd7f7cd(0x13b)](),drawStats();}var lastUpdate=Date[_0x5afc6c(0x1bb)](),myInterval=setInterval(tick,0x3e8/0x3c),DTR=0x1;function tick(){var _0x4792e1=Date['now'](),_0x1e940f=_0x4792e1-lastUpdate;lastUpdate=_0x4792e1,DTR=0x3e8/0x3c/_0x1e940f,!gamePaused&&loop();}