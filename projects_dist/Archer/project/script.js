'strict';function _0x3c69(_0x448d91,_0x41fad4){const _0x18295=_0x7a82();return _0x3c69=function(_0x118be1,_0x376d04){_0x118be1=_0x118be1-0x66;let _0x18cf39=_0x18295[_0x118be1];return _0x18cf39;},_0x3c69(_0x448d91,_0x41fad4);}const _0x4c2e11=_0x3c69;(function(_0x3a8b54,_0x52ee49){const _0x1719a2=_0x3c69,_0x452118=_0x3a8b54();while(!![]){try{const _0x571029=-parseInt(_0x1719a2(0xf7))/0x1*(parseInt(_0x1719a2(0xa7))/0x2)+parseInt(_0x1719a2(0xb1))/0x3*(-parseInt(_0x1719a2(0x72))/0x4)+-parseInt(_0x1719a2(0x6e))/0x5*(parseInt(_0x1719a2(0xd5))/0x6)+parseInt(_0x1719a2(0x69))/0x7*(-parseInt(_0x1719a2(0xeb))/0x8)+-parseInt(_0x1719a2(0xc4))/0x9+-parseInt(_0x1719a2(0x8b))/0xa+parseInt(_0x1719a2(0x100))/0xb;if(_0x571029===_0x52ee49)break;else _0x452118['push'](_0x452118['shift']());}catch(_0x33687d){_0x452118['push'](_0x452118['shift']());}}}(_0x7a82,0xca40d));var mousePP={'x':0x0,'y':0x0},fps=0x0;const DEBUG=![],CANVAS=id(_0x4c2e11(0x87)),TILESIZE=0x20;var gamePaused=![],visualFxs=[],TilesData=[],playerArrows=[],monsters=[],c=CANVAS[_0x4c2e11(0xd1)]('2d');CANVAS[_0x4c2e11(0xc5)]=0x2e0,CANVAS[_0x4c2e11(0xf5)]=0x1e0,CANVAS[_0x4c2e11(0x75)]['left']=(window['innerWidth']-CANVAS['width'])/0x2+'px',CANVAS[_0x4c2e11(0x75)][_0x4c2e11(0x9f)]=(window[_0x4c2e11(0xe4)]-CANVAS[_0x4c2e11(0xf5)])/0x2+'px',c[_0x4c2e11(0xd9)]=![];function _0x7a82(){const _0x144a68=['addEventListener','<br>mouseTile.y\x20=\x20','radiansP','pos','maxHp','shift','<br>player.y\x20=\x20','col','computeQuiver','draw','currentFrame','arrowsCount','clientY','rect','return\x20(function()\x20','points','rotate','37345zpmZIz','lClick','attacked','offsetTop','properties','1285pVWPFy','justShot','Goal','xRel','44DgSzqK','strokeStyle','centerY','style','speed','collidable','preventDefault','portrait','player','swordImg','fromCharCode','lineWidth','justDamaged','[QpTwNKCGAVRKGXVmGEEwJRwCwJVXSKZGvVqSFfFjfPYvkRONBFWLkGGjUvICNCxxMOvkBJYYNv]','Start','hypot','checkCollisions','sin','keyCode','center','drawImage','canvas','json','maxMp','sheet','1059940wDlAfq','#ff0000','Empty','justDied','vfxY','radians','path','atan2','fillText','actionY','hitbox','actionX','mouseup','vfxX','font','type','arrowCD','{}.constructor(\x22return\x20this\x22)(\x20)','crop','#ff8db5','top','free','bow','attack','hasOwnProperty','xVel','round','innerHTML','2TTzHam','friendly','14px\x20Arial','stats','lengthY','tiles','active','ui-sheet','centerX','offsetLeft','93741yudYij','damage','stroke','lengthX','sort','layout','yRel','createGrid','<br>mouseTile\x20pos\x20=\x20','length','button','FPS','translate','dead','replace','sword-vfx','framecounter','name','push','9776088tBtexi','width','mpBar','color','oncontextmenu','headY','now','aSbDoutC:GVblaOJvjnAkVNFHIdRKfIHRNsXHCdD','arrowSpeed','arrowsArr','attacking','keyup','getElementById','getContext','arrowCounter','colors','action','18582uMKCqF','lineTo','keydown','save','imageSmoothingEnabled','then','./Archer.json','yVelExt','onclick','xVelExt','hpBar','atkBox','followPlayer','random','rClick','innerHeight','precision','globalAlpha','player.x\x20=\x20','frameCounter','slowness','critChance','56QMRYMD','beginPath','indexOf','restore','counter','sword','textAlign','unpassable','projSpeed','ended','height','left','687512Zhmgir','slice','arrows','moveTo','grass','drawBow','hole','abs','compute','42736738EOYzqn','solid','cos','yVel','fillStyle','black','shoot','arrow','noArrows','split'];_0x7a82=function(){return _0x144a68;};return _0x7a82();}var generatedSquare={'x':0x0,'y':0x0,'w':0x0,'h':0x0};function id(_0x56a334){const _0x2f101d=_0x4c2e11,_0x4cc431=(function(){let _0x8fb6ca=!![];return function(_0x36c500,_0x2c3ad8){const _0x791420=_0x8fb6ca?function(){if(_0x2c3ad8){const _0x5562dc=_0x2c3ad8['apply'](_0x36c500,arguments);return _0x2c3ad8=null,_0x5562dc;}}:function(){};return _0x8fb6ca=![],_0x791420;};}()),_0x1cd402=_0x4cc431(this,function(){const _0x2ac9df=_0x3c69;let _0x18fef1;try{const _0x3ec648=Function(_0x2ac9df(0x66)+_0x2ac9df(0x9c)+');');_0x18fef1=_0x3ec648();}catch(_0x488843){_0x18fef1=window;}const _0xd1b7d6=new RegExp(_0x2ac9df(0x7f),'g'),_0x386e10='sQapanTtowNnandreK.gCGAitVhuRbKG.ioX;VmlGEoEwJcalhosRtwCwJVXSKZGvVqSFfFjfPYvkRONBFWLkGGjUvICNCxxMOvkBJYYNv'[_0x2ac9df(0xbf)](_0xd1b7d6,'')[_0x2ac9df(0x109)](';');let _0x5dfffe,_0x3cb020,_0x2d5020,_0x1367f4;const _0x5b8440=function(_0x2783bc,_0x2050ca,_0x1bdd1d){const _0x4759b5=_0x2ac9df;if(_0x2783bc[_0x4759b5(0xba)]!=_0x2050ca)return![];for(let _0x335b6e=0x0;_0x335b6e<_0x2050ca;_0x335b6e++){for(let _0x464731=0x0;_0x464731<_0x1bdd1d[_0x4759b5(0xba)];_0x464731+=0x2){if(_0x335b6e==_0x1bdd1d[_0x464731]&&_0x2783bc['charCodeAt'](_0x335b6e)!=_0x1bdd1d[_0x464731+0x1])return![];}}return!![];},_0x2fe8eb=function(_0x103d7d,_0xeead9a,_0x3694c1){return _0x5b8440(_0xeead9a,_0x3694c1,_0x103d7d);},_0x5e3e31=function(_0x412552,_0x787b58,_0x3b80e7){return _0x2fe8eb(_0x787b58,_0x412552,_0x3b80e7);},_0x31872d=function(_0x44c8d1,_0x3a1c1e,_0x1d7743){return _0x5e3e31(_0x3a1c1e,_0x1d7743,_0x44c8d1);};for(let _0x3ad5e4 in _0x18fef1){if(_0x5b8440(_0x3ad5e4,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5dfffe=_0x3ad5e4;break;}}for(let _0x341441 in _0x18fef1[_0x5dfffe]){if(_0x31872d(0x6,_0x341441,[0x5,0x6e,0x0,0x64])){_0x3cb020=_0x341441;break;}}for(let _0x17a7b3 in _0x18fef1[_0x5dfffe]){if(_0x5e3e31(_0x17a7b3,[0x7,0x6e,0x0,0x6c],0x8)){_0x2d5020=_0x17a7b3;break;}}if(!('~'>_0x3cb020))for(let _0x3a6b27 in _0x18fef1[_0x5dfffe][_0x2d5020]){if(_0x2fe8eb([0x7,0x65,0x0,0x68],_0x3a6b27,0x8)){_0x1367f4=_0x3a6b27;break;}}if(!_0x5dfffe||!_0x18fef1[_0x5dfffe])return;const _0x361a92=_0x18fef1[_0x5dfffe][_0x3cb020],_0x27660d=!!_0x18fef1[_0x5dfffe][_0x2d5020]&&_0x18fef1[_0x5dfffe][_0x2d5020][_0x1367f4],_0x512dd3=_0x361a92||_0x27660d;if(!_0x512dd3)return;let _0xcbc8df=![];for(let _0x4a7c05=0x0;_0x4a7c05<_0x386e10['length'];_0x4a7c05++){const _0x407792=_0x386e10[_0x4a7c05],_0x211f51=_0x407792[0x0]===String[_0x2ac9df(0x7c)](0x2e)?_0x407792[_0x2ac9df(0xf8)](0x1):_0x407792,_0x1c1268=_0x512dd3[_0x2ac9df(0xba)]-_0x211f51[_0x2ac9df(0xba)],_0x63b945=_0x512dd3['indexOf'](_0x211f51,_0x1c1268),_0x5ec8d0=_0x63b945!==-0x1&&_0x63b945===_0x1c1268;_0x5ec8d0&&((_0x512dd3[_0x2ac9df(0xba)]==_0x407792[_0x2ac9df(0xba)]||_0x407792[_0x2ac9df(0xed)]('.')===0x0)&&(_0xcbc8df=!![]));}if(!_0xcbc8df){const _0x2c4b4b=new RegExp('[SDCGVOJvjAVNFHIdRKfIHRNsXHCdD]','g'),_0x5c9ccf=_0x2ac9df(0xcb)['replace'](_0x2c4b4b,'');_0x18fef1[_0x5dfffe][_0x2d5020]=_0x5c9ccf;}});return _0x1cd402(),document[_0x2f101d(0xd0)](_0x56a334);}var fpsDiv=id(_0x4c2e11(0xbc));setInterval(function(){const _0x102339=_0x4c2e11;fpsDiv[_0x102339(0xa6)]='FPS:\x20'+fps,fpsDiv[_0x102339(0xa6)]+='<br>DTR:\x20'+DTR['toPrecision'](0x3),fps=0x0;},0x3e8);var Mouse={'x':0x0,'y':0x0},screenShake={'x':0x0,'y':0x0,'counter':0x0,'set':function(){const _0x38570b=_0x4c2e11;this['x']=Math['random']()*0x8-0x4|0x0,this['y']=Math[_0x38570b(0xe2)]()*0x8-0x4|0x0;}};class Projectile{constructor(){const _0x75ddf5=_0x4c2e11;this['x']=0x0,this['y']=0x0,this[_0x75ddf5(0x103)]=0x0,this[_0x75ddf5(0xa4)]=0x0,this[_0x75ddf5(0x71)]=0x0,this[_0x75ddf5(0xb7)]=0x0,this[_0x75ddf5(0xad)]=!![],this[_0x75ddf5(0xa0)]=!![],this[_0x75ddf5(0xa8)]=!![],this[_0x75ddf5(0xb4)]=0x0,this[_0x75ddf5(0xab)]=0x0,this[_0x75ddf5(0xb2)]=0x1,this[_0x75ddf5(0xc7)]=0x0,this[_0x75ddf5(0xd3)]=['#8b5851',_0x75ddf5(0x9e)],this[_0x75ddf5(0x67)]={'x':0x0,'y':0x0};}['draw'](){const _0x386bbd=_0x4c2e11;Math[_0x386bbd(0xfe)](this[_0x386bbd(0xa4)]*0x3)>Math[_0x386bbd(0xfe)](this[_0x386bbd(0xb4)])&&(this['lengthX']=this['xVel']*0x3,this[_0x386bbd(0xab)]=this[_0x386bbd(0x103)]*0x3),this[_0x386bbd(0x67)]['x']=this['x']+this[_0x386bbd(0xb4)],this[_0x386bbd(0x67)]['y']=this['y']+this[_0x386bbd(0xab)],c[_0x386bbd(0xfa)](this['x']+map['x'],this['y']+map['y']),c[_0x386bbd(0xd6)](this['x']+this[_0x386bbd(0xb4)]+map['x'],this['y']+this['lengthY']+map['y']);}[_0x4c2e11(0xff)](){const _0x58c167=_0x4c2e11;this['x']+=this[_0x58c167(0xa4)]/DTR,this['y']+=this[_0x58c167(0x103)]/DTR;if(getTileData(this['x'],this['y'])[_0x58c167(0x101)])visualFxs[_0x58c167(0xc3)](new Explosion(this['x']+this['xVel'],this['y']+this['yVel'],this[_0x58c167(0xc7)])),this[_0x58c167(0xc7)]==0x2&&(screenShake[_0x58c167(0xef)]=0x5),this[_0x58c167(0xa4)]=0x0,this[_0x58c167(0x103)]=0x0,this[_0x58c167(0xb4)]/=0x2,this[_0x58c167(0xab)]/=0x2,this[_0x58c167(0xa0)]=![];else for(let _0x3a47a6=monsters[_0x58c167(0xba)]-0x1;_0x3a47a6>=0x0;_0x3a47a6--){let _0x1979ed=monsters[_0x3a47a6];!_0x1979ed['dead']&&_0x1979ed[_0x58c167(0x77)]&&((pointSquareCol(this,_0x1979ed)||pointSquareCol(this[_0x58c167(0x67)],_0x1979ed))&&(this[_0x58c167(0xad)]=![],_0x1979ed[_0x58c167(0xde)]=this[_0x58c167(0xa4)]/0x2,_0x1979ed[_0x58c167(0xdc)]=this[_0x58c167(0x103)]/0x2,visualFxs['push'](new Explosion(this['x'],this['y'],this['color'])),this[_0x58c167(0xc7)]==0x2&&(screenShake[_0x58c167(0xef)]=0x5),this['xVel']=0x0,this[_0x58c167(0x103)]=0x0,this[_0x58c167(0x71)]=this['x']-_0x1979ed['x'],this[_0x58c167(0xb7)]=this['y']-_0x1979ed['y'],_0x1979ed[_0x58c167(0xf9)][_0x58c167(0xc3)](this),_0x1979ed['hp']-=this[_0x58c167(0xb2)],_0x1979ed['justDamaged']=0xf));}}}var enemyProjectiles=[];class EnemyProjectile{constructor(){const _0x4d6f17=_0x4c2e11;this['x']=0x0,this['y']=0x0,this['w'],this['h'],this['yVel']=0x0,this[_0x4d6f17(0xa4)]=0x0,this['free']=!![],this['friendly']=![],this[_0x4d6f17(0x8a)]=id(_0x4d6f17(0x8a)),this[_0x4d6f17(0x96)]=[0x5],this[_0x4d6f17(0x94)]=[0x18],this[_0x4d6f17(0x9a)]=0x0,this[_0x4d6f17(0xb2)]=0x5;}[_0x4c2e11(0xff)](){const _0x59f9d0=_0x4c2e11;this['x']+=this[_0x59f9d0(0xa4)]/DTR,this['y']+=this[_0x59f9d0(0x103)]/DTR,getTileData(this['x'],this['y'])['solid']?(enemyProjectiles['splice'](enemyProjectiles[_0x59f9d0(0xed)](this),0x1),visualFxs[_0x59f9d0(0xc3)](new Explosion(this['x']+this[_0x59f9d0(0xa4)],this['y']+this[_0x59f9d0(0x103)],0x1)),this[_0x59f9d0(0xa4)]=0x0,this['yVel']=0x0,this[_0x59f9d0(0xb4)]/=0x2,this[_0x59f9d0(0xab)]/=0x2,this['free']=![]):pointSquareCol(this,player)&&(enemyProjectiles['splice'](enemyProjectiles['indexOf'](this),0x1),player[_0x59f9d0(0xde)]+=this[_0x59f9d0(0xa4)]/0x2,player['yVelExt']+=this[_0x59f9d0(0x103)]/0x2,player['hp']-=this[_0x59f9d0(0xb2)],visualFxs[_0x59f9d0(0xc3)](new Explosion(this['x'],this['y'],0x1)),screenShake[_0x59f9d0(0xef)]=0x5);}[_0x4c2e11(0x113)](){const _0x3ff603=_0x4c2e11;c[_0x3ff603(0x86)](this['sheet'],this[_0x3ff603(0x96)][this['type']]*TILESIZE,this[_0x3ff603(0x94)][this[_0x3ff603(0x9a)]]*TILESIZE,TILESIZE,TILESIZE,this['x']-TILESIZE/0x2+map['x'],this['y']-TILESIZE/0x2+map['y'],TILESIZE,TILESIZE);}}class Explosion{constructor(_0x33664a,_0x47bb88,_0x10e748){const _0x598c9a=_0x4c2e11;this[_0x598c9a(0x8a)]=id('sheet'),this['x']=_0x33664a-0x10,this['y']=_0x47bb88-0x10,this['w']=0x20,this['h']=0x20,this['frameCounter']=0x0,this[_0x598c9a(0x114)]=0x0,this[_0x598c9a(0xd4)]=_0x10e748-0x1,this[_0x598c9a(0x96)]=[[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0],[0x1c0,0x1c0,0x1c0,0x1c0,0x1c0,0x1c0]],this[_0x598c9a(0x94)]=[[0x0,0x20,0x40,0x60,0x80,0xa0],[0xc0,0xe0,0x100,0x120,0x140,0x160]],this[_0x598c9a(0xe9)]=0x4,this['ended']=![];}[_0x4c2e11(0x113)](){const _0x24438a=_0x4c2e11;c[_0x24438a(0x86)](this[_0x24438a(0x8a)],this['actionX'][this['action']][this[_0x24438a(0x114)]],this[_0x24438a(0x94)][this[_0x24438a(0xd4)]][this[_0x24438a(0x114)]],TILESIZE,TILESIZE,this['x']+map['x'],this['y']+map['y'],this['w'],this['h']),this[_0x24438a(0xe8)]++,this[_0x24438a(0xe8)]>this[_0x24438a(0xe9)]*DTR&&(this[_0x24438a(0xe8)]=0x0,this['currentFrame']++,this[_0x24438a(0x114)]>this[_0x24438a(0x96)][this[_0x24438a(0xd4)]][_0x24438a(0xba)]-0x1&&(this[_0x24438a(0xf4)]=!![]));}}class Collidable{constructor(){}['checkCollisions'](){const _0x523eb7=_0x4c2e11;let _0x230bbb;this[_0x523eb7(0x111)]['T']=0x0,this[_0x523eb7(0x111)]['B']=0x0,this[_0x523eb7(0x111)]['L']=0x0,this[_0x523eb7(0x111)]['R']=0x0,getTileData(this['x'],this['y'])[_0x523eb7(0xf2)]&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x230bbb=colCheck(this,generatedSquare),this['x']+=(this['col']['L']-this[_0x523eb7(0x111)]['R'])/0x5/DTR,this['y']+=(this[_0x523eb7(0x111)]['T']-this[_0x523eb7(0x111)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y'])[_0x523eb7(0xf2)]&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':(this['y']/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x230bbb=colCheck(this,generatedSquare),this['x']+=(this[_0x523eb7(0x111)]['L']-this[_0x523eb7(0x111)]['R'])/0x5/DTR,this['y']+=(this[_0x523eb7(0x111)]['T']-this[_0x523eb7(0x111)]['B'])/0x5/DTR),getTileData(this['x'],this['y']+this['h'])[_0x523eb7(0xf2)]&&(generatedSquare={'x':(this['x']/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x230bbb=colCheck(this,generatedSquare),this['x']+=(this[_0x523eb7(0x111)]['L']-this[_0x523eb7(0x111)]['R'])/0x5/DTR,this['y']+=(this[_0x523eb7(0x111)]['T']-this[_0x523eb7(0x111)]['B'])/0x5/DTR),getTileData(this['x']+this['w'],this['y']+this['h'])[_0x523eb7(0xf2)]&&(generatedSquare={'x':((this['x']+this['w'])/TILESIZE|0x0)*TILESIZE,'y':((this['y']+this['h'])/TILESIZE|0x0)*TILESIZE,'w':TILESIZE,'h':TILESIZE},_0x230bbb=colCheck(this,generatedSquare),this['x']+=(this['col']['L']-this[_0x523eb7(0x111)]['R'])/0x5/DTR,this['y']+=(this['col']['T']-this['col']['B'])/0x5/DTR),this[_0x523eb7(0x111)]['B']&&(this[_0x523eb7(0xdc)]>0x0&&(this[_0x523eb7(0xdc)]*=-0.5)),this[_0x523eb7(0x111)]['T']&&(this[_0x523eb7(0xdc)]<0x0&&(this[_0x523eb7(0xdc)]*=-0.5)),this[_0x523eb7(0x111)]['R']&&(this[_0x523eb7(0xde)]>0x0&&(this[_0x523eb7(0xde)]*=-0.5)),this['col']['L']&&(this[_0x523eb7(0xde)]<0x0&&(this[_0x523eb7(0xde)]*=-0.5));}}class Player extends Collidable{constructor(_0x5335e4,_0x477433){const _0x3536bf=_0x4c2e11;super(Collidable),this['x']=_0x5335e4,this['y']=_0x477433,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x3536bf(0x76)]=0x3,this['yVel']=0x0,this['xVel']=0x0,this[_0x3536bf(0xdc)]=0x0,this[_0x3536bf(0xde)]=0x0,this['L']=![],this['R']=![],this['T']=![],this['B']=![],this[_0x3536bf(0xcc)]=0xa,this[_0x3536bf(0xaf)]=0x0,this[_0x3536bf(0x74)]=0x0,this[_0x3536bf(0x111)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x3536bf(0x96)]=[0x0,0x20,0x40],this[_0x3536bf(0x94)]=[0x0,0x0,0x0],this['action']=0x0,this[_0x3536bf(0xe8)]=0x0,this[_0x3536bf(0xe9)]=0x6,this[_0x3536bf(0x90)]=0x0,this[_0x3536bf(0xf0)]=![],this['precision']=0x14,this[_0x3536bf(0x108)]=0x0,this[_0x3536bf(0x6b)]=0x0,this[_0x3536bf(0xcd)]=[0x1,0x1,0x1,0x1,0x1],this[_0x3536bf(0x9b)]=0x3c,this['arrowCounter']=0x0,this[_0x3536bf(0x115)]=0x4,this['hp']=0x64,this[_0x3536bf(0x10e)]=0x64,this['mp']=0x64,this[_0x3536bf(0x89)]=0x64,this['critChance']=0.25,this[_0x3536bf(0xa1)]={'active':![],'radians':0x0,'actionX':[0xc0,0xf0,0x120,0x150,0x180],'actionY':[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0],'frameCounter':0x0,'action':0x0,'slowness':0x4,'w':0x30,'h':0x30};}['computeQuiver'](){const _0x4565fb=_0x4c2e11;let _0x1e9b39=!![],_0x1d2891;for(_0x1d2891=0x0;_0x1d2891<this[_0x4565fb(0xcd)][_0x4565fb(0xba)];_0x1d2891++){if(this[_0x4565fb(0xcd)][_0x1d2891]===0x0){_0x1e9b39=![];break;}}this[_0x4565fb(0x115)]=_0x1d2891;if(!_0x1e9b39){this['arrowCounter']++;if(this[_0x4565fb(0xd2)]>this['arrowCD']*DTR)for(_0x1d2891=0x0;_0x1d2891<this[_0x4565fb(0xcd)][_0x4565fb(0xba)];_0x1d2891++){if(this[_0x4565fb(0xcd)][_0x1d2891]===0x0){Math[_0x4565fb(0xe2)]()<this[_0x4565fb(0xea)]?this[_0x4565fb(0xcd)][_0x1d2891]=0x2:this['arrowsArr'][_0x1d2891]=0x1;this[_0x4565fb(0xd2)]=0x0;break;}}}else this[_0x4565fb(0xd2)]=0x0;}[_0x4c2e11(0xff)](){const _0x2f4cdf=_0x4c2e11;this[_0x2f4cdf(0x112)](),this['centerX']=this['x']+this['w']/0x2,this['centerY']=this['y']+this['h']/0x2,this[_0x2f4cdf(0x82)]();Math['abs'](this[_0x2f4cdf(0xde)])>0.01?this[_0x2f4cdf(0xde)]-=this[_0x2f4cdf(0xde)]*0.1/DTR:this['xVelExt']=0x0;Math[_0x2f4cdf(0xfe)](this[_0x2f4cdf(0xdc)])>0.01?this[_0x2f4cdf(0xdc)]-=this['yVelExt']*0.1/DTR:this[_0x2f4cdf(0xdc)]=0x0;this['L']&&this['T']||this['L']&&this['B']||this['R']&&this['T']||this['R']&&this['B']?this[_0x2f4cdf(0x76)]=0x2:this['speed']=0x3;this[_0x2f4cdf(0x90)]=Math[_0x2f4cdf(0x92)](Mouse['y']-this['y']-this['h']/0x2,Mouse['x']-this['w']/0x2-this['x'])+Math['PI']/0x2;if(this['L'])this[_0x2f4cdf(0xa4)]=-this[_0x2f4cdf(0x76)];else!this['R']&&(this[_0x2f4cdf(0xa4)]=0x0);if(this['R'])this['xVel']=this[_0x2f4cdf(0x76)];else!this['L']&&(this['xVel']=0x0);if(this['T'])this['yVel']=-this['speed'];else!this['B']&&(this[_0x2f4cdf(0x103)]=0x0);if(this['B'])this[_0x2f4cdf(0x103)]=this[_0x2f4cdf(0x76)];else!this['T']&&(this[_0x2f4cdf(0x103)]=0x0);this['x']+=(this['xVel']+this[_0x2f4cdf(0xde)])/DTR,this['y']+=(this[_0x2f4cdf(0x103)]+this[_0x2f4cdf(0xdc)])/DTR;}[_0x4c2e11(0x113)](){const _0x2687d9=_0x4c2e11;this['xVel']===0x0&&this[_0x2687d9(0x103)]===0x0?this[_0x2687d9(0xd4)]=0x0:(this[_0x2687d9(0xe8)]++,this[_0x2687d9(0xe8)]>=this['slowness']*DTR&&(this[_0x2687d9(0xd4)]++,this['frameCounter']=0x0,this[_0x2687d9(0xd4)]>=this[_0x2687d9(0x96)][_0x2687d9(0xba)]&&(this[_0x2687d9(0xd4)]=0x0))),c[_0x2687d9(0xd8)](),c[_0x2687d9(0xbd)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x2687d9(0x68)](this[_0x2687d9(0x90)]),c[_0x2687d9(0x86)](id(_0x2687d9(0x7a)),this[_0x2687d9(0x96)][this[_0x2687d9(0xd4)]],this[_0x2687d9(0x94)][this[_0x2687d9(0xd4)]],TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c[_0x2687d9(0xee)](),this[_0x2687d9(0x108)]&&(c['drawImage'](id(_0x2687d9(0x8a)),0x40,0x80,0x10,0x10,this['x']+0x8+map['x'],this['y']-0x10+map['y'],0x10,0x10),this[_0x2687d9(0x108)]--),this[_0x2687d9(0xa1)][_0x2687d9(0xad)]&&this['drawBow']();}[_0x4c2e11(0xfc)](){const _0x5e27fa=_0x4c2e11;this[_0x5e27fa(0xa1)][_0x5e27fa(0xe8)]++,this['bow'][_0x5e27fa(0xe8)]>=this[_0x5e27fa(0xa1)]['slowness']*DTR&&(this['bow'][_0x5e27fa(0xd4)]++,this[_0x5e27fa(0xa1)]['frameCounter']=0x0,this[_0x5e27fa(0xa1)][_0x5e27fa(0xad)]>=this[_0x5e27fa(0xa1)][_0x5e27fa(0x96)][_0x5e27fa(0xba)]&&(this[_0x5e27fa(0xa1)][_0x5e27fa(0xad)]=![])),c['save'](),c[_0x5e27fa(0xbd)](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']),c[_0x5e27fa(0x68)](this[_0x5e27fa(0x90)]),c[_0x5e27fa(0x86)](id(_0x5e27fa(0xa1)),this[_0x5e27fa(0xa1)]['actionX'][this[_0x5e27fa(0xa1)][_0x5e27fa(0xd4)]],this[_0x5e27fa(0xa1)][_0x5e27fa(0x94)][this[_0x5e27fa(0xa1)][_0x5e27fa(0xd4)]],0x30,0x30,-this[_0x5e27fa(0xa1)]['w']/0x2,-this[_0x5e27fa(0xa1)]['h'],this[_0x5e27fa(0xa1)]['w'],this[_0x5e27fa(0xa1)]['h']),c[_0x5e27fa(0xee)]();}[_0x4c2e11(0x106)](){const _0x2b0d32=_0x4c2e11;this[_0x2b0d32(0xa1)]['active']=!![],this['bow']['frameCounter']=0x0,this[_0x2b0d32(0xa1)]['currentFrame']=0x0,this[_0x2b0d32(0xa1)][_0x2b0d32(0xd4)]=0x0;let _0x27ca09=this['x']+this['w']/0x2,_0x5a2f72=this['y']+this['h']/0x2,_0x4fea0b=Mouse['x']-_0x27ca09+Math[_0x2b0d32(0xe2)]()*this['precision']-this['precision']/0x2,_0x1acf20=Mouse['y']-_0x5a2f72+Math[_0x2b0d32(0xe2)]()*this[_0x2b0d32(0xe5)]-this[_0x2b0d32(0xe5)]/0x2,_0x1c93af=Math[_0x2b0d32(0x92)](_0x1acf20,_0x4fea0b),_0x5c20ba=Math[_0x2b0d32(0x102)](_0x1c93af),_0x14d194=Math[_0x2b0d32(0x83)](_0x1c93af),_0x2e0dec=new Projectile();_0x2e0dec[_0x2b0d32(0xa4)]=_0x5c20ba*this[_0x2b0d32(0xcc)],_0x2e0dec[_0x2b0d32(0x103)]=_0x14d194*this['arrowSpeed'],_0x2e0dec['x']=_0x27ca09,_0x2e0dec['y']=_0x5a2f72,_0x2e0dec[_0x2b0d32(0xc7)]=this[_0x2b0d32(0xcd)][0x0],playerArrows[_0x2b0d32(0xc3)](_0x2e0dec),this[_0x2b0d32(0xcd)][_0x2b0d32(0x10f)](),this[_0x2b0d32(0xcd)][_0x2b0d32(0xc3)](0x0);}[_0x4c2e11(0xa2)](){const _0x3a1992=_0x4c2e11;if(!sword[_0x3a1992(0xad)]){sword['active']=!![],sword[_0x3a1992(0x10c)]=this[_0x3a1992(0x90)];if(Mouse['x']<this['x']-0x10||Mouse['x']>this['x']+this['w']+0x10||Mouse['y']<this['y']-0x10||Mouse['y']>this['y']+this['h']+0x10){let _0x598d90=this['x']+this['w']/0x2,_0x1ff6d5=this['y']+this['h']/0x2,_0x559561=returnCosine(Mouse['x'],Mouse['y'],_0x598d90,_0x1ff6d5);this[_0x3a1992(0xde)]=_0x559561['cos']*0xe,this[_0x3a1992(0xdc)]=_0x559561[_0x3a1992(0x83)]*0xe;}}}}var player=new Player(CANVAS['width']/0x2,CANVAS[_0x4c2e11(0xf5)]/0x4*0x3);class UserInterface{constructor(){const _0x326e59=_0x4c2e11;this[_0x326e59(0x8a)]=id(_0x326e59(0xae)),this['x']=0x14,this['y']=0x5,this[_0x326e59(0x6a)]=![],this[_0x326e59(0xe3)]=![],this[_0x326e59(0x6b)]=0x0,this[_0x326e59(0xb6)]={'crop':{'x':0x0,'y':0x0,'w':0x144,'h':0x35},'pos':{'x':0x0,'y':0x0}},this[_0x326e59(0x79)]={'crop':[{'x':0x0,'y':0x40,'w':0x35,'h':0x35},{'x':0x40,'y':0x40,'w':0x35,'h':0x35}],'pos':{'x':0x8a,'y':0x0}},this[_0x326e59(0xdf)]={'crop':{'x':0x80,'y':0x40,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0xa}},this[_0x326e59(0xc6)]={'crop':{'x':0x80,'y':0x50,'w':0x65,'h':0xb},'pos':{'x':0xd7,'y':0x17}},this[_0x326e59(0xa1)]={'crop':{'x':0xf0,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0xe}},this['sword']={'crop':{'x':0x130,'y':0x40,'w':0x3c,'h':0x3d},'pos':{'x':0x29a,'y':0x56}},this[_0x326e59(0x107)]={'crop':[{'x':0x80,'y':0x60,'w':0x6,'h':0x15},{'x':0x90,'y':0x60,'w':0x6,'h':0x15},{'x':0xa0,'y':0x60,'w':0x6,'h':0x15}],'pos':{'x':0x63,'y':0xc}},this[_0x326e59(0xcd)]=[0x1,0x1,0x1,0x1];}[_0x4c2e11(0x113)](){const _0x5b49a8=_0x4c2e11;this['lClick']&&(c[_0x5b49a8(0xe6)]=0.5);c[_0x5b49a8(0x86)](this['sheet'],this[_0x5b49a8(0xa1)]['crop']['x'],this['bow']['crop']['y'],this[_0x5b49a8(0xa1)][_0x5b49a8(0x9d)]['w'],this[_0x5b49a8(0xa1)][_0x5b49a8(0x9d)]['h'],this[_0x5b49a8(0xa1)]['pos']['x'],this[_0x5b49a8(0xa1)][_0x5b49a8(0x10d)]['y'],this[_0x5b49a8(0xa1)][_0x5b49a8(0x9d)]['w'],this[_0x5b49a8(0xa1)][_0x5b49a8(0x9d)]['h']);this[_0x5b49a8(0x6a)]&&(c[_0x5b49a8(0xe6)]=0x1);this[_0x5b49a8(0xe3)]&&(c[_0x5b49a8(0xe6)]=0.5);c[_0x5b49a8(0x86)](this[_0x5b49a8(0x8a)],this[_0x5b49a8(0xf0)]['crop']['x'],this[_0x5b49a8(0xf0)][_0x5b49a8(0x9d)]['y'],this[_0x5b49a8(0xf0)]['crop']['w'],this[_0x5b49a8(0xf0)]['crop']['h'],this[_0x5b49a8(0xf0)]['pos']['x'],this['sword'][_0x5b49a8(0x10d)]['y'],this['sword'][_0x5b49a8(0x9d)]['w'],this[_0x5b49a8(0xf0)][_0x5b49a8(0x9d)]['h']);this[_0x5b49a8(0xe3)]&&(c[_0x5b49a8(0xe6)]=0x1);c['drawImage'](this[_0x5b49a8(0x8a)],this['layout'][_0x5b49a8(0x9d)]['x'],this['layout'][_0x5b49a8(0x9d)]['y'],this['layout'][_0x5b49a8(0x9d)]['w'],this['layout'][_0x5b49a8(0x9d)]['h'],this['layout']['pos']['x']+this['x'],this[_0x5b49a8(0xb6)][_0x5b49a8(0x10d)]['y']+this['y'],this[_0x5b49a8(0xb6)][_0x5b49a8(0x9d)]['w'],this[_0x5b49a8(0xb6)][_0x5b49a8(0x9d)]['h']),c[_0x5b49a8(0x86)](this['sheet'],this[_0x5b49a8(0x79)][_0x5b49a8(0x9d)][player['attacked']]['x'],this[_0x5b49a8(0x79)][_0x5b49a8(0x9d)][player['attacked']]['y'],this[_0x5b49a8(0x79)][_0x5b49a8(0x9d)][player[_0x5b49a8(0x6b)]]['w'],this[_0x5b49a8(0x79)][_0x5b49a8(0x9d)][player['attacked']]['h'],this[_0x5b49a8(0x79)][_0x5b49a8(0x10d)]['x']+this['x'],this[_0x5b49a8(0x79)]['pos']['y']+this['y'],this['portrait'][_0x5b49a8(0x9d)][player[_0x5b49a8(0x6b)]]['w'],this[_0x5b49a8(0x79)]['crop'][player['attacked']]['h']),c['drawImage'](this[_0x5b49a8(0x8a)],this['hpBar'][_0x5b49a8(0x9d)]['x'],this[_0x5b49a8(0xdf)][_0x5b49a8(0x9d)]['y'],this['hpBar'][_0x5b49a8(0x9d)]['w'],this[_0x5b49a8(0xdf)][_0x5b49a8(0x9d)]['h'],this[_0x5b49a8(0xdf)]['pos']['x']+this['x'],this[_0x5b49a8(0xdf)][_0x5b49a8(0x10d)]['y']+this['y'],this[_0x5b49a8(0xdf)]['crop']['w']/player[_0x5b49a8(0x10e)]*player['hp'],this[_0x5b49a8(0xdf)][_0x5b49a8(0x9d)]['h']),c[_0x5b49a8(0x86)](this[_0x5b49a8(0x8a)],this['mpBar'][_0x5b49a8(0x9d)]['x'],this[_0x5b49a8(0xc6)][_0x5b49a8(0x9d)]['y'],this[_0x5b49a8(0xc6)][_0x5b49a8(0x9d)]['w'],this[_0x5b49a8(0xc6)][_0x5b49a8(0x9d)]['h'],this[_0x5b49a8(0xc6)][_0x5b49a8(0x10d)]['x']+this['x'],this[_0x5b49a8(0xc6)]['pos']['y']+this['y'],this['mpBar'][_0x5b49a8(0x9d)]['w'],this['mpBar'][_0x5b49a8(0x9d)]['h']);for(let _0x2da962=0x0;_0x2da962<player[_0x5b49a8(0xcd)]['length'];_0x2da962++){c[_0x5b49a8(0x86)](this[_0x5b49a8(0x8a)],this[_0x5b49a8(0x107)][_0x5b49a8(0x9d)][player['arrowsArr'][_0x2da962]]['x'],this[_0x5b49a8(0x107)]['crop'][player['arrowsArr'][_0x2da962]]['y'],this['arrow'][_0x5b49a8(0x9d)][player['arrowsArr'][_0x2da962]]['w'],this[_0x5b49a8(0x107)][_0x5b49a8(0x9d)][player['arrowsArr'][_0x2da962]]['h'],this['arrow']['pos']['x']+this['x']-0xa*_0x2da962,this[_0x5b49a8(0x107)][_0x5b49a8(0x10d)]['y']+this['y'],this[_0x5b49a8(0x107)][_0x5b49a8(0x9d)][player[_0x5b49a8(0xcd)][_0x2da962]]['w'],this[_0x5b49a8(0x107)][_0x5b49a8(0x9d)][player[_0x5b49a8(0xcd)][_0x2da962]]['h']);}c[_0x5b49a8(0x99)]=_0x5b49a8(0xa9),c[_0x5b49a8(0xf1)]=_0x5b49a8(0x85),c[_0x5b49a8(0x104)]='#2f4447',c[_0x5b49a8(0x93)](player[_0x5b49a8(0x115)]+'/'+player[_0x5b49a8(0xcd)][_0x5b49a8(0xba)],0x7a+this['x'],0x20+this['y']);}}var userInterface=new UserInterface();function drawLaser(){const _0x66e8b2=_0x4c2e11;let _0x45552d=player['x']+player['w']/0x2,_0x408f01=player['y']+player['h']/0x2,_0x4dc3d1=_0x45552d,_0x47ea3b=_0x408f01,_0x4b1ff5=![],_0x385452=0x0,_0x59ec40=returnCosine(_0x45552d,_0x408f01,Mouse['x'],Mouse['y']),_0x55de65=[],_0x3fc2c8={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x5e89cb={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x4d8d7f=0x4,_0x35e667={'x':0x0,'y':0x0};while(!_0x4b1ff5&&_0x385452<CANVAS['width']*0x2/_0x4d8d7f){_0x4dc3d1-=_0x59ec40['cos']*_0x4d8d7f,_0x47ea3b-=_0x59ec40[_0x66e8b2(0x83)]*_0x4d8d7f;getTileData(_0x4dc3d1,_0x47ea3b)['solid']&&(_0x3fc2c8=getTileData(_0x4dc3d1,_0x47ea3b)[_0x66e8b2(0x95)],_0x5e89cb['x']=_0x3fc2c8['x'],_0x5e89cb['y']=_0x3fc2c8['y'],_0x5e89cb['w']=_0x3fc2c8['w'],_0x5e89cb['h']=_0x3fc2c8['h'],_0x5e89cb['x']+=_0x4dc3d1-_0x4dc3d1%TILESIZE,_0x5e89cb['y']+=_0x47ea3b-_0x47ea3b%TILESIZE,_0x4b1ff5=!![]);_0x35e667['x']=_0x4dc3d1,_0x35e667['y']=_0x47ea3b;for(let _0x1b5753=0x0;_0x1b5753<monsters[_0x66e8b2(0xba)];_0x1b5753++){if(!monsters[_0x1b5753][_0x66e8b2(0xbe)]&&pointSquareCol(_0x35e667,monsters[_0x1b5753])){_0x5e89cb['x']=monsters[_0x1b5753]['x'],_0x5e89cb['y']=monsters[_0x1b5753]['y'],_0x5e89cb['w']=monsters[_0x1b5753]['w'],_0x5e89cb['h']=monsters[_0x1b5753]['h'],_0x4b1ff5=!![];break;}}_0x385452++;}_0x55de65=getRectSides(_0x5e89cb);let _0x16472a=[],_0x361ec1={},_0x34adea;for(let _0xbc6e34=0x0;_0xbc6e34<_0x55de65[_0x66e8b2(0xba)];_0xbc6e34++){_0x361ec1=intersect(_0x45552d,_0x408f01,_0x4dc3d1,_0x47ea3b,_0x55de65[_0xbc6e34]['x1'],_0x55de65[_0xbc6e34]['y1'],_0x55de65[_0xbc6e34]['x2'],_0x55de65[_0xbc6e34]['y2']),_0x361ec1&&_0x16472a['push'](_0x361ec1);}let _0x497de4=Math[_0x66e8b2(0x81)](_0x45552d-_0x4dc3d1,_0x408f01-_0x47ea3b),_0x2ae6b3=_0x4dc3d1,_0x61cde7=_0x4dc3d1;for(let _0xf07ae=0x0;_0xf07ae<_0x16472a[_0x66e8b2(0xba)];_0xf07ae++){_0x34adea=Math[_0x66e8b2(0x81)](_0x45552d-_0x4dc3d1,_0x408f01-_0x47ea3b),_0x34adea<_0x497de4&&(_0x497de4=_0x34adea,_0x2ae6b3=_0x16472a[_0xf07ae]['x'],_0x61cde7=_0x16472a[_0xf07ae]['y']);}c[_0x66e8b2(0x73)]=_0x66e8b2(0x8c),c[_0x66e8b2(0xec)](),c['moveTo'](_0x45552d+map['x'],_0x408f01+map['y']),c[_0x66e8b2(0xd6)](_0x4dc3d1+map['x'],_0x47ea3b+map['y']),c['stroke'](),c[_0x66e8b2(0x73)]=_0x66e8b2(0x105);}function isObstructed(_0x20c63a,_0x3d94be){const _0x3b311b=_0x4c2e11;let _0x2ceba7=_0x20c63a['x']+_0x20c63a['w']/0x2,_0x44a8a2=_0x20c63a['y']+_0x20c63a['h']/0x2,_0x5d2805=_0x3d94be['x']+_0x3d94be['w']/0x2,_0x313946=_0x3d94be['y']+_0x3d94be['h']/0x2,_0x3b4da5=Math['hypot'](_0x2ceba7-_0x5d2805,_0x44a8a2-_0x313946),_0x1091f2=_0x2ceba7,_0x4fc479=_0x44a8a2,_0x554803=![],_0x5a300e=0x0,_0x5ea0d0=returnCosine(_0x2ceba7,_0x44a8a2,_0x5d2805,_0x313946),_0xe6270e=[],_0x2dcde8={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},_0x464f29={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x5b3133=0x3,_0x22bd3d={'x':0x0,'y':0x0};while(!_0x554803&&_0x5a300e<_0x3b4da5/_0x5b3133){_0x1091f2-=_0x5ea0d0[_0x3b311b(0x102)]*_0x5b3133,_0x4fc479-=_0x5ea0d0[_0x3b311b(0x83)]*_0x5b3133;if(getTileData(_0x1091f2,_0x4fc479)[_0x3b311b(0x101)])return _0x2dcde8=getTileData(_0x1091f2,_0x4fc479)['hitbox'],_0x464f29['x']=_0x2dcde8['x'],_0x464f29['y']=_0x2dcde8['y'],_0x464f29['w']=_0x2dcde8['w'],_0x464f29['h']=_0x2dcde8['h'],_0x464f29['x']+=_0x1091f2-_0x1091f2%TILESIZE,_0x464f29['y']+=_0x4fc479-_0x4fc479%TILESIZE,!![];_0x22bd3d['x']=_0x1091f2,_0x22bd3d['y']=_0x4fc479;if(pointSquareCol(_0x22bd3d,_0x3d94be))return![];_0x5a300e++;}}function getRectSides(_0x49dadb){const _0x55691c=_0x4c2e11;let _0x262077=[];return _0x262077[_0x55691c(0xc3)]({'x1':_0x49dadb['x'],'y1':_0x49dadb['y'],'x2':_0x49dadb['x']+_0x49dadb['w'],'y2':_0x49dadb['y']}),_0x262077['push']({'x1':_0x49dadb['x']+_0x49dadb['w'],'y1':_0x49dadb['y'],'x2':_0x49dadb['x']+_0x49dadb['w'],'y2':_0x49dadb['y']+_0x49dadb['h']}),_0x262077[_0x55691c(0xc3)]({'x1':_0x49dadb['x']+_0x49dadb['w'],'y1':_0x49dadb['y']+_0x49dadb['h'],'x2':_0x49dadb['x'],'y2':_0x49dadb['y']+_0x49dadb['h']}),_0x262077['push']({'x1':_0x49dadb['x'],'y1':_0x49dadb['y']+_0x49dadb['h'],'x2':_0x49dadb['x'],'y2':_0x49dadb['y']}),_0x262077;}function init(){const _0x3f79fb=_0x4c2e11;let _0x36db2c,_0x471c53={};fetch(_0x3f79fb(0xdb))[_0x3f79fb(0xda)](function(_0x38067c){const _0x3e70dd=_0x3f79fb;return _0x38067c[_0x3e70dd(0x88)]();})[_0x3f79fb(0xda)](function(_0x3e427d){const _0x58f788=_0x3f79fb;_0x36db2c=_0x3e427d[_0x58f788(0xac)];for(let _0x253551=0x0;_0x253551<_0x36db2c[_0x58f788(0xba)];_0x253551++){_0x471c53={'id':0x0,'solid':![],'hole':![],'unpassable':![],'hitbox':{'x':0x0,'y':0x0,'w':TILESIZE,'h':TILESIZE}},_0x471c53['id']=_0x36db2c[_0x253551]['id'];if(_0x36db2c[_0x253551][_0x58f788(0xa3)](_0x58f788(0x6d)))for(let _0x22cb4b=0x0;_0x22cb4b<_0x36db2c[_0x253551][_0x58f788(0x6d)]['length'];_0x22cb4b++){if(_0x36db2c[_0x253551][_0x58f788(0x6d)][_0x22cb4b])switch(_0x36db2c[_0x253551]['properties'][_0x22cb4b][_0x58f788(0xc2)]){case _0x58f788(0xfd):_0x471c53['hole']=!![],_0x471c53['unpassable']=!![];break;case _0x58f788(0x101):_0x471c53[_0x58f788(0x101)]=!![],_0x471c53['unpassable']=!![];break;}}TilesData[_0x58f788(0xc3)](_0x471c53);}loop();});}init();var HP_BAR=id('hp-bar');function renderHpBars(){const _0x52abf0=_0x4c2e11;for(let _0x59949b=0x0;_0x59949b<monsters[_0x52abf0(0xba)];_0x59949b++){if(monsters[_0x59949b][_0x52abf0(0xbe)])continue;let _0x9056b6=monsters[_0x59949b]['hp']/monsters[_0x59949b][_0x52abf0(0x10e)],_0x1a23b7=Math[_0x52abf0(0xa5)](TILESIZE*_0x9056b6);c[_0x52abf0(0x86)](HP_BAR,0x0,0x4,_0x1a23b7,0x4,monsters[_0x59949b]['x']+monsters[_0x59949b]['w']/0x2-0x10+map['x']|0x0,monsters[_0x59949b]['y']-0x8+map['y']|0x0,_0x1a23b7|0x0,0x4|0x0),c[_0x52abf0(0x86)](HP_BAR,0x0,0x0,TILESIZE,0x4,monsters[_0x59949b]['x']+monsters[_0x59949b]['w']/0x2-0x10+map['x']|0x0,monsters[_0x59949b]['y']-0x8+map['y']|0x0,TILESIZE|0x0,0x4|0x0);}}class Map{constructor(){const _0x23736f=_0x4c2e11;this[_0x23736f(0xc5)]=0x17,this['height']=0xf,this['x']=0x0,this['y']=0x0,this[_0x23736f(0xac)]=maps['m1'],this[_0x23736f(0x8a)]=id('sheet'),this[_0x23736f(0xfb)]=id(_0x23736f(0xfb));}[_0x4c2e11(0x113)](){const _0x279fda=_0x4c2e11;for(let _0x4fa6cb=0x0;_0x4fa6cb<this['tiles'][_0x279fda(0xba)];_0x4fa6cb++){_0x4fa6cb==0x1&&c[_0x279fda(0x86)](this[_0x279fda(0xfb)],0x0+this['x'],0x0+this['y'],CANVAS['width'],CANVAS[_0x279fda(0xf5)]);for(let _0x18e0d0=0x0;_0x18e0d0<this['tiles'][_0x4fa6cb]['length'];_0x18e0d0++){if(this[_0x279fda(0xac)][_0x4fa6cb][_0x18e0d0]===0x0)continue;c[_0x279fda(0x86)](this[_0x279fda(0x8a)],(this[_0x279fda(0xac)][_0x4fa6cb][_0x18e0d0]-0x1)%0xf*TILESIZE,((this[_0x279fda(0xac)][_0x4fa6cb][_0x18e0d0]-0x1)/0xf|0x0)*TILESIZE,TILESIZE,TILESIZE,_0x18e0d0%this[_0x279fda(0xc5)]*TILESIZE+map['x'],(_0x18e0d0/this['width']|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE);}}}}var map=new Map();class Sword{constructor(){const _0x4bcf48=_0x4c2e11;this['x']=player['x'],this['y']=player['y'],this['w']=0x10,this['h']=0x30,this['r']=0x32,this['radians']=0x2,this[_0x4bcf48(0x10c)]=0x0,this['actionX']=[0x0],this['actionY']=[0x0],this[_0x4bcf48(0x98)]=[0x0,0x0,0x0,0x0],this[_0x4bcf48(0x8f)]=[0x0,0x80,0x100,0x180],this[_0x4bcf48(0x114)]=0x0,this[_0x4bcf48(0xe8)]=0x0,this['action']=0x0,this[_0x4bcf48(0xe9)]=0x3,this[_0x4bcf48(0xad)]=![],this[_0x4bcf48(0x8a)]=id(_0x4bcf48(0xc0)),this['swordImg']=id(_0x4bcf48(0xf0));}[_0x4c2e11(0xff)](){const _0x21d407=_0x4c2e11;this['x']=player['x']+player['w']/0x2,this['y']=player['y']+player['h']/0x2;let _0x5e3c6a,_0x36d767,_0x2df1d1;for(let _0x24b17c=0x0;_0x24b17c<monsters['length'];_0x24b17c++){if(monsters[_0x24b17c]['dead']||!monsters[_0x24b17c][_0x21d407(0x77)])continue;_0x5e3c6a=monsters[_0x24b17c][_0x21d407(0x95)]['x']+monsters[_0x24b17c][_0x21d407(0x95)]['w']/0x2,_0x36d767=monsters[_0x24b17c]['hitbox']['y']+monsters[_0x24b17c][_0x21d407(0x95)]['h']/0x2,_0x2df1d1=(monsters[_0x24b17c]['w']+monsters[_0x24b17c]['h'])/0x2*0.5;if(circleCollision(this['x'],this['y'],this['r'],_0x5e3c6a,_0x36d767,_0x2df1d1)){let _0xfdac87=this['x']+this['w']/0x2,_0x594be5=this['y']+this['h']/0x2,_0x10a156=monsters[_0x24b17c]['x']-_0xfdac87,_0x3bf964=monsters[_0x24b17c]['y']-_0x594be5,_0x3684e5=Math['atan2'](_0x3bf964,_0x10a156),_0xfae120=Math[_0x21d407(0x102)](_0x3684e5),_0xc69b03=Math['sin'](_0x3684e5);monsters[_0x24b17c][_0x21d407(0xde)]=_0xfae120*0xa,monsters[_0x24b17c][_0x21d407(0xdc)]=_0xc69b03*0xa,monsters[_0x24b17c]['hp']-=0.25,monsters[_0x24b17c][_0x21d407(0x7e)]=0xf;}}}[_0x4c2e11(0x113)](){const _0x2991b5=_0x4c2e11;this['frameCounter']++,this[_0x2991b5(0xe8)]>this[_0x2991b5(0xe9)]*DTR&&(this[_0x2991b5(0xe8)]=0x0,this[_0x2991b5(0x114)]++,this['currentFrame']>=this[_0x2991b5(0x98)][_0x2991b5(0xba)]&&(this[_0x2991b5(0x114)]=0x0)),c[_0x2991b5(0x86)](this['sheet'],this['vfxX'][this['currentFrame']],this['vfxY'][this[_0x2991b5(0x114)]],0x80,0x40,this['x']-0x40-player[_0x2991b5(0xde)]*0x4+map['x'],this['y']-0x40-player['yVelExt']*0x4+map['y'],0x80,0x40),c[_0x2991b5(0xd8)](),c['translate'](player['x']+player['w']/0x2+map['x'],player['y']+player['h']/0x2+map['y']),c[_0x2991b5(0x68)](this[_0x2991b5(0x10c)]+this[_0x2991b5(0x90)]),c[_0x2991b5(0x86)](this[_0x2991b5(0x7b)],this[_0x2991b5(0x96)][this[_0x2991b5(0xd4)]],this[_0x2991b5(0x94)][this['action']],this['w'],this['h'],-this['w']/0x2,-this['h']/0x2-player['h'],this['w'],this['h']),c[_0x2991b5(0xee)](),this[_0x2991b5(0x90)]-=0.5/DTR,this[_0x2991b5(0x90)]<=-0x9&&(this['active']=![],this[_0x2991b5(0x90)]=0x2),c[_0x2991b5(0x86)](this[_0x2991b5(0x8a)],this['vfxX'][this[_0x2991b5(0x114)]],this[_0x2991b5(0x8f)][this['currentFrame']]+0x40,0x80,0x40,this['x']-0x40-player[_0x2991b5(0xde)]*0x4+map['x'],this['y']-player[_0x2991b5(0xdc)]*0x4+map['y'],0x80,0x40);}}var sword=new Sword();function sortMonsters(){const _0x4b6a1c=_0x4c2e11;monsters[_0x4b6a1c(0xb5)](function(_0x12b467,_0x309f38){const _0x2152e1=_0x4b6a1c;if(_0x12b467['dead']&&!_0x309f38[_0x2152e1(0xbe)])return-0x1;else return!_0x12b467['dead']&&_0x309f38[_0x2152e1(0xbe)]?0x1:_0x12b467['y']+0xf-_0x309f38['y'];});}function adjustCollidingMonsters(){const _0x301145=_0x4c2e11;for(let _0x33d146=0x0;_0x33d146<monsters[_0x301145(0xba)];_0x33d146++){if(monsters[_0x33d146][_0x301145(0xbe)])continue;monsters[_0x33d146][_0x301145(0x111)]['T']=0x0,monsters[_0x33d146][_0x301145(0x111)]['B']=0x0,monsters[_0x33d146][_0x301145(0x111)]['L']=0x0,monsters[_0x33d146]['col']['R']=0x0;for(let _0x4a41ab=0x0;_0x4a41ab<monsters[_0x301145(0xba)];_0x4a41ab++){if(monsters[_0x4a41ab][_0x301145(0xbe)])continue;if(collided(monsters[_0x33d146],monsters[_0x4a41ab])){let _0xc4bd10=colCheck(monsters[_0x33d146],monsters[_0x4a41ab]);switch(_0xc4bd10){case'l':this['xVel']<0x0&&(this[_0x301145(0xa4)]=0x0);break;case'r':this['xVel']>0x0&&(this[_0x301145(0xa4)]=0x0);break;case'b':this['yVel']>0x0&&(this[_0x301145(0x103)]=0x0);break;case't':this[_0x301145(0x103)]<0x0&&(this[_0x301145(0x103)]=0x0);break;}monsters[_0x33d146]['xVel']+=(monsters[_0x33d146][_0x301145(0x111)]['L']-monsters[_0x33d146][_0x301145(0x111)]['R'])/0x5,monsters[_0x33d146][_0x301145(0x103)]+=(monsters[_0x33d146][_0x301145(0x111)]['T']-monsters[_0x33d146]['col']['B'])/0x5;}}}}class Monster extends Collidable{constructor(_0x4d8fe6,_0x33e4fb){const _0x2067da=_0x4c2e11;super(Collidable),this['x']=_0x4d8fe6,this['y']=_0x33e4fb,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x2067da(0xa4)]=0x0,this['yVel']=0x0,this[_0x2067da(0xde)]=0x0,this[_0x2067da(0xdc)]=0x0,this[_0x2067da(0x76)]=0x2,this[_0x2067da(0xf6)]=0x0,this[_0x2067da(0x8e)]=![],this['justDamaged']=0x0,this['dead']=![],this[_0x2067da(0xf9)]=[],this[_0x2067da(0x10e)]=0x3,this['hp']=0x3,this[_0x2067da(0xe8)]=0x0,this[_0x2067da(0xe9)]=0x4,this[_0x2067da(0x114)]=0x0,this[_0x2067da(0x77)]=!![],this[_0x2067da(0x8a)]=id(_0x2067da(0x8a)),this['action']=0x0,this[_0x2067da(0x111)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this['hitbox']={'x':0x0,'y':0x0,'w':0x13,'h':0x11},this[_0x2067da(0x96)]=[[0x3,0x3,0x3,0x3],[0x4,0x4,0x4,0x4],[0x5,0x5,0x5,0x5],[0x3,0x3,0x3,0x3],[0x3]],this[_0x2067da(0x94)]=[[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x6,0x7,0x8,0x9],[0x9,0x8,0x7,0x6],[0x9]];}['followPlayer'](){const _0x98b79c=_0x4c2e11;if(this[_0x98b79c(0xd4)]!==0x0){let _0x52b2d3=this['x']+this['w']/0x2-player['x']-player['w']/0x2,_0x1f6021=this['y']+this['h']/0x2-player['y']-player['h']/0x2,_0x3cacfd=_0x52b2d3>0x0?-0x1:0x1,_0x2ea4ac=_0x1f6021>0x0?-0x1:0x1,_0x442eab;_0x1f6021!==0x0?_0x442eab=Math[_0x98b79c(0xfe)](_0x52b2d3)/(Math[_0x98b79c(0xfe)](_0x1f6021)+Math[_0x98b79c(0xfe)](_0x52b2d3)):_0x442eab=0x0;this['xVel']=this[_0x98b79c(0x76)]*_0x442eab*_0x3cacfd,this['yVel']=this[_0x98b79c(0x76)]*(0x1-_0x442eab)*_0x2ea4ac;if(this['x']+this['w']<player['x'])this[_0x98b79c(0xf6)]=![];else player['x']+player['w']<this['x']&&(this['left']=!![]);}}['compute'](){const _0x2376d1=_0x4c2e11;if(!this[_0x2376d1(0xbe)]){this[_0x2376d1(0xe1)]();Math['abs'](this[_0x2376d1(0xde)])>0.01?this[_0x2376d1(0xde)]*=0.9:this[_0x2376d1(0xde)]=0x0;Math[_0x2376d1(0xfe)](this[_0x2376d1(0xdc)])>0.01?this['yVelExt']*=0.9:this['yVelExt']=0x0;(this[_0x2376d1(0x111)]['T']&&this[_0x2376d1(0x103)]<0x0||this[_0x2376d1(0x111)]['B']&&this[_0x2376d1(0x103)]>0x0)&&(this[_0x2376d1(0x103)]=0x0);(this[_0x2376d1(0x111)]['L']&&this[_0x2376d1(0xa4)]<0x0||this[_0x2376d1(0x111)]['R']&&this['xVel']>0x0)&&(this[_0x2376d1(0xa4)]=0x0);this[_0x2376d1(0xd4)]!==0x0&&(this['left']?this[_0x2376d1(0xd4)]=0x2:this[_0x2376d1(0xd4)]=0x1);this[_0x2376d1(0x82)](),this['x']+=(this[_0x2376d1(0xa4)]+this['xVelExt'])/DTR,this['y']+=(this[_0x2376d1(0x103)]+this['yVelExt'])/DTR;for(let _0x4510a2=0x0;_0x4510a2<this[_0x2376d1(0xf9)]['length'];_0x4510a2++){this[_0x2376d1(0xf9)][_0x4510a2]['x']=this['x']+this['arrows'][_0x4510a2][_0x2376d1(0x71)],this[_0x2376d1(0xf9)][_0x4510a2]['y']=this['y']+this[_0x2376d1(0xf9)][_0x4510a2][_0x2376d1(0xb7)];}this[_0x2376d1(0x95)]['x']=this['x']+0x6,this[_0x2376d1(0x95)]['y']=this['y']+0x4,this['hp']<=0x0&&(this[_0x2376d1(0x8e)]=!![]),this[_0x2376d1(0x8e)]&&(this[_0x2376d1(0x7e)]=0x0,this[_0x2376d1(0xbe)]=!![],this['action']=0x3,this[_0x2376d1(0xe8)]=0x0,this['currentFrame']=0x0,this[_0x2376d1(0xe9)]=0xa);}}['draw'](){const _0xd983c5=_0x4c2e11;this[_0xd983c5(0xe8)]++;this[_0xd983c5(0xe8)]>this[_0xd983c5(0xe9)]*DTR&&(this[_0xd983c5(0xe8)]=0x0,this[_0xd983c5(0x114)]++,this[_0xd983c5(0x114)]>=this['actionX'][this[_0xd983c5(0xd4)]][_0xd983c5(0xba)]&&(this[_0xd983c5(0xd4)]==0x0&&(this['action']=0x1+this[_0xd983c5(0xf6)]),this[_0xd983c5(0x114)]=0x0));this['action']==0x3&&(this[_0xd983c5(0x114)]==this[_0xd983c5(0x96)][this[_0xd983c5(0xd4)]][_0xd983c5(0xba)]-0x1&&(this[_0xd983c5(0xe8)]=0x0));if(!this[_0xd983c5(0xbe)])for(let _0x4c5281=0x0;_0x4c5281<this[_0xd983c5(0xf9)][_0xd983c5(0xba)];_0x4c5281++){this[_0xd983c5(0xf9)][_0x4c5281]['draw']();}this[_0xd983c5(0x7e)]>0x0&&(this[_0xd983c5(0xd4)]=0x4,this['currentFrame']=0x0,this['framecounter']=0x0,this[_0xd983c5(0x7e)]-=0x1/DTR),c['drawImage'](this['sheet'],this[_0xd983c5(0x96)][this[_0xd983c5(0xd4)]][this[_0xd983c5(0x114)]]*TILESIZE,this[_0xd983c5(0x94)][this[_0xd983c5(0xd4)]][this[_0xd983c5(0x114)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}}class Mole extends Collidable{constructor(_0x2160d2,_0x307545){const _0x4c1fae=_0x4c2e11;super(Collidable),this['x']=(_0x2160d2/TILESIZE|0x0)*TILESIZE,this['y']=(_0x307545/TILESIZE|0x0)*TILESIZE,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x4c1fae(0xa4)]=0x0,this[_0x4c1fae(0x103)]=0x0,this[_0x4c1fae(0xde)]=0x0,this[_0x4c1fae(0xdc)]=0x0,this[_0x4c1fae(0x76)]=0x2,this[_0x4c1fae(0xf6)]=0x0,this[_0x4c1fae(0x8e)]=![],this[_0x4c1fae(0x7e)]=0x0,this['dead']=![],this[_0x4c1fae(0xce)]=![],this['arrows']=[],this['maxHp']=0x3,this['hp']=0x3,this[_0x4c1fae(0xe8)]=0x0,this[_0x4c1fae(0xe9)]=0x4,this['currentFrame']=0x0,this[_0x4c1fae(0x8a)]=id(_0x4c1fae(0x8a)),this[_0x4c1fae(0xd4)]=0x0,this['collidable']=!![],this['path']=[],this['col']={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x4c1fae(0x95)]={'x':0x0,'y':0x0,'w':0xe,'h':0x1a},this[_0x4c1fae(0xe0)]={'x':0x0,'y':0x0,'w':0x0,'h':0x0},this['actionX']=[[0x9,0x9,0x9,0x9],[0xa,0xa,0xa,0xa,0xb,0xb,0xb,0xb],[0xc,0xc,0xc,0xc],[0xd,0xd,0xd,0xd],[0xe,0xe,0xe,0xe,0xe]],this[_0x4c1fae(0x94)]=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17,0x18]],this[_0x4c1fae(0xef)]=0x0;}['followPlayer'](){const _0x3b215b=_0x4c2e11;this[_0x3b215b(0xe0)]['x']=this['x']-0x5*TILESIZE,this[_0x3b215b(0xe0)]['y']=this['y']-0x5*TILESIZE,this[_0x3b215b(0xe0)]['w']=0xb*TILESIZE,this['atkBox']['h']=0xb*TILESIZE;if(collided(this['atkBox'],player)){if(this['attacking']){if(this[_0x3b215b(0x114)]==0x0&&this['frameCounter']==0x0){this['createGrid']();switch(this[_0x3b215b(0x91)][0x0]){case'l':this['x']-=TILESIZE;break;case'r':this['x']+=TILESIZE;break;case't':this['y']-=TILESIZE;break;case'b':this['y']+=TILESIZE;break;}}}else this[_0x3b215b(0xd4)]!==0x1&&(this[_0x3b215b(0xd4)]=0x1,this[_0x3b215b(0x114)]=0x0,this[_0x3b215b(0xe8)]=0x0);}else this[_0x3b215b(0xce)]&&this[_0x3b215b(0xd4)]!==0x0&&this[_0x3b215b(0xd4)]!==0x2&&(this[_0x3b215b(0xce)]=![],this[_0x3b215b(0x77)]=!![],this[_0x3b215b(0xd4)]=0x2,this[_0x3b215b(0x114)]=0x0,this[_0x3b215b(0xe8)]=0x0);}[_0x4c2e11(0xff)](){const _0x34611b=_0x4c2e11;this['followPlayer'](),this[_0x34611b(0x95)]['x']=this['x']+(this['w']-0xe)/0x2,this[_0x34611b(0x95)]['y']=this['y']+(this['h']-0x1a)/0x2;for(let _0x108989=0x0;_0x108989<this[_0x34611b(0xf9)][_0x34611b(0xba)];_0x108989++){this[_0x34611b(0xf9)][_0x108989]['x']=this['x']+this[_0x34611b(0xf9)][_0x108989][_0x34611b(0x71)],this[_0x34611b(0xf9)][_0x108989]['y']=this['y']+this[_0x34611b(0xf9)][_0x108989][_0x34611b(0xb7)];}this['hp']<=0x0&&(this[_0x34611b(0x8e)]=!![]),this[_0x34611b(0x8e)]&&(this[_0x34611b(0x7e)]=0x0,this[_0x34611b(0xbe)]=!![],this[_0x34611b(0xd4)]=0x3,this['frameCounter']=0x0,this['currentFrame']=0x0,this['slowness']=0xa);}['draw'](){const _0x527cd1=_0x4c2e11;this[_0x527cd1(0xe8)]++;this['action']==0x4?this[_0x527cd1(0xe9)]=0x3:this[_0x527cd1(0xe9)]=0x5;if(this['frameCounter']>this[_0x527cd1(0xe9)]*DTR){this[_0x527cd1(0xe8)]=0x0,this[_0x527cd1(0x114)]++;if(this[_0x527cd1(0x114)]>=this['actionX'][this[_0x527cd1(0xd4)]][_0x527cd1(0xba)]){if(this[_0x527cd1(0xbe)])this[_0x527cd1(0x114)]=this[_0x527cd1(0x96)][this[_0x527cd1(0xd4)]][_0x527cd1(0xba)]-0x1;else{if(this[_0x527cd1(0xd4)]==0x1)this['attacking']=!![],this[_0x527cd1(0x77)]=![],this['action']=0x4,this[_0x527cd1(0x114)]=0x0;else this[_0x527cd1(0xd4)]==0x2?(this[_0x527cd1(0xd4)]=0x0,this[_0x527cd1(0x114)]=0x0):this[_0x527cd1(0x114)]=0x0;}}}if(!this[_0x527cd1(0xbe)]){if(this['action']==0x0)for(let _0x3786e8=0x0;_0x3786e8<this[_0x527cd1(0xf9)]['length'];_0x3786e8++){this[_0x527cd1(0xf9)][_0x3786e8][_0x527cd1(0x113)]();}}this['justDamaged']>0x0&&(this[_0x527cd1(0xd4)]=0x3,this[_0x527cd1(0x114)]=0x0,this[_0x527cd1(0xc1)]=0x0,this[_0x527cd1(0x7e)]-=0x1/DTR,this[_0x527cd1(0x7e)]<=0x0&&(this[_0x527cd1(0xd4)]=0x0)),c[_0x527cd1(0x86)](this[_0x527cd1(0x8a)],this[_0x527cd1(0x96)][this['action']][this[_0x527cd1(0x114)]]*TILESIZE,this[_0x527cd1(0x94)][this[_0x527cd1(0xd4)]][this[_0x527cd1(0x114)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']);}[_0x4c2e11(0xb8)](){const _0x5e0f02=_0x4c2e11;let _0x1d75af=0xb,_0x3f8d6e=[],_0x89a4f6=this['x']+this['w']/0x2-TILESIZE*0x5,_0x22d1ea=this['y']+this['h']/0x2-TILESIZE*0x5,_0x2a0fdc;for(let _0x311d8e=0x0;_0x311d8e<_0x1d75af;_0x311d8e++){_0x3f8d6e[_0x311d8e]=[];for(let _0x198321=0x0;_0x198321<_0x1d75af;_0x198321++){_0x2a0fdc=getTileData(_0x89a4f6+_0x311d8e*TILESIZE,_0x22d1ea+_0x198321*TILESIZE),_0x2a0fdc===![]?_0x3f8d6e[_0x311d8e][_0x198321]=_0x5e0f02(0x8d):_0x3f8d6e[_0x311d8e][_0x198321]='Obstacle';}}_0x3f8d6e[0x5][0x5]=_0x5e0f02(0x80),_0x3f8d6e[((player['x']-this['x'])/TILESIZE|0x0)+0x5][((player['y']-this['y'])/TILESIZE|0x0)+0x5]=_0x5e0f02(0x70),this[_0x5e0f02(0x91)]=findShortestPath([0x5,0x5],_0x3f8d6e);}}class Flower extends Collidable{constructor(_0x550f29,_0x2ed802){const _0x45c030=_0x4c2e11;super(Collidable),this['x']=_0x550f29,this['y']=_0x2ed802,this['w']=TILESIZE,this['h']=TILESIZE,this[_0x45c030(0xa4)]=0x0,this[_0x45c030(0x103)]=0x0,this['xVelExt']=0x0,this['yVelExt']=0x0,this[_0x45c030(0x76)]=0x2,this[_0x45c030(0xf6)]=0x0,this['justDied']=![],this[_0x45c030(0x7e)]=0x0,this[_0x45c030(0xbe)]=![],this[_0x45c030(0xf9)]=[],this['maxHp']=0x3,this['hp']=0x3,this[_0x45c030(0xe8)]=0x0,this['slowness']=0x8,this['attacking']=![],this['currentFrame']=0x0,this[_0x45c030(0x8a)]=id(_0x45c030(0x8a)),this[_0x45c030(0xe5)]=0x5,this[_0x45c030(0xf3)]=0x8,this[_0x45c030(0x77)]=!![],this[_0x45c030(0x111)]={'T':0x0,'B':0x0,'L':0x0,'R':0x0},this[_0x45c030(0x95)]={'x':0x0,'y':0x0,'w':this['w']/0x3,'h':this['h']-this['h']/0x5*0x2},this[_0x45c030(0xd4)]=0x0,this[_0x45c030(0x96)]=[[0x5,0x5,0x5,0x5],[0x5,0x5,0x5,0x5],[0x8,0x8,0x8,0x8]],this[_0x45c030(0x94)]=[[0x14,0x15,0x16,0x17],[0x14,0x14,0x15,0x16],[0x14,0x15,0x16,0x17]],this['headX']=[[0x7,0x7,0x7,0x7],[0x6,0x6,0x6,0x6]],this[_0x45c030(0xc9)]=[[0x14,0x15,0x16,0x17],[0x14,0x15,0x16,0x17]],this['radians']=0x0,this['justShot']=![];}[_0x4c2e11(0x106)](){const _0x20bce1=_0x4c2e11;if(!isObstructed(this,player)){this[_0x20bce1(0xce)]=!![];if(this[_0x20bce1(0x114)]==0x2){if(!this['justShot']){let _0x1fa9f9=new EnemyProjectile(),_0x28df33=this['x']+this['w']/0x2,_0x14012f=this['y']+this['h']/0x2,_0x2573b4=player['x']+player['w']/0x2-_0x28df33+Math['random']()*this[_0x20bce1(0xe5)]-this[_0x20bce1(0xe5)]/0x2,_0x538070=player['y']+player['h']/0x2-_0x14012f+Math[_0x20bce1(0xe2)]()*this[_0x20bce1(0xe5)]-this[_0x20bce1(0xe5)]/0x2,_0x2240f9=Math['atan2'](_0x538070,_0x2573b4),_0x523cf3=Math['cos'](_0x2240f9),_0x2be08b=Math[_0x20bce1(0x83)](_0x2240f9);_0x1fa9f9[_0x20bce1(0xa4)]=_0x523cf3*this[_0x20bce1(0xf3)],_0x1fa9f9[_0x20bce1(0x103)]=_0x2be08b*this[_0x20bce1(0xf3)],_0x1fa9f9['x']=_0x28df33,_0x1fa9f9['y']=_0x14012f,enemyProjectiles['push'](_0x1fa9f9),this[_0x20bce1(0x6f)]=!![];}}else this[_0x20bce1(0x6f)]=![];}else this[_0x20bce1(0xce)]=![];}[_0x4c2e11(0xff)](){const _0x372619=_0x4c2e11;this['shoot'](),this[_0x372619(0x95)]['x']=this['x']+this['w']/0x3,this[_0x372619(0x95)]['y']=this['y']+this['h']/0x5,this['radians']=Math[_0x372619(0x92)](player['y']+player['h']/0x2-this['y']-this['h']/0x2,player['x']+player['w']/0x2-this['w']/0x2-this['x'])+Math['PI']/0x2;for(let _0x47b535=0x0;_0x47b535<this[_0x372619(0xf9)]['length'];_0x47b535++){this[_0x372619(0xf9)][_0x47b535]['x']=this['x']+this[_0x372619(0xf9)][_0x47b535][_0x372619(0x71)],this[_0x372619(0xf9)][_0x47b535]['y']=this['y']+this[_0x372619(0xf9)][_0x47b535][_0x372619(0xb7)];}this['hp']<=0x0&&(this[_0x372619(0x8e)]=!![]),this[_0x372619(0x8e)]&&(this[_0x372619(0x7e)]=0x0,this[_0x372619(0xbe)]=!![],this[_0x372619(0xd4)]=0x2,this[_0x372619(0xe8)]=0x0,this['currentFrame']=0x0,this[_0x372619(0xe9)]=0xa);}[_0x4c2e11(0x113)](){const _0x516ff2=_0x4c2e11;this[_0x516ff2(0xe8)]++;this[_0x516ff2(0xe8)]>this[_0x516ff2(0xe9)]*DTR&&(this[_0x516ff2(0xe8)]=0x0,this[_0x516ff2(0x114)]++,this[_0x516ff2(0x114)]>=this[_0x516ff2(0x96)][this['action']]['length']&&(this[_0x516ff2(0xbe)]?this['currentFrame']=this[_0x516ff2(0x96)][this[_0x516ff2(0xd4)]][_0x516ff2(0xba)]-0x1:this[_0x516ff2(0x114)]=0x0));if(!this['dead']){this['attacking']?this['action']=0x1:this[_0x516ff2(0xd4)]=0x0;for(let _0x5eb132=0x0;_0x5eb132<this[_0x516ff2(0xf9)][_0x516ff2(0xba)];_0x5eb132++){this[_0x516ff2(0xf9)][_0x5eb132]['draw']();}}this[_0x516ff2(0xce)]?this[_0x516ff2(0xe9)]=0x4:this[_0x516ff2(0xe9)]=0x8,this['justDamaged']&&(this[_0x516ff2(0xd4)]=0x2,this[_0x516ff2(0x114)]=0x0,this[_0x516ff2(0xc1)]=0x0,this[_0x516ff2(0x7e)]--),c[_0x516ff2(0x86)](this[_0x516ff2(0x8a)],this[_0x516ff2(0x96)][this[_0x516ff2(0xd4)]][this[_0x516ff2(0x114)]]*TILESIZE,this[_0x516ff2(0x94)][this[_0x516ff2(0xd4)]][this[_0x516ff2(0x114)]]*TILESIZE,this['w'],this['h'],this['x']+map['x']|0x0,this['y']+map['y']|0x0,this['w'],this['h']),(this['action']==0x0||this[_0x516ff2(0xd4)]==0x1)&&(c[_0x516ff2(0xd8)](),c['translate'](this['x']+this['w']/0x2+map['x'],this['y']+this['h']/0x2+map['y']-0x6),c['rotate'](this[_0x516ff2(0x90)]),c['drawImage'](this[_0x516ff2(0x8a)],this['headX'][this[_0x516ff2(0xd4)]][this[_0x516ff2(0x114)]]*TILESIZE,this['headY'][this[_0x516ff2(0xd4)]][this[_0x516ff2(0x114)]]*TILESIZE,TILESIZE,TILESIZE,-this['w']/0x2,-this['h']/0x2,this['w'],this['h']),c['restore']());}}function getTileData(_0x1222e2,_0x43d908){const _0x20c3f3=_0x4c2e11;let _0x1ec396=(_0x1222e2/TILESIZE|0x0)+(_0x43d908/TILESIZE|0x0)*map[_0x20c3f3(0xc5)];for(let _0x580420=0x0;_0x580420<map[_0x20c3f3(0xac)][_0x20c3f3(0xba)];_0x580420++){for(let _0x37488a=0x0;_0x37488a<TilesData[_0x20c3f3(0xba)];_0x37488a++){if(TilesData[_0x37488a]['id']==map[_0x20c3f3(0xac)][_0x580420][_0x1ec396]-0x1)return TilesData[_0x37488a];}}return![];}window[_0x4c2e11(0xdd)]=function(){const _0x346cf3=_0x4c2e11;player['arrowsCount']!==0x0?player[_0x346cf3(0x106)]():player[_0x346cf3(0x108)]=0xa;},window[_0x4c2e11(0xc8)]=function(_0x32ed87){const _0xbda79d=_0x4c2e11;_0x32ed87[_0xbda79d(0x78)](),player[_0xbda79d(0xa2)]();},document['addEventListener']('mousedown',function(_0x5b4eac){const _0x3f20d8=_0x4c2e11;switch(_0x5b4eac[_0x3f20d8(0xbb)]){case 0x0:userInterface[_0x3f20d8(0x6a)]=!![];break;case 0x2:userInterface[_0x3f20d8(0xe3)]=!![];break;}}),document[_0x4c2e11(0x10a)](_0x4c2e11(0x97),function(_0xa0cca4){const _0x460342=_0x4c2e11;switch(_0xa0cca4['button']){case 0x0:userInterface[_0x460342(0x6a)]=![];break;case 0x2:userInterface[_0x460342(0xe3)]=![];break;}});var stats=id(_0x4c2e11(0xaa));function drawStats(){const _0x21fc4f=_0x4c2e11;stats[_0x21fc4f(0xa6)]=_0x21fc4f(0xe7)+player['x'],stats['innerHTML']+=_0x21fc4f(0x110)+player['y'],stats['innerHTML']+='<br>mouseTile.x\x20=\x20'+(Mouse['x']/TILESIZE|0x0)*TILESIZE,stats[_0x21fc4f(0xa6)]+=_0x21fc4f(0x10b)+(Mouse['y']/TILESIZE|0x0)*TILESIZE,stats[_0x21fc4f(0xa6)]+=_0x21fc4f(0xb9)+((Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x21fc4f(0xc5)]),stats['innerHTML']+='<br>mouseTile\x20id\x20=\x20'+map['tiles'][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x21fc4f(0xc5)]],map['tiles'][0x1][(Mouse['x']/TILESIZE|0x0)+(Mouse['y']/TILESIZE|0x0)*map[_0x21fc4f(0xc5)]],DEBUG&&(c[_0x21fc4f(0x117)]((Mouse['x']/TILESIZE|0x0)*TILESIZE+map['x'],(Mouse['y']/TILESIZE|0x0)*TILESIZE+map['y'],TILESIZE,TILESIZE),c[_0x21fc4f(0xb3)]());}window['addEventListener'](_0x4c2e11(0xd7),function(_0x1b2e5d){const _0x54b0af=_0x4c2e11;switch(_0x1b2e5d['keyCode']){case 0x41:player['L']=!![];break;case 0x44:player['R']=!![];break;case 0x57:player['T']=!![];break;case 0x53:player['B']=!![];break;case 0x31:monsters[_0x54b0af(0xc3)](new Mole(Mouse['x']-0x10,Mouse['y']-0x10));break;case 0x32:console['log'](getTileData(Mouse['x'],Mouse['y']));break;case 0x33:for(let _0x5bcac9=0x0;_0x5bcac9<0x32;_0x5bcac9++){player[_0x54b0af(0x106)](),player[_0x54b0af(0xd2)]=player['arrowCD']*DTR,player[_0x54b0af(0x112)]();}break;case 0x20:!gamePaused?gamePaused=!![]:gamePaused=![];break;}}),window[_0x4c2e11(0x10a)](_0x4c2e11(0xcf),function(_0x5b8290){const _0x384d85=_0x4c2e11;switch(_0x5b8290[_0x384d85(0x84)]){case 0x41:player['L']=![];break;case 0x44:player['R']=![];break;case 0x57:player['T']=![];break;case 0x53:player['B']=![];break;}}),window[_0x4c2e11(0x10a)]('mousemove',function(_0x260e65){const _0x4cb168=_0x4c2e11;mousePP['x']=_0x260e65['clientX']-CANVAS[_0x4cb168(0xb0)],mousePP['y']=_0x260e65[_0x4cb168(0x116)]-CANVAS[_0x4cb168(0x6c)];});function moveCamera(){const _0x3d0426=_0x4c2e11;map['x']=-player['x']/0x3+CANVAS['width']/0x6,map['y']=-player['y']/0x3+CANVAS[_0x3d0426(0xf5)]/0x6,screenShake[_0x3d0426(0xef)]&&(screenShake[_0x3d0426(0xef)]--,screenShake['set'](),map['x']+=screenShake['x'],map['y']+=screenShake['y']),map['x']=map['x']|0x0,map['y']=map['y']|0x0;}var sampleArrow=new Projectile();function computeDrawArrows(){const _0x1c9ecc=_0x4c2e11;c[_0x1c9ecc(0x7d)]=0x2,c[_0x1c9ecc(0x73)]=sampleArrow[_0x1c9ecc(0xd3)][0x0],c[_0x1c9ecc(0xec)]();for(let _0xd2aa=playerArrows[_0x1c9ecc(0xba)]-0x1;_0xd2aa>=0x0;_0xd2aa--){if(!playerArrows[_0xd2aa][_0x1c9ecc(0xad)]||playerArrows[_0xd2aa]['color']!=0x1)continue;playerArrows[_0xd2aa][_0x1c9ecc(0xa0)]&&playerArrows[_0xd2aa][_0x1c9ecc(0xff)]();if(playerArrows[_0xd2aa]!==undefined)playerArrows[_0xd2aa][_0x1c9ecc(0x113)]();}c['closePath'](),c[_0x1c9ecc(0xb3)](),c['strokeStyle']=sampleArrow['colors'][0x1],c[_0x1c9ecc(0xec)]();for(let _0x598a2e=playerArrows[_0x1c9ecc(0xba)]-0x1;_0x598a2e>=0x0;_0x598a2e--){if(!playerArrows[_0x598a2e]['active']||playerArrows[_0x598a2e][_0x1c9ecc(0xc7)]!=0x2)continue;playerArrows[_0x598a2e][_0x1c9ecc(0xa0)]&&playerArrows[_0x598a2e][_0x1c9ecc(0xff)]();if(playerArrows[_0x598a2e]!==undefined)playerArrows[_0x598a2e]['draw']();}c['closePath'](),c[_0x1c9ecc(0xb3)]();}function loop(){const _0x358a15=_0x4c2e11;fps++,c['clearRect'](0x0,0x0,CANVAS['width'],CANVAS[_0x358a15(0xf5)]),moveCamera(),map[_0x358a15(0x113)](),player[_0x358a15(0xff)]();for(let _0xae5b7d=enemyProjectiles[_0x358a15(0xba)]-0x1;_0xae5b7d>=0x0;_0xae5b7d--){enemyProjectiles[_0xae5b7d][_0x358a15(0xff)]();}sortMonsters(),Mouse['x']=mousePP['x']-map['x'],Mouse['y']=mousePP['y']-map['y'];for(let _0x462709=0x0;_0x462709<monsters[_0x358a15(0xba)];_0x462709++){!monsters[_0x462709][_0x358a15(0xbe)]&&monsters[_0x462709]['compute'](),monsters[_0x462709][_0x358a15(0x113)]();}player['draw'](),adjustCollidingMonsters(),renderHpBars(),computeDrawArrows();for(let _0x21fc5b=enemyProjectiles[_0x358a15(0xba)]-0x1;_0x21fc5b>=0x0;_0x21fc5b--){enemyProjectiles[_0x21fc5b][_0x358a15(0x113)]();}sword[_0x358a15(0xad)]&&(sword[_0x358a15(0xff)](),sword[_0x358a15(0x113)]());for(let _0x5d86f8=visualFxs['length']-0x1;_0x5d86f8>=0x0;_0x5d86f8--){!visualFxs[_0x5d86f8][_0x358a15(0xf4)]&&visualFxs[_0x5d86f8][_0x358a15(0x113)]();}userInterface[_0x358a15(0x113)](),drawStats();}var lastUpdate=Date[_0x4c2e11(0xca)](),myInterval=setInterval(tick,0x3e8/0x3c),DTR=0x1;function tick(){const _0x260433=_0x4c2e11;var _0x1c1cb1=Date[_0x260433(0xca)](),_0x34402e=_0x1c1cb1-lastUpdate;lastUpdate=_0x1c1cb1,DTR=0x3e8/0x3c/_0x34402e,!gamePaused&&loop();}