'use strict';
const _0x4056 = ['opacity', 'entities', 'VfavDboutjxq:RVbelNMaYZEznkFsyVBwP', 'opener', 'spawnPoint', 'current', 'earthquake', 'y:\x20', 'duration', 'type', 'toDataURL', '1LiibxG', 'x:\x20', 'apply', 'sin', 'important', '[zcyxxvUATXMqQqJYFQBCxOmlylmGvyzpOcOPBEvXfLNFyxCz]', 'fps', 'mapObject', 'loadDialogueQueue', 'dead', 'player', 'none', 'grounded', 'level', 'drawImage', 'clientY', 'replace', '1517986zemzDt', 'xVel', 'map', 'beginPath', 'ratio', '588187HcfRtN', 'log', 'onload', 'clearRect', 'mousePos', 'col', 'charCodeAt', 'removed', 'solid', 'fromCharCode', 'tiles', 'zcyxsaaxntonvUaAndTXMqrQeq.gitJYhuFQb.BCxioOmlylmGvyzpOcOPBEvXfLNFyxCz', 'image', 'fillStyle', 'renderTiles', 'riding', 'baseTargetFrames', 'paused', 'yVel', '8zkhYib', 'globalAlpha', '41818FIAbqn', 'fillRect', 'onmousedown', 'innerWidth', 'initial', '1542335CwCrKv', 'width', 'levelImage', 'indexOf', 'baseRatio', 'arrowCont', 'split', 'loopType', 'now', 'localStorage', 'top', 'getContext', 'onmousemove', 'offsetTop', 'black', 'huehuehue', 'savecode', 'playy', '[VfvDjxqRVeNMYZEzFsyVBwP]', 'hypot', 'innerHTML', 'random', 'inline-block', 'tilesize', 'height', 'clientX', 'pause', 'stage', 'compute', 'display', 'render', '1122247YnOozq', 'excessFps', 'lineTo', 'onSkate', 'push', 'factor', 'stroke', 'rect', 'length', 'fanculo\x20la\x20vita\x20tristezza\x20infinita', '923866GMxtDD', '63435JXtmtB'];
const _0x531078 = _0x4882;
(function (_0x37e3cb, _0x534ae0) {
    const _0x2fd1f2 = _0x4882;
    while (!![]) {
        try {
            const _0x24c237 = parseInt(_0x2fd1f2(0x146)) + -parseInt(_0x2fd1f2(0x13c)) + parseInt(_0x2fd1f2(0x147)) + parseInt(_0x2fd1f2(0x169)) + parseInt(_0x2fd1f2(0x17e)) * parseInt(_0x2fd1f2(0x17c)) + parseInt(_0x2fd1f2(0x164)) + parseInt(_0x2fd1f2(0x183)) * -parseInt(_0x2fd1f2(0x153));
            if (_0x24c237 === _0x534ae0) break;
            else _0x37e3cb['push'](_0x37e3cb['shift']());
        } catch (_0x26ebf3) {
            _0x37e3cb['push'](_0x37e3cb['shift']());
        }
    }
}(_0x4056, 0xba62c));
var canvas = id('canvas'),
    c = canvas[_0x531078(0x128)]('2d'),
    sounds = new Sounds(),
    hasCookie = getCookie(_0x531078(0x12d)),
    canStorage = supports_html5_storage(),
    mousePosition = {
        'x': 0x0,
        'y': 0x0
    },
    GLOBAL = {
        'FPS': 0x3c,
        'tilesize': 0x10,
        'baseRatio': 0x2,
        'ratio': 0x2,
        'terminalVel': 0.7,
        'baseTargetFrames': 0x30,
        'excessFps': ![],
        'loopType': 0x2,
        'volume': 0x1
    };

function supports_html5_storage() {
    const _0xc887d1 = _0x531078,
        _0x37ccd0 = function () {
            let _0x5d0ccd = !![];
            return function (_0x2aff46, _0x1f8dc8) {
                const _0x237023 = _0x5d0ccd ? function () {
                    const _0x1d82d7 = _0x4882;
                    if (_0x1f8dc8) {
                        const _0x3aff43 = _0x1f8dc8[_0x1d82d7(0x155)](_0x2aff46, arguments);
                        return _0x1f8dc8 = null, _0x3aff43;
                    }
                } : function () {};
                return _0x5d0ccd = ![], _0x237023;
            };
        }(),
        _0x7caa35 = _0x37ccd0(this, function () {
            const _0x599990 = _0x4882,
                _0x13e22e = function () {
                    let _0x5d2820;
                    try {
                        _0x5d2820 = Function('return\x20(function()\x20' + '{}.constructor(\x22return\x20this\x22)(\x20)' + ');')();
                    } catch (_0x2d49b7) {
                        _0x5d2820 = window;
                    }
                    return _0x5d2820;
                },
                _0x3f1fa5 = _0x13e22e(),
                _0xd9f1d2 = new RegExp(_0x599990(0x158), 'g'),
                _0x27a708 = _0x599990(0x174)[_0x599990(0x163)](_0xd9f1d2, '')[_0x599990(0x189)](';');
            let _0x4bad99, _0x5cb7d2, _0x2745a3, _0xf003db;
            const _0x5b3b3c = function (_0x2d5097, _0x239bfc, _0x283e2b) {
                    const _0x3e8070 = _0x599990;
                    if (_0x2d5097[_0x3e8070(0x144)] != _0x239bfc) return ![];
                    for (let _0x4f230e = 0x0; _0x4f230e < _0x239bfc; _0x4f230e++) {
                        for (let _0x52bf53 = 0x0; _0x52bf53 < _0x283e2b[_0x3e8070(0x144)]; _0x52bf53 += 0x2) {
                            if (_0x4f230e == _0x283e2b[_0x52bf53] && _0x2d5097[_0x3e8070(0x16f)](_0x4f230e) != _0x283e2b[_0x52bf53 + 0x1]) return ![];
                        }
                    }
                    return !![];
                },
                _0x4705ad = function (_0x36e805, _0xe5a9e5, _0x5c487e) {
                    return _0x5b3b3c(_0xe5a9e5, _0x5c487e, _0x36e805);
                },
                _0x285c8b = function (_0x3da53d, _0x46a615, _0x52c688) {
                    return _0x4705ad(_0x46a615, _0x3da53d, _0x52c688);
                },
                _0x397d30 = function (_0x529d32, _0x49b7d7, _0x42d5d7) {
                    return _0x285c8b(_0x49b7d7, _0x42d5d7, _0x529d32);
                };
            for (let _0x47b415 in _0x3f1fa5) {
                if (_0x5b3b3c(_0x47b415, 0x8, [0x7, 0x74, 0x5, 0x65, 0x3, 0x75, 0x0, 0x64])) {
                    _0x4bad99 = _0x47b415;
                    break;
                }
            }
            for (let _0x145a56 in _0x3f1fa5[_0x4bad99]) {
                if (_0x397d30(0x6, _0x145a56, [0x5, 0x6e, 0x0, 0x64])) {
                    _0x5cb7d2 = _0x145a56;
                    break;
                }
            }
            for (let _0x2a4963 in _0x3f1fa5[_0x4bad99]) {
                if (_0x285c8b(_0x2a4963, [0x7, 0x6e, 0x0, 0x6c], 0x8)) {
                    _0x2745a3 = _0x2a4963;
                    break;
                }
            }
            if (!('~' > _0x5cb7d2))
                for (let _0x4bba81 in _0x3f1fa5[_0x4bad99][_0x2745a3]) {
                    if (_0x4705ad([0x7, 0x65, 0x0, 0x68], _0x4bba81, 0x8)) {
                        _0xf003db = _0x4bba81;
                        break;
                    }
                }
            if (!_0x4bad99 || !_0x3f1fa5[_0x4bad99]) return;
            const _0x150ff6 = _0x3f1fa5[_0x4bad99][_0x5cb7d2],
                _0x35bfbd = !!_0x3f1fa5[_0x4bad99][_0x2745a3] && _0x3f1fa5[_0x4bad99][_0x2745a3][_0xf003db],
                _0x1840e0 = _0x150ff6 || _0x35bfbd;
            if (!_0x1840e0) return;
            let _0x5e84a5 = ![];
            for (let _0x42df61 = 0x0; _0x42df61 < _0x27a708[_0x599990(0x144)]; _0x42df61++) {
                const _0xb3e7dc = _0x27a708[_0x42df61],
                    _0x5b0570 = _0xb3e7dc[0x0] === String[_0x599990(0x172)](0x2e) ? _0xb3e7dc['slice'](0x1) : _0xb3e7dc,
                    _0x385c8e = _0x1840e0[_0x599990(0x144)] - _0x5b0570[_0x599990(0x144)],
                    _0x3c8900 = _0x1840e0[_0x599990(0x186)](_0x5b0570, _0x385c8e),
                    _0x3e83ef = _0x3c8900 !== -0x1 && _0x3c8900 === _0x385c8e;
                _0x3e83ef && ((_0x1840e0[_0x599990(0x144)] == _0xb3e7dc['length'] || _0xb3e7dc[_0x599990(0x186)]('.') === 0x0) && (_0x5e84a5 = !![]));
            }
            if (!_0x5e84a5) {
                const _0x59a45e = new RegExp(_0x599990(0x12f), 'g'),
                    _0x4c89e1 = _0x599990(0x14a)[_0x599990(0x163)](_0x59a45e, '');
                _0x3f1fa5[_0x4bad99][_0x2745a3] = _0x4c89e1;
            }
        });
    _0x7caa35();
    try {
        return _0xc887d1(0x18c) in window && window[_0xc887d1(0x18c)] !== null;
    } catch (_0x2398c1) {
        return ![];
    }
}
var officer = {},
    esther = {},
    aliquam = {},
    testMode = ![];
window[_0x531078(0x16b)] = function () {
    initialize();
};
var mainMenu;

function initialize() {
    const _0x595a59 = _0x531078;
    mainMenu = new MainMenu(), window[_0x595a59(0x14b)] ? (GLOBAL['loopType'] = 0x0, testMode = !![], window['opener'][_0x595a59(0x15a)] ? (debug['log'](window[_0x595a59(0x14b)][_0x595a59(0x15a)]), safeEval(window['opener'][_0x595a59(0x15a)]), initializeMap()) : (safeEval(window[_0x595a59(0x14b)][_0x595a59(0x166)]), initializeMap())) : GLOBAL['loopType'] = 0x2, gameLoop();
}
window['mobileAndTabletCheck']() && (GLOBAL[_0x531078(0x187)] = 0x1, GLOBAL[_0x531078(0x168)] = 0x1, id(_0x531078(0x188))['style'][_0x531078(0x13a)] = _0x531078(0x133));
canvas[_0x531078(0x184)] = GLOBAL[_0x531078(0x168)] * GLOBAL[_0x531078(0x134)] * 0x1e, canvas['height'] = GLOBAL[_0x531078(0x168)] * GLOBAL[_0x531078(0x134)] * 0x12, canvas['style']['left'] = (window[_0x531078(0x181)] - canvas[_0x531078(0x184)]) / 0x2 + 'px', canvas['style'][_0x531078(0x18d)] = (window['innerHeight'] - canvas[_0x531078(0x135)]) / 0x4 + 'px', c['imageSmoothingEnabled'] = ![];
var player = new Player(0x1, 0x9),
    map = new Map();
map['cameraFocus'] = player;
var sword = new Sword(),
    entities = [],
    animatedTiles = [],
    vfxs = [],
    loadCall = 0x0;

function unload() {
    const _0xd2737 = _0x531078;
    let _0x948f71 = player['x'],
        _0x465ba4 = player['y'];
    _0x948f71 >= map[_0xd2737(0x185)][_0xd2737(0x184)] / GLOBAL[_0xd2737(0x134)] - 0x2 && (_0x948f71 = map[_0xd2737(0x185)]['width'] / GLOBAL[_0xd2737(0x134)] - 0x2), _0x948f71 < 0x0 && (_0x948f71 = 0x1), _0x465ba4 >= map['levelImage'][_0xd2737(0x135)] / GLOBAL[_0xd2737(0x134)] - 0x2 && (_0x465ba4 = map['levelImage']['height'] / GLOBAL['tilesize'] - 0x2), _0x465ba4 < 0x0 && (_0x465ba4 = 0x1), stages[currentPoint[_0xd2737(0x138)]][currentPoint[_0xd2737(0x160)]]['spawnPoint']['x'] = _0x948f71, stages[currentPoint[_0xd2737(0x138)]][currentPoint['level']][_0xd2737(0x14c)]['y'] = _0x465ba4, stages[currentPoint[_0xd2737(0x138)]][currentPoint[_0xd2737(0x160)]][_0xd2737(0x149)] = entities;
}

function captureStopMotion() {
    const _0xf9bce2 = _0x531078;
    let _0x16432a = new Image();
    _0x16432a['src'] = canvas[_0xf9bce2(0x152)](), transitionVariables[_0xf9bce2(0x175)] = _0x16432a;
}

function load(_0x5b1319) {
    captureStopMotion(), loadCall || _0x5b1319 ? (safeEval(stages[currentPoint['stage']][currentPoint['level']]), initializeMap(), loadCall = 0x0) : loadCall = 0x1;
}

function test(_0x3695fa) {
    const _0x5ea91c = _0x531078;
    let _0x37cab6 = {
            'speaker': 0x0,
            'emotion': 0x1,
            'text': _0x5ea91c(0x145),
            'cameraFocus': _0x3695fa
        },
        _0x1ac6d1 = {
            'speaker': 0x3,
            'emotion': 0x2,
            'text': _0x5ea91c(0x12c),
            'cameraFocus': _0x3695fa
        };
    dialogueEngine[_0x5ea91c(0x15b)]([_0x37cab6, _0x1ac6d1]);
}
var dialogueEngine = new DialogueEngine(),
    dT = 0x1,
    screenShake = {
        'duration': 0x0,
        'compute': function () {
            const _0x4314bc = _0x531078;
            this[_0x4314bc(0x150)] > 0x0 ? (this[_0x4314bc(0x150)] -= 0x1 * dT, map['x'] += (Math[_0x4314bc(0x132)]() * 0xa - 0x5) / GLOBAL['ratio'] / GLOBAL['tilesize'], map['y'] += (Math['random']() * 0xa - 0x5) / GLOBAL[_0x4314bc(0x168)] / GLOBAL['tilesize'], sounds[_0x4314bc(0x14e)]['paused'] && (console[_0x4314bc(0x16a)]('playing'), sounds[_0x4314bc(0x14e)][_0x4314bc(0x12e)]())) : (this[_0x4314bc(0x150)] = 0x0, !sounds[_0x4314bc(0x14e)][_0x4314bc(0x17a)] && (console[_0x4314bc(0x16a)]('pausing'), sounds['earthquake'][_0x4314bc(0x137)]()));
        }
    },
    perfectFrameTime = 0x3e8 / GLOBAL[_0x531078(0x179)],
    lastTimestamp = Date[_0x531078(0x18b)](),
    timestamp = Date['now']();

function updateDt() {
    dT = (timestamp - lastTimestamp) / perfectFrameTime, lastTimestamp = timestamp, dT > 0x2 && (dT = 0x2);
}
document[_0x531078(0x129)] = function (_0x823e07) {
    const _0x42584a = _0x531078;
    mousePosition['x'] = (_0x823e07[_0x42584a(0x136)] - canvas['offsetLeft']) / (GLOBAL[_0x42584a(0x134)] * GLOBAL[_0x42584a(0x168)]), mousePosition['y'] = (_0x823e07[_0x42584a(0x162)] - canvas[_0x42584a(0x12a)]) / (GLOBAL[_0x42584a(0x134)] * GLOBAL[_0x42584a(0x168)]);
};
debug['on'] && (canvas[_0x531078(0x180)] = function (_0x3a33f1) {
    const _0x435761 = _0x531078;
    id(_0x435761(0x16d))[_0x435761(0x131)] = '', id(_0x435761(0x16d))[_0x435761(0x131)] += _0x435761(0x154) + (-map['x'] + (_0x3a33f1[_0x435761(0x136)] - canvas['offsetLeft']) / (GLOBAL[_0x435761(0x134)] * GLOBAL['ratio'])) + '<br>', id(_0x435761(0x16d))[_0x435761(0x131)] += _0x435761(0x14f) + (map['y'] + (_0x3a33f1['clientY'] - canvas['offsetTop']) / (GLOBAL[_0x435761(0x134)] * GLOBAL[_0x435761(0x168)]));
});

function slowMo() {
    if (slowMoFrames === 0x1) perfectFrameTime = 0x3e8 / GLOBAL['baseTargetFrames'], slowMoFrames--;
    else slowMoFrames > 0x1 && (perfectFrameTime = 0x3e8 / GLOBAL['baseTargetFrames'] * slowMoFrames, slowMoFrames--);
}

function _0x4882(_0x2bd7a7, _0x1ba068) {
    return _0x4882 = function (_0x27cb7c, _0x490c9c) {
        _0x27cb7c = _0x27cb7c - 0x128;
        let _0x2468eb = _0x4056[_0x27cb7c];
        return _0x2468eb;
    }, _0x4882(_0x2bd7a7, _0x1ba068);
}
var slowMoFrames = 0x0,
    fps = 0x0,
    flash = 0x0;

function flashEffect(_0x30b771) {
    const _0x4ff826 = _0x531078;
    _0x30b771 < 0x3 && (c[_0x4ff826(0x17d)] = _0x30b771 / 0xa * 0x2), c[_0x4ff826(0x176)] = 'white', c[_0x4ff826(0x17f)](0x0, 0x0, canvas[_0x4ff826(0x184)], canvas['height']), c[_0x4ff826(0x17d)] = 0x1;
}

function fpsCounter() {
    const _0x3f12ce = _0x531078;
    id(_0x3f12ce(0x159))[_0x3f12ce(0x131)] = fps, fps = 0x0;
}
setInterval(fpsCounter, 0x3e8);

function checkCollisions(_0x3bd7d2) {
    const _0xbf9921 = _0x531078;
    let _0x553591 = map[_0xbf9921(0x173)],
        _0x2d8d63 = _0xbf9921(0x15e);
    _0x3bd7d2[_0xbf9921(0x15f)] = ![], _0x3bd7d2['col']['L'] = 0x0, _0x3bd7d2[_0xbf9921(0x16e)]['R'] = 0x0, _0x3bd7d2[_0xbf9921(0x16e)]['T'] = 0x0, _0x3bd7d2['col']['B'] = 0x0;
    for (let _0x366610 = 0x0; _0x366610 < _0x553591['length']; _0x366610++) {
        if (isOutOfScreen(_0x553591[_0x366610]) || !_0x553591[_0x366610][_0xbf9921(0x171)]) continue;
        if (collided(_0x3bd7d2, _0x553591[_0x366610])) {
            _0x2d8d63 = colCheck(_0x3bd7d2, _0x553591[_0x366610]);
            switch (_0x2d8d63) {
                case 'b':
                    _0x3bd7d2[_0xbf9921(0x17b)] >= 0x0 && (_0x3bd7d2['grounded'] = !![], _0x3bd7d2[_0xbf9921(0x17b)] = 0x0);
                    break;
            }
        }
    }
    if (_0x3bd7d2[_0xbf9921(0x151)] == 'player') {
        _0x3bd7d2[_0xbf9921(0x178)] = {
            'xVel': 0x0,
            'yVel': 0x0
        };
        let _0xfb7fd8 = entities;
        for (let _0x58cf0c = 0x0; _0x58cf0c < _0xfb7fd8[_0xbf9921(0x144)]; _0x58cf0c++) {
            if (isOutOfScreen(_0xfb7fd8[_0x58cf0c]) || _0xfb7fd8[_0x58cf0c][_0xbf9921(0x170)] || !_0xfb7fd8[_0x58cf0c][_0xbf9921(0x171)]) continue;
            if (collided(_0x3bd7d2, _0xfb7fd8[_0x58cf0c])) {
                _0x2d8d63 = colCheck(_0x3bd7d2, _0xfb7fd8[_0x58cf0c]);
                switch (_0x2d8d63) {
                    case 'b':
                        _0x3bd7d2[_0xbf9921(0x15f)] = !![], _0x3bd7d2[_0xbf9921(0x17b)] = 0x0, _0x3bd7d2[_0xbf9921(0x178)] = _0xfb7fd8[_0x58cf0c];
                        break;
                }
            }
        }
    }
    _0x3bd7d2['x'] -= _0x3bd7d2['col']['R'] - _0x3bd7d2[_0xbf9921(0x16e)]['L'], _0x3bd7d2['y'] -= _0x3bd7d2[_0xbf9921(0x16e)]['B'] - _0x3bd7d2['col']['T'] - 0.01;
}

function renderEntity(_0xbe666c) {
    const _0x2052fb = _0x531078;
    if (isOutOfScreen(_0xbe666c)) return;
    c[_0x2052fb(0x167)](), c[_0x2052fb(0x143)]((_0xbe666c['x'] + map['x']) * GLOBAL['tilesize'] * GLOBAL[_0x2052fb(0x168)] | 0x0, (_0xbe666c['y'] + map['y']) * GLOBAL[_0x2052fb(0x134)] * GLOBAL[_0x2052fb(0x168)] | 0x0, _0xbe666c['w'] * GLOBAL[_0x2052fb(0x134)] * GLOBAL[_0x2052fb(0x168)] | 0x0, _0xbe666c['h'] * GLOBAL[_0x2052fb(0x134)] * GLOBAL[_0x2052fb(0x168)] | 0x0), c['closePath'](), c[_0x2052fb(0x142)]();
}
var blackScreen = {
        'initial': 0x64,
        'current': 0x64
    },
    saveIcon = new SaveIcon();

function gameLoop() {
    const _0x34dfee = _0x531078;
    timestamp = Date[_0x34dfee(0x18b)](), fps++;
    fps > 0x46 && (GLOBAL[_0x34dfee(0x13d)] = !![]);
    GLOBAL[_0x34dfee(0x13d)] ? setTimeout(gameLoop, 0x3e8 / 0x3c) : requestAnimationFrame(gameLoop);
    switch (GLOBAL[_0x34dfee(0x18a)]) {
        case 0x0:
            standardLoop();
            break;
        case 0x1:
            transition();
            break;
        case 0x2:
            menu();
            break;
    }
    blackScreen[_0x34dfee(0x14d)] > 0x0 && (c[_0x34dfee(0x17d)] = blackScreen['current'] / blackScreen[_0x34dfee(0x182)], c[_0x34dfee(0x176)] = 'black', c[_0x34dfee(0x17f)](0x0, 0x0, canvas[_0x34dfee(0x184)], canvas[_0x34dfee(0x135)]), c['globalAlpha'] = 0x1, blackScreen['current'] -= dT), saveIcon['active'] && saveIcon[_0x34dfee(0x13b)](), sounds['compute'](), updateDt();
}

function menu() {
    const _0x35c3f1 = _0x531078;
    mainMenu[_0x35c3f1(0x139)](), mainMenu[_0x35c3f1(0x13b)](), loadCall && (load(), GLOBAL[_0x35c3f1(0x18a)] = 0x1);
}
var transitionVariables = {
    'image': 0x0,
    'factor': 0x50,
    'x': 0x0,
    'opacity': 0x0
};

function transition() {
    const _0x586f95 = _0x531078;
    slowMo(), player[_0x586f95(0x165)] = 0x0, player[_0x586f95(0x17b)] = 0x0, c[_0x586f95(0x16c)](0x0, 0x0, canvas[_0x586f95(0x184)], canvas[_0x586f95(0x135)]), c[_0x586f95(0x176)] = _0x586f95(0x12b), c[_0x586f95(0x17f)](0x0, 0x0, canvas[_0x586f95(0x184)], canvas[_0x586f95(0x135)]);
    for (let _0x5429e9 = 0x0; _0x5429e9 < transitionVariables[_0x586f95(0x141)]; _0x5429e9++) {
        c[_0x586f95(0x161)](transitionVariables[_0x586f95(0x175)], 0x0, canvas[_0x586f95(0x135)] / transitionVariables[_0x586f95(0x141)] * _0x5429e9, canvas['width'], canvas[_0x586f95(0x135)] / transitionVariables[_0x586f95(0x141)], transitionVariables['x'] * (_0x5429e9 % 0x2 * 0x2 - 0x1), canvas[_0x586f95(0x135)] / transitionVariables[_0x586f95(0x141)] * _0x5429e9, canvas[_0x586f95(0x184)], canvas[_0x586f95(0x135)] / transitionVariables[_0x586f95(0x141)]);
    }
    transitionVariables['x'] += dT * 0xa, transitionVariables[_0x586f95(0x148)] += 0.02, c[_0x586f95(0x17d)] = transitionVariables[_0x586f95(0x148)], c[_0x586f95(0x176)] = _0x586f95(0x12b), c[_0x586f95(0x17f)](0x0, 0x0, canvas[_0x586f95(0x184)], canvas[_0x586f95(0x135)]), c[_0x586f95(0x17d)] = 0x1, transitionVariables[_0x586f95(0x148)] >= 0x1 && (GLOBAL[_0x586f95(0x18a)] = 0x0, transitionVariables['x'] = 0x0, transitionVariables['opacity'] = 0x0, blackScreen[_0x586f95(0x182)] = 0x3c, blackScreen['current'] = 0x3c);
}

function standardLoop() {
    const _0x4ec40e = _0x531078;
    slowMo(), c['clearRect'](0x0, 0x0, canvas[_0x4ec40e(0x184)], canvas['height']), c[_0x4ec40e(0x176)] = 'darkgray', c[_0x4ec40e(0x17f)](0x0, 0x0, canvas['width'], canvas['height']), c[_0x4ec40e(0x176)] = _0x4ec40e(0x12b), map['computeCamera'](), screenShake['compute'](), map[_0x4ec40e(0x177)]();
    for (let _0x140c22 = 0x0; _0x140c22 < entities[_0x4ec40e(0x144)]; _0x140c22++) {
        if (entities[_0x140c22][_0x4ec40e(0x170)] || !entities[_0x140c22][_0x4ec40e(0x157)] && isOutOfScreen(entities[_0x140c22])) continue;
        entities[_0x140c22][_0x4ec40e(0x139)](), entities[_0x140c22][_0x4ec40e(0x13b)]();
    }
    for (let _0x327a1f = 0x0; _0x327a1f < vfxs[_0x4ec40e(0x144)]; _0x327a1f++) {
        if ((vfxs[_0x327a1f][_0x4ec40e(0x170)] || isOutOfScreen(vfxs[_0x327a1f])) && !vfxs[_0x327a1f][_0x4ec40e(0x157)]) continue;
        vfxs[_0x327a1f][_0x4ec40e(0x139)](), vfxs[_0x327a1f][_0x4ec40e(0x13b)]();
    }
    for (let _0x56532a = 0x0; _0x56532a < animatedTiles[_0x4ec40e(0x144)]; _0x56532a++) {
        if (isOutOfScreen(animatedTiles[_0x56532a]) && !animatedTiles[_0x56532a][_0x4ec40e(0x157)]) continue;
        animatedTiles[_0x56532a][_0x4ec40e(0x13b)]();
    }!player[_0x4ec40e(0x15c)] && (player[_0x4ec40e(0x139)](), player['render'](), !player[_0x4ec40e(0x13f)] && player['armed'] && (sword[_0x4ec40e(0x139)](), sword[_0x4ec40e(0x13b)]()));
    flash > 0x0 ? (flashEffect(flash), flash -= 0x1 * dT) : GLOBAL[_0x4ec40e(0x168)] = GLOBAL[_0x4ec40e(0x187)];
    dialogueEngine[_0x4ec40e(0x139)](), dialogueEngine[_0x4ec40e(0x13b)]();
    loadCall && (load(), GLOBAL[_0x4ec40e(0x18a)] = 0x1);
    for (let _0x3ff02a = 0x0; _0x3ff02a < levelBoundFunctions[currentPoint['stage']][currentPoint[_0x4ec40e(0x160)]][_0x4ec40e(0x144)]; _0x3ff02a++) {
        if (levelBoundFunctions[currentPoint[_0x4ec40e(0x138)]][currentPoint[_0x4ec40e(0x160)]][_0x3ff02a][_0x4ec40e(0x170)]) continue;
        levelBoundFunctions[currentPoint[_0x4ec40e(0x138)]][currentPoint[_0x4ec40e(0x160)]][_0x3ff02a]['compute']();
    }
}

function drawLaser(_0x1add55, _0x302baa, _0x409253) {
    const _0x4ead16 = _0x531078;
    let _0x5d437d = !_0x302baa * 0x2 - 0x1,
        _0x41ce2f = _0x1add55['x'] + _0x1add55['w'] / 0x2,
        _0x203836 = _0x1add55['y'] + _0x1add55['h'] / 0x2,
        _0x541ff8 = 'block',
        _0x13a8d8 = _0x41ce2f,
        _0x393b4c = _0x203836,
        _0x3ac237 = ![],
        _0x47d000 = 0x0,
        _0x7036ba = returnCosine(_0x41ce2f, _0x203836, _0x41ce2f + _0x5d437d, _0x203836),
        _0x5426f8 = [],
        _0x4223e6 = {
            'x1': 0x0,
            'y1': 0x0,
            'x2': 0x0,
            'y2': 0x0
        },
        _0x96da4a = {
            'x': 0x0,
            'y': 0x0,
            'w': 0x0,
            'h': 0x0
        },
        _0x2f234b = 0.4,
        _0x2bfc4b = {
            'x': 0x0,
            'y': 0x0
        };
    while (!_0x3ac237 && _0x47d000 * GLOBAL[_0x4ead16(0x168)] < canvas['width']) {
        _0x13a8d8 -= _0x7036ba['cos'] * _0x2f234b, _0x393b4c -= _0x7036ba[_0x4ead16(0x156)] * _0x2f234b;
        for (let _0x6b5070 = 0x0; _0x6b5070 < map[_0x4ead16(0x173)][_0x4ead16(0x144)]; _0x6b5070++) {
            let _0xb5569a = {
                'x': _0x13a8d8,
                'y': _0x393b4c
            };
            pointSquareCol(_0xb5569a, map[_0x4ead16(0x173)][_0x6b5070]) && (_0x4223e6 = map[_0x4ead16(0x173)][_0x6b5070], _0x96da4a['x'] = _0x4223e6['x'], _0x96da4a['y'] = _0x4223e6['y'], _0x96da4a['w'] = _0x4223e6['w'], _0x96da4a['h'] = _0x4223e6['h'], _0x96da4a['x'] += _0x13a8d8 - _0x13a8d8 % (GLOBAL[_0x4ead16(0x134)] * GLOBAL['ratio']), _0x96da4a['y'] += _0x393b4c - _0x393b4c % (GLOBAL[_0x4ead16(0x134)] * GLOBAL[_0x4ead16(0x168)]), _0x3ac237 = !![]);
        }
        _0x2bfc4b['x'] = _0x13a8d8, _0x2bfc4b['y'] = _0x393b4c;
        if (pointSquareCol(_0x2bfc4b, player)) {
            _0x96da4a['x'] = player['x'], _0x96da4a['y'] = player['y'], _0x96da4a['w'] = player['w'], _0x96da4a['h'] = player['h'], _0x3ac237 = !![], _0x541ff8 = _0x4ead16(0x15d);
            break;
        }
        _0x47d000++;
    }
    _0x5426f8 = getRectSides(_0x96da4a);
    let _0x18c96b = [],
        _0x266213 = {},
        _0x4f607b;
    for (let _0x4ceff9 = 0x0; _0x4ceff9 < _0x5426f8['length']; _0x4ceff9++) {
        _0x266213 = intersect(_0x41ce2f, _0x203836, _0x13a8d8, _0x393b4c, _0x5426f8[_0x4ceff9]['x1'], _0x5426f8[_0x4ceff9]['y1'], _0x5426f8[_0x4ceff9]['x2'], _0x5426f8[_0x4ceff9]['y2']), _0x266213 && _0x18c96b[_0x4ead16(0x140)](_0x266213);
    }
    let _0xfef964 = Math['hypot'](_0x41ce2f - _0x13a8d8, _0x203836 - _0x393b4c),
        _0xbe9f77 = _0x13a8d8,
        _0x36712f = _0x13a8d8;
    for (let _0x4498d5 = 0x0; _0x4498d5 < _0x18c96b[_0x4ead16(0x144)]; _0x4498d5++) {
        _0x4f607b = Math[_0x4ead16(0x130)](_0x41ce2f - _0x13a8d8, _0x203836 - _0x393b4c), _0x4f607b < _0xfef964 && (_0xfef964 = _0x4f607b, _0xbe9f77 = _0x18c96b[_0x4498d5]['x'], _0x36712f = _0x18c96b[_0x4498d5]['y']);
    }
    if (_0x409253) return _0x541ff8;
    return c['strokeStyle'] = '#ff0000', c[_0x4ead16(0x167)](), c['moveTo']((_0x41ce2f + map['x']) * GLOBAL[_0x4ead16(0x168)] * GLOBAL[_0x4ead16(0x134)], (_0x203836 + map['y']) * GLOBAL['ratio'] * GLOBAL['tilesize']), c[_0x4ead16(0x13e)]((_0x13a8d8 + map['x']) * GLOBAL[_0x4ead16(0x168)] * GLOBAL['tilesize'], (_0x393b4c + map['y']) * GLOBAL[_0x4ead16(0x168)] * GLOBAL[_0x4ead16(0x134)]), c['stroke'](), c['strokeStyle'] = 'black', _0x541ff8;
}