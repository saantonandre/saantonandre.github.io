import{u as M,a as k,b as L,r as c,j as e,t as u,c as b,I as R,B as P,d as W,_ as F,e as N,m as y}from"./index-XZUl2v0I.js";import{T as v,u as U,P as _,a as z,A as C,p as H,b as B}from"./prepareGrid-zvFnMC50.js";import{B as A}from"./Basic-3bP_d7eX.js";import{u as Q}from"./HeaderPage-SYar3aOZ.js";import{m as E,u as V}from"./useInViewport-EEmjnKer.js";import{s as Y}from"./constants-pJ9mU_zC.js";import{u as D,M as q}from"./useEnv-Mv4bweJq.js";const X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA50lEQVR4nN2XOxJCIQxFU97uNdYOtTuwcgmuxnEtWa0WT94wmfALImBxuwz3QD4A4XSmkaLSQH48X14tMSYA3hc8pBmUxJgA+LPwdrkd8gZix2pMEwArC4cGoWIxOQiyApRoTQBO5LUFItYdlKrkVnOtXiQEWY7bXe+qLGmhb5lbIagGQJr5Y62FMAE4xTgsVglSBYAMhDSXFR2C5CDUGkAGQgOIzYwUQLILUACQGywS4v8AXM8U8Mgi5NFtyCsMoq3nKMboywgzXMeY4UGCGZ5kWAUAv3iWY/THBDN8zaB3hznGDNBLbwQcbYVca5QjAAAAAElFTkSuQmCC",J=({frameRef:s,isLoaded:t})=>{const a=M(),{id:n}=k(),i=L(),[r,l]=c.useState(!1);c.useEffect(()=>{s.current&&(s.current.onmouseenter=()=>l(!1))},[s]);const d=a.pathname.split("/").includes("focus");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:u("bg-neutral2 absolute bottom-0 w-full translate-y-[105%] p-4 transition-all",r&&"translate-y-0"),style:{...b,borderLeft:0,borderRight:0,borderBottom:0},children:e.jsxs("div",{className:"ml-20 flex gap-3",children:[e.jsx(v,{tip:"Launches the project's window in full screen",children:e.jsx(A,{onClick:()=>{var o;return(o=s.current)==null?void 0:o.requestFullscreen()},children:"Fullscreen"})}),e.jsx(v,{tip:"Enables/Disables some UI elements on page (warning: RELOADS THE PAGE)",children:d?e.jsx(A,{onClick:()=>i(a.pathname.replace("focus/"+n,String(n))),children:"Unfocus"}):e.jsx(A,{onClick:()=>i(a.pathname.replace(String(n),"focus/"+n)),children:"Focus mode"})})]})}),e.jsx("div",{className:u("absolute bottom-4 left-4 w-fit shrink-0 opacity-80",r&&"opacity-100"),onTouchStart:()=>l(o=>!o),onMouseEnter:()=>l(!0),role:"button",children:e.jsx(v,{controlled:!0,active:!1,tip:e.jsxs("div",{children:[e.jsx("span",{className:"sm:hidden",children:"Tap"}),e.jsx("span",{className:"hidden sm:inline",children:"Hover"})," here to show the configs"]}),children:e.jsx("img",{alt:"decoration",src:X})})})]})},K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAGCAYAAABThMdSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAd0lEQVR4nGPgEJH7TwJmgGJqqWcgwzw4H8z5dm0vGKOzsfGRxXGx8aknVf4bFvUwPtzx2AzBRWPzLCnqOUiUx0bDHQ/Chxd3wWkYxsVHpnGx8dGH8ZiHSz2y+TA+2PEzS8vBGMYmhcbGpsS8mUh6CcmTklkGHQYAruUDoZa49gQAAAAASUVORK5CYII=",Z=({project:s,src:t,className:a})=>{const[n,i]=c.useState(!1),r=c.useRef(null),l=c.useRef(null),{name:d,width:o,height:m}=s.metadata,g=680+Number(o),j=U(),f=j<g,[x,w]=c.useState(!1),p=new URL(s.metadata.thumbnail,window.location.origin+s.url+"/").href;return c.useEffect(()=>{var h;(h=l.current)!=null&&h.contentWindow},[l]),c.useEffect(()=>{i(!1)},[d]),c.useEffect(()=>{document.onfullscreenchange=()=>{w(!!document.fullscreenElement);const h=l.current;h&&(h.src=String(h.src))}},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{style:{...b,...f?{}:{height:m+"px",width:o+"px"}},ref:r,className:u("relative flex items-center justify-center overflow-hidden",f&&"aspect-square w-full",x&&"h-full w-full",a),children:[e.jsx("iframe",{src:t,title:d,width:x?"100%":o,height:x?"100%":m,className:u("bg-contrast",f&&!x&&"hidden"),onLoad:()=>i(!0),ref:l}),e.jsx(R,{src:p,className:u("h-full w-full rounded",(!f||x)&&"hidden")}),e.jsx("div",{className:u("bg-neutral2 pointer-events-none absolute inset-0 opacity-100 transition-all delay-500 duration-1000",n&&"opacity-0")}),(!f||x)&&e.jsx(J,{frameRef:l,isLoaded:n}),e.jsx(_,{isLoaded:n})]}),e.jsx("div",{className:"pointer-events-none absolute -bottom-1 left-0 right-0 z-0 flex justify-center ",children:e.jsx("img",{src:K,className:"h-4",alt:"decoration"})})]}),j<g&&e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(A,{className:"mx-2 inline",onClick:()=>{const h=r.current;h&&h.requestFullscreen()},children:"Launch (fullscreen)"}),e.jsx("small",{children:"The project window cannot fit in this resolution, but you can try to launch it anyway on fullscreen."})]})]})},I=({url:s,metadata:t,id:a,isFocus:n,heightClass:i="h-20 sm:h-16"})=>{const r=L(),[l,d]=c.useState(!1),{instructions:o,creation_date:m,description:g,width:j,height:f,name:x,short_name:w,resources:p,links:h,thumbnail:T,start_url:re,desktop:G,mobile:O}=t;return e.jsxs("div",{onClick:()=>{r("/projects/"+(n?"focus/":"")+a)},role:"button",className:"animate-fade-in group flex max-w-full gap-2",onMouseLeave:()=>{d(!1)},onMouseEnter:()=>{d(!0)},children:[e.jsxs(v,{tooltipWrapperClass:"pointer-events-none",placement:"left",tip:e.jsx(z,{project:t,url:s}),className:"relative flex shrink",children:[e.jsx(R,{src:new URL(T,window.location.origin+s+"/").href,className:u("w-32 sm:w-24",i),style:b,loading:"lazy"}),e.jsx("div",{className:"from-neutral2/60 absolute inset-0 bg-gradient-to-t to-transparent "}),e.jsxs("div",{className:"absolute bottom-1 flex h-[30%] w-full justify-end gap-3",children:[e.jsx(C,{device:"desktop",compatible:G}),e.jsx(C,{device:"mobile",compatible:O})]})]}),e.jsxs("div",{className:"flex min-w-0 flex-col p-1 text-base transition-all sm:text-sm",children:[e.jsx("div",{className:"min-w-0 overflow-hidden",style:{...l?{textShadow:"0px 0px 10px white"}:{}},children:e.jsx("span",{className:"min-w-0 max-w-full",children:w})}),e.jsx("div",{className:"text-contrast2 text-sm",children:m})]})]})},$=({className:s,src:t,placeholder:a=W,title:n,withModal:i=!0,imageClassName:r,containerClassName:l,...d})=>{const[o,m]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:u("shrink-0 overflow-hidden",i&&"cursor-zoom-in",s,l),role:"img",onClick:()=>m(!0),children:e.jsx(S,{className:u(s,"h-full w-full",r),...d,src:t,placeholder:a})}),i&&e.jsx(P,{open:o,title:n,close:()=>m(!1),closableOnOverlayClick:!0,children:e.jsx("div",{className:"w-full sm:min-h-[300px]",children:e.jsx(S,{preview:!0,...d,src:t,className:s,placeholder:a})})})]})},S=({preview:s=!1,placeholder:t,className:a,src:n,...i})=>{const[r,l]=c.useState(!1);return(n==null?void 0:n.split(".").pop())==="mp4"?e.jsx("video",{className:u("object-cover opacity-0 transition-none",s?"h-full w-full rounded-2xl object-contain":a,r&&"opacity-100"),onCanPlay:o=>{l(!0)},controls:!0,autoPlay:!0,muted:!0,loop:!0,children:e.jsx("source",{src:n,type:"video/mp4"})}):e.jsx("img",{className:u("object-cover opacity-0 transition-none",s?"h-full w-full rounded-2xl object-contain":a,r&&"opacity-100"),alt:"placeholder",src:String(n),onLoad:o=>{l(!0)},...i})},ee=({resources:s,projectUrl:t})=>{const a=U(),[n,i]=c.useState(a),r=c.useRef(null);if(c.useEffect(()=>{if(!r.current)return;const o=r.current.getBoundingClientRect();i(o.width)},[a]),s.length===0)return e.jsx(e.Fragment,{});const[l,d]=H(s.length,{step:250,availableWidth:n});return e.jsxs("div",{ref:r,children:[e.jsx("h2",{className:" text-contrast2",children:"Resources"}),e.jsx("hr",{}),e.jsx("div",{className:"flex flex-col gap-4",children:new Array(d).fill(0).map((o,m)=>e.jsx("div",{className:"flex w-full justify-between gap-4",children:new Array(l).fill(0).map((g,j)=>{const f=s[m*l+j];if(!f)return e.jsx("div",{className:"aspect-square flex-1"},m*l+j);const x=f.split("/").pop();return e.jsxs("div",{className:"bg-neutral border-contrast2 relative flex aspect-square flex-1 flex-col overflow-hidden rounded border",children:[e.jsx("div",{className:"flex grow items-center",children:e.jsx($,{src:new URL(f,window.location.origin+t+"/").href,className:"relative h-full w-full flex-1 rounded-lg object-contain",title:x})}),e.jsx("div",{className:"bg-neutral2 overflow-hidden text-ellipsis whitespace-nowrap p-1 px-2 text-sm",children:x})]},m*l+j)})},`row-${m}`))})]})},se=c.lazy(()=>F(()=>import("./ProjectEditor-S51LZBD0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),te=B,ne=1450,le=()=>{const{id:s}=k(),t=B.find(p=>String(p.id)===String(s));Q((t==null?void 0:t.metadata.name)||"Not found");const a=D();if(!t)return e.jsx("div",{});const{instructions:n,creation_date:i,description:r,width:l,height:d,name:o,short_name:m,resources:g,links:j,thumbnail:f,start_url:x}=t.metadata,w=window.location.pathname.split("/").includes("focus");return e.jsx("div",{className:u("-m-3 mt-0 flex grow justify-center"),children:e.jsxs("div",{className:u("markdown flex grow overflow-y-auto","text-contrast relative","lg:flex-row lg:justify-center","flex-col justify-start"),style:{maxWidth:ne},children:[e.jsxs("div",{className:"bg-neutral2 top-full m-6 flex h-fit grow flex-col items-center gap-6",style:N,children:[o&&e.jsxs("div",{className:"border-contrast2 -m-5 mb-0 flex w-full flex-col justify-between border-b pb-2 text-center sm:flex-row sm:items-end sm:text-left",children:[e.jsx("h2",{className:"text-contrast !mb-0 shrink",children:o}),e.jsx("span",{className:"text-contrast2 !mb-0 flex w-full justify-end sm:w-fit",children:i})]}),e.jsx(Z,{src:new URL(x,window.location.origin+t.url+"/").href,project:t}),a==="development"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c.Suspense,{children:e.jsx(se,{project:t})}),e.jsx(A,{onClick:async()=>{const p=Y+"/project/code/"+t.id,h=await fetch(p);console.log({openCodeRequestRes:h})},children:"OPEN VSCODE"})]}),e.jsxs("div",{className:"flex w-full flex-col gap-4",style:{maxWidth:Number(l)>800?l:"800px"},children:[n&&e.jsxs("div",{children:[e.jsx("h2",{className:" text-contrast2",children:"Instructions"}),e.jsx("hr",{}),e.jsx("div",{className:"px-0 sm:px-4",children:n&&e.jsx("div",{dangerouslySetInnerHTML:{__html:E.makeHtml(n)}})})]}),r&&e.jsxs("div",{children:[e.jsx("h2",{className:" text-contrast2",children:"Description"}),e.jsx("hr",{}),e.jsx("div",{className:"px-0 sm:px-4",children:r&&e.jsx("div",{className:"markdown",dangerouslySetInnerHTML:{__html:E.makeHtml(r)}})})]}),e.jsx(q,{links:j}),e.jsx(ee,{resources:g,projectUrl:t.url}),e.jsx("div",{className:"fixed top-0"})]})]}),e.jsxs("div",{className:u("bg-neutral2 m-6 flex h-fit shrink-0 flex-wrap gap-6","relative items-stretch lg:w-[300px]"),style:{...N},children:[e.jsx("img",{className:"absolute left-0 top-0 hidden h-12 -translate-x-[170%] md:block",alt:"decoration",src:y}),e.jsx("img",{className:"absolute left-0 top-[400px] hidden h-12 -translate-x-[170%] md:block",alt:"decoration",src:y}),e.jsxs("div",{className:"relative -m-4 flex shrink grow flex-col items-stretch gap-2",children:[e.jsx("div",{className:"bg-neutral pointer-events-none mb-1",children:e.jsx(I,{...t},t.id)}),e.jsx("hr",{className:"opacity-60"}),te.filter(p=>p.id!==Number(s)).reverse().map(p=>e.jsx(ae,{project:p,isFocus:w},p.id))]})]})]},t.id)})},ae=({project:s,isFocus:t})=>{const[a,n]=V(),i="h-20 sm:h-16";return e.jsx("div",{className:i,ref:a,children:n&&e.jsx(I,{...s,isFocus:t,heightClass:i},s.id)})},he=le;export{le as Project,he as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ProjectEditor-S51LZBD0.js","assets/index-XZUl2v0I.js","assets/index-wSgKAqXM.css","assets/Basic-3bP_d7eX.js","assets/Basic-688MKXD1.js","assets/ResourceEditor-v2ISxUlK.js","assets/useInViewport-EEmjnKer.js","assets/constants-pJ9mU_zC.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}