import{r as f,b as R,j as e,t as h,c as D,I as C,f as M,g as I}from"./index-p7500yfN.js";import{u as Y,H as O}from"./HeaderPage-sYCLkwNC.js";import{T as b,a as V,P as L,A as v,u as U,p as F,b as H}from"./prepareGrid-YMFmHz9R.js";import{m as J}from"./markdownConverter-Oni5BzV_.js";import{B as P}from"./Basic-2ciRVAms.js";import{B as S}from"./Basic-nwJByjwp.js";const G=(t,s=!1)=>{const[i,n]=f.useState(!1);return f.useEffect(()=>{crypto.randomUUID();const a=t.current;if(!a)return;const d=a.getBoundingClientRect();d.bottom>0&&d.top<=window.innerHeight?n(!0):s||n(!1);const r=u=>{if(u.data.type!=="scroll"||u.origin!==window.location.origin)return;const m=a.getBoundingClientRect();m.bottom>0&&m.top<=window.innerHeight?n(!0):s||n(!1)};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},[t]),i},Z=[{unit:"year",ms:31536e6},{unit:"month",ms:2628e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],K=new Intl.RelativeTimeFormat("en",{numeric:"auto"});function Q(t,s=new Date){if(!t)return"";const i=t.getTime()-s.getTime();return X(i)}function X(t){for(const{unit:s,ms:i}of Z)if(Math.abs(t)>=i||s==="second")return K.format(Math.round(t/i),s);return""}const W=({url:t,metadata:s,id:i,className:n})=>{const a=R(),[d,r]=f.useState(!1),u=f.useRef(null),m=G(u,!0),{instructions:c,creation_date:A,description:p,width:y,height:j,name:k,short_name:N,resources:o,links:l,thumbnail:w,start_url:re,mobile:B,desktop:E}=s;return e.jsxs("div",{className:h("flex flex-col",n),children:[e.jsxs("div",{onClick:()=>a("/projects/"+i),role:"button",className:h("group flex max-w-full flex-col p-1",n),onMouseLeave:()=>{r(!1)},onMouseEnter:()=>{r(!0)},children:[e.jsx(b,{tooltipWrapperClass:"pointer-events-none",tip:e.jsx(V,{project:s}),className:"relative flex grow aspect-[16/9]",children:e.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:D,ref:u,children:[e.jsx(L,{isLoaded:m,className:"sm:hidden"}),e.jsx(C,{src:new URL(w,window.location.origin+t+"/").href,className:h("absolute inset-0 opacity-100 transition-all duration-200",d&&"scale-105"),loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 from-neutral3/60 bg-gradient-to-t via-transparent "}),e.jsxs("div",{className:"absolute bottom-1 right-1 flex h-[20%] w-full justify-end gap-3",children:[e.jsx(v,{device:"desktop",compatible:E}),e.jsx(v,{device:"mobile",compatible:B})]})]})}),e.jsxs("div",{className:"flex flex-col min-w-0 p-1 transition-all",children:[e.jsx("div",{className:"min-w-0 overflow-hidden text-lg text-ellipsis",style:{...d?{textShadow:"0px 0px 10px white"}:{}},children:e.jsx("span",{className:"max-w-full min-w-0 whitespace-nowrap",children:N})}),e.jsxs("div",{className:"text-sm text-contrast2 sm:text-base",children:[A,e.jsxs("span",{className:"hidden sm:inline",children:[" ","- ",Q(new Date(A))]})]})]})]}),e.jsx("div",{className:"px-2 markdown line-clamp-3 sm:hidden",dangerouslySetInnerHTML:{__html:J.makeHtml(p)}})]})},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAYVJREFUSImllrFrwkAYxV+kVHclZBIcXBwEN6F/gpIls4tLoZtDKZlCplA7ZBO6ZOnsIvgnOAsduji4iiDqaJd0KF+4u1xyd/FNyXF5v+/e3X3EgkThdJbKxoMktmTjZeI+YI2j1ZKb6LteJVA2kczJ2OkOsknn6wW3454D6UIs0ZyMv16euImTxSYDmUAe6IHMRWMSjY+jNaLVkousTLWiDZXp5/vEvet8WwPU1ZN5r9/EfDSE0x3kDkEpQCUypxWcrxctcy2AaN7rN7XNOYCsqnvNM4Dvergd95gsNkrzcbTmjqoSwJ5lWoVu5Tr3IHfR6nYHADAfDXOVA8jdaKf5aAHA88d7MUCEAP+tgt0XMgaAut3hYiqDVGp2tFIRogTIQKyCJLbEOFUrMe7vn69vOJx+ueZ42G0LIVo3WRSZ+K6Hw26Lut3JIiU4yRhAlbGQ23HP9ScWYhwRK1VcQRJblSJiJcZl0mmNFE5naTidpY1WO2202imdtrsikkHY9yp/Icb6A2pR8jca3BK7AAAAAElFTkSuQmCC",_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAOZJREFUSIljYBjqgBHG4BCR+09Ng3+8ecTIwMDAwIIs+O7QfKoYLmSXCGfT3Ac0B/SNg939OVQx3LVwCpw9jOIAHcB8hM0lxPgWaxwgGwDLE0J2if+xWTIxMRKn4fnzl8PZWF2HnuGE7BJRfEKKD1AswGY4LkuIBSiuIpRMXQunMPx484iRLB+ga4JZhpymYRo5ROT+E4oDjEhGD+Nrl95iuAbdEGIA1lTEwMDAoKUnjFMTKXGB0wJkH6ADivMBMaDSLxinXPumtXA2TgtevP2F1wJkQ/ABsnxAShxgVYgexnQrGckBAIZ2d4IbxUs1AAAAAElFTkSuQmCC",q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANJJREFUSIljYBjqgBHG4BCR+09Ng3+8ecTIwMDAwIIs+O7QfKoYLmSXCGfT3Ac0B/SNg939OVQx3LVwCpw9jOIAGaD7Bt01xPgWaxwgA1ieQE7TyGBiYiROw/PnL4ezcVpACCAbgg+QZQEpEYjTgrNnz+LURJU4IAQojoNrl97itYDkOED3tpaeMAM2uR9vHjGSEgcoORmftxkYIK7+8eYRIylxgJGBcFkCMxymrtIvGKfh7ZvWYrcAl2ZkDTA1ZPkAmyXohlMNcIjI/ad2CUsTAAB3wGw4RXEO9AAAAABJRU5ErkJggg==",$=({className:t,children:s,...i})=>e.jsx("select",{className:h("w-full rounded-lg bg-neutral3 px-2 py-1 outline-0 focus-within:text-contrast text-contrast2 font-medium",t),...i,children:s});let x;const ee=t=>{x=t.reduce((s,{id:i,metadata:n})=>(s[i]=(n.name+n.description+n.instructions).toLowerCase().replace(/[^a-zA-Z0-9,;\-.!? ]/g,""),s),{})},te=(t,s,i,n)=>t.filter(({metadata:r})=>!!(r.desktop&&s||r.mobile&&i)).filter(({id:r})=>x?x[r].includes(n.toLowerCase()):!0),se={date:(t,s)=>t.metadata.creation_date>s.metadata.creation_date?1:-1,alphabetical:(t,s)=>t.metadata.name>s.metadata.name?1:-1,documentation:(t,s)=>x?x[t.id].length>x[s.id].length?1:-1:1},ne=(t,s,i)=>(t.sort(se[s]),i?t:t.reverse()),g={mobile:!0,desktop:!0,sortAscending:!1,sortType:"date",filter:""},ie=({projects:t,rawProjects:s,setProjects:i})=>{const[n,a]=M(),d=n.get("mobile"),r=n.get("desktop");n.get("filter");const u=n.get("sort-type"),m=n.get("ascending"),c=d?d==="yes":g.mobile,A=r?r==="yes":g.desktop,p=m?m==="yes":g.sortAscending,y=u||g.sortType,[j,k]=f.useState(g.filter);f.useEffect(()=>{x||ee(s)},[s]),f.useEffect(()=>{const o=te(s,A,c,j),l=ne(o,y,p);i(l)},[n,j]);const N=!j&&c&&A;return e.jsxs("div",{className:"flex flex-col w-full gap-4 -mt-4 -mb-2",children:[e.jsxs("div",{className:"flex items-center w-full gap-4",children:[e.jsxs("div",{className:"relative grow",children:[e.jsx(P,{className:"w-full pl-10 outline-none bg-neutral3",placeholder:"Search projects",defaultValue:j,onChange:o=>{k(o.currentTarget.value)},style:I}),e.jsx("div",{className:"absolute top-3 left-4",children:e.jsx("img",{src:z,className:"w-6 h-6",alt:"magnifying glass"})})]}),e.jsx(b,{tip:`${A?"Showing":"Hiding"} desktop compatible projects`,children:e.jsx(S,{className:h("aspect-square h-12 bg-neutral3",A&&"bg-neutral"),style:I,onClick:()=>{a(o=>{const l=A?"no":"yes";return!A===g.desktop?o.delete("desktop"):o.set("desktop",l),o})},children:e.jsx(v,{device:"desktop",noTip:!0})})}),e.jsx(b,{tip:`${c?"Showing":"Hiding"} mobile compatible projects`,children:e.jsx(S,{className:h("aspect-square h-12 bg-neutral3",c&&"bg-neutral"),style:I,onClick:()=>{a(o=>{const l=c?"no":"yes";return!c===g.mobile?o.delete("mobile"):o.set("mobile",l),o})},children:e.jsx(v,{device:"mobile",noTip:!0})})})]}),e.jsxs("div",{className:"flex items-center justify-between w-full text-sm text-contrast2",children:[e.jsx("div",{className:"text-sm",children:N?e.jsxs("div",{children:["Viewing all ",s.length," projects"]}):e.jsxs("div",{children:["Viewing ",t.length," project",t.length===1?"":"s"," out of ",s.length]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs($,{className:"p-0 w-fit text-end text-contrast",role:"button",tabIndex:0,defaultValue:"date",onChange:o=>{a(l=>{const w=o.currentTarget.value;return w===g.sortType?l.delete("sort-type"):l.set("sort-type",w),l})},children:[e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"alphabetical",children:"Alphabetical"}),e.jsx("option",{value:"documentation",children:"Documentation"})]}),e.jsx(b,{className:"w-6 h-6",tip:`Sorting type: ${p?"Ascending":"Descending"}`,children:e.jsx("img",{src:p?_:q,alt:"sorting",className:"w-full h-full",role:"button",tabIndex:0,onClick:()=>a(o=>{const l=p?"no":"yes";return!p===g.sortAscending?o.delete("ascending"):o.set("ascending",l),o})})})]})]})]})},T=H,oe=()=>{Y("Projects");const[t,s]=f.useState(T),i=U(),[n,a]=F(t.length,{clientWidth:i,breakPoint:700});return e.jsxs(O,{header:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-contrast2 text-xl font-bold",children:"Projects"}),e.jsxs("div",{children:["A list of my web-based projects from most recent to oldest. Note that most of them won't support mobile controls"," "]})]}),children:[e.jsx(ie,{rawProjects:T,projects:t,setProjects:s}),new Array(a).fill(0).map((d,r)=>e.jsx("div",{className:"flex w-full justify-between gap-4",children:new Array(n).fill(0).map((u,m)=>{const c=t[r*n+m];return c?e.jsx(W,{...c,className:"w-full min-w-0 flex-1 [&_img.object-contain]:opacity-80 [&_img.object-contain]:hover:opacity-100"},c.id):e.jsx("div",{className:"aspect-[6/5] flex-1"},r*n+m)})},`row-${r}`))]})},Ae=oe;export{oe as Projects,Ae as default};
