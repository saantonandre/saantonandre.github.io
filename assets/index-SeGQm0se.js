import{b as D,r as p,j as e,t as h,c as R,I as C,f as O,g as I}from"./index-J-_t6QiY.js";import{u as M,H as Y}from"./HeaderPage-KY6LKBhv.js";import{T as b,a as F,P as J,A as v,u as V,p as G,b as L}from"./prepareGrid-g9l9vEED.js";import{m as U}from"./markdownConverter-4q_xslyv.js";import{B as P}from"./Basic-k8iyZsgx.js";import{B as k}from"./Basic-a1N0h_Sy.js";const H=[{unit:"year",ms:31536e6},{unit:"month",ms:2628e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],Z=new Intl.RelativeTimeFormat("en",{numeric:"auto"});function K(t,s=new Date){if(!t)return"";const n=t.getTime()-s.getTime();return Q(n)}function Q(t){for(const{unit:s,ms:n}of H)if(Math.abs(t)>=n||s==="second")return Z.format(Math.round(t/n),s);return""}const X=({url:t,metadata:s,id:n,className:i})=>{const a=D(),[c,l]=p.useState(!1),u=!0,{instructions:g,creation_date:r,description:m,width:f,height:j,name:w,short_name:N,resources:S,links:o,thumbnail:d,start_url:y,mobile:E,desktop:B}=s;return e.jsx("div",{className:h("flex flex-col aspect-[4/3]",i),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:()=>a("/projects/"+n),role:"button",className:h("group flex max-w-full flex-col p-1",i),onMouseLeave:()=>{l(!1)},onMouseEnter:()=>{l(!0)},children:[e.jsx(b,{tooltipWrapperClass:"pointer-events-none",tip:e.jsx(F,{project:s}),className:"relative flex aspect-[16/9] grow",children:e.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:R,children:[e.jsx(J,{isLoaded:u,className:"sm:hidden"}),e.jsx(C,{src:new URL(d,window.location.origin+t+"/").href,className:h("absolute inset-0 opacity-100 transition-all duration-200",c&&"scale-105"),loading:"lazy"}),e.jsx("div",{className:"from-neutral3/60 absolute inset-0 bg-gradient-to-t via-transparent "}),e.jsxs("div",{className:"absolute bottom-1 right-1 flex h-[20%] w-full justify-end gap-3",children:[e.jsx(v,{device:"desktop",compatible:B}),e.jsx(v,{device:"mobile",compatible:E})]})]})}),e.jsxs("div",{className:"flex min-w-0 flex-col p-1 transition-all",children:[e.jsx("div",{className:"min-w-0 overflow-hidden text-ellipsis text-lg",style:{...c?{textShadow:"0px 0px 10px white"}:{}},children:e.jsx("span",{className:"min-w-0 max-w-full whitespace-nowrap",children:N})}),e.jsxs("div",{className:"text-contrast2 text-sm sm:text-base",children:[r,e.jsxs("span",{className:"hidden sm:inline",children:[" ","- ",K(new Date(r))]})]})]})]}),e.jsx("div",{className:"markdown line-clamp-3 px-2 sm:hidden",dangerouslySetInnerHTML:{__html:U.makeHtml(m)}})]})})},W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAYVJREFUSImllrFrwkAYxV+kVHclZBIcXBwEN6F/gpIls4tLoZtDKZlCplA7ZBO6ZOnsIvgnOAsduji4iiDqaJd0KF+4u1xyd/FNyXF5v+/e3X3EgkThdJbKxoMktmTjZeI+YI2j1ZKb6LteJVA2kczJ2OkOsknn6wW3454D6UIs0ZyMv16euImTxSYDmUAe6IHMRWMSjY+jNaLVkousTLWiDZXp5/vEvet8WwPU1ZN5r9/EfDSE0x3kDkEpQCUypxWcrxctcy2AaN7rN7XNOYCsqnvNM4Dvergd95gsNkrzcbTmjqoSwJ5lWoVu5Tr3IHfR6nYHADAfDXOVA8jdaKf5aAHA88d7MUCEAP+tgt0XMgaAut3hYiqDVGp2tFIRogTIQKyCJLbEOFUrMe7vn69vOJx+ueZ42G0LIVo3WRSZ+K6Hw26Lut3JIiU4yRhAlbGQ23HP9ScWYhwRK1VcQRJblSJiJcZl0mmNFE5naTidpY1WO2202imdtrsikkHY9yp/Icb6A2pR8jca3BK7AAAAAElFTkSuQmCC",_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAOZJREFUSIljYBjqgBHG4BCR+09Ng3+8ecTIwMDAwIIs+O7QfKoYLmSXCGfT3Ac0B/SNg939OVQx3LVwCpw9jOIAHcB8hM0lxPgWaxwgGwDLE0J2if+xWTIxMRKn4fnzl8PZWF2HnuGE7BJRfEKKD1AswGY4LkuIBSiuIpRMXQunMPx484iRLB+ga4JZhpymYRo5ROT+E4oDjEhGD+Nrl95iuAbdEGIA1lTEwMDAoKUnjFMTKXGB0wJkH6ADivMBMaDSLxinXPumtXA2TgtevP2F1wJkQ/ABsnxAShxgVYgexnQrGckBAIZ2d4IbxUs1AAAAAElFTkSuQmCC",z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANJJREFUSIljYBjqgBHG4BCR+09Ng3+8ecTIwMDAwIIs+O7QfKoYLmSXCGfT3Ac0B/SNg939OVQx3LVwCpw9jOIAGaD7Bt01xPgWaxwgA1ieQE7TyGBiYiROw/PnL4ezcVpACCAbgg+QZQEpEYjTgrNnz+LURJU4IAQojoNrl97itYDkOED3tpaeMAM2uR9vHjGSEgcoORmftxkYIK7+8eYRIylxgJGBcFkCMxymrtIvGKfh7ZvWYrcAl2ZkDTA1ZPkAmyXohlMNcIjI/ad2CUsTAAB3wGw4RXEO9AAAAABJRU5ErkJggg==",q=({className:t,children:s,...n})=>e.jsx("select",{className:h("w-full rounded-lg bg-neutral3 px-2 py-1 outline-0 focus-within:text-contrast text-contrast2 font-medium",t),...n,children:s});let x;const $=t=>{x=t.reduce((s,{id:n,metadata:i})=>(s[n]=(i.name+i.description+i.instructions).toLowerCase().replace(/[^a-zA-Z0-9,;\-.!? ]/g,""),s),{})},ee=(t,s,n,i)=>t.filter(({metadata:l})=>!!(l.desktop&&s||l.mobile&&n)).filter(({id:l})=>x?x[l].includes(i.toLowerCase()):!0),te={date:(t,s)=>t.metadata.creation_date>s.metadata.creation_date?1:-1,alphabetical:(t,s)=>t.metadata.name>s.metadata.name?1:-1,documentation:(t,s)=>x?x[t.id].length>x[s.id].length?1:-1:1},se=(t,s,n)=>(t.sort(te[s]),n?t:t.reverse()),A={mobile:!0,desktop:!0,sortAscending:!1,sortType:"date",filter:""},ne=({projects:t,rawProjects:s,setProjects:n})=>{const[i,a]=O(),c=i.get("mobile"),l=i.get("desktop");i.get("filter");const u=i.get("sort-type"),g=i.get("ascending"),r=c?c==="yes":A.mobile,m=l?l==="yes":A.desktop,f=g?g==="yes":A.sortAscending,j=u||A.sortType,[w,N]=p.useState(A.filter);p.useEffect(()=>{x||$(s)},[s]),p.useEffect(()=>{const o=ee(s,m,r,w),d=se(o,j,f);n(d)},[i,w]);const S=!w&&r&&m;return e.jsxs("div",{className:"flex flex-col w-full gap-4 -mt-4 -mb-2",children:[e.jsxs("div",{className:"flex items-center w-full gap-4",children:[e.jsxs("div",{className:"relative grow",children:[e.jsx(P,{className:"w-full pl-10 outline-none bg-neutral3",placeholder:"Search projects",defaultValue:w,onChange:o=>{N(o.currentTarget.value)},style:I}),e.jsx("div",{className:"absolute top-3 left-4",children:e.jsx("img",{src:W,className:"w-6 h-6",alt:"magnifying glass"})})]}),e.jsx(b,{tip:`${m?"Showing":"Hiding"} desktop compatible projects`,children:e.jsx(k,{className:h("aspect-square h-12 bg-neutral3",m&&"bg-neutral"),style:I,onClick:()=>{a(o=>{const d=m?"no":"yes";return!m===A.desktop?o.delete("desktop"):o.set("desktop",d),o})},children:e.jsx(v,{device:"desktop",noTip:!0})})}),e.jsx(b,{tip:`${r?"Showing":"Hiding"} mobile compatible projects`,children:e.jsx(k,{className:h("aspect-square h-12 bg-neutral3",r&&"bg-neutral"),style:I,onClick:()=>{a(o=>{const d=r?"no":"yes";return!r===A.mobile?o.delete("mobile"):o.set("mobile",d),o})},children:e.jsx(v,{device:"mobile",noTip:!0})})})]}),e.jsxs("div",{className:"flex items-center justify-between w-full text-sm text-contrast2",children:[e.jsx("div",{className:"text-sm",children:S?e.jsxs("div",{children:["Viewing all ",s.length," projects"]}):e.jsxs("div",{children:["Viewing ",t.length," project",t.length===1?"":"s"," out of ",s.length]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(q,{className:"p-0 w-fit text-end text-contrast",role:"button",tabIndex:0,defaultValue:"date",onChange:o=>{a(d=>{const y=o.currentTarget.value;return y===A.sortType?d.delete("sort-type"):d.set("sort-type",y),d})},children:[e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"alphabetical",children:"Alphabetical"}),e.jsx("option",{value:"documentation",children:"Documentation"})]}),e.jsx(b,{className:"w-6 h-6",tip:`Sorting type: ${f?"Ascending":"Descending"}`,children:e.jsx("img",{src:f?_:z,alt:"sorting",className:"w-full h-full",role:"button",tabIndex:0,onClick:()=>a(o=>{const d=f?"no":"yes";return!f===A.sortAscending?o.delete("ascending"):o.set("ascending",d),o})})})]})]})]})};function ie(t,{threshold:s=0,root:n=null,rootMargin:i="0%",freezeOnceVisible:a=!1}){const[c,l]=p.useState(),u=(c==null?void 0:c.isIntersecting)&&a,g=([r])=>{l(r)};return p.useEffect(()=>{const r=t==null?void 0:t.current;if(!!!window.IntersectionObserver||u||!r)return;const f={threshold:s,root:n,rootMargin:i},j=new IntersectionObserver(g,f);return j.observe(r),()=>j.disconnect()},[t==null?void 0:t.current,JSON.stringify(s),n,i,u]),c}const T=L,oe=()=>{M("Projects");const[t,s]=p.useState(T),n=V(),[i,a]=G(t.length,{clientWidth:n,breakPoint:700}),c=new Array(a).fill(0).map((l,u)=>new Array(i).fill(0).map((g,r)=>{const m=t[u*i+r];if(m)return m}));return e.jsxs(Y,{header:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-contrast2 text-xl font-bold",children:"Projects"}),e.jsxs("div",{children:["A list of my web-based projects from most recent to oldest. Note that most of them won't support mobile controls"," "]})]}),children:[e.jsx(ne,{rawProjects:T,projects:t,setProjects:s}),c.map((l,u)=>e.jsx(re,{projects:l},u))]})},re=({projects:t})=>{const s=p.useRef(null),n=ie(s,{threshold:0,root:null,rootMargin:"0px"}),i=!!(n!=null&&n.isIntersecting);return e.jsx("div",{className:"flex w-full justify-between gap-4",ref:s,children:t.map((a,c)=>a&&i?e.jsx(X,{...a,className:"w-full min-w-0 flex-1 [&_img.object-contain]:opacity-80 [&_img.object-contain]:hover:opacity-100 animate-fade-in aspect-[6/5] overflow-hidden"},a.id):e.jsx("div",{className:"aspect-[6/5] flex-1"},"blank"+c))})},Ae=oe;export{oe as Projects,Ae as default};
