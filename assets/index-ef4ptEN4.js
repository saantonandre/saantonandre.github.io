import{b as D,r as p,j as e,t as f,c as E,I as C,f as M,g as I}from"./index-T93KYzyz.js";import{u as Y,H as O}from"./HeaderPage-AkvmkmlE.js";import{T as w,a as P,P as F,A as b,u as J,p as V,c as G,b as L}from"./useIntersectionObserver-P8p8CwSK.js";import{m as U}from"./markdownConverter-miWThQ0k.js";import{B as H}from"./Basic-zQgS02VH.js";import{B as S}from"./Basic-cbZVhIqH.js";const Z=[{unit:"year",ms:31536e6},{unit:"month",ms:2628e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],K=new Intl.RelativeTimeFormat("en",{numeric:"auto"});function Q(s,t=new Date){if(!s)return"";const n=s.getTime()-t.getTime();return X(n)}function X(s){for(const{unit:t,ms:n}of Z)if(Math.abs(s)>=n||t==="second")return K.format(Math.round(s/n),t);return""}const W=({url:s,metadata:t,id:n,className:i})=>{const o=D(),[m,r]=p.useState(!1),u=!0,{instructions:j,creation_date:c,description:d,width:x,height:y,name:h,short_name:v,resources:k,links:a,thumbnail:l,start_url:N,mobile:R,desktop:B}=t;return e.jsxs("div",{className:f("animate-fade-in flex aspect-[4/3] flex-col",i),children:[e.jsxs("div",{onClick:()=>{o("/projects/"+n)},role:"button",className:f("group flex max-w-full flex-col p-1",i),onMouseLeave:()=>{r(!1)},onMouseEnter:()=>{r(!0)},children:[e.jsx(w,{tooltipWrapperClass:"pointer-events-none",tip:e.jsx(P,{project:t}),className:"relative flex aspect-[16/9] grow",children:e.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:E,children:[e.jsx(F,{isLoaded:u,className:"sm:hidden"}),e.jsx(C,{src:new URL(l,window.location.origin+s+"/").href,className:f("absolute inset-0 opacity-100 transition-all duration-200",m&&"scale-105"),loading:"lazy"}),e.jsx("div",{className:"from-neutral3/60 absolute inset-0 bg-gradient-to-t via-transparent "}),e.jsxs("div",{className:"absolute bottom-1 right-1 flex h-[20%] w-full justify-end gap-3",children:[e.jsx(b,{device:"desktop",compatible:B}),e.jsx(b,{device:"mobile",compatible:R})]})]})}),e.jsxs("div",{className:"flex min-w-0 flex-col p-1 transition-all",children:[e.jsx("div",{className:"min-w-0 overflow-hidden text-ellipsis text-lg",style:{...m?{textShadow:"0px 0px 10px white"}:{}},children:e.jsx("span",{className:"min-w-0 max-w-full whitespace-nowrap",children:v})}),e.jsxs("div",{className:"text-contrast2 text-sm sm:text-base",children:[c,e.jsxs("span",{className:"hidden sm:inline",children:[" ","- ",Q(new Date(c))]})]})]})]}),e.jsx("div",{className:"markdown line-clamp-3 px-2 sm:hidden",dangerouslySetInnerHTML:{__html:U.makeHtml(d)}})]})},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAYVJREFUSImllrFrwkAYxV+kVHclZBIcXBwEN6F/gpIls4tLoZtDKZlCplA7ZBO6ZOnsIvgnOAsduji4iiDqaJd0KF+4u1xyd/FNyXF5v+/e3X3EgkThdJbKxoMktmTjZeI+YI2j1ZKb6LteJVA2kczJ2OkOsknn6wW3454D6UIs0ZyMv16euImTxSYDmUAe6IHMRWMSjY+jNaLVkousTLWiDZXp5/vEvet8WwPU1ZN5r9/EfDSE0x3kDkEpQCUypxWcrxctcy2AaN7rN7XNOYCsqnvNM4Dvergd95gsNkrzcbTmjqoSwJ5lWoVu5Tr3IHfR6nYHADAfDXOVA8jdaKf5aAHA88d7MUCEAP+tgt0XMgaAut3hYiqDVGp2tFIRogTIQKyCJLbEOFUrMe7vn69vOJx+ueZ42G0LIVo3WRSZ+K6Hw26Lut3JIiU4yRhAlbGQ23HP9ScWYhwRK1VcQRJblSJiJcZl0mmNFE5naTidpY1WO2202imdtrsikkHY9yp/Icb6A2pR8jca3BK7AAAAAElFTkSuQmCC",_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAOZJREFUSIljYBjqgBHG4BCR+09Ng3+8ecTIwMDAwIIs+O7QfKoYLmSXCGfT3Ac0B/SNg939OVQx3LVwCpw9jOIAHcB8hM0lxPgWaxwgGwDLE0J2if+xWTIxMRKn4fnzl8PZWF2HnuGE7BJRfEKKD1AswGY4LkuIBSiuIpRMXQunMPx484iRLB+ga4JZhpymYRo5ROT+E4oDjEhGD+Nrl95iuAbdEGIA1lTEwMDAoKUnjFMTKXGB0wJkH6ADivMBMaDSLxinXPumtXA2TgtevP2F1wJkQ/ABsnxAShxgVYgexnQrGckBAIZ2d4IbxUs1AAAAAElFTkSuQmCC",q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANJJREFUSIljYBjqgBHG4BCR+09Ng3+8ecTIwMDAwIIs+O7QfKoYLmSXCGfT3Ac0B/SNg939OVQx3LVwCpw9jOIAGaD7Bt01xPgWaxwgA1ieQE7TyGBiYiROw/PnL4ezcVpACCAbgg+QZQEpEYjTgrNnz+LURJU4IAQojoNrl97itYDkOED3tpaeMAM2uR9vHjGSEgcoORmftxkYIK7+8eYRIylxgJGBcFkCMxymrtIvGKfh7ZvWYrcAl2ZkDTA1ZPkAmyXohlMNcIjI/ad2CUsTAAB3wGw4RXEO9AAAAABJRU5ErkJggg==",$=({className:s,children:t,...n})=>e.jsx("select",{className:f("w-full rounded-lg bg-neutral3 px-2 py-1 outline-0 focus-within:text-contrast text-contrast2 font-medium",s),...n,children:t});let g;const ee=s=>{g=s.reduce((t,{id:n,metadata:i})=>(t[n]=(i.name+i.description+i.instructions).toLowerCase().replace(/[^a-zA-Z0-9,;\-.!? ]/g,""),t),{})},te=(s,t,n,i)=>s.filter(({metadata:r})=>!!(r.desktop&&t||r.mobile&&n)).filter(({id:r})=>g?g[r].includes(i.toLowerCase()):!0),se={date:(s,t)=>s.metadata.creation_date>t.metadata.creation_date?1:-1,alphabetical:(s,t)=>s.metadata.name>t.metadata.name?1:-1,documentation:(s,t)=>g?g[s.id].length>g[t.id].length?1:-1:1},ne=(s,t,n)=>(s.sort(se[t]),n?s:s.reverse()),A={mobile:!0,desktop:!0,sortAscending:!1,sortType:"date",filter:""},ie=({projects:s,rawProjects:t,setProjects:n})=>{const[i,o]=M(),m=i.get("mobile"),r=i.get("desktop");i.get("filter");const u=i.get("sort-type"),j=i.get("ascending"),c=m?m==="yes":A.mobile,d=r?r==="yes":A.desktop,x=j?j==="yes":A.sortAscending,y=u||A.sortType,[h,v]=p.useState(A.filter);p.useEffect(()=>{g||ee(t)},[t]),p.useEffect(()=>{const a=te(t,d,c,h),l=ne(a,y,x);n(l)},[i,h]);const k=!h&&c&&d;return e.jsxs("div",{className:"flex flex-col w-full gap-4 -mt-4 -mb-2",children:[e.jsxs("div",{className:"flex items-center w-full gap-4",children:[e.jsxs("div",{className:"relative grow",children:[e.jsx(H,{className:"w-full pl-10 outline-none bg-neutral3",placeholder:"Search projects",defaultValue:h,onChange:a=>{v(a.currentTarget.value)},style:I}),e.jsx("div",{className:"absolute top-3 left-4",children:e.jsx("img",{src:z,className:"w-6 h-6",alt:"magnifying glass"})})]}),e.jsx(w,{tip:`${d?"Showing":"Hiding"} desktop compatible projects`,children:e.jsx(S,{className:f("aspect-square h-12 bg-neutral3",d&&"bg-neutral"),style:I,onClick:()=>{o(a=>{const l=d?"no":"yes";return!d===A.desktop?a.delete("desktop"):a.set("desktop",l),a})},children:e.jsx(b,{device:"desktop",noTip:!0})})}),e.jsx(w,{tip:`${c?"Showing":"Hiding"} mobile compatible projects`,children:e.jsx(S,{className:f("aspect-square h-12 bg-neutral3",c&&"bg-neutral"),style:I,onClick:()=>{o(a=>{const l=c?"no":"yes";return!c===A.mobile?a.delete("mobile"):a.set("mobile",l),a})},children:e.jsx(b,{device:"mobile",noTip:!0})})})]}),e.jsxs("div",{className:"flex items-center justify-between w-full text-sm text-contrast2",children:[e.jsx("div",{className:"text-sm",children:k?e.jsxs("div",{children:["Viewing all ",t.length," projects"]}):e.jsxs("div",{children:["Viewing ",s.length," project",s.length===1?"":"s"," out of ",t.length]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs($,{className:"p-0 w-fit text-end text-contrast",role:"button",tabIndex:0,defaultValue:"date",onChange:a=>{o(l=>{const N=a.currentTarget.value;return N===A.sortType?l.delete("sort-type"):l.set("sort-type",N),l})},children:[e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"alphabetical",children:"Alphabetical"}),e.jsx("option",{value:"documentation",children:"Documentation"})]}),e.jsx(w,{className:"w-6 h-6",offsets:[10,10],tip:`Sorting type: ${x?"Ascending":"Descending"}`,children:e.jsx("img",{src:x?_:q,alt:"sorting",className:"w-full h-full",role:"button",tabIndex:0,onClick:()=>o(a=>{const l=x?"no":"yes";return!x===A.sortAscending?a.delete("ascending"):a.set("ascending",l),a})})})]})]})]})},T=L,ae=()=>{Y("Projects");const[s,t]=p.useState(T),n=J(),[i,o]=V(s.length,{clientWidth:n,breakPoint:700}),m=new Array(o).fill(0).map((r,u)=>new Array(i).fill(0).map((j,c)=>{const d=s[u*i+c];if(d)return d}));return e.jsxs(O,{header:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-contrast2 text-xl font-bold",children:"Projects"}),e.jsxs("div",{children:["A list of my web-based projects from most recent to oldest. Note that most of them won't support mobile controls"," "]})]}),children:[e.jsx(ie,{rawProjects:T,projects:s,setProjects:t}),m.map((r,u)=>e.jsx(oe,{projects:r},u))]})},oe=({projects:s})=>{const t=p.useRef(null),n=G(t,{threshold:0,root:null,rootMargin:"0px"}),i=!!(n!=null&&n.isIntersecting);return e.jsx("div",{className:"flex w-full justify-between gap-4",ref:t,children:s.map((o,m)=>e.jsx("div",{className:"aspect-[6/5] flex-1 w-full min-w-0",children:o&&i&&e.jsx(W,{...o,className:"aspect-[6/5] overflow-hidden [&_img.object-contain]:opacity-80 [&_img.object-contain]:hover:opacity-100"},o.id)},(o==null?void 0:o.id)??"blank"+m))})},Ae=ae;export{ae as Projects,Ae as default};
