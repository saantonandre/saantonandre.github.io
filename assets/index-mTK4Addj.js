import{u as P,a as L,b as k,r as c,j as e,t as u,c as b,I as R,B as F,d as Y,_,e as N,m as y}from"./index-dlmnP2Fs.js";import{T as A,u as B,P as W,a as G,A as C,p as Q,b as I,c as H}from"./useIntersectionObserver-D8LzYVoj.js";import{B as v}from"./Basic-J2Bd3X-J.js";import{u as V}from"./HeaderPage-CvgFnilW.js";import{m as E}from"./markdownConverter-cgldB2XP.js";import{s as q}from"./constants-pJ9mU_zC.js";import{u as z,M as D}from"./useEnv-j3obsRAo.js";const X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA50lEQVR4nN2XOxJCIQxFU97uNdYOtTuwcgmuxnEtWa0WT94wmfALImBxuwz3QD4A4XSmkaLSQH48X14tMSYA3hc8pBmUxJgA+LPwdrkd8gZix2pMEwArC4cGoWIxOQiyApRoTQBO5LUFItYdlKrkVnOtXiQEWY7bXe+qLGmhb5lbIagGQJr5Y62FMAE4xTgsVglSBYAMhDSXFR2C5CDUGkAGQgOIzYwUQLILUACQGywS4v8AXM8U8Mgi5NFtyCsMoq3nKMboywgzXMeY4UGCGZ5kWAUAv3iWY/THBDN8zaB3hznGDNBLbwQcbYVca5QjAAAAAElFTkSuQmCC",J=({frameRef:s,isLoaded:n})=>{const a=P(),{id:t}=L(),o=k(),[r,l]=c.useState(!1);c.useEffect(()=>{s.current&&(s.current.onmouseenter=()=>l(!1))},[s]);const d=a.pathname.split("/").includes("focus");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:u("bg-neutral2 absolute bottom-0 w-full translate-y-[105%] p-4 transition-all",r&&"translate-y-0"),style:{...b,borderLeft:0,borderRight:0,borderBottom:0},children:e.jsxs("div",{className:"ml-20 flex gap-3",children:[e.jsx(A,{tip:"Launches the project's window in full screen",children:e.jsx(v,{onClick:()=>{var i;return(i=s.current)==null?void 0:i.requestFullscreen()},children:"Fullscreen"})}),e.jsx(A,{tip:"Enables/Disables some UI elements on page (warning: RELOADS THE PAGE)",children:d?e.jsx(v,{onClick:()=>o(a.pathname.replace("focus/"+t,String(t))),children:"Unfocus"}):e.jsx(v,{onClick:()=>o(a.pathname.replace(String(t),"focus/"+t)),children:"Focus mode"})})]})}),e.jsx("div",{className:u("absolute bottom-4 left-4 w-fit shrink-0 opacity-80",r&&"opacity-100"),onTouchStart:()=>l(i=>!i),onMouseEnter:()=>l(!0),role:"button",children:e.jsx(A,{controlled:!0,active:!1,tip:e.jsxs("div",{children:[e.jsx("span",{className:"sm:hidden",children:"Tap"}),e.jsx("span",{className:"hidden sm:inline",children:"Hover"})," here to show the configs"]}),children:e.jsx("img",{alt:"decoration",src:X})})})]})},K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAGCAYAAABThMdSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAaklEQVR4nGPgEJH7TwJmgGJqqWcgwzw4H8w5vLgLjNHZ2PjI4rjY+NSTKn8Yi3oYH+z4xqRCuASMjY+GYVx8Quo5SJTHRsMdT4njqOF5DiLUI5sP48NDnlSf43M8JeY1YnEsLnlSMsugwwAzgcUBOaQ62gAAAABJRU5ErkJggg==",Z=({project:s,src:n,className:a})=>{const[t,o]=c.useState(!1),r=c.useRef(null),l=c.useRef(null),{name:d,width:i,height:m}=s.metadata,g=680+Number(i),j=B(),f=j<g,[x,w]=c.useState(!1),p=new URL(s.metadata.thumbnail,window.location.origin+s.url+"/").href;return c.useEffect(()=>{var h;(h=l.current)!=null&&h.contentWindow},[l]),c.useEffect(()=>{o(!1)},[d]),c.useEffect(()=>{document.onfullscreenchange=()=>{w(!!document.fullscreenElement);const h=l.current;h&&(h.src=String(h.src))}},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{style:{...b,...f?{}:{height:m+"px",width:i+"px"}},ref:r,className:u("relative flex items-center justify-center overflow-hidden",f&&"aspect-square w-full",x&&"h-full w-full",a),children:[e.jsx("iframe",{src:n,title:d,width:x?"100%":i,height:x?"100%":m,className:u("bg-contrast",f&&!x&&"hidden"),onLoad:()=>o(!0),ref:l}),e.jsx(R,{src:p,className:u("h-full w-full rounded",(!f||x)&&"hidden")}),e.jsx("div",{className:u("bg-neutral2 pointer-events-none absolute inset-0 opacity-100 transition-all delay-500 duration-1000",t&&"opacity-0")}),(!f||x)&&e.jsx(J,{frameRef:l,isLoaded:t}),e.jsx(W,{isLoaded:t})]}),e.jsx("div",{className:"pointer-events-none absolute -bottom-1 left-0 right-0 z-0 flex justify-center ",children:e.jsx("img",{src:K,className:"h-4",alt:"decoration"})})]}),j<g&&e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(v,{className:"mx-2 inline",onClick:()=>{const h=r.current;h&&h.requestFullscreen()},children:"Launch (fullscreen)"}),e.jsx("small",{children:"The project window cannot fit in this resolution, but you can try to launch it anyway on fullscreen."})]})]})},M=({url:s,metadata:n,id:a,isFocus:t,heightClass:o="h-20 sm:h-16"})=>{const r=k(),[l,d]=c.useState(!1),{instructions:i,creation_date:m,description:g,width:j,height:f,name:x,short_name:w,resources:p,links:h,thumbnail:T,start_url:ae,desktop:U,mobile:O}=n;return e.jsxs("div",{onClick:()=>{r("/projects/"+(t?"focus/":"")+a)},role:"button",className:"animate-fade-in group flex max-w-full gap-2",onMouseLeave:()=>{d(!1)},onMouseEnter:()=>{d(!0)},children:[e.jsxs(A,{tooltipWrapperClass:"pointer-events-none",placement:"left",tip:e.jsx(G,{project:n,url:s}),className:"relative flex shrink",children:[e.jsx(R,{src:new URL(T,window.location.origin+s+"/").href,className:u("w-32 sm:w-24",o),style:b,loading:"lazy"}),e.jsx("div",{className:"from-neutral2/60 absolute inset-0 bg-gradient-to-t to-transparent "}),e.jsxs("div",{className:"absolute bottom-1 flex h-[30%] w-full justify-end gap-3",children:[e.jsx(C,{device:"desktop",compatible:U}),e.jsx(C,{device:"mobile",compatible:O})]})]}),e.jsxs("div",{className:"flex min-w-0 flex-col p-1 text-base transition-all sm:text-sm",children:[e.jsx("div",{className:"min-w-0 overflow-hidden",style:{...l?{textShadow:"0px 0px 10px white"}:{}},children:e.jsx("span",{className:"min-w-0 max-w-full",children:w})}),e.jsx("div",{className:"text-contrast2 text-sm",children:m})]})]})},$=({className:s,src:n,placeholder:a=Y,title:t,withModal:o=!0,imageClassName:r,containerClassName:l,...d})=>{const[i,m]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:u("shrink-0 overflow-hidden",o&&"cursor-zoom-in",s,l),role:"img",onClick:()=>m(!0),children:e.jsx(S,{className:u(s,"h-full w-full",r),...d,src:n,placeholder:a})}),o&&e.jsx(F,{open:i,title:t,close:()=>m(!1),closableOnOverlayClick:!0,children:e.jsx("div",{className:"w-full sm:min-h-[300px]",children:e.jsx(S,{preview:!0,...d,src:n,className:s,placeholder:a})})})]})},S=({preview:s=!1,placeholder:n,className:a,src:t,...o})=>{const[r,l]=c.useState(!1);return(t==null?void 0:t.split(".").pop())==="mp4"?e.jsx("video",{className:u("object-cover opacity-0 transition-none",s?"h-full w-full rounded-2xl object-contain":a,r&&"opacity-100"),onCanPlay:i=>{l(!0)},controls:!0,autoPlay:!0,muted:!0,loop:!0,children:e.jsx("source",{src:t,type:"video/mp4"})}):e.jsx("img",{className:u("object-cover opacity-0 transition-none",s?"h-full w-full rounded-2xl object-contain":a,r&&"opacity-100"),alt:"placeholder",src:String(t),onLoad:i=>{l(!0)},...o})},ee=({resources:s,projectUrl:n})=>{const a=B(),[t,o]=c.useState(a),r=c.useRef(null);if(c.useEffect(()=>{if(!r.current)return;const i=r.current.getBoundingClientRect();o(i.width)},[a]),s.length===0)return e.jsx(e.Fragment,{});const[l,d]=Q(s.length,{step:250,availableWidth:t});return e.jsxs("div",{ref:r,children:[e.jsx("h2",{className:" text-contrast2",children:"Resources"}),e.jsx("hr",{}),e.jsx("div",{className:"flex flex-col gap-4",children:new Array(d).fill(0).map((i,m)=>e.jsx("div",{className:"flex w-full justify-between gap-4",children:new Array(l).fill(0).map((g,j)=>{const f=s[m*l+j];if(!f)return e.jsx("div",{className:"aspect-square flex-1"},m*l+j);const x=f.split("/").pop();return e.jsxs("div",{className:"bg-neutral border-contrast2 relative flex aspect-square flex-1 flex-col overflow-hidden rounded border",children:[e.jsx("div",{className:"flex grow items-center",children:e.jsx($,{src:new URL(f,window.location.origin+n+"/").href,className:"relative h-full w-full flex-1 rounded-lg object-contain",title:x})}),e.jsx("div",{className:"bg-neutral2 overflow-hidden text-ellipsis whitespace-nowrap p-1 px-2 text-sm",children:x})]},m*l+j)})},`row-${m}`))})]})},se=c.lazy(()=>_(()=>import("./ProjectEditor-os9WdCEc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),te=I,ne=1450,le=()=>{const{id:s}=L(),n=I.find(p=>String(p.id)===String(s));V((n==null?void 0:n.metadata.name)||"Not found");const a=z();if(!n)return e.jsx("div",{});const{instructions:t,creation_date:o,description:r,width:l,height:d,name:i,short_name:m,resources:g,links:j,thumbnail:f,start_url:x}=n.metadata,w=window.location.pathname.split("/").includes("focus");return e.jsx("div",{className:u("-m-3 mt-0 flex grow justify-center"),children:e.jsxs("div",{className:u("markdown flex grow overflow-y-auto","text-contrast relative","lg:flex-row lg:justify-center","flex-col justify-start"),style:{maxWidth:ne},children:[e.jsxs("div",{className:"bg-neutral2 top-full m-6 flex h-fit grow flex-col items-center gap-6",style:N,children:[i&&e.jsxs("div",{className:"border-contrast2 -m-5 mb-0 flex w-full flex-col justify-between border-b pb-2 text-center sm:flex-row sm:items-end sm:text-left",children:[e.jsx("h2",{className:"text-contrast !mb-0 shrink",children:i}),e.jsx("span",{className:"text-contrast2 !mb-0 flex w-full justify-end sm:w-fit",children:o})]}),e.jsx(Z,{src:new URL(x,window.location.origin+n.url+"/").href,project:n}),a==="development"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c.Suspense,{children:e.jsx(se,{project:n})}),e.jsx(v,{onClick:async()=>{const p=q+"/project/code/"+n.id,h=await fetch(p);console.log({openCodeRequestRes:h})},children:"OPEN VSCODE"})]}),e.jsxs("div",{className:"flex w-full flex-col gap-4",style:{maxWidth:Number(l)>800?l:"800px"},children:[t&&e.jsxs("div",{children:[e.jsx("h2",{className:" text-contrast2",children:"Instructions"}),e.jsx("hr",{}),e.jsx("div",{className:"px-0 sm:px-4",children:t&&e.jsx("div",{dangerouslySetInnerHTML:{__html:E.makeHtml(t)}})})]}),r&&e.jsxs("div",{children:[e.jsx("h2",{className:" text-contrast2",children:"Description"}),e.jsx("hr",{}),e.jsx("div",{className:"px-0 sm:px-4",children:r&&e.jsx("div",{className:"markdown",dangerouslySetInnerHTML:{__html:E.makeHtml(r)}})})]}),e.jsx(D,{links:j}),e.jsx(ee,{resources:g,projectUrl:n.url}),e.jsx("div",{className:"fixed top-0"})]})]}),e.jsxs("div",{className:u("bg-neutral2 m-6 flex h-fit shrink-0 flex-wrap gap-6","relative items-stretch lg:w-[300px]"),style:{...N},children:[e.jsx("img",{className:"absolute left-0 top-0 hidden h-12 -translate-x-[170%] md:block",alt:"decoration",src:y}),e.jsx("img",{className:"absolute left-0 top-[400px] hidden h-12 -translate-x-[170%] md:block",alt:"decoration",src:y}),e.jsxs("div",{className:"relative -m-4 flex shrink grow flex-col items-stretch gap-2",children:[e.jsx("div",{className:"bg-neutral pointer-events-none mb-1",children:e.jsx(M,{...n},n.id)}),e.jsx("hr",{className:"opacity-60"}),te.filter(p=>p.id!==Number(s)).reverse().map(p=>e.jsx(re,{project:p,isFocus:w},p.id))]})]})]},n.id)})},re=({project:s,isFocus:n})=>{const a=c.useRef(null),t=H(a,{threshold:0,root:null,rootMargin:"0px"}),o=!!(t!=null&&t.isIntersecting),r="h-20 sm:h-16";return e.jsx("div",{className:r,ref:a,children:o&&e.jsx(M,{...s,isFocus:n,heightClass:r},s.id)})},he=le;export{le as Project,he as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ProjectEditor-os9WdCEc.js","assets/index-dlmnP2Fs.js","assets/index-tkVA6gmv.css","assets/Basic-J2Bd3X-J.js","assets/Basic-viaTiaym.js","assets/ResourceEditor-KfLhM-Yf.js","assets/markdownConverter-cgldB2XP.js","assets/constants-pJ9mU_zC.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}