import{b as D,r as h,j as e,t as f,c as S,I,f as R,g as N}from"./index-vHZ85OFU.js";import{u as F,H as M}from"./HeaderPage-JEY88WAU.js";import{T as w,a as P,P as O,A as b,u as L,p as Q,b as Y}from"./prepareGrid-NfEMo-Lr.js";import{m as z,u as H}from"./useInViewport-eQ6HFsub.js";import{B as V}from"./Basic-D8qeXq7d.js";import{B as C}from"./Basic-0BpZzByx.js";const G=[{unit:"year",ms:31536e6},{unit:"month",ms:2628e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],K=new Intl.RelativeTimeFormat("en",{numeric:"auto"});function W(t,s=new Date){if(!t)return"";const o=t.getTime()-s.getTime();return Z(o)}function Z(t){for(const{unit:s,ms:o}of G)if(Math.abs(t)>=o||s==="second")return K.format(Math.round(t/o),s);return""}const q=({url:t,metadata:s,id:o,className:n})=>{const l=D(),[A,i]=h.useState(!1),m=!0,{instructions:j,creation_date:c,description:d,width:p,height:B,name:x,short_name:y,resources:k,links:a,thumbnail:r,start_url:v,mobile:T,desktop:U}=s;return e.jsxs("div",{className:f("animate-fade-in flex flex-col",n),children:[e.jsxs("div",{onClick:()=>{l("/projects/"+o)},role:"button",className:f("group flex max-w-full flex-col p-1",n),onMouseLeave:()=>{i(!1)},onMouseEnter:()=>{i(!0)},children:[e.jsx(w,{tooltipWrapperClass:"pointer-events-none",tip:e.jsx(P,{project:s}),className:"relative flex aspect-[16/9] grow",children:e.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:S,children:[e.jsx(O,{isLoaded:m,className:"sm:hidden"}),e.jsx(I,{src:new URL(r,window.location.origin+t+"/").href,className:f("absolute inset-0 opacity-100 transition-all duration-200",A&&"scale-105"),loading:"lazy"}),e.jsx("div",{className:"from-neutral2/60 absolute inset-0 bg-gradient-to-t via-transparent "}),e.jsxs("div",{className:"absolute bottom-1 right-1 flex h-[20%] w-full justify-end gap-3",children:[e.jsx(b,{device:"desktop",compatible:U}),e.jsx(b,{device:"mobile",compatible:T})]})]})}),e.jsxs("div",{className:"flex min-w-0 flex-col p-1 transition-all",children:[e.jsx("div",{className:"min-w-0 overflow-hidden text-ellipsis text-lg",style:{...A?{textShadow:"0px 0px 10px white"}:{}},children:e.jsx("span",{className:"min-w-0 max-w-full whitespace-nowrap",children:y})}),e.jsxs("div",{className:"text-contrast2 text-sm sm:text-base",children:[c,e.jsxs("span",{className:"hidden sm:inline",children:[" ","- ",W(new Date(c))]})]})]})]}),e.jsx("div",{className:"markdown line-clamp-3 px-2 sm:hidden",dangerouslySetInnerHTML:{__html:z.makeHtml(d)}})]})},J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVR4nK2UsRHDIAxFKdW5ce1znQ1SpU5DRsgUueyQDagzCoM5x13EybKMJZninxt4T8KgAOMUeOL9uUgBYe1RdsEwTqtEp2gDR+B8fdQMl9tGZBJQOELz97PKTEQWSRUgnIMzC5WoBLz6Fjy93uYuggWe/9+yVtuFSpAInHdxWpAY3PofqqBs0sCzRyB1oYFHjYBeU+xiD54915Q/tAIokSofHC+6OSoQSsFYhFbiHXaLVhKs4zoaJeqxC0IBeJQtiUsAhk7cAlB2ckoACslpATQk3QQgvKPuAirpfkSt/ADn0V24vLn7GAAAAABJRU5ErkJggg==",X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAmElEQVR4nGPgEJFjoCVmoKcF/6mMGTAs+HZtL1UwBy4LaO0DhqEfB4cXd1EFcwzbOGBAwygu4cAuR7YPsKZpDiT5maXlODEhC/BmHA4KfUBU7uQgNx+QkPz+k5UPkDGaof/RNFIUBygGcOCIZIpTEbZcyUHFfEB7H8wkYIGfZzxOTJQF2BRzUNMHBCxgoDgOsLmGmhZQDQMAbyYpGOqWRbYAAAAASUVORK5CYII=",_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAmklEQVR4nGPgEJFjoCVmoKcF/6mMGTAs+HZtL1UwBy4LaO0DhqEfB4cXd1EFcwzbOGDA4xsGAvIk+wBrmuZAkp9ZWo4TU8UCDhr7gIHiOMCW5Dio6QNCFsykNA6wKeag0AcoCtB88B9PkiU6DvB6eyaqb8iOA6LClUNE7r+fZzxOTCgO8GrgoFYqwmM4AzXyAbIryTackAVUwQAgix9gBqRkMAAAAABJRU5ErkJggg==",$=({className:t,children:s,...o})=>e.jsx("select",{className:f("w-full rounded-lg bg-neutral2 px-2 py-1 outline-0 focus-within:text-contrast text-contrast2 font-medium",t),...o,children:s});let g;const ee=t=>{g=t.reduce((s,{id:o,metadata:n})=>(s[o]=(n.name+n.description+n.instructions).toLowerCase().replace(/[^a-zA-Z0-9,;\-.!? ]/g,""),s),{})},te=(t,s,o,n)=>t.filter(({metadata:i})=>!!(i.desktop&&s||i.mobile&&o)).filter(({id:i})=>g?g[i].includes(n.toLowerCase()):!0),se={date:(t,s)=>t.metadata.creation_date>s.metadata.creation_date?1:-1,alphabetical:(t,s)=>t.metadata.name>s.metadata.name?1:-1,documentation:(t,s)=>g?g[t.id].length>g[s.id].length?1:-1:1},ne=(t,s,o)=>(t.sort(se[s]),o?t:t.reverse()),u={mobile:!0,desktop:!0,sortAscending:!1,sortType:"date",filter:""},oe=({projects:t,rawProjects:s,setProjects:o})=>{const[n,l]=R(),A=n.get("mobile"),i=n.get("desktop");n.get("filter");const m=n.get("sort-type"),j=n.get("ascending"),c=A?A==="yes":u.mobile,d=i?i==="yes":u.desktop,p=j?j==="yes":u.sortAscending,B=m||u.sortType,[x,y]=h.useState(u.filter);h.useEffect(()=>{g||ee(s)},[s]),h.useEffect(()=>{const a=te(s,d,c,x),r=ne(a,B,p);o(r)},[n,x]);const k=!x&&c&&d;return e.jsxs("div",{className:"flex flex-col w-full gap-4 -mt-4 -mb-2",children:[e.jsxs("div",{className:"flex items-center w-full gap-4",children:[e.jsxs("div",{className:"relative grow",children:[e.jsx(V,{className:"w-full pl-10 outline-none bg-neutral2",placeholder:"Search projects",defaultValue:x,onChange:a=>{y(a.currentTarget.value)},style:N}),e.jsx("div",{className:"absolute top-3 left-4",children:e.jsx("img",{src:J,className:"w-6 h-6",alt:"magnifying glass"})})]}),e.jsx(w,{tip:`${d?"Showing":"Hiding"} desktop compatible projects`,children:e.jsx(C,{className:f("aspect-square h-12 bg-neutral2",d&&"bg-neutral"),style:N,onClick:()=>{l(a=>{const r=d?"no":"yes";return!d===u.desktop?a.delete("desktop"):a.set("desktop",r),a})},children:e.jsx(b,{device:"desktop",noTip:!0})})}),e.jsx(w,{tip:`${c?"Showing":"Hiding"} mobile compatible projects`,children:e.jsx(C,{className:f("aspect-square h-12 bg-neutral2",c&&"bg-neutral"),style:N,onClick:()=>{l(a=>{const r=c?"no":"yes";return!c===u.mobile?a.delete("mobile"):a.set("mobile",r),a})},children:e.jsx(b,{device:"mobile",noTip:!0})})})]}),e.jsxs("div",{className:"flex items-center justify-between w-full text-sm text-contrast2",children:[e.jsx("div",{className:"text-sm",children:k?e.jsxs("div",{children:["Viewing all ",s.length," projects"]}):e.jsxs("div",{children:["Viewing ",t.length," project",t.length===1?"":"s"," out of ",s.length]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs($,{className:"p-0 w-fit text-end text-contrast",role:"button",tabIndex:0,defaultValue:"date",onChange:a=>{l(r=>{const v=a.currentTarget.value;return v===u.sortType?r.delete("sort-type"):r.set("sort-type",v),r})},children:[e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"alphabetical",children:"Alphabetical"}),e.jsx("option",{value:"documentation",children:"Documentation"})]}),e.jsx(w,{className:"w-6 h-6",offsets:[10,10],tip:`Sorting type: ${p?"Ascending":"Descending"}`,children:e.jsx("img",{src:p?X:_,alt:"sorting",className:"w-full h-full",role:"button",tabIndex:0,onClick:()=>l(a=>{const r=p?"no":"yes";return!p===u.sortAscending?a.delete("ascending"):a.set("ascending",r),a})})})]})]})]})},E=Y,ae=()=>{F("Projects");const[t,s]=h.useState(E),o=L(),[n,l]=Q(t.length,{clientWidth:o,breakPoint:700}),A=new Array(l).fill(0).map((i,m)=>new Array(n).fill(0).map((j,c)=>{const d=t[m*n+c];if(d)return d}));return e.jsxs(M,{header:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-contrast2 text-xl font-bold",children:"Projects"}),e.jsxs("div",{children:["A list of my web-based projects from most recent to oldest. Note that most of them won't support mobile controls"," "]})]}),children:[e.jsx(oe,{rawProjects:E,projects:t,setProjects:s}),A.map((i,m)=>e.jsx(ie,{projects:i},m))]})},ie=({projects:t})=>{const[s,o]=H();return e.jsx("div",{className:"flex w-full justify-between gap-4",ref:s,children:t.map((n,l)=>e.jsx("div",{className:"sm:aspect-[6/5] flex-1 w-full min-w-0",children:n&&o&&e.jsx(q,{...n,className:"sm:aspect-[6/5] overflow-hidden [&_img.object-contain]:opacity-80 [&_img.object-contain]:hover:opacity-100"},n.id)},(n==null?void 0:n.id)??"blank"+l))})},Ae=ae;export{ae as Projects,Ae as default};
