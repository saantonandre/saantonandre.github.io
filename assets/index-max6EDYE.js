import{u as M,a as C,b as I,r as o,j as e,t as m,c as N,I as L,B as O,d as V,_,e as b,m as y}from"./index-J-_t6QiY.js";import{T as w,u as B,P as F,a as G,A as R,p as J,b as U}from"./prepareGrid-g9l9vEED.js";import{B as v}from"./Basic-a1N0h_Sy.js";import{u as D}from"./HeaderPage-KY6LKBhv.js";import{m as k}from"./markdownConverter-4q_xslyv.js";import{s as Q}from"./constants-pJ9mU_zC.js";import{u as W,M as H}from"./useEnv-9rQJdXvQ.js";const z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAXpJREFUWIXNV7FuwjAQvVRIdGuRKsRUiYEP4HMYmRgzRfkGxMSYKWM+hw9g6Iq6AGOndDrruJztu5DGfRLSEY68Z/v5fAZIjEybWBVli/HusBf/p8nphaoo29ePT/ehRJYcCVGVVVG2ed3AdL50z36+v+C43Tzk+XJiMxH8USKnBBS+nJiISUhACBJhH7wM8pYn0Jkaah7f9FvA/cKX4+ELrjliqGmmfuGecEHIcByzt3fx+fV+U4mhIrKhyPuKMJmQk1/OJ7icTyaBHOptSF+MpGgu9M1itXa5mpkAUHqAkyMxriPunLxunAgAeTm4B9wS7A777LjddCqcD9TJ2oNHqowmD+DoJUIcAPdEDMkroUnAYrWGvG7AdxxzD5gEWGoB5ktxCNP5sjMAdSGybEOAcEGiZlTXgev95kQgkUQcI+cw9QNUhERsJQf4L4cRF4EY9TimIjAevSGRxDwjQtOUJq+EvbtiTVuuQfKLiQpJr2aUAOPRL6d/iV8xTTOgL0glMgAAAABJRU5ErkJggg==",q=({frameRef:s,isLoaded:t})=>{const i=M(),{id:l}=C(),c=I(),[r,n]=o.useState(!1);o.useEffect(()=>{s.current&&(s.current.onmouseenter=()=>n(!1))},[s]);const x=i.pathname.split("/").includes("focus");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:m("bg-neutral3 absolute bottom-0 w-full translate-y-[105%] p-4 transition-all",r&&"translate-y-0"),style:{...N,borderLeft:0,borderRight:0,borderBottom:0},children:e.jsxs("div",{className:"ml-20 flex gap-3",children:[e.jsx(w,{tip:"Launches the project's window in full screen",children:e.jsx(v,{onClick:()=>{var a;return(a=s.current)==null?void 0:a.requestFullscreen()},children:"Fullscreen"})}),e.jsx(w,{tip:"Enables/Disables some UI elements on page (warning: RELOADS THE PAGE)",children:x?e.jsx(v,{onClick:()=>c(i.pathname.replace("focus/"+l,String(l))),children:"Unfocus"}):e.jsx(v,{onClick:()=>c(i.pathname.replace(String(l),"focus/"+l)),children:"Focus mode"})})]})}),e.jsx("div",{className:m("absolute bottom-4 left-4 w-fit shrink-0 opacity-80",r&&"opacity-100"),onTouchStart:()=>n(a=>!a),onMouseEnter:()=>n(!0),role:"button",children:e.jsx(w,{controlled:!0,active:!1,tip:e.jsxs("div",{children:[e.jsx("span",{className:"sm:hidden",children:"Tap"}),e.jsx("span",{className:"hidden sm:inline",children:"Hover"})," here to show the configs"]}),children:e.jsx("img",{alt:"decoration",src:z})})})]})},K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAGCAMAAABkWjdgAAAAAXNSR0IArs4c6QAAABhQTFRFCBQeCBQeDyo/IDlP9ta9w6OKmXV3gWJxujx1CAAAAAh0Uk5TAP/////////VylQyAAAAR0lEQVQYlY1P0RIAIASzB+f//zikIj3Exs6NLsIJoq7LzMlscGqdCJ27a1a/QBEpQTy6p71RfW1/axgJZT/810zWDUH6zlcMrkwDIpsrL8kAAAAASUVORK5CYII=",Y=({project:s,src:t,className:i})=>{const[l,c]=o.useState(!1),r=o.useRef(null),n=o.useRef(null),{name:x,width:a,height:h}=s.metadata,g=680+Number(a),j=B(),f=j<g,[d,A]=o.useState(!1),p=new URL(s.metadata.thumbnail,window.location.origin+s.url+"/").href;return o.useEffect(()=>{var u;(u=n.current)!=null&&u.contentWindow},[n]),o.useEffect(()=>{c(!1)},[x]),o.useEffect(()=>{document.onfullscreenchange=()=>{A(!!document.fullscreenElement);const u=n.current;u&&(u.src=String(u.src))}},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{style:{...N,...f?{}:{height:h+"px",width:a+"px"}},ref:r,className:m("relative flex items-center justify-center overflow-hidden",f&&"aspect-square w-full",d&&"h-full w-full",i),children:[e.jsx("iframe",{src:t,title:x,width:d?"100%":a,height:d?"100%":h,className:m("bg-contrast",f&&!d&&"hidden"),onLoad:()=>c(!0),ref:n}),e.jsx(L,{src:p,className:m("h-full w-full rounded",(!f||d)&&"hidden")}),e.jsx("div",{className:m("bg-neutral3 pointer-events-none absolute inset-0 opacity-100 transition-all delay-500 duration-1000",l&&"opacity-0")}),(!f||d)&&e.jsx(q,{frameRef:n,isLoaded:l}),e.jsx(F,{isLoaded:l})]}),e.jsx("div",{className:"pointer-events-none absolute -bottom-1 left-0 right-0 z-0 flex justify-center ",children:e.jsx("img",{src:K,className:"h-4",alt:"decoration"})})]}),j<g&&e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(v,{className:"mx-2 inline",onClick:()=>{const u=r.current;u&&u.requestFullscreen()},children:"Launch (fullscreen)"}),e.jsx("small",{children:"The project window cannot fit in this resolution, but you can try to launch it anyway on fullscreen."})]})]})},E=({url:s,metadata:t,id:i,isFocus:l})=>{const c=I(),[r,n]=o.useState(!1),{instructions:x,creation_date:a,description:h,width:g,height:j,name:f,short_name:d,resources:A,links:p,thumbnail:u,start_url:ne,desktop:P,mobile:T}=t;return e.jsxs("div",{onClick:()=>c("/projects/"+(l?"focus/":"")+i),role:"button",className:"flex max-w-full gap-2 p-1 group",onMouseLeave:()=>{n(!1)},onMouseEnter:()=>{n(!0)},children:[e.jsxs(w,{tooltipWrapperClass:"pointer-events-none",placement:"left",tip:e.jsx(G,{project:t,url:s}),className:"relative flex shrink",children:[e.jsx(L,{src:new URL(u,window.location.origin+s+"/").href,className:"w-32 h-20 sm:h-16 sm:w-24",style:N,loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-neutral3/60 to-transparent "}),e.jsxs("div",{className:"absolute bottom-1 flex h-[30%] w-full justify-end gap-3",children:[e.jsx(R,{device:"desktop",compatible:P}),e.jsx(R,{device:"mobile",compatible:T})]})]}),e.jsxs("div",{className:"flex flex-col min-w-0 p-1 text-base transition-all sm:text-sm",children:[e.jsx("div",{className:"min-w-0 overflow-hidden",style:{...r?{textShadow:"0px 0px 10px white"}:{}},children:e.jsx("span",{className:"max-w-full min-w-0",children:d})}),e.jsx("div",{className:"text-sm text-contrast2",children:a})]})]})},X=({className:s,src:t,placeholder:i=V,title:l,withModal:c=!0,imageClassName:r,containerClassName:n,...x})=>{const[a,h]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:m("shrink-0 overflow-hidden",c&&"cursor-zoom-in",s,n),role:"img",onClick:()=>h(!0),children:e.jsx(S,{className:m(s,"h-full w-full",r),...x,src:t,placeholder:i})}),c&&e.jsx(O,{open:a,title:l,close:()=>h(!1),closableOnOverlayClick:!0,children:e.jsx("div",{className:"w-full sm:min-h-[300px]",children:e.jsx(S,{preview:!0,...x,src:t,className:s,placeholder:i})})})]})},S=({preview:s=!1,placeholder:t,className:i,src:l,...c})=>{const[r,n]=o.useState(!1);return(l==null?void 0:l.split(".").pop())==="mp4"?e.jsx("video",{className:m("object-cover opacity-0 transition-none",s?"h-full w-full rounded-2xl object-contain":i,r&&"opacity-100"),onCanPlay:a=>{n(!0)},controls:!0,autoPlay:!0,muted:!0,loop:!0,children:e.jsx("source",{src:l,type:"video/mp4"})}):e.jsx("img",{className:m("object-cover opacity-0 transition-none",s?"h-full w-full rounded-2xl object-contain":i,r&&"opacity-100"),alt:"placeholder",src:String(l),onLoad:a=>{n(!0)},...c})},Z=({resources:s,projectUrl:t})=>{const i=B(),[l,c]=o.useState(i),r=o.useRef(null);if(o.useEffect(()=>{if(!r.current)return;const a=r.current.getBoundingClientRect();c(a.width)},[i]),s.length===0)return e.jsx(e.Fragment,{});const[n,x]=J(s.length,{step:250,availableWidth:l});return e.jsxs("div",{ref:r,children:[e.jsx("h2",{className:" text-contrast2",children:"Resources"}),e.jsx("hr",{}),e.jsx("div",{className:"flex flex-col gap-4",children:new Array(x).fill(0).map((a,h)=>e.jsx("div",{className:"flex w-full justify-between gap-4",children:new Array(n).fill(0).map((g,j)=>{const f=s[h*n+j];if(!f)return e.jsx("div",{className:"aspect-square flex-1"},h*n+j);const d=f.split("/").pop();return e.jsxs("div",{className:"bg-neutral2 border-contrast2 relative flex aspect-square flex-1 flex-col overflow-hidden rounded border",children:[e.jsx("div",{className:"flex grow items-center",children:e.jsx(X,{src:new URL(f,window.location.origin+t+"/").href,className:"relative h-full w-full flex-1 rounded-lg object-contain",title:d})}),e.jsx("div",{className:"bg-neutral3 overflow-hidden text-ellipsis whitespace-nowrap p-1 px-2 text-sm",children:d})]},h*n+j)})},`row-${h}`))})]})},$=o.lazy(()=>_(()=>import("./ProjectEditor-yhnvWhDK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),ee=U,se=1450,te=()=>{const{id:s}=C(),t=U.find(p=>String(p.id)===String(s));D((t==null?void 0:t.metadata.short_name)||"Not found");const i=W();if(!t)return e.jsx("div",{});const{instructions:l,creation_date:c,description:r,width:n,height:x,name:a,short_name:h,resources:g,links:j,thumbnail:f,start_url:d}=t.metadata,A=window.location.pathname.split("/").includes("focus");return e.jsx("div",{className:m("-m-3 mt-0 flex grow justify-center"),children:e.jsxs("div",{className:m("markdown flex grow overflow-y-scroll","text-contrast relative","lg:flex-row lg:justify-center","flex-col justify-start"),style:{maxWidth:se},children:[e.jsxs("div",{className:"bg-neutral3 top-full m-6 flex h-fit grow flex-col items-center gap-6",style:b,children:[a&&e.jsxs("div",{className:"border-contrast2 -m-5 mb-0 flex w-full flex-col justify-between border-b pb-2 text-center sm:flex-row sm:items-end sm:text-left",children:[e.jsx("h2",{className:"text-contrast !mb-0 shrink",children:a}),e.jsx("span",{className:"text-contrast2 !mb-0 flex w-full justify-end sm:w-fit",children:c})]}),e.jsx(Y,{src:new URL(d,window.location.origin+t.url+"/").href,project:t}),i==="development"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o.Suspense,{children:e.jsx($,{project:t})}),e.jsx(v,{onClick:async()=>{const p=Q+"/project/code/"+t.id,u=await fetch(p);console.log({openCodeRequestRes:u})},children:"OPEN VSCODE"})]}),e.jsxs("div",{className:"flex w-full flex-col gap-4",style:{maxWidth:Number(n)>800?n:"800px"},children:[l&&e.jsxs("div",{children:[e.jsx("h2",{className:" text-contrast2",children:"Instructions"}),e.jsx("hr",{}),e.jsx("div",{className:"px-0 sm:px-4",children:l&&e.jsx("div",{dangerouslySetInnerHTML:{__html:k.makeHtml(l)}})})]}),r&&e.jsxs("div",{children:[e.jsx("h2",{className:" text-contrast2",children:"Description"}),e.jsx("hr",{}),e.jsx("div",{className:"px-0 sm:px-4",children:r&&e.jsx("div",{className:"markdown",dangerouslySetInnerHTML:{__html:k.makeHtml(r)}})})]}),e.jsx(H,{links:j}),e.jsx(Z,{resources:g,projectUrl:t.url}),e.jsx("div",{className:"fixed top-0"})]})]}),e.jsxs("div",{className:m("bg-neutral3 m-6 flex h-fit shrink-0 flex-wrap gap-6","relative items-stretch lg:w-[300px]"),style:{...b},children:[e.jsx("img",{className:"absolute left-0 top-0 hidden h-12 -translate-x-[170%] md:block",alt:"decoration",src:y}),e.jsx("img",{className:"absolute left-0 top-[400px] hidden h-12 -translate-x-[170%] md:block",alt:"decoration",src:y}),e.jsxs("div",{className:"relative -m-4 flex shrink grow flex-col items-stretch",children:[e.jsx("div",{className:"bg-neutral2 pointer-events-none mb-1",children:e.jsx(E,{...t},t.id)}),e.jsx("hr",{className:"opacity-60"}),ee.filter(p=>p.id!==Number(s)).reverse().map(p=>e.jsx(E,{...p,isFocus:A},p.id))]})]})]},t.id)})},ue=te;export{te as Project,ue as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ProjectEditor-yhnvWhDK.js","assets/index-J-_t6QiY.js","assets/index-MCV6r3T2.css","assets/Basic-a1N0h_Sy.js","assets/Basic-k8iyZsgx.js","assets/ResourceEditor-ICqR_vyZ.js","assets/markdownConverter-4q_xslyv.js","assets/constants-pJ9mU_zC.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}