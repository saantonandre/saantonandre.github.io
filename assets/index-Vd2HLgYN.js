import{u as O,a as S,b as C,r as c,j as e,t as u,c as N,I,B as V,d as F,_ as G,e as b,m as y}from"./index-T93KYzyz.js";import{T as w,u as L,P as J,a as _,A as R,p as W,b as B,c as D}from"./useIntersectionObserver-P8p8CwSK.js";import{B as A}from"./Basic-cbZVhIqH.js";import{u as Q}from"./HeaderPage-AkvmkmlE.js";import{m as k}from"./markdownConverter-miWThQ0k.js";import{s as H}from"./constants-pJ9mU_zC.js";import{u as z,M as q}from"./useEnv-uvgzMcdF.js";const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAXpJREFUWIXNV7FuwjAQvVRIdGuRKsRUiYEP4HMYmRgzRfkGxMSYKWM+hw9g6Iq6AGOndDrruJztu5DGfRLSEY68Z/v5fAZIjEybWBVli/HusBf/p8nphaoo29ePT/ehRJYcCVGVVVG2ed3AdL50z36+v+C43Tzk+XJiMxH8USKnBBS+nJiISUhACBJhH7wM8pYn0Jkaah7f9FvA/cKX4+ELrjliqGmmfuGecEHIcByzt3fx+fV+U4mhIrKhyPuKMJmQk1/OJ7icTyaBHOptSF+MpGgu9M1itXa5mpkAUHqAkyMxriPunLxunAgAeTm4B9wS7A777LjddCqcD9TJ2oNHqowmD+DoJUIcAPdEDMkroUnAYrWGvG7AdxxzD5gEWGoB5ktxCNP5sjMAdSGybEOAcEGiZlTXgev95kQgkUQcI+cw9QNUhERsJQf4L4cRF4EY9TimIjAevSGRxDwjQtOUJq+EvbtiTVuuQfKLiQpJr2aUAOPRL6d/iV8xTTOgL0glMgAAAABJRU5ErkJggg==",Y=({frameRef:s,isLoaded:n})=>{const a=O(),{id:t}=S(),o=C(),[r,l]=c.useState(!1);c.useEffect(()=>{s.current&&(s.current.onmouseenter=()=>l(!1))},[s]);const d=a.pathname.split("/").includes("focus");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:u("bg-neutral3 absolute bottom-0 w-full translate-y-[105%] p-4 transition-all",r&&"translate-y-0"),style:{...N,borderLeft:0,borderRight:0,borderBottom:0},children:e.jsxs("div",{className:"ml-20 flex gap-3",children:[e.jsx(w,{tip:"Launches the project's window in full screen",children:e.jsx(A,{onClick:()=>{var i;return(i=s.current)==null?void 0:i.requestFullscreen()},children:"Fullscreen"})}),e.jsx(w,{tip:"Enables/Disables some UI elements on page (warning: RELOADS THE PAGE)",children:d?e.jsx(A,{onClick:()=>o(a.pathname.replace("focus/"+t,String(t))),children:"Unfocus"}):e.jsx(A,{onClick:()=>o(a.pathname.replace(String(t),"focus/"+t)),children:"Focus mode"})})]})}),e.jsx("div",{className:u("absolute bottom-4 left-4 w-fit shrink-0 opacity-80",r&&"opacity-100"),onTouchStart:()=>l(i=>!i),onMouseEnter:()=>l(!0),role:"button",children:e.jsx(w,{controlled:!0,active:!1,tip:e.jsxs("div",{children:[e.jsx("span",{className:"sm:hidden",children:"Tap"}),e.jsx("span",{className:"hidden sm:inline",children:"Hover"})," here to show the configs"]}),children:e.jsx("img",{alt:"decoration",src:K})})})]})},X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAGCAMAAABkWjdgAAAAAXNSR0IArs4c6QAAABhQTFRFCBQeCBQeDyo/IDlP9ta9w6OKmXV3gWJxujx1CAAAAAh0Uk5TAP/////////VylQyAAAAR0lEQVQYlY1P0RIAIASzB+f//zikIj3Exs6NLsIJoq7LzMlscGqdCJ27a1a/QBEpQTy6p71RfW1/axgJZT/810zWDUH6zlcMrkwDIpsrL8kAAAAASUVORK5CYII=",Z=({project:s,src:n,className:a})=>{const[t,o]=c.useState(!1),r=c.useRef(null),l=c.useRef(null),{name:d,width:i,height:m}=s.metadata,g=680+Number(i),j=L(),f=j<g,[x,v]=c.useState(!1),p=new URL(s.metadata.thumbnail,window.location.origin+s.url+"/").href;return c.useEffect(()=>{var h;(h=l.current)!=null&&h.contentWindow},[l]),c.useEffect(()=>{o(!1)},[d]),c.useEffect(()=>{document.onfullscreenchange=()=>{v(!!document.fullscreenElement);const h=l.current;h&&(h.src=String(h.src))}},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{style:{...N,...f?{}:{height:m+"px",width:i+"px"}},ref:r,className:u("relative flex items-center justify-center overflow-hidden",f&&"aspect-square w-full",x&&"h-full w-full",a),children:[e.jsx("iframe",{src:n,title:d,width:x?"100%":i,height:x?"100%":m,className:u("bg-contrast",f&&!x&&"hidden"),onLoad:()=>o(!0),ref:l}),e.jsx(I,{src:p,className:u("h-full w-full rounded",(!f||x)&&"hidden")}),e.jsx("div",{className:u("bg-neutral3 pointer-events-none absolute inset-0 opacity-100 transition-all delay-500 duration-1000",t&&"opacity-0")}),(!f||x)&&e.jsx(Y,{frameRef:l,isLoaded:t}),e.jsx(J,{isLoaded:t})]}),e.jsx("div",{className:"pointer-events-none absolute -bottom-1 left-0 right-0 z-0 flex justify-center ",children:e.jsx("img",{src:X,className:"h-4",alt:"decoration"})})]}),j<g&&e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(A,{className:"mx-2 inline",onClick:()=>{const h=r.current;h&&h.requestFullscreen()},children:"Launch (fullscreen)"}),e.jsx("small",{children:"The project window cannot fit in this resolution, but you can try to launch it anyway on fullscreen."})]})]})},U=({url:s,metadata:n,id:a,isFocus:t,heightClass:o="h-20 sm:h-16"})=>{const r=C(),[l,d]=c.useState(!1),{instructions:i,creation_date:m,description:g,width:j,height:f,name:x,short_name:v,resources:p,links:h,thumbnail:P,start_url:ae,desktop:T,mobile:M}=n;return e.jsxs("div",{onClick:()=>{r("/projects/"+(t?"focus/":"")+a)},role:"button",className:"animate-fade-in group flex max-w-full gap-2",onMouseLeave:()=>{d(!1)},onMouseEnter:()=>{d(!0)},children:[e.jsxs(w,{tooltipWrapperClass:"pointer-events-none",placement:"left",tip:e.jsx(_,{project:n,url:s}),className:"relative flex shrink",children:[e.jsx(I,{src:new URL(P,window.location.origin+s+"/").href,className:u("w-32 sm:w-24",o),style:N,loading:"lazy"}),e.jsx("div",{className:"from-neutral3/60 absolute inset-0 bg-gradient-to-t to-transparent "}),e.jsxs("div",{className:"absolute bottom-1 flex h-[30%] w-full justify-end gap-3",children:[e.jsx(R,{device:"desktop",compatible:T}),e.jsx(R,{device:"mobile",compatible:M})]})]}),e.jsxs("div",{className:"flex min-w-0 flex-col p-1 text-base transition-all sm:text-sm",children:[e.jsx("div",{className:"min-w-0 overflow-hidden",style:{...l?{textShadow:"0px 0px 10px white"}:{}},children:e.jsx("span",{className:"min-w-0 max-w-full",children:v})}),e.jsx("div",{className:"text-contrast2 text-sm",children:m})]})]})},$=({className:s,src:n,placeholder:a=F,title:t,withModal:o=!0,imageClassName:r,containerClassName:l,...d})=>{const[i,m]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:u("shrink-0 overflow-hidden",o&&"cursor-zoom-in",s,l),role:"img",onClick:()=>m(!0),children:e.jsx(E,{className:u(s,"h-full w-full",r),...d,src:n,placeholder:a})}),o&&e.jsx(V,{open:i,title:t,close:()=>m(!1),closableOnOverlayClick:!0,children:e.jsx("div",{className:"w-full sm:min-h-[300px]",children:e.jsx(E,{preview:!0,...d,src:n,className:s,placeholder:a})})})]})},E=({preview:s=!1,placeholder:n,className:a,src:t,...o})=>{const[r,l]=c.useState(!1);return(t==null?void 0:t.split(".").pop())==="mp4"?e.jsx("video",{className:u("object-cover opacity-0 transition-none",s?"h-full w-full rounded-2xl object-contain":a,r&&"opacity-100"),onCanPlay:i=>{l(!0)},controls:!0,autoPlay:!0,muted:!0,loop:!0,children:e.jsx("source",{src:t,type:"video/mp4"})}):e.jsx("img",{className:u("object-cover opacity-0 transition-none",s?"h-full w-full rounded-2xl object-contain":a,r&&"opacity-100"),alt:"placeholder",src:String(t),onLoad:i=>{l(!0)},...o})},ee=({resources:s,projectUrl:n})=>{const a=L(),[t,o]=c.useState(a),r=c.useRef(null);if(c.useEffect(()=>{if(!r.current)return;const i=r.current.getBoundingClientRect();o(i.width)},[a]),s.length===0)return e.jsx(e.Fragment,{});const[l,d]=W(s.length,{step:250,availableWidth:t});return e.jsxs("div",{ref:r,children:[e.jsx("h2",{className:" text-contrast2",children:"Resources"}),e.jsx("hr",{}),e.jsx("div",{className:"flex flex-col gap-4",children:new Array(d).fill(0).map((i,m)=>e.jsx("div",{className:"flex w-full justify-between gap-4",children:new Array(l).fill(0).map((g,j)=>{const f=s[m*l+j];if(!f)return e.jsx("div",{className:"aspect-square flex-1"},m*l+j);const x=f.split("/").pop();return e.jsxs("div",{className:"bg-neutral2 border-contrast2 relative flex aspect-square flex-1 flex-col overflow-hidden rounded border",children:[e.jsx("div",{className:"flex grow items-center",children:e.jsx($,{src:new URL(f,window.location.origin+n+"/").href,className:"relative h-full w-full flex-1 rounded-lg object-contain",title:x})}),e.jsx("div",{className:"bg-neutral3 overflow-hidden text-ellipsis whitespace-nowrap p-1 px-2 text-sm",children:x})]},m*l+j)})},`row-${m}`))})]})},se=c.lazy(()=>G(()=>import("./ProjectEditor-m9eR6o0X.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),te=B,ne=1450,le=()=>{const{id:s}=S(),n=B.find(p=>String(p.id)===String(s));Q((n==null?void 0:n.metadata.name)||"Not found");const a=z();if(!n)return e.jsx("div",{});const{instructions:t,creation_date:o,description:r,width:l,height:d,name:i,short_name:m,resources:g,links:j,thumbnail:f,start_url:x}=n.metadata,v=window.location.pathname.split("/").includes("focus");return e.jsx("div",{className:u("-m-3 mt-0 flex grow justify-center"),children:e.jsxs("div",{className:u("markdown flex grow overflow-y-auto","text-contrast relative","lg:flex-row lg:justify-center","flex-col justify-start"),style:{maxWidth:ne},children:[e.jsxs("div",{className:"bg-neutral3 top-full m-6 flex h-fit grow flex-col items-center gap-6",style:b,children:[i&&e.jsxs("div",{className:"border-contrast2 -m-5 mb-0 flex w-full flex-col justify-between border-b pb-2 text-center sm:flex-row sm:items-end sm:text-left",children:[e.jsx("h2",{className:"text-contrast !mb-0 shrink",children:i}),e.jsx("span",{className:"text-contrast2 !mb-0 flex w-full justify-end sm:w-fit",children:o})]}),e.jsx(Z,{src:new URL(x,window.location.origin+n.url+"/").href,project:n}),a==="development"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c.Suspense,{children:e.jsx(se,{project:n})}),e.jsx(A,{onClick:async()=>{const p=H+"/project/code/"+n.id,h=await fetch(p);console.log({openCodeRequestRes:h})},children:"OPEN VSCODE"})]}),e.jsxs("div",{className:"flex w-full flex-col gap-4",style:{maxWidth:Number(l)>800?l:"800px"},children:[t&&e.jsxs("div",{children:[e.jsx("h2",{className:" text-contrast2",children:"Instructions"}),e.jsx("hr",{}),e.jsx("div",{className:"px-0 sm:px-4",children:t&&e.jsx("div",{dangerouslySetInnerHTML:{__html:k.makeHtml(t)}})})]}),r&&e.jsxs("div",{children:[e.jsx("h2",{className:" text-contrast2",children:"Description"}),e.jsx("hr",{}),e.jsx("div",{className:"px-0 sm:px-4",children:r&&e.jsx("div",{className:"markdown",dangerouslySetInnerHTML:{__html:k.makeHtml(r)}})})]}),e.jsx(q,{links:j}),e.jsx(ee,{resources:g,projectUrl:n.url}),e.jsx("div",{className:"fixed top-0"})]})]}),e.jsxs("div",{className:u("bg-neutral3 m-6 flex h-fit shrink-0 flex-wrap gap-6","relative items-stretch lg:w-[300px]"),style:{...b},children:[e.jsx("img",{className:"absolute left-0 top-0 hidden h-12 -translate-x-[170%] md:block",alt:"decoration",src:y}),e.jsx("img",{className:"absolute left-0 top-[400px] hidden h-12 -translate-x-[170%] md:block",alt:"decoration",src:y}),e.jsxs("div",{className:"relative -m-4 flex shrink grow flex-col items-stretch gap-2",children:[e.jsx("div",{className:"bg-neutral2 pointer-events-none mb-1",children:e.jsx(U,{...n},n.id)}),e.jsx("hr",{className:"opacity-60"}),te.filter(p=>p.id!==Number(s)).reverse().map(p=>e.jsx(re,{project:p,isFocus:v},p.id))]})]})]},n.id)})},re=({project:s,isFocus:n})=>{const a=c.useRef(null),t=D(a,{threshold:0,root:null,rootMargin:"0px"}),o=!!(t!=null&&t.isIntersecting),r="h-20 sm:h-16";return e.jsx("div",{className:r,ref:a,children:o&&e.jsx(U,{...s,isFocus:n,heightClass:r},s.id)})},he=le;export{le as Project,he as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ProjectEditor-m9eR6o0X.js","assets/index-T93KYzyz.js","assets/index-Ba1pWiDd.css","assets/Basic-cbZVhIqH.js","assets/Basic-zQgS02VH.js","assets/ResourceEditor-BM_NOblo.js","assets/markdownConverter-miWThQ0k.js","assets/constants-pJ9mU_zC.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}